(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const T of document.querySelectorAll('link[rel="modulepreload"]'))d(T);new MutationObserver(T=>{for(const D of T)if(D.type==="childList")for(const U of D.addedNodes)U.tagName==="LINK"&&U.rel==="modulepreload"&&d(U)}).observe(document,{childList:!0,subtree:!0});function i(T){const D={};return T.integrity&&(D.integrity=T.integrity),T.referrerPolicy&&(D.referrerPolicy=T.referrerPolicy),T.crossOrigin==="use-credentials"?D.credentials="include":T.crossOrigin==="anonymous"?D.credentials="omit":D.credentials="same-origin",D}function d(T){if(T.ep)return;T.ep=!0;const D=i(T);fetch(T.href,D)}})();function F2(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var fp={exports:{}},xu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0;function B2(){if(J0)return xu;J0=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(d,T,D){var U=null;if(D!==void 0&&(U=""+D),T.key!==void 0&&(U=""+T.key),"key"in T){D={};for(var t in T)t!=="key"&&(D[t]=T[t])}else D=T;return T=D.ref,{$$typeof:s,type:d,key:U,ref:T!==void 0?T:null,props:D}}return xu.Fragment=r,xu.jsx=i,xu.jsxs=i,xu}var $0;function z2(){return $0||($0=1,fp.exports=B2()),fp.exports}var $t=z2(),dp={exports:{}},tr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eb;function V2(){if(eb)return tr;eb=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),U=Symbol.for("react.context"),t=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),M=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;function h(W){return W===null||typeof W!="object"?null:(W=f&&W[f]||W["@@iterator"],typeof W=="function"?W:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,c={};function l(W,Q,J){this.props=W,this.context=Q,this.refs=c,this.updater=J||b}l.prototype.isReactComponent={},l.prototype.setState=function(W,Q){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,Q,"setState")},l.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function o(){}o.prototype=l.prototype;function u(W,Q,J){this.props=W,this.context=Q,this.refs=c,this.updater=J||b}var m=u.prototype=new o;m.constructor=u,w(m,l.prototype),m.isPureReactComponent=!0;var g=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},v=Object.prototype.hasOwnProperty;function x(W,Q,J,ee,te,se){return J=se.ref,{$$typeof:s,type:W,key:Q,ref:J!==void 0?J:null,props:se}}function E(W,Q){return x(W.type,Q,void 0,void 0,void 0,W.props)}function j(W){return typeof W=="object"&&W!==null&&W.$$typeof===s}function O(W){var Q={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(J){return Q[J]})}var P=/\/+/g;function L(W,Q){return typeof W=="object"&&W!==null&&W.key!=null?O(""+W.key):Q.toString(36)}function z(){}function N(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(z,z):(W.status="pending",W.then(function(Q){W.status==="pending"&&(W.status="fulfilled",W.value=Q)},function(Q){W.status==="pending"&&(W.status="rejected",W.reason=Q)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function V(W,Q,J,ee,te){var se=typeof W;(se==="undefined"||se==="boolean")&&(W=null);var ce=!1;if(W===null)ce=!0;else switch(se){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(W.$$typeof){case s:case r:ce=!0;break;case p:return ce=W._init,V(ce(W._payload),Q,J,ee,te)}}if(ce)return te=te(W),ce=ee===""?"."+L(W,0):ee,g(te)?(J="",ce!=null&&(J=ce.replace(P,"$&/")+"/"),V(te,Q,J,"",function(ie){return ie})):te!=null&&(j(te)&&(te=E(te,J+(te.key==null||W&&W.key===te.key?"":(""+te.key).replace(P,"$&/")+"/")+ce)),Q.push(te)),1;ce=0;var q=ee===""?".":ee+":";if(g(W))for(var Z=0;Z<W.length;Z++)ee=W[Z],se=q+L(ee,Z),ce+=V(ee,Q,J,se,te);else if(Z=h(W),typeof Z=="function")for(W=Z.call(W),Z=0;!(ee=W.next()).done;)ee=ee.value,se=q+L(ee,Z++),ce+=V(ee,Q,J,se,te);else if(se==="object"){if(typeof W.then=="function")return V(N(W),Q,J,ee,te);throw Q=String(W),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return ce}function k(W,Q,J){if(W==null)return W;var ee=[],te=0;return V(W,ee,"","",function(se){return Q.call(J,se,te++)}),ee}function H(W){if(W._status===-1){var Q=W._result;Q=Q(),Q.then(function(J){(W._status===0||W._status===-1)&&(W._status=1,W._result=J)},function(J){(W._status===0||W._status===-1)&&(W._status=2,W._result=J)}),W._status===-1&&(W._status=0,W._result=Q)}if(W._status===1)return W._result.default;throw W._result}var G=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)};function F(){}return tr.Children={map:k,forEach:function(W,Q,J){k(W,function(){Q.apply(this,arguments)},J)},count:function(W){var Q=0;return k(W,function(){Q++}),Q},toArray:function(W){return k(W,function(Q){return Q})||[]},only:function(W){if(!j(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},tr.Component=l,tr.Fragment=i,tr.Profiler=T,tr.PureComponent=u,tr.StrictMode=d,tr.Suspense=R,tr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,tr.__COMPILER_RUNTIME={__proto__:null,c:function(W){return _.H.useMemoCache(W)}},tr.cache=function(W){return function(){return W.apply(null,arguments)}},tr.cloneElement=function(W,Q,J){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var ee=w({},W.props),te=W.key,se=void 0;if(Q!=null)for(ce in Q.ref!==void 0&&(se=void 0),Q.key!==void 0&&(te=""+Q.key),Q)!v.call(Q,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&Q.ref===void 0||(ee[ce]=Q[ce]);var ce=arguments.length-2;if(ce===1)ee.children=J;else if(1<ce){for(var q=Array(ce),Z=0;Z<ce;Z++)q[Z]=arguments[Z+2];ee.children=q}return x(W.type,te,void 0,void 0,se,ee)},tr.createContext=function(W){return W={$$typeof:U,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:D,_context:W},W},tr.createElement=function(W,Q,J){var ee,te={},se=null;if(Q!=null)for(ee in Q.key!==void 0&&(se=""+Q.key),Q)v.call(Q,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(te[ee]=Q[ee]);var ce=arguments.length-2;if(ce===1)te.children=J;else if(1<ce){for(var q=Array(ce),Z=0;Z<ce;Z++)q[Z]=arguments[Z+2];te.children=q}if(W&&W.defaultProps)for(ee in ce=W.defaultProps,ce)te[ee]===void 0&&(te[ee]=ce[ee]);return x(W,se,void 0,void 0,null,te)},tr.createRef=function(){return{current:null}},tr.forwardRef=function(W){return{$$typeof:t,render:W}},tr.isValidElement=j,tr.lazy=function(W){return{$$typeof:p,_payload:{_status:-1,_result:W},_init:H}},tr.memo=function(W,Q){return{$$typeof:M,type:W,compare:Q===void 0?null:Q}},tr.startTransition=function(W){var Q=_.T,J={};_.T=J;try{var ee=W(),te=_.S;te!==null&&te(J,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(F,G)}catch(se){G(se)}finally{_.T=Q}},tr.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},tr.use=function(W){return _.H.use(W)},tr.useActionState=function(W,Q,J){return _.H.useActionState(W,Q,J)},tr.useCallback=function(W,Q){return _.H.useCallback(W,Q)},tr.useContext=function(W){return _.H.useContext(W)},tr.useDebugValue=function(){},tr.useDeferredValue=function(W,Q){return _.H.useDeferredValue(W,Q)},tr.useEffect=function(W,Q,J){var ee=_.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(W,Q)},tr.useId=function(){return _.H.useId()},tr.useImperativeHandle=function(W,Q,J){return _.H.useImperativeHandle(W,Q,J)},tr.useInsertionEffect=function(W,Q){return _.H.useInsertionEffect(W,Q)},tr.useLayoutEffect=function(W,Q){return _.H.useLayoutEffect(W,Q)},tr.useMemo=function(W,Q){return _.H.useMemo(W,Q)},tr.useOptimistic=function(W,Q){return _.H.useOptimistic(W,Q)},tr.useReducer=function(W,Q,J){return _.H.useReducer(W,Q,J)},tr.useRef=function(W){return _.H.useRef(W)},tr.useState=function(W){return _.H.useState(W)},tr.useSyncExternalStore=function(W,Q,J){return _.H.useSyncExternalStore(W,Q,J)},tr.useTransition=function(){return _.H.useTransition()},tr.version="19.1.0",tr}var tb;function pd(){return tb||(tb=1,dp.exports=V2()),dp.exports}var kt=pd(),hp={exports:{}},Su={},pp={exports:{}},mp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb;function G2(){return rb||(rb=1,function(s){function r(k,H){var G=k.length;k.push(H);e:for(;0<G;){var F=G-1>>>1,W=k[F];if(0<T(W,H))k[F]=H,k[G]=W,G=F;else break e}}function i(k){return k.length===0?null:k[0]}function d(k){if(k.length===0)return null;var H=k[0],G=k.pop();if(G!==H){k[0]=G;e:for(var F=0,W=k.length,Q=W>>>1;F<Q;){var J=2*(F+1)-1,ee=k[J],te=J+1,se=k[te];if(0>T(ee,G))te<W&&0>T(se,ee)?(k[F]=se,k[te]=G,F=te):(k[F]=ee,k[J]=G,F=J);else if(te<W&&0>T(se,G))k[F]=se,k[te]=G,F=te;else break e}}return H}function T(k,H){var G=k.sortIndex-H.sortIndex;return G!==0?G:k.id-H.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var D=performance;s.unstable_now=function(){return D.now()}}else{var U=Date,t=U.now();s.unstable_now=function(){return U.now()-t}}var R=[],M=[],p=1,f=null,h=3,b=!1,w=!1,c=!1,l=!1,o=typeof setTimeout=="function"?setTimeout:null,u=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;function g(k){for(var H=i(M);H!==null;){if(H.callback===null)d(M);else if(H.startTime<=k)d(M),H.sortIndex=H.expirationTime,r(R,H);else break;H=i(M)}}function _(k){if(c=!1,g(k),!w)if(i(R)!==null)w=!0,v||(v=!0,L());else{var H=i(M);H!==null&&V(_,H.startTime-k)}}var v=!1,x=-1,E=5,j=-1;function O(){return l?!0:!(s.unstable_now()-j<E)}function P(){if(l=!1,v){var k=s.unstable_now();j=k;var H=!0;try{e:{w=!1,c&&(c=!1,u(x),x=-1),b=!0;var G=h;try{t:{for(g(k),f=i(R);f!==null&&!(f.expirationTime>k&&O());){var F=f.callback;if(typeof F=="function"){f.callback=null,h=f.priorityLevel;var W=F(f.expirationTime<=k);if(k=s.unstable_now(),typeof W=="function"){f.callback=W,g(k),H=!0;break t}f===i(R)&&d(R),g(k)}else d(R);f=i(R)}if(f!==null)H=!0;else{var Q=i(M);Q!==null&&V(_,Q.startTime-k),H=!1}}break e}finally{f=null,h=G,b=!1}H=void 0}}finally{H?L():v=!1}}}var L;if(typeof m=="function")L=function(){m(P)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,N=z.port2;z.port1.onmessage=P,L=function(){N.postMessage(null)}}else L=function(){o(P,0)};function V(k,H){x=o(function(){k(s.unstable_now())},H)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(k){k.callback=null},s.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<k?Math.floor(1e3/k):5},s.unstable_getCurrentPriorityLevel=function(){return h},s.unstable_next=function(k){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var G=h;h=H;try{return k()}finally{h=G}},s.unstable_requestPaint=function(){l=!0},s.unstable_runWithPriority=function(k,H){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var G=h;h=k;try{return H()}finally{h=G}},s.unstable_scheduleCallback=function(k,H,G){var F=s.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?F+G:F):G=F,k){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=G+W,k={id:p++,callback:H,priorityLevel:k,startTime:G,expirationTime:W,sortIndex:-1},G>F?(k.sortIndex=G,r(M,k),i(R)===null&&k===i(M)&&(c?(u(x),x=-1):c=!0,V(_,G-F))):(k.sortIndex=W,r(R,k),w||b||(w=!0,v||(v=!0,L()))),k},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(k){var H=h;return function(){var G=h;h=H;try{return k.apply(this,arguments)}finally{h=G}}}}(mp)),mp}var nb;function H2(){return nb||(nb=1,pp.exports=G2()),pp.exports}var yp={exports:{}},Pn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ib;function W2(){if(ib)return Pn;ib=1;var s=pd();function r(R){var M="https://react.dev/errors/"+R;if(1<arguments.length){M+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)M+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+R+"; visit "+M+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var d={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},T=Symbol.for("react.portal");function D(R,M,p){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:f==null?null:""+f,children:R,containerInfo:M,implementation:p}}var U=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function t(R,M){if(R==="font")return"";if(typeof M=="string")return M==="use-credentials"?M:""}return Pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=d,Pn.createPortal=function(R,M){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!M||M.nodeType!==1&&M.nodeType!==9&&M.nodeType!==11)throw Error(r(299));return D(R,M,null,p)},Pn.flushSync=function(R){var M=U.T,p=d.p;try{if(U.T=null,d.p=2,R)return R()}finally{U.T=M,d.p=p,d.d.f()}},Pn.preconnect=function(R,M){typeof R=="string"&&(M?(M=M.crossOrigin,M=typeof M=="string"?M==="use-credentials"?M:"":void 0):M=null,d.d.C(R,M))},Pn.prefetchDNS=function(R){typeof R=="string"&&d.d.D(R)},Pn.preinit=function(R,M){if(typeof R=="string"&&M&&typeof M.as=="string"){var p=M.as,f=t(p,M.crossOrigin),h=typeof M.integrity=="string"?M.integrity:void 0,b=typeof M.fetchPriority=="string"?M.fetchPriority:void 0;p==="style"?d.d.S(R,typeof M.precedence=="string"?M.precedence:void 0,{crossOrigin:f,integrity:h,fetchPriority:b}):p==="script"&&d.d.X(R,{crossOrigin:f,integrity:h,fetchPriority:b,nonce:typeof M.nonce=="string"?M.nonce:void 0})}},Pn.preinitModule=function(R,M){if(typeof R=="string")if(typeof M=="object"&&M!==null){if(M.as==null||M.as==="script"){var p=t(M.as,M.crossOrigin);d.d.M(R,{crossOrigin:p,integrity:typeof M.integrity=="string"?M.integrity:void 0,nonce:typeof M.nonce=="string"?M.nonce:void 0})}}else M==null&&d.d.M(R)},Pn.preload=function(R,M){if(typeof R=="string"&&typeof M=="object"&&M!==null&&typeof M.as=="string"){var p=M.as,f=t(p,M.crossOrigin);d.d.L(R,p,{crossOrigin:f,integrity:typeof M.integrity=="string"?M.integrity:void 0,nonce:typeof M.nonce=="string"?M.nonce:void 0,type:typeof M.type=="string"?M.type:void 0,fetchPriority:typeof M.fetchPriority=="string"?M.fetchPriority:void 0,referrerPolicy:typeof M.referrerPolicy=="string"?M.referrerPolicy:void 0,imageSrcSet:typeof M.imageSrcSet=="string"?M.imageSrcSet:void 0,imageSizes:typeof M.imageSizes=="string"?M.imageSizes:void 0,media:typeof M.media=="string"?M.media:void 0})}},Pn.preloadModule=function(R,M){if(typeof R=="string")if(M){var p=t(M.as,M.crossOrigin);d.d.m(R,{as:typeof M.as=="string"&&M.as!=="script"?M.as:void 0,crossOrigin:p,integrity:typeof M.integrity=="string"?M.integrity:void 0})}else d.d.m(R)},Pn.requestFormReset=function(R){d.d.r(R)},Pn.unstable_batchedUpdates=function(R,M){return R(M)},Pn.useFormState=function(R,M,p){return U.H.useFormState(R,M,p)},Pn.useFormStatus=function(){return U.H.useHostTransitionStatus()},Pn.version="19.1.0",Pn}var sb;function X2(){if(sb)return yp.exports;sb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),yp.exports=W2(),yp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ab;function q2(){if(ab)return Su;ab=1;var s=H2(),r=pd(),i=X2();function d(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)a+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function T(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function D(n){var a=n,y=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(y=a.return),n=a.return;while(n)}return a.tag===3?y:null}function U(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function t(n){if(D(n)!==n)throw Error(d(188))}function R(n){var a=n.alternate;if(!a){if(a=D(n),a===null)throw Error(d(188));return a!==n?null:n}for(var y=n,A=a;;){var B=y.return;if(B===null)break;var Y=B.alternate;if(Y===null){if(A=B.return,A!==null){y=A;continue}break}if(B.child===Y.child){for(Y=B.child;Y;){if(Y===y)return t(B),n;if(Y===A)return t(B),a;Y=Y.sibling}throw Error(d(188))}if(y.return!==A.return)y=B,A=Y;else{for(var de=!1,xe=B.child;xe;){if(xe===y){de=!0,y=B,A=Y;break}if(xe===A){de=!0,A=B,y=Y;break}xe=xe.sibling}if(!de){for(xe=Y.child;xe;){if(xe===y){de=!0,y=Y,A=B;break}if(xe===A){de=!0,A=Y,y=B;break}xe=xe.sibling}if(!de)throw Error(d(189))}}if(y.alternate!==A)throw Error(d(190))}if(y.tag!==3)throw Error(d(188));return y.stateNode.current===y?n:a}function M(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=M(n),a!==null)return a;n=n.sibling}return null}var p=Object.assign,f=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.consumer"),m=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function L(n){return n===null||typeof n!="object"?null:(n=P&&n[P]||n["@@iterator"],typeof n=="function"?n:null)}var z=Symbol.for("react.client.reference");function N(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===z?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case w:return"Fragment";case l:return"Profiler";case c:return"StrictMode";case _:return"Suspense";case v:return"SuspenseList";case j:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case b:return"Portal";case m:return(n.displayName||"Context")+".Provider";case u:return(n._context.displayName||"Context")+".Consumer";case g:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case x:return a=n.displayName||null,a!==null?a:N(n.type)||"Memo";case E:a=n._payload,n=n._init;try{return N(n(a))}catch{}}return null}var V=Array.isArray,k=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},F=[],W=-1;function Q(n){return{current:n}}function J(n){0>W||(n.current=F[W],F[W]=null,W--)}function ee(n,a){W++,F[W]=n.current,n.current=a}var te=Q(null),se=Q(null),ce=Q(null),q=Q(null);function Z(n,a){switch(ee(ce,a),ee(se,n),ee(te,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?T0(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=T0(a),n=A0(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(te),ee(te,n)}function ie(){J(te),J(se),J(ce)}function pe(n){n.memoizedState!==null&&ee(q,n);var a=te.current,y=A0(a,n.type);a!==y&&(ee(se,n),ee(te,y))}function ge(n){se.current===n&&(J(te),J(se)),q.current===n&&(J(q),yu._currentValue=G)}var be=Object.prototype.hasOwnProperty,le=s.unstable_scheduleCallback,re=s.unstable_cancelCallback,Te=s.unstable_shouldYield,Ce=s.unstable_requestPaint,Me=s.unstable_now,Se=s.unstable_getCurrentPriorityLevel,Ue=s.unstable_ImmediatePriority,Fe=s.unstable_UserBlockingPriority,Be=s.unstable_NormalPriority,st=s.unstable_LowPriority,ve=s.unstable_IdlePriority,ue=s.log,ze=s.unstable_setDisableYieldValue,He=null,me=null;function je(n){if(typeof ue=="function"&&ze(n),me&&typeof me.setStrictMode=="function")try{me.setStrictMode(He,n)}catch{}}var Ie=Math.clz32?Math.clz32:yt,Ye=Math.log,it=Math.LN2;function yt(n){return n>>>=0,n===0?32:31-(Ye(n)/it|0)|0}var Ze=256,at=4194304;function fe(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ae(n,a,y){var A=n.pendingLanes;if(A===0)return 0;var B=0,Y=n.suspendedLanes,de=n.pingedLanes;n=n.warmLanes;var xe=A&134217727;return xe!==0?(A=xe&~Y,A!==0?B=fe(A):(de&=xe,de!==0?B=fe(de):y||(y=xe&~n,y!==0&&(B=fe(y))))):(xe=A&~Y,xe!==0?B=fe(xe):de!==0?B=fe(de):y||(y=A&~n,y!==0&&(B=fe(y)))),B===0?0:a!==0&&a!==B&&(a&Y)===0&&(Y=B&-B,y=a&-a,Y>=y||Y===32&&(y&4194048)!==0)?a:B}function oe(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function _e(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function he(){var n=Ze;return Ze<<=1,(Ze&4194048)===0&&(Ze=256),n}function ke(){var n=at;return at<<=1,(at&62914560)===0&&(at=4194304),n}function We(n){for(var a=[],y=0;31>y;y++)a.push(n);return a}function $e(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ee(n,a,y,A,B,Y){var de=n.pendingLanes;n.pendingLanes=y,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=y,n.entangledLanes&=y,n.errorRecoveryDisabledLanes&=y,n.shellSuspendCounter=0;var xe=n.entanglements,Ne=n.expirationTimes,nt=n.hiddenUpdates;for(y=de&~y;0<y;){var gt=31-Ie(y),_t=1<<gt;xe[gt]=0,Ne[gt]=-1;var ot=nt[gt];if(ot!==null)for(nt[gt]=null,gt=0;gt<ot.length;gt++){var ft=ot[gt];ft!==null&&(ft.lane&=-536870913)}y&=~_t}A!==0&&Ge(n,A,0),Y!==0&&B===0&&n.tag!==0&&(n.suspendedLanes|=Y&~(de&~a))}function Ge(n,a,y){n.pendingLanes|=a,n.suspendedLanes&=~a;var A=31-Ie(a);n.entangledLanes|=a,n.entanglements[A]=n.entanglements[A]|1073741824|y&4194090}function ht(n,a){var y=n.entangledLanes|=a;for(n=n.entanglements;y;){var A=31-Ie(y),B=1<<A;B&a|n[A]&a&&(n[A]|=a),y&=~B}}function wt(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Lt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ct(){var n=H.p;return n!==0?n:(n=window.event,n===void 0?32:X0(n.type))}function Ft(n,a){var y=H.p;try{return H.p=n,a()}finally{H.p=y}}var Nt=Math.random().toString(36).slice(2),Gt="__reactFiber$"+Nt,Kt="__reactProps$"+Nt,vr="__reactContainer$"+Nt,lr="__reactEvents$"+Nt,Ir="__reactListeners$"+Nt,$r="__reactHandles$"+Nt,er="__reactResources$"+Nt,Vr="__reactMarker$"+Nt;function kr(n){delete n[Gt],delete n[Kt],delete n[lr],delete n[Ir],delete n[$r]}function ar(n){var a=n[Gt];if(a)return a;for(var y=n.parentNode;y;){if(a=y[vr]||y[Gt]){if(y=a.alternate,a.child!==null||y!==null&&y.child!==null)for(n=D0(n);n!==null;){if(y=n[Gt])return y;n=D0(n)}return a}n=y,y=n.parentNode}return null}function Gn(n){if(n=n[Gt]||n[vr]){var a=n.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return n}return null}function ci(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(d(33))}function Jn(n){var a=n[er];return a||(a=n[er]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Hr(n){n[Vr]=!0}var as=new Set,Le={};function xt(n,a){ye(n,a),ye(n+"Capture",a)}function ye(n,a){for(Le[n]=a,n=0;n<a.length;n++)as.add(a[n])}var Re=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ke={},Oe={};function Xe(n){return be.call(Oe,n)?!0:be.call(Ke,n)?!1:Re.test(n)?Oe[n]=!0:(Ke[n]=!0,!1)}function rt(n,a,y){if(Xe(a))if(y===null)n.removeAttribute(a);else{switch(typeof y){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var A=a.toLowerCase().slice(0,5);if(A!=="data-"&&A!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+y)}}function vt(n,a,y){if(y===null)n.removeAttribute(a);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+y)}}function dt(n,a,y,A){if(A===null)n.removeAttribute(y);else{switch(typeof A){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(y);return}n.setAttributeNS(a,y,""+A)}}var Mt,Dt;function Ot(n){if(Mt===void 0)try{throw Error()}catch(y){var a=y.stack.trim().match(/\n( *(at )?)/);Mt=a&&a[1]||"",Dt=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mt+n+Dt}var Tt=!1;function It(n,a){if(!n||Tt)return"";Tt=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var A={DetermineComponentFrameRoot:function(){try{if(a){var _t=function(){throw Error()};if(Object.defineProperty(_t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_t,[])}catch(ft){var ot=ft}Reflect.construct(n,[],_t)}else{try{_t.call()}catch(ft){ot=ft}n.call(_t.prototype)}}else{try{throw Error()}catch(ft){ot=ft}(_t=n())&&typeof _t.catch=="function"&&_t.catch(function(){})}}catch(ft){if(ft&&ot&&typeof ft.stack=="string")return[ft.stack,ot.stack]}return[null,null]}};A.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var B=Object.getOwnPropertyDescriptor(A.DetermineComponentFrameRoot,"name");B&&B.configurable&&Object.defineProperty(A.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Y=A.DetermineComponentFrameRoot(),de=Y[0],xe=Y[1];if(de&&xe){var Ne=de.split(`
`),nt=xe.split(`
`);for(B=A=0;A<Ne.length&&!Ne[A].includes("DetermineComponentFrameRoot");)A++;for(;B<nt.length&&!nt[B].includes("DetermineComponentFrameRoot");)B++;if(A===Ne.length||B===nt.length)for(A=Ne.length-1,B=nt.length-1;1<=A&&0<=B&&Ne[A]!==nt[B];)B--;for(;1<=A&&0<=B;A--,B--)if(Ne[A]!==nt[B]){if(A!==1||B!==1)do if(A--,B--,0>B||Ne[A]!==nt[B]){var gt=`
`+Ne[A].replace(" at new "," at ");return n.displayName&&gt.includes("<anonymous>")&&(gt=gt.replace("<anonymous>",n.displayName)),gt}while(1<=A&&0<=B);break}}}finally{Tt=!1,Error.prepareStackTrace=y}return(y=n?n.displayName||n.name:"")?Ot(y):""}function Xt(n){switch(n.tag){case 26:case 27:case 5:return Ot(n.type);case 16:return Ot("Lazy");case 13:return Ot("Suspense");case 19:return Ot("SuspenseList");case 0:case 15:return It(n.type,!1);case 11:return It(n.type.render,!1);case 1:return It(n.type,!0);case 31:return Ot("Activity");default:return""}}function Qt(n){try{var a="";do a+=Xt(n),n=n.return;while(n);return a}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function Vt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ur(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function zt(n){var a=ur(n)?"checked":"value",y=Object.getOwnPropertyDescriptor(n.constructor.prototype,a),A=""+n[a];if(!n.hasOwnProperty(a)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var B=y.get,Y=y.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return B.call(this)},set:function(de){A=""+de,Y.call(this,de)}}),Object.defineProperty(n,a,{enumerable:y.enumerable}),{getValue:function(){return A},setValue:function(de){A=""+de},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function Xr(n){n._valueTracker||(n._valueTracker=zt(n))}function hr(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var y=a.getValue(),A="";return n&&(A=ur(n)?n.checked?"true":"false":n.value),n=A,n!==y?(a.setValue(n),!0):!1}function wn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Gi=/[\n"\\]/g;function jr(n){return n.replace(Gi,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function nn(n,a,y,A,B,Y,de,xe){n.name="",de!=null&&typeof de!="function"&&typeof de!="symbol"&&typeof de!="boolean"?n.type=de:n.removeAttribute("type"),a!=null?de==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+Vt(a)):n.value!==""+Vt(a)&&(n.value=""+Vt(a)):de!=="submit"&&de!=="reset"||n.removeAttribute("value"),a!=null?sn(n,de,Vt(a)):y!=null?sn(n,de,Vt(y)):A!=null&&n.removeAttribute("value"),B==null&&Y!=null&&(n.defaultChecked=!!Y),B!=null&&(n.checked=B&&typeof B!="function"&&typeof B!="symbol"),xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"?n.name=""+Vt(xe):n.removeAttribute("name")}function mr(n,a,y,A,B,Y,de,xe){if(Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(n.type=Y),a!=null||y!=null){if(!(Y!=="submit"&&Y!=="reset"||a!=null))return;y=y!=null?""+Vt(y):"",a=a!=null?""+Vt(a):y,xe||a===n.value||(n.value=a),n.defaultValue=a}A=A??B,A=typeof A!="function"&&typeof A!="symbol"&&!!A,n.checked=xe?n.checked:!!A,n.defaultChecked=!!A,de!=null&&typeof de!="function"&&typeof de!="symbol"&&typeof de!="boolean"&&(n.name=de)}function sn(n,a,y){a==="number"&&wn(n.ownerDocument)===n||n.defaultValue===""+y||(n.defaultValue=""+y)}function an(n,a,y,A){if(n=n.options,a){a={};for(var B=0;B<y.length;B++)a["$"+y[B]]=!0;for(y=0;y<n.length;y++)B=a.hasOwnProperty("$"+n[y].value),n[y].selected!==B&&(n[y].selected=B),B&&A&&(n[y].defaultSelected=!0)}else{for(y=""+Vt(y),a=null,B=0;B<n.length;B++){if(n[B].value===y){n[B].selected=!0,A&&(n[B].defaultSelected=!0);return}a!==null||n[B].disabled||(a=n[B])}a!==null&&(a.selected=!0)}}function dn(n,a,y){if(a!=null&&(a=""+Vt(a),a!==n.value&&(n.value=a),y==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=y!=null?""+Vt(y):""}function gn(n,a,y,A){if(a==null){if(A!=null){if(y!=null)throw Error(d(92));if(V(A)){if(1<A.length)throw Error(d(93));A=A[0]}y=A}y==null&&(y=""),a=y}y=Vt(a),n.defaultValue=y,A=n.textContent,A===y&&A!==""&&A!==null&&(n.value=A)}function fi(n,a){if(a){var y=n.firstChild;if(y&&y===n.lastChild&&y.nodeType===3){y.nodeValue=a;return}}n.textContent=a}var di=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jl(n,a,y){var A=a.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?A?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":A?n.setProperty(a,y):typeof y!="number"||y===0||di.has(a)?a==="float"?n.cssFloat=y:n[a]=(""+y).trim():n[a]=y+"px"}function Rl(n,a,y){if(a!=null&&typeof a!="object")throw Error(d(62));if(n=n.style,y!=null){for(var A in y)!y.hasOwnProperty(A)||a!=null&&a.hasOwnProperty(A)||(A.indexOf("--")===0?n.setProperty(A,""):A==="float"?n.cssFloat="":n[A]="");for(var B in a)A=a[B],a.hasOwnProperty(B)&&y[B]!==A&&jl(n,B,A)}else for(var Y in a)a.hasOwnProperty(Y)&&jl(n,Y,a[Y])}function Cl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ks(n){return xd.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var uo=null;function co(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ci=null,Di=null;function $n(n){var a=Gn(n);if(a&&(n=a.stateNode)){var y=n[Kt]||null;e:switch(n=a.stateNode,a.type){case"input":if(nn(n,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),a=y.name,y.type==="radio"&&a!=null){for(y=n;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+jr(""+a)+'"][type="radio"]'),a=0;a<y.length;a++){var A=y[a];if(A!==n&&A.form===n.form){var B=A[Kt]||null;if(!B)throw Error(d(90));nn(A,B.value,B.defaultValue,B.defaultValue,B.checked,B.defaultChecked,B.type,B.name)}}for(a=0;a<y.length;a++)A=y[a],A.form===n.form&&hr(A)}break e;case"textarea":dn(n,y.value,y.defaultValue);break e;case"select":a=y.value,a!=null&&an(n,!!y.multiple,a,!1)}}}var fo=!1;function Dl(n,a,y){if(fo)return n(a,y);fo=!0;try{var A=n(a);return A}finally{if(fo=!1,(Ci!==null||Di!==null)&&(tf(),Ci&&(a=Ci,n=Di,Di=Ci=null,$n(a),n)))for(a=0;a<n.length;a++)$n(n[a])}}function hi(n,a){var y=n.stateNode;if(y===null)return null;var A=y[Kt]||null;if(A===null)return null;y=A[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(A=!A.disabled)||(n=n.type,A=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!A;break e;default:n=!1}if(n)return null;if(y&&typeof y!="function")throw Error(d(231,a,typeof y));return y}var pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ll=!1;if(pi)try{var os={};Object.defineProperty(os,"passive",{get:function(){Ll=!0}}),window.addEventListener("test",os,os),window.removeEventListener("test",os,os)}catch{Ll=!1}var Li=null,Ol=null,wa=null;function Pl(){if(wa)return wa;var n,a=Ol,y=a.length,A,B="value"in Li?Li.value:Li.textContent,Y=B.length;for(n=0;n<y&&a[n]===B[n];n++);var de=y-n;for(A=1;A<=de&&a[y-A]===B[Y-A];A++);return wa=B.slice(n,1<A?1-A:void 0)}function ho(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function Ma(){return!0}function ic(){return!1}function Ln(n){function a(y,A,B,Y,de){this._reactName=y,this._targetInst=B,this.type=A,this.nativeEvent=Y,this.target=de,this.currentTarget=null;for(var xe in n)n.hasOwnProperty(xe)&&(y=n[xe],this[xe]=y?y(Y):Y[xe]);return this.isDefaultPrevented=(Y.defaultPrevented!=null?Y.defaultPrevented:Y.returnValue===!1)?Ma:ic,this.isPropagationStopped=ic,this}return p(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Ma)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Ma)},persist:function(){},isPersistent:Ma}),a}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},po=Ln(ls),Fs=p({},ls,{view:0,detail:0}),mi=Ln(Fs),ei,us,Oi,Hn=p({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vo,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Oi&&(Oi&&n.type==="mousemove"?(ei=n.screenX-Oi.screenX,us=n.screenY-Oi.screenY):us=ei=0,Oi=n),ei)},movementY:function(n){return"movementY"in n?n.movementY:us}}),Bs=Ln(Hn),Sd=p({},Hn,{dataTransfer:0}),Hi=Ln(Sd),mo=p({},Fs,{relatedTarget:0}),yo=Ln(mo),sc=p({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),ac=Ln(sc),oc=p({},ls,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),lc=Ln(oc),uc=p({},ls,{data:0}),go=Ln(uc),cc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hc(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=dc[n])?!!a[n]:!1}function vo(){return hc}var pc=p({},Fs,{key:function(n){if(n.key){var a=cc[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=ho(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?fc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vo,charCode:function(n){return n.type==="keypress"?ho(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ho(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),mc=Ln(pc),yc=p({},Hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ul=Ln(yc),Nl=p({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vo}),bo=Ln(Nl),Il=p({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),gc=Ln(Il),Wi=p({},Hn,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Xi=Ln(Wi),Pt=p({},ls,{newState:0,oldState:0}),wd=Ln(Pt),vc=[9,13,27,32],qi=pi&&"CompositionEvent"in window,Ea=null;pi&&"documentMode"in document&&(Ea=document.documentMode);var Md=pi&&"TextEvent"in window&&!Ea,Mr=pi&&(!qi||Ea&&8<Ea&&11>=Ea),bc=" ",Wn=!1;function _c(n,a){switch(n){case"keyup":return vc.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xc(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var zs=!1;function Ed(n,a){switch(n){case"compositionend":return xc(a);case"keypress":return a.which!==32?null:(Wn=!0,bc);case"textInput":return n=a.data,n===bc&&Wn?null:n;default:return null}}function Td(n,a){if(zs)return n==="compositionend"||!qi&&_c(n,a)?(n=Pl(),wa=Ol=Li=null,zs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Mr&&a.locale!=="ko"?null:a.data;default:return null}}var Sc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yr(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!Sc[n.type]:a==="textarea"}function _o(n,a,y,A){Ci?Di?Di.push(A):Di=[A]:Ci=A,a=lf(a,"onChange"),0<a.length&&(y=new po("onChange","change",null,y,A),n.push({event:y,listeners:a}))}var S=null,C=null;function I(n){x0(n,0)}function X(n){var a=ci(n);if(hr(a))return n}function K(n,a){if(n==="change")return a}var $=!1;if(pi){var ne;if(pi){var we="oninput"in document;if(!we){var Ae=document.createElement("div");Ae.setAttribute("oninput","return;"),we=typeof Ae.oninput=="function"}ne=we}else ne=!1;$=ne&&(!document.documentMode||9<document.documentMode)}function De(){S&&(S.detachEvent("onpropertychange",Ve),C=S=null)}function Ve(n){if(n.propertyName==="value"&&X(C)){var a=[];_o(a,C,n,co(n)),Dl(I,a)}}function Qe(n,a,y){n==="focusin"?(De(),S=a,C=y,S.attachEvent("onpropertychange",Ve)):n==="focusout"&&De()}function Je(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return X(C)}function Pe(n,a){if(n==="click")return X(a)}function St(n,a){if(n==="input"||n==="change")return X(a)}function ut(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var lt=typeof Object.is=="function"?Object.is:ut;function ct(n,a){if(lt(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var y=Object.keys(n),A=Object.keys(a);if(y.length!==A.length)return!1;for(A=0;A<y.length;A++){var B=y[A];if(!be.call(a,B)||!lt(n[B],a[B]))return!1}return!0}function mt(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function At(n,a){var y=mt(n);n=0;for(var A;y;){if(y.nodeType===3){if(A=n+y.textContent.length,n<=a&&A>=a)return{node:y,offset:a-n};n=A}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=mt(y)}}function Et(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?Et(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function jt(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=wn(n.document);a instanceof n.HTMLIFrameElement;){try{var y=typeof a.contentWindow.location.href=="string"}catch{y=!1}if(y)n=a.contentWindow;else break;a=wn(n.document)}return a}function Jt(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var ir=pi&&"documentMode"in document&&11>=document.documentMode,dr=null,Rr=null,Sr=null,gr=!1;function Zt(n,a,y){var A=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;gr||dr==null||dr!==wn(A)||(A=dr,"selectionStart"in A&&Jt(A)?A={start:A.selectionStart,end:A.selectionEnd}:(A=(A.ownerDocument&&A.ownerDocument.defaultView||window).getSelection(),A={anchorNode:A.anchorNode,anchorOffset:A.anchorOffset,focusNode:A.focusNode,focusOffset:A.focusOffset}),Sr&&ct(Sr,A)||(Sr=A,A=lf(Rr,"onSelect"),0<A.length&&(a=new po("onSelect","select",null,a,y),n.push({event:a,listeners:A}),a.target=dr)))}function Cr(n,a){var y={};return y[n.toLowerCase()]=a.toLowerCase(),y["Webkit"+n]="webkit"+a,y["Moz"+n]="moz"+a,y}var Er={animationend:Cr("Animation","AnimationEnd"),animationiteration:Cr("Animation","AnimationIteration"),animationstart:Cr("Animation","AnimationStart"),transitionrun:Cr("Transition","TransitionRun"),transitionstart:Cr("Transition","TransitionStart"),transitioncancel:Cr("Transition","TransitionCancel"),transitionend:Cr("Transition","TransitionEnd")},Wr={},br={};pi&&(br=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);function Fr(n){if(Wr[n])return Wr[n];if(!Er[n])return n;var a=Er[n],y;for(y in a)if(a.hasOwnProperty(y)&&y in br)return Wr[n]=a[y];return n}var Zr=Fr("animationend"),vn=Fr("animationiteration"),Dr=Fr("animationstart"),on=Fr("transitionrun"),Ta=Fr("transitionstart"),Aa=Fr("transitioncancel"),rg=Fr("transitionend"),ng=new Map,Ad="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ad.push("scrollEnd");function Pi(n,a){ng.set(n,a),xt(a,[n])}var ig=new WeakMap;function yi(n,a){if(typeof n=="object"&&n!==null){var y=ig.get(n);return y!==void 0?y:(a={value:n,source:a,stack:Qt(a)},ig.set(n,a),a)}return{value:n,source:a,stack:Qt(a)}}var gi=[],xo=0,jd=0;function wc(){for(var n=xo,a=jd=xo=0;a<n;){var y=gi[a];gi[a++]=null;var A=gi[a];gi[a++]=null;var B=gi[a];gi[a++]=null;var Y=gi[a];if(gi[a++]=null,A!==null&&B!==null){var de=A.pending;de===null?B.next=B:(B.next=de.next,de.next=B),A.pending=B}Y!==0&&sg(y,B,Y)}}function Mc(n,a,y,A){gi[xo++]=n,gi[xo++]=a,gi[xo++]=y,gi[xo++]=A,jd|=A,n.lanes|=A,n=n.alternate,n!==null&&(n.lanes|=A)}function Rd(n,a,y,A){return Mc(n,a,y,A),Ec(n)}function So(n,a){return Mc(n,null,null,a),Ec(n)}function sg(n,a,y){n.lanes|=y;var A=n.alternate;A!==null&&(A.lanes|=y);for(var B=!1,Y=n.return;Y!==null;)Y.childLanes|=y,A=Y.alternate,A!==null&&(A.childLanes|=y),Y.tag===22&&(n=Y.stateNode,n===null||n._visibility&1||(B=!0)),n=Y,Y=Y.return;return n.tag===3?(Y=n.stateNode,B&&a!==null&&(B=31-Ie(y),n=Y.hiddenUpdates,A=n[B],A===null?n[B]=[a]:A.push(a),a.lane=y|536870912),Y):null}function Ec(n){if(50<lu)throw lu=0,Uh=null,Error(d(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var wo={};function MS(n,a,y,A){this.tag=n,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ti(n,a,y,A){return new MS(n,a,y,A)}function Cd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function cs(n,a){var y=n.alternate;return y===null?(y=ti(n.tag,a,n.key,n.mode),y.elementType=n.elementType,y.type=n.type,y.stateNode=n.stateNode,y.alternate=n,n.alternate=y):(y.pendingProps=a,y.type=n.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=n.flags&65011712,y.childLanes=n.childLanes,y.lanes=n.lanes,y.child=n.child,y.memoizedProps=n.memoizedProps,y.memoizedState=n.memoizedState,y.updateQueue=n.updateQueue,a=n.dependencies,y.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},y.sibling=n.sibling,y.index=n.index,y.ref=n.ref,y.refCleanup=n.refCleanup,y}function ag(n,a){n.flags&=65011714;var y=n.alternate;return y===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=y.childLanes,n.lanes=y.lanes,n.child=y.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=y.memoizedProps,n.memoizedState=y.memoizedState,n.updateQueue=y.updateQueue,n.type=y.type,a=y.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function Tc(n,a,y,A,B,Y){var de=0;if(A=n,typeof n=="function")Cd(n)&&(de=1);else if(typeof n=="string")de=T2(n,y,te.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case j:return n=ti(31,y,a,B),n.elementType=j,n.lanes=Y,n;case w:return ja(y.children,B,Y,a);case c:de=8,B|=24;break;case l:return n=ti(12,y,a,B|2),n.elementType=l,n.lanes=Y,n;case _:return n=ti(13,y,a,B),n.elementType=_,n.lanes=Y,n;case v:return n=ti(19,y,a,B),n.elementType=v,n.lanes=Y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case o:case m:de=10;break e;case u:de=9;break e;case g:de=11;break e;case x:de=14;break e;case E:de=16,A=null;break e}de=29,y=Error(d(130,n===null?"null":typeof n,"")),A=null}return a=ti(de,y,a,B),a.elementType=n,a.type=A,a.lanes=Y,a}function ja(n,a,y,A){return n=ti(7,n,A,a),n.lanes=y,n}function Dd(n,a,y){return n=ti(6,n,null,a),n.lanes=y,n}function Ld(n,a,y){return a=ti(4,n.children!==null?n.children:[],n.key,a),a.lanes=y,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var Mo=[],Eo=0,Ac=null,jc=0,vi=[],bi=0,Ra=null,fs=1,ds="";function Ca(n,a){Mo[Eo++]=jc,Mo[Eo++]=Ac,Ac=n,jc=a}function og(n,a,y){vi[bi++]=fs,vi[bi++]=ds,vi[bi++]=Ra,Ra=n;var A=fs;n=ds;var B=32-Ie(A)-1;A&=~(1<<B),y+=1;var Y=32-Ie(a)+B;if(30<Y){var de=B-B%5;Y=(A&(1<<de)-1).toString(32),A>>=de,B-=de,fs=1<<32-Ie(a)+B|y<<B|A,ds=Y+n}else fs=1<<Y|y<<B|A,ds=n}function Od(n){n.return!==null&&(Ca(n,1),og(n,1,0))}function Pd(n){for(;n===Ac;)Ac=Mo[--Eo],Mo[Eo]=null,jc=Mo[--Eo],Mo[Eo]=null;for(;n===Ra;)Ra=vi[--bi],vi[bi]=null,ds=vi[--bi],vi[bi]=null,fs=vi[--bi],vi[bi]=null}var Fn=null,en=null,wr=!1,Da=null,Yi=!1,Ud=Error(d(519));function La(n){var a=Error(d(418,""));throw Bl(yi(a,n)),Ud}function lg(n){var a=n.stateNode,y=n.type,A=n.memoizedProps;switch(a[Gt]=n,a[Kt]=A,y){case"dialog":fr("cancel",a),fr("close",a);break;case"iframe":case"object":case"embed":fr("load",a);break;case"video":case"audio":for(y=0;y<cu.length;y++)fr(cu[y],a);break;case"source":fr("error",a);break;case"img":case"image":case"link":fr("error",a),fr("load",a);break;case"details":fr("toggle",a);break;case"input":fr("invalid",a),mr(a,A.value,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name,!0),Xr(a);break;case"select":fr("invalid",a);break;case"textarea":fr("invalid",a),gn(a,A.value,A.defaultValue,A.children),Xr(a)}y=A.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||a.textContent===""+y||A.suppressHydrationWarning===!0||E0(a.textContent,y)?(A.popover!=null&&(fr("beforetoggle",a),fr("toggle",a)),A.onScroll!=null&&fr("scroll",a),A.onScrollEnd!=null&&fr("scrollend",a),A.onClick!=null&&(a.onclick=uf),a=!0):a=!1,a||La(n)}function ug(n){for(Fn=n.return;Fn;)switch(Fn.tag){case 5:case 13:Yi=!1;return;case 27:case 3:Yi=!0;return;default:Fn=Fn.return}}function kl(n){if(n!==Fn)return!1;if(!wr)return ug(n),wr=!0,!1;var a=n.tag,y;if((y=a!==3&&a!==27)&&((y=a===5)&&(y=n.type,y=!(y!=="form"&&y!=="button")||Qh(n.type,n.memoizedProps)),y=!y),y&&en&&La(n),ug(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(d(317));e:{for(n=n.nextSibling,a=0;n;){if(n.nodeType===8)if(y=n.data,y==="/$"){if(a===0){en=Ni(n.nextSibling);break e}a--}else y!=="$"&&y!=="$!"&&y!=="$?"||a++;n=n.nextSibling}en=null}}else a===27?(a=en,na(n.type)?(n=tp,tp=null,en=n):en=a):en=Fn?Ni(n.stateNode.nextSibling):null;return!0}function Fl(){en=Fn=null,wr=!1}function cg(){var n=Da;return n!==null&&(Yn===null?Yn=n:Yn.push.apply(Yn,n),Da=null),n}function Bl(n){Da===null?Da=[n]:Da.push(n)}var Nd=Q(null),Oa=null,hs=null;function Vs(n,a,y){ee(Nd,a._currentValue),a._currentValue=y}function ps(n){n._currentValue=Nd.current,J(Nd)}function Id(n,a,y){for(;n!==null;){var A=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,A!==null&&(A.childLanes|=a)):A!==null&&(A.childLanes&a)!==a&&(A.childLanes|=a),n===y)break;n=n.return}}function kd(n,a,y,A){var B=n.child;for(B!==null&&(B.return=n);B!==null;){var Y=B.dependencies;if(Y!==null){var de=B.child;Y=Y.firstContext;e:for(;Y!==null;){var xe=Y;Y=B;for(var Ne=0;Ne<a.length;Ne++)if(xe.context===a[Ne]){Y.lanes|=y,xe=Y.alternate,xe!==null&&(xe.lanes|=y),Id(Y.return,y,n),A||(de=null);break e}Y=xe.next}}else if(B.tag===18){if(de=B.return,de===null)throw Error(d(341));de.lanes|=y,Y=de.alternate,Y!==null&&(Y.lanes|=y),Id(de,y,n),de=null}else de=B.child;if(de!==null)de.return=B;else for(de=B;de!==null;){if(de===n){de=null;break}if(B=de.sibling,B!==null){B.return=de.return,de=B;break}de=de.return}B=de}}function zl(n,a,y,A){n=null;for(var B=a,Y=!1;B!==null;){if(!Y){if((B.flags&524288)!==0)Y=!0;else if((B.flags&262144)!==0)break}if(B.tag===10){var de=B.alternate;if(de===null)throw Error(d(387));if(de=de.memoizedProps,de!==null){var xe=B.type;lt(B.pendingProps.value,de.value)||(n!==null?n.push(xe):n=[xe])}}else if(B===q.current){if(de=B.alternate,de===null)throw Error(d(387));de.memoizedState.memoizedState!==B.memoizedState.memoizedState&&(n!==null?n.push(yu):n=[yu])}B=B.return}n!==null&&kd(a,n,y,A),a.flags|=262144}function Rc(n){for(n=n.firstContext;n!==null;){if(!lt(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Pa(n){Oa=n,hs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function On(n){return fg(Oa,n)}function Cc(n,a){return Oa===null&&Pa(n),fg(n,a)}function fg(n,a){var y=a._currentValue;if(a={context:a,memoizedValue:y,next:null},hs===null){if(n===null)throw Error(d(308));hs=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else hs=hs.next=a;return y}var ES=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(y,A){n.push(A)}};this.abort=function(){a.aborted=!0,n.forEach(function(y){return y()})}},TS=s.unstable_scheduleCallback,AS=s.unstable_NormalPriority,bn={$$typeof:m,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fd(){return{controller:new ES,data:new Map,refCount:0}}function Vl(n){n.refCount--,n.refCount===0&&TS(AS,function(){n.controller.abort()})}var Gl=null,Bd=0,To=0,Ao=null;function jS(n,a){if(Gl===null){var y=Gl=[];Bd=0,To=Vh(),Ao={status:"pending",value:void 0,then:function(A){y.push(A)}}}return Bd++,a.then(dg,dg),a}function dg(){if(--Bd===0&&Gl!==null){Ao!==null&&(Ao.status="fulfilled");var n=Gl;Gl=null,To=0,Ao=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function RS(n,a){var y=[],A={status:"pending",value:null,reason:null,then:function(B){y.push(B)}};return n.then(function(){A.status="fulfilled",A.value=a;for(var B=0;B<y.length;B++)(0,y[B])(a)},function(B){for(A.status="rejected",A.reason=B,B=0;B<y.length;B++)(0,y[B])(void 0)}),A}var hg=k.S;k.S=function(n,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&jS(n,a),hg!==null&&hg(n,a)};var Ua=Q(null);function zd(){var n=Ua.current;return n!==null?n:Gr.pooledCache}function Dc(n,a){a===null?ee(Ua,Ua.current):ee(Ua,a.pool)}function pg(){var n=zd();return n===null?null:{parent:bn._currentValue,pool:n}}var Hl=Error(d(460)),mg=Error(d(474)),Lc=Error(d(542)),Vd={then:function(){}};function yg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Oc(){}function gg(n,a,y){switch(y=n[y],y===void 0?n.push(a):y!==a&&(a.then(Oc,Oc),a=y),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,bg(n),n;default:if(typeof a.status=="string")a.then(Oc,Oc);else{if(n=Gr,n!==null&&100<n.shellSuspendCounter)throw Error(d(482));n=a,n.status="pending",n.then(function(A){if(a.status==="pending"){var B=a;B.status="fulfilled",B.value=A}},function(A){if(a.status==="pending"){var B=a;B.status="rejected",B.reason=A}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,bg(n),n}throw Wl=a,Hl}}var Wl=null;function vg(){if(Wl===null)throw Error(d(459));var n=Wl;return Wl=null,n}function bg(n){if(n===Hl||n===Lc)throw Error(d(483))}var Gs=!1;function Gd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hd(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Hs(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ws(n,a,y){var A=n.updateQueue;if(A===null)return null;if(A=A.shared,(Tr&2)!==0){var B=A.pending;return B===null?a.next=a:(a.next=B.next,B.next=a),A.pending=a,a=Ec(n),sg(n,null,y),a}return Mc(n,A,a,y),Ec(n)}function Xl(n,a,y){if(a=a.updateQueue,a!==null&&(a=a.shared,(y&4194048)!==0)){var A=a.lanes;A&=n.pendingLanes,y|=A,a.lanes=y,ht(n,y)}}function Wd(n,a){var y=n.updateQueue,A=n.alternate;if(A!==null&&(A=A.updateQueue,y===A)){var B=null,Y=null;if(y=y.firstBaseUpdate,y!==null){do{var de={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};Y===null?B=Y=de:Y=Y.next=de,y=y.next}while(y!==null);Y===null?B=Y=a:Y=Y.next=a}else B=Y=a;y={baseState:A.baseState,firstBaseUpdate:B,lastBaseUpdate:Y,shared:A.shared,callbacks:A.callbacks},n.updateQueue=y;return}n=y.lastBaseUpdate,n===null?y.firstBaseUpdate=a:n.next=a,y.lastBaseUpdate=a}var Xd=!1;function ql(){if(Xd){var n=Ao;if(n!==null)throw n}}function Yl(n,a,y,A){Xd=!1;var B=n.updateQueue;Gs=!1;var Y=B.firstBaseUpdate,de=B.lastBaseUpdate,xe=B.shared.pending;if(xe!==null){B.shared.pending=null;var Ne=xe,nt=Ne.next;Ne.next=null,de===null?Y=nt:de.next=nt,de=Ne;var gt=n.alternate;gt!==null&&(gt=gt.updateQueue,xe=gt.lastBaseUpdate,xe!==de&&(xe===null?gt.firstBaseUpdate=nt:xe.next=nt,gt.lastBaseUpdate=Ne))}if(Y!==null){var _t=B.baseState;de=0,gt=nt=Ne=null,xe=Y;do{var ot=xe.lane&-536870913,ft=ot!==xe.lane;if(ft?(yr&ot)===ot:(A&ot)===ot){ot!==0&&ot===To&&(Xd=!0),gt!==null&&(gt=gt.next={lane:0,tag:xe.tag,payload:xe.payload,callback:null,next:null});e:{var qt=n,Ht=xe;ot=a;var Pr=y;switch(Ht.tag){case 1:if(qt=Ht.payload,typeof qt=="function"){_t=qt.call(Pr,_t,ot);break e}_t=qt;break e;case 3:qt.flags=qt.flags&-65537|128;case 0:if(qt=Ht.payload,ot=typeof qt=="function"?qt.call(Pr,_t,ot):qt,ot==null)break e;_t=p({},_t,ot);break e;case 2:Gs=!0}}ot=xe.callback,ot!==null&&(n.flags|=64,ft&&(n.flags|=8192),ft=B.callbacks,ft===null?B.callbacks=[ot]:ft.push(ot))}else ft={lane:ot,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},gt===null?(nt=gt=ft,Ne=_t):gt=gt.next=ft,de|=ot;if(xe=xe.next,xe===null){if(xe=B.shared.pending,xe===null)break;ft=xe,xe=ft.next,ft.next=null,B.lastBaseUpdate=ft,B.shared.pending=null}}while(!0);gt===null&&(Ne=_t),B.baseState=Ne,B.firstBaseUpdate=nt,B.lastBaseUpdate=gt,Y===null&&(B.shared.lanes=0),$s|=de,n.lanes=de,n.memoizedState=_t}}function _g(n,a){if(typeof n!="function")throw Error(d(191,n));n.call(a)}function xg(n,a){var y=n.callbacks;if(y!==null)for(n.callbacks=null,n=0;n<y.length;n++)_g(y[n],a)}var jo=Q(null),Pc=Q(0);function Sg(n,a){n=xs,ee(Pc,n),ee(jo,a),xs=n|a.baseLanes}function qd(){ee(Pc,xs),ee(jo,jo.current)}function Yd(){xs=Pc.current,J(jo),J(Pc)}var Xs=0,sr=null,Lr=null,hn=null,Uc=!1,Ro=!1,Na=!1,Nc=0,Zl=0,Co=null,CS=0;function ln(){throw Error(d(321))}function Zd(n,a){if(a===null)return!1;for(var y=0;y<a.length&&y<n.length;y++)if(!lt(n[y],a[y]))return!1;return!0}function Kd(n,a,y,A,B,Y){return Xs=Y,sr=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,k.H=n===null||n.memoizedState===null?sv:av,Na=!1,Y=y(A,B),Na=!1,Ro&&(Y=Mg(a,y,A,B)),wg(n),Y}function wg(n){k.H=Vc;var a=Lr!==null&&Lr.next!==null;if(Xs=0,hn=Lr=sr=null,Uc=!1,Zl=0,Co=null,a)throw Error(d(300));n===null||Mn||(n=n.dependencies,n!==null&&Rc(n)&&(Mn=!0))}function Mg(n,a,y,A){sr=n;var B=0;do{if(Ro&&(Co=null),Zl=0,Ro=!1,25<=B)throw Error(d(301));if(B+=1,hn=Lr=null,n.updateQueue!=null){var Y=n.updateQueue;Y.lastEffect=null,Y.events=null,Y.stores=null,Y.memoCache!=null&&(Y.memoCache.index=0)}k.H=IS,Y=a(y,A)}while(Ro);return Y}function DS(){var n=k.H,a=n.useState()[0];return a=typeof a.then=="function"?Kl(a):a,n=n.useState()[0],(Lr!==null?Lr.memoizedState:null)!==n&&(sr.flags|=1024),a}function Qd(){var n=Nc!==0;return Nc=0,n}function Jd(n,a,y){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~y}function $d(n){if(Uc){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Uc=!1}Xs=0,hn=Lr=sr=null,Ro=!1,Zl=Nc=0,Co=null}function Xn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?sr.memoizedState=hn=n:hn=hn.next=n,hn}function pn(){if(Lr===null){var n=sr.alternate;n=n!==null?n.memoizedState:null}else n=Lr.next;var a=hn===null?sr.memoizedState:hn.next;if(a!==null)hn=a,Lr=n;else{if(n===null)throw sr.alternate===null?Error(d(467)):Error(d(310));Lr=n,n={memoizedState:Lr.memoizedState,baseState:Lr.baseState,baseQueue:Lr.baseQueue,queue:Lr.queue,next:null},hn===null?sr.memoizedState=hn=n:hn=hn.next=n}return hn}function eh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kl(n){var a=Zl;return Zl+=1,Co===null&&(Co=[]),n=gg(Co,n,a),a=sr,(hn===null?a.memoizedState:hn.next)===null&&(a=a.alternate,k.H=a===null||a.memoizedState===null?sv:av),n}function Ic(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Kl(n);if(n.$$typeof===m)return On(n)}throw Error(d(438,String(n)))}function th(n){var a=null,y=sr.updateQueue;if(y!==null&&(a=y.memoCache),a==null){var A=sr.alternate;A!==null&&(A=A.updateQueue,A!==null&&(A=A.memoCache,A!=null&&(a={data:A.data.map(function(B){return B.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),y===null&&(y=eh(),sr.updateQueue=y),y.memoCache=a,y=a.data[a.index],y===void 0)for(y=a.data[a.index]=Array(n),A=0;A<n;A++)y[A]=O;return a.index++,y}function ms(n,a){return typeof a=="function"?a(n):a}function kc(n){var a=pn();return rh(a,Lr,n)}function rh(n,a,y){var A=n.queue;if(A===null)throw Error(d(311));A.lastRenderedReducer=y;var B=n.baseQueue,Y=A.pending;if(Y!==null){if(B!==null){var de=B.next;B.next=Y.next,Y.next=de}a.baseQueue=B=Y,A.pending=null}if(Y=n.baseState,B===null)n.memoizedState=Y;else{a=B.next;var xe=de=null,Ne=null,nt=a,gt=!1;do{var _t=nt.lane&-536870913;if(_t!==nt.lane?(yr&_t)===_t:(Xs&_t)===_t){var ot=nt.revertLane;if(ot===0)Ne!==null&&(Ne=Ne.next={lane:0,revertLane:0,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null}),_t===To&&(gt=!0);else if((Xs&ot)===ot){nt=nt.next,ot===To&&(gt=!0);continue}else _t={lane:0,revertLane:nt.revertLane,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null},Ne===null?(xe=Ne=_t,de=Y):Ne=Ne.next=_t,sr.lanes|=ot,$s|=ot;_t=nt.action,Na&&y(Y,_t),Y=nt.hasEagerState?nt.eagerState:y(Y,_t)}else ot={lane:_t,revertLane:nt.revertLane,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null},Ne===null?(xe=Ne=ot,de=Y):Ne=Ne.next=ot,sr.lanes|=_t,$s|=_t;nt=nt.next}while(nt!==null&&nt!==a);if(Ne===null?de=Y:Ne.next=xe,!lt(Y,n.memoizedState)&&(Mn=!0,gt&&(y=Ao,y!==null)))throw y;n.memoizedState=Y,n.baseState=de,n.baseQueue=Ne,A.lastRenderedState=Y}return B===null&&(A.lanes=0),[n.memoizedState,A.dispatch]}function nh(n){var a=pn(),y=a.queue;if(y===null)throw Error(d(311));y.lastRenderedReducer=n;var A=y.dispatch,B=y.pending,Y=a.memoizedState;if(B!==null){y.pending=null;var de=B=B.next;do Y=n(Y,de.action),de=de.next;while(de!==B);lt(Y,a.memoizedState)||(Mn=!0),a.memoizedState=Y,a.baseQueue===null&&(a.baseState=Y),y.lastRenderedState=Y}return[Y,A]}function Eg(n,a,y){var A=sr,B=pn(),Y=wr;if(Y){if(y===void 0)throw Error(d(407));y=y()}else y=a();var de=!lt((Lr||B).memoizedState,y);de&&(B.memoizedState=y,Mn=!0),B=B.queue;var xe=jg.bind(null,A,B,n);if(Ql(2048,8,xe,[n]),B.getSnapshot!==a||de||hn!==null&&hn.memoizedState.tag&1){if(A.flags|=2048,Do(9,Fc(),Ag.bind(null,A,B,y,a),null),Gr===null)throw Error(d(349));Y||(Xs&124)!==0||Tg(A,a,y)}return y}function Tg(n,a,y){n.flags|=16384,n={getSnapshot:a,value:y},a=sr.updateQueue,a===null?(a=eh(),sr.updateQueue=a,a.stores=[n]):(y=a.stores,y===null?a.stores=[n]:y.push(n))}function Ag(n,a,y,A){a.value=y,a.getSnapshot=A,Rg(a)&&Cg(n)}function jg(n,a,y){return y(function(){Rg(a)&&Cg(n)})}function Rg(n){var a=n.getSnapshot;n=n.value;try{var y=a();return!lt(n,y)}catch{return!0}}function Cg(n){var a=So(n,2);a!==null&&ai(a,n,2)}function ih(n){var a=Xn();if(typeof n=="function"){var y=n;if(n=y(),Na){je(!0);try{y()}finally{je(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:n},a}function Dg(n,a,y,A){return n.baseState=y,rh(n,Lr,typeof A=="function"?A:ms)}function LS(n,a,y,A,B){if(zc(n))throw Error(d(485));if(n=a.action,n!==null){var Y={payload:B,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(de){Y.listeners.push(de)}};k.T!==null?y(!0):Y.isTransition=!1,A(Y),y=a.pending,y===null?(Y.next=a.pending=Y,Lg(a,Y)):(Y.next=y.next,a.pending=y.next=Y)}}function Lg(n,a){var y=a.action,A=a.payload,B=n.state;if(a.isTransition){var Y=k.T,de={};k.T=de;try{var xe=y(B,A),Ne=k.S;Ne!==null&&Ne(de,xe),Og(n,a,xe)}catch(nt){sh(n,a,nt)}finally{k.T=Y}}else try{Y=y(B,A),Og(n,a,Y)}catch(nt){sh(n,a,nt)}}function Og(n,a,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(A){Pg(n,a,A)},function(A){return sh(n,a,A)}):Pg(n,a,y)}function Pg(n,a,y){a.status="fulfilled",a.value=y,Ug(a),n.state=y,a=n.pending,a!==null&&(y=a.next,y===a?n.pending=null:(y=y.next,a.next=y,Lg(n,y)))}function sh(n,a,y){var A=n.pending;if(n.pending=null,A!==null){A=A.next;do a.status="rejected",a.reason=y,Ug(a),a=a.next;while(a!==A)}n.action=null}function Ug(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function Ng(n,a){return a}function Ig(n,a){if(wr){var y=Gr.formState;if(y!==null){e:{var A=sr;if(wr){if(en){t:{for(var B=en,Y=Yi;B.nodeType!==8;){if(!Y){B=null;break t}if(B=Ni(B.nextSibling),B===null){B=null;break t}}Y=B.data,B=Y==="F!"||Y==="F"?B:null}if(B){en=Ni(B.nextSibling),A=B.data==="F!";break e}}La(A)}A=!1}A&&(a=y[0])}}return y=Xn(),y.memoizedState=y.baseState=a,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ng,lastRenderedState:a},y.queue=A,y=rv.bind(null,sr,A),A.dispatch=y,A=ih(!1),Y=ch.bind(null,sr,!1,A.queue),A=Xn(),B={state:a,dispatch:null,action:n,pending:null},A.queue=B,y=LS.bind(null,sr,B,Y,y),B.dispatch=y,A.memoizedState=n,[a,y,!1]}function kg(n){var a=pn();return Fg(a,Lr,n)}function Fg(n,a,y){if(a=rh(n,a,Ng)[0],n=kc(ms)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var A=Kl(a)}catch(de){throw de===Hl?Lc:de}else A=a;a=pn();var B=a.queue,Y=B.dispatch;return y!==a.memoizedState&&(sr.flags|=2048,Do(9,Fc(),OS.bind(null,B,y),null)),[A,Y,n]}function OS(n,a){n.action=a}function Bg(n){var a=pn(),y=Lr;if(y!==null)return Fg(a,y,n);pn(),a=a.memoizedState,y=pn();var A=y.queue.dispatch;return y.memoizedState=n,[a,A,!1]}function Do(n,a,y,A){return n={tag:n,create:y,deps:A,inst:a,next:null},a=sr.updateQueue,a===null&&(a=eh(),sr.updateQueue=a),y=a.lastEffect,y===null?a.lastEffect=n.next=n:(A=y.next,y.next=n,n.next=A,a.lastEffect=n),n}function Fc(){return{destroy:void 0,resource:void 0}}function zg(){return pn().memoizedState}function Bc(n,a,y,A){var B=Xn();A=A===void 0?null:A,sr.flags|=n,B.memoizedState=Do(1|a,Fc(),y,A)}function Ql(n,a,y,A){var B=pn();A=A===void 0?null:A;var Y=B.memoizedState.inst;Lr!==null&&A!==null&&Zd(A,Lr.memoizedState.deps)?B.memoizedState=Do(a,Y,y,A):(sr.flags|=n,B.memoizedState=Do(1|a,Y,y,A))}function Vg(n,a){Bc(8390656,8,n,a)}function Gg(n,a){Ql(2048,8,n,a)}function Hg(n,a){return Ql(4,2,n,a)}function Wg(n,a){return Ql(4,4,n,a)}function Xg(n,a){if(typeof a=="function"){n=n();var y=a(n);return function(){typeof y=="function"?y():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function qg(n,a,y){y=y!=null?y.concat([n]):null,Ql(4,4,Xg.bind(null,a,n),y)}function ah(){}function Yg(n,a){var y=pn();a=a===void 0?null:a;var A=y.memoizedState;return a!==null&&Zd(a,A[1])?A[0]:(y.memoizedState=[n,a],n)}function Zg(n,a){var y=pn();a=a===void 0?null:a;var A=y.memoizedState;if(a!==null&&Zd(a,A[1]))return A[0];if(A=n(),Na){je(!0);try{n()}finally{je(!1)}}return y.memoizedState=[A,a],A}function oh(n,a,y){return y===void 0||(Xs&1073741824)!==0?n.memoizedState=a:(n.memoizedState=y,n=Jv(),sr.lanes|=n,$s|=n,y)}function Kg(n,a,y,A){return lt(y,a)?y:jo.current!==null?(n=oh(n,y,A),lt(n,a)||(Mn=!0),n):(Xs&42)===0?(Mn=!0,n.memoizedState=y):(n=Jv(),sr.lanes|=n,$s|=n,a)}function Qg(n,a,y,A,B){var Y=H.p;H.p=Y!==0&&8>Y?Y:8;var de=k.T,xe={};k.T=xe,ch(n,!1,a,y);try{var Ne=B(),nt=k.S;if(nt!==null&&nt(xe,Ne),Ne!==null&&typeof Ne=="object"&&typeof Ne.then=="function"){var gt=RS(Ne,A);Jl(n,a,gt,si(n))}else Jl(n,a,A,si(n))}catch(_t){Jl(n,a,{then:function(){},status:"rejected",reason:_t},si())}finally{H.p=Y,k.T=de}}function PS(){}function lh(n,a,y,A){if(n.tag!==5)throw Error(d(476));var B=Jg(n).queue;Qg(n,B,a,G,y===null?PS:function(){return $g(n),y(A)})}function Jg(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:G},next:null};var y={};return a.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:y},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function $g(n){var a=Jg(n).next.queue;Jl(n,a,{},si())}function uh(){return On(yu)}function ev(){return pn().memoizedState}function tv(){return pn().memoizedState}function US(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var y=si();n=Hs(y);var A=Ws(a,n,y);A!==null&&(ai(A,a,y),Xl(A,a,y)),a={cache:Fd()},n.payload=a;return}a=a.return}}function NS(n,a,y){var A=si();y={lane:A,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null},zc(n)?nv(a,y):(y=Rd(n,a,y,A),y!==null&&(ai(y,n,A),iv(y,a,A)))}function rv(n,a,y){var A=si();Jl(n,a,y,A)}function Jl(n,a,y,A){var B={lane:A,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null};if(zc(n))nv(a,B);else{var Y=n.alternate;if(n.lanes===0&&(Y===null||Y.lanes===0)&&(Y=a.lastRenderedReducer,Y!==null))try{var de=a.lastRenderedState,xe=Y(de,y);if(B.hasEagerState=!0,B.eagerState=xe,lt(xe,de))return Mc(n,a,B,0),Gr===null&&wc(),!1}catch{}finally{}if(y=Rd(n,a,B,A),y!==null)return ai(y,n,A),iv(y,a,A),!0}return!1}function ch(n,a,y,A){if(A={lane:2,revertLane:Vh(),action:A,hasEagerState:!1,eagerState:null,next:null},zc(n)){if(a)throw Error(d(479))}else a=Rd(n,y,A,2),a!==null&&ai(a,n,2)}function zc(n){var a=n.alternate;return n===sr||a!==null&&a===sr}function nv(n,a){Ro=Uc=!0;var y=n.pending;y===null?a.next=a:(a.next=y.next,y.next=a),n.pending=a}function iv(n,a,y){if((y&4194048)!==0){var A=a.lanes;A&=n.pendingLanes,y|=A,a.lanes=y,ht(n,y)}}var Vc={readContext:On,use:Ic,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useLayoutEffect:ln,useInsertionEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useSyncExternalStore:ln,useId:ln,useHostTransitionStatus:ln,useFormState:ln,useActionState:ln,useOptimistic:ln,useMemoCache:ln,useCacheRefresh:ln},sv={readContext:On,use:Ic,useCallback:function(n,a){return Xn().memoizedState=[n,a===void 0?null:a],n},useContext:On,useEffect:Vg,useImperativeHandle:function(n,a,y){y=y!=null?y.concat([n]):null,Bc(4194308,4,Xg.bind(null,a,n),y)},useLayoutEffect:function(n,a){return Bc(4194308,4,n,a)},useInsertionEffect:function(n,a){Bc(4,2,n,a)},useMemo:function(n,a){var y=Xn();a=a===void 0?null:a;var A=n();if(Na){je(!0);try{n()}finally{je(!1)}}return y.memoizedState=[A,a],A},useReducer:function(n,a,y){var A=Xn();if(y!==void 0){var B=y(a);if(Na){je(!0);try{y(a)}finally{je(!1)}}}else B=a;return A.memoizedState=A.baseState=B,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:B},A.queue=n,n=n.dispatch=NS.bind(null,sr,n),[A.memoizedState,n]},useRef:function(n){var a=Xn();return n={current:n},a.memoizedState=n},useState:function(n){n=ih(n);var a=n.queue,y=rv.bind(null,sr,a);return a.dispatch=y,[n.memoizedState,y]},useDebugValue:ah,useDeferredValue:function(n,a){var y=Xn();return oh(y,n,a)},useTransition:function(){var n=ih(!1);return n=Qg.bind(null,sr,n.queue,!0,!1),Xn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,y){var A=sr,B=Xn();if(wr){if(y===void 0)throw Error(d(407));y=y()}else{if(y=a(),Gr===null)throw Error(d(349));(yr&124)!==0||Tg(A,a,y)}B.memoizedState=y;var Y={value:y,getSnapshot:a};return B.queue=Y,Vg(jg.bind(null,A,Y,n),[n]),A.flags|=2048,Do(9,Fc(),Ag.bind(null,A,Y,y,a),null),y},useId:function(){var n=Xn(),a=Gr.identifierPrefix;if(wr){var y=ds,A=fs;y=(A&~(1<<32-Ie(A)-1)).toString(32)+y,a="«"+a+"R"+y,y=Nc++,0<y&&(a+="H"+y.toString(32)),a+="»"}else y=CS++,a="«"+a+"r"+y.toString(32)+"»";return n.memoizedState=a},useHostTransitionStatus:uh,useFormState:Ig,useActionState:Ig,useOptimistic:function(n){var a=Xn();a.memoizedState=a.baseState=n;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=y,a=ch.bind(null,sr,!0,y),y.dispatch=a,[n,a]},useMemoCache:th,useCacheRefresh:function(){return Xn().memoizedState=US.bind(null,sr)}},av={readContext:On,use:Ic,useCallback:Yg,useContext:On,useEffect:Gg,useImperativeHandle:qg,useInsertionEffect:Hg,useLayoutEffect:Wg,useMemo:Zg,useReducer:kc,useRef:zg,useState:function(){return kc(ms)},useDebugValue:ah,useDeferredValue:function(n,a){var y=pn();return Kg(y,Lr.memoizedState,n,a)},useTransition:function(){var n=kc(ms)[0],a=pn().memoizedState;return[typeof n=="boolean"?n:Kl(n),a]},useSyncExternalStore:Eg,useId:ev,useHostTransitionStatus:uh,useFormState:kg,useActionState:kg,useOptimistic:function(n,a){var y=pn();return Dg(y,Lr,n,a)},useMemoCache:th,useCacheRefresh:tv},IS={readContext:On,use:Ic,useCallback:Yg,useContext:On,useEffect:Gg,useImperativeHandle:qg,useInsertionEffect:Hg,useLayoutEffect:Wg,useMemo:Zg,useReducer:nh,useRef:zg,useState:function(){return nh(ms)},useDebugValue:ah,useDeferredValue:function(n,a){var y=pn();return Lr===null?oh(y,n,a):Kg(y,Lr.memoizedState,n,a)},useTransition:function(){var n=nh(ms)[0],a=pn().memoizedState;return[typeof n=="boolean"?n:Kl(n),a]},useSyncExternalStore:Eg,useId:ev,useHostTransitionStatus:uh,useFormState:Bg,useActionState:Bg,useOptimistic:function(n,a){var y=pn();return Lr!==null?Dg(y,Lr,n,a):(y.baseState=n,[n,y.queue.dispatch])},useMemoCache:th,useCacheRefresh:tv},Lo=null,$l=0;function Gc(n){var a=$l;return $l+=1,Lo===null&&(Lo=[]),gg(Lo,n,a)}function eu(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function Hc(n,a){throw a.$$typeof===f?Error(d(525)):(n=Object.prototype.toString.call(a),Error(d(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function ov(n){var a=n._init;return a(n._payload)}function lv(n){function a(et,qe){if(n){var tt=et.deletions;tt===null?(et.deletions=[qe],et.flags|=16):tt.push(qe)}}function y(et,qe){if(!n)return null;for(;qe!==null;)a(et,qe),qe=qe.sibling;return null}function A(et){for(var qe=new Map;et!==null;)et.key!==null?qe.set(et.key,et):qe.set(et.index,et),et=et.sibling;return qe}function B(et,qe){return et=cs(et,qe),et.index=0,et.sibling=null,et}function Y(et,qe,tt){return et.index=tt,n?(tt=et.alternate,tt!==null?(tt=tt.index,tt<qe?(et.flags|=67108866,qe):tt):(et.flags|=67108866,qe)):(et.flags|=1048576,qe)}function de(et){return n&&et.alternate===null&&(et.flags|=67108866),et}function xe(et,qe,tt,bt){return qe===null||qe.tag!==6?(qe=Dd(tt,et.mode,bt),qe.return=et,qe):(qe=B(qe,tt),qe.return=et,qe)}function Ne(et,qe,tt,bt){var Ut=tt.type;return Ut===w?gt(et,qe,tt.props.children,bt,tt.key):qe!==null&&(qe.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===E&&ov(Ut)===qe.type)?(qe=B(qe,tt.props),eu(qe,tt),qe.return=et,qe):(qe=Tc(tt.type,tt.key,tt.props,null,et.mode,bt),eu(qe,tt),qe.return=et,qe)}function nt(et,qe,tt,bt){return qe===null||qe.tag!==4||qe.stateNode.containerInfo!==tt.containerInfo||qe.stateNode.implementation!==tt.implementation?(qe=Ld(tt,et.mode,bt),qe.return=et,qe):(qe=B(qe,tt.children||[]),qe.return=et,qe)}function gt(et,qe,tt,bt,Ut){return qe===null||qe.tag!==7?(qe=ja(tt,et.mode,bt,Ut),qe.return=et,qe):(qe=B(qe,tt),qe.return=et,qe)}function _t(et,qe,tt){if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return qe=Dd(""+qe,et.mode,tt),qe.return=et,qe;if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case h:return tt=Tc(qe.type,qe.key,qe.props,null,et.mode,tt),eu(tt,qe),tt.return=et,tt;case b:return qe=Ld(qe,et.mode,tt),qe.return=et,qe;case E:var bt=qe._init;return qe=bt(qe._payload),_t(et,qe,tt)}if(V(qe)||L(qe))return qe=ja(qe,et.mode,tt,null),qe.return=et,qe;if(typeof qe.then=="function")return _t(et,Gc(qe),tt);if(qe.$$typeof===m)return _t(et,Cc(et,qe),tt);Hc(et,qe)}return null}function ot(et,qe,tt,bt){var Ut=qe!==null?qe.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return Ut!==null?null:xe(et,qe,""+tt,bt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case h:return tt.key===Ut?Ne(et,qe,tt,bt):null;case b:return tt.key===Ut?nt(et,qe,tt,bt):null;case E:return Ut=tt._init,tt=Ut(tt._payload),ot(et,qe,tt,bt)}if(V(tt)||L(tt))return Ut!==null?null:gt(et,qe,tt,bt,null);if(typeof tt.then=="function")return ot(et,qe,Gc(tt),bt);if(tt.$$typeof===m)return ot(et,qe,Cc(et,tt),bt);Hc(et,tt)}return null}function ft(et,qe,tt,bt,Ut){if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return et=et.get(tt)||null,xe(qe,et,""+bt,Ut);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case h:return et=et.get(bt.key===null?tt:bt.key)||null,Ne(qe,et,bt,Ut);case b:return et=et.get(bt.key===null?tt:bt.key)||null,nt(qe,et,bt,Ut);case E:var or=bt._init;return bt=or(bt._payload),ft(et,qe,tt,bt,Ut)}if(V(bt)||L(bt))return et=et.get(tt)||null,gt(qe,et,bt,Ut,null);if(typeof bt.then=="function")return ft(et,qe,tt,Gc(bt),Ut);if(bt.$$typeof===m)return ft(et,qe,tt,Cc(qe,bt),Ut);Hc(qe,bt)}return null}function qt(et,qe,tt,bt){for(var Ut=null,or=null,Bt=qe,Wt=qe=0,Tn=null;Bt!==null&&Wt<tt.length;Wt++){Bt.index>Wt?(Tn=Bt,Bt=null):Tn=Bt.sibling;var _r=ot(et,Bt,tt[Wt],bt);if(_r===null){Bt===null&&(Bt=Tn);break}n&&Bt&&_r.alternate===null&&a(et,Bt),qe=Y(_r,qe,Wt),or===null?Ut=_r:or.sibling=_r,or=_r,Bt=Tn}if(Wt===tt.length)return y(et,Bt),wr&&Ca(et,Wt),Ut;if(Bt===null){for(;Wt<tt.length;Wt++)Bt=_t(et,tt[Wt],bt),Bt!==null&&(qe=Y(Bt,qe,Wt),or===null?Ut=Bt:or.sibling=Bt,or=Bt);return wr&&Ca(et,Wt),Ut}for(Bt=A(Bt);Wt<tt.length;Wt++)Tn=ft(Bt,et,Wt,tt[Wt],bt),Tn!==null&&(n&&Tn.alternate!==null&&Bt.delete(Tn.key===null?Wt:Tn.key),qe=Y(Tn,qe,Wt),or===null?Ut=Tn:or.sibling=Tn,or=Tn);return n&&Bt.forEach(function(la){return a(et,la)}),wr&&Ca(et,Wt),Ut}function Ht(et,qe,tt,bt){if(tt==null)throw Error(d(151));for(var Ut=null,or=null,Bt=qe,Wt=qe=0,Tn=null,_r=tt.next();Bt!==null&&!_r.done;Wt++,_r=tt.next()){Bt.index>Wt?(Tn=Bt,Bt=null):Tn=Bt.sibling;var la=ot(et,Bt,_r.value,bt);if(la===null){Bt===null&&(Bt=Tn);break}n&&Bt&&la.alternate===null&&a(et,Bt),qe=Y(la,qe,Wt),or===null?Ut=la:or.sibling=la,or=la,Bt=Tn}if(_r.done)return y(et,Bt),wr&&Ca(et,Wt),Ut;if(Bt===null){for(;!_r.done;Wt++,_r=tt.next())_r=_t(et,_r.value,bt),_r!==null&&(qe=Y(_r,qe,Wt),or===null?Ut=_r:or.sibling=_r,or=_r);return wr&&Ca(et,Wt),Ut}for(Bt=A(Bt);!_r.done;Wt++,_r=tt.next())_r=ft(Bt,et,Wt,_r.value,bt),_r!==null&&(n&&_r.alternate!==null&&Bt.delete(_r.key===null?Wt:_r.key),qe=Y(_r,qe,Wt),or===null?Ut=_r:or.sibling=_r,or=_r);return n&&Bt.forEach(function(k2){return a(et,k2)}),wr&&Ca(et,Wt),Ut}function Pr(et,qe,tt,bt){if(typeof tt=="object"&&tt!==null&&tt.type===w&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case h:e:{for(var Ut=tt.key;qe!==null;){if(qe.key===Ut){if(Ut=tt.type,Ut===w){if(qe.tag===7){y(et,qe.sibling),bt=B(qe,tt.props.children),bt.return=et,et=bt;break e}}else if(qe.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===E&&ov(Ut)===qe.type){y(et,qe.sibling),bt=B(qe,tt.props),eu(bt,tt),bt.return=et,et=bt;break e}y(et,qe);break}else a(et,qe);qe=qe.sibling}tt.type===w?(bt=ja(tt.props.children,et.mode,bt,tt.key),bt.return=et,et=bt):(bt=Tc(tt.type,tt.key,tt.props,null,et.mode,bt),eu(bt,tt),bt.return=et,et=bt)}return de(et);case b:e:{for(Ut=tt.key;qe!==null;){if(qe.key===Ut)if(qe.tag===4&&qe.stateNode.containerInfo===tt.containerInfo&&qe.stateNode.implementation===tt.implementation){y(et,qe.sibling),bt=B(qe,tt.children||[]),bt.return=et,et=bt;break e}else{y(et,qe);break}else a(et,qe);qe=qe.sibling}bt=Ld(tt,et.mode,bt),bt.return=et,et=bt}return de(et);case E:return Ut=tt._init,tt=Ut(tt._payload),Pr(et,qe,tt,bt)}if(V(tt))return qt(et,qe,tt,bt);if(L(tt)){if(Ut=L(tt),typeof Ut!="function")throw Error(d(150));return tt=Ut.call(tt),Ht(et,qe,tt,bt)}if(typeof tt.then=="function")return Pr(et,qe,Gc(tt),bt);if(tt.$$typeof===m)return Pr(et,qe,Cc(et,tt),bt);Hc(et,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint"?(tt=""+tt,qe!==null&&qe.tag===6?(y(et,qe.sibling),bt=B(qe,tt),bt.return=et,et=bt):(y(et,qe),bt=Dd(tt,et.mode,bt),bt.return=et,et=bt),de(et)):y(et,qe)}return function(et,qe,tt,bt){try{$l=0;var Ut=Pr(et,qe,tt,bt);return Lo=null,Ut}catch(Bt){if(Bt===Hl||Bt===Lc)throw Bt;var or=ti(29,Bt,null,et.mode);return or.lanes=bt,or.return=et,or}finally{}}}var Oo=lv(!0),uv=lv(!1),_i=Q(null),Zi=null;function qs(n){var a=n.alternate;ee(_n,_n.current&1),ee(_i,n),Zi===null&&(a===null||jo.current!==null||a.memoizedState!==null)&&(Zi=n)}function cv(n){if(n.tag===22){if(ee(_n,_n.current),ee(_i,n),Zi===null){var a=n.alternate;a!==null&&a.memoizedState!==null&&(Zi=n)}}else Ys()}function Ys(){ee(_n,_n.current),ee(_i,_i.current)}function ys(n){J(_i),Zi===n&&(Zi=null),J(_n)}var _n=Q(0);function Wc(n){for(var a=n;a!==null;){if(a.tag===13){var y=a.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||ep(y)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function fh(n,a,y,A){a=n.memoizedState,y=y(A,a),y=y==null?a:p({},a,y),n.memoizedState=y,n.lanes===0&&(n.updateQueue.baseState=y)}var dh={enqueueSetState:function(n,a,y){n=n._reactInternals;var A=si(),B=Hs(A);B.payload=a,y!=null&&(B.callback=y),a=Ws(n,B,A),a!==null&&(ai(a,n,A),Xl(a,n,A))},enqueueReplaceState:function(n,a,y){n=n._reactInternals;var A=si(),B=Hs(A);B.tag=1,B.payload=a,y!=null&&(B.callback=y),a=Ws(n,B,A),a!==null&&(ai(a,n,A),Xl(a,n,A))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var y=si(),A=Hs(y);A.tag=2,a!=null&&(A.callback=a),a=Ws(n,A,y),a!==null&&(ai(a,n,y),Xl(a,n,y))}};function fv(n,a,y,A,B,Y,de){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(A,Y,de):a.prototype&&a.prototype.isPureReactComponent?!ct(y,A)||!ct(B,Y):!0}function dv(n,a,y,A){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(y,A),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(y,A),a.state!==n&&dh.enqueueReplaceState(a,a.state,null)}function Ia(n,a){var y=a;if("ref"in a){y={};for(var A in a)A!=="ref"&&(y[A]=a[A])}if(n=n.defaultProps){y===a&&(y=p({},y));for(var B in n)y[B]===void 0&&(y[B]=n[B])}return y}var Xc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function hv(n){Xc(n)}function pv(n){console.error(n)}function mv(n){Xc(n)}function qc(n,a){try{var y=n.onUncaughtError;y(a.value,{componentStack:a.stack})}catch(A){setTimeout(function(){throw A})}}function yv(n,a,y){try{var A=n.onCaughtError;A(y.value,{componentStack:y.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(B){setTimeout(function(){throw B})}}function hh(n,a,y){return y=Hs(y),y.tag=3,y.payload={element:null},y.callback=function(){qc(n,a)},y}function gv(n){return n=Hs(n),n.tag=3,n}function vv(n,a,y,A){var B=y.type.getDerivedStateFromError;if(typeof B=="function"){var Y=A.value;n.payload=function(){return B(Y)},n.callback=function(){yv(a,y,A)}}var de=y.stateNode;de!==null&&typeof de.componentDidCatch=="function"&&(n.callback=function(){yv(a,y,A),typeof B!="function"&&(ea===null?ea=new Set([this]):ea.add(this));var xe=A.stack;this.componentDidCatch(A.value,{componentStack:xe!==null?xe:""})})}function kS(n,a,y,A,B){if(y.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){if(a=y.alternate,a!==null&&zl(a,y,B,!0),y=_i.current,y!==null){switch(y.tag){case 13:return Zi===null?Ih():y.alternate===null&&tn===0&&(tn=3),y.flags&=-257,y.flags|=65536,y.lanes=B,A===Vd?y.flags|=16384:(a=y.updateQueue,a===null?y.updateQueue=new Set([A]):a.add(A),Fh(n,A,B)),!1;case 22:return y.flags|=65536,A===Vd?y.flags|=16384:(a=y.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([A])},y.updateQueue=a):(y=a.retryQueue,y===null?a.retryQueue=new Set([A]):y.add(A)),Fh(n,A,B)),!1}throw Error(d(435,y.tag))}return Fh(n,A,B),Ih(),!1}if(wr)return a=_i.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=B,A!==Ud&&(n=Error(d(422),{cause:A}),Bl(yi(n,y)))):(A!==Ud&&(a=Error(d(423),{cause:A}),Bl(yi(a,y))),n=n.current.alternate,n.flags|=65536,B&=-B,n.lanes|=B,A=yi(A,y),B=hh(n.stateNode,A,B),Wd(n,B),tn!==4&&(tn=2)),!1;var Y=Error(d(520),{cause:A});if(Y=yi(Y,y),ou===null?ou=[Y]:ou.push(Y),tn!==4&&(tn=2),a===null)return!0;A=yi(A,y),y=a;do{switch(y.tag){case 3:return y.flags|=65536,n=B&-B,y.lanes|=n,n=hh(y.stateNode,A,n),Wd(y,n),!1;case 1:if(a=y.type,Y=y.stateNode,(y.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(ea===null||!ea.has(Y))))return y.flags|=65536,B&=-B,y.lanes|=B,B=gv(B),vv(B,n,y,A),Wd(y,B),!1}y=y.return}while(y!==null);return!1}var bv=Error(d(461)),Mn=!1;function jn(n,a,y,A){a.child=n===null?uv(a,null,y,A):Oo(a,n.child,y,A)}function _v(n,a,y,A,B){y=y.render;var Y=a.ref;if("ref"in A){var de={};for(var xe in A)xe!=="ref"&&(de[xe]=A[xe])}else de=A;return Pa(a),A=Kd(n,a,y,de,Y,B),xe=Qd(),n!==null&&!Mn?(Jd(n,a,B),gs(n,a,B)):(wr&&xe&&Od(a),a.flags|=1,jn(n,a,A,B),a.child)}function xv(n,a,y,A,B){if(n===null){var Y=y.type;return typeof Y=="function"&&!Cd(Y)&&Y.defaultProps===void 0&&y.compare===null?(a.tag=15,a.type=Y,Sv(n,a,Y,A,B)):(n=Tc(y.type,null,A,a,a.mode,B),n.ref=a.ref,n.return=a,a.child=n)}if(Y=n.child,!xh(n,B)){var de=Y.memoizedProps;if(y=y.compare,y=y!==null?y:ct,y(de,A)&&n.ref===a.ref)return gs(n,a,B)}return a.flags|=1,n=cs(Y,A),n.ref=a.ref,n.return=a,a.child=n}function Sv(n,a,y,A,B){if(n!==null){var Y=n.memoizedProps;if(ct(Y,A)&&n.ref===a.ref)if(Mn=!1,a.pendingProps=A=Y,xh(n,B))(n.flags&131072)!==0&&(Mn=!0);else return a.lanes=n.lanes,gs(n,a,B)}return ph(n,a,y,A,B)}function wv(n,a,y){var A=a.pendingProps,B=A.children,Y=n!==null?n.memoizedState:null;if(A.mode==="hidden"){if((a.flags&128)!==0){if(A=Y!==null?Y.baseLanes|y:y,n!==null){for(B=a.child=n.child,Y=0;B!==null;)Y=Y|B.lanes|B.childLanes,B=B.sibling;a.childLanes=Y&~A}else a.childLanes=0,a.child=null;return Mv(n,a,A,y)}if((y&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&Dc(a,Y!==null?Y.cachePool:null),Y!==null?Sg(a,Y):qd(),cv(a);else return a.lanes=a.childLanes=536870912,Mv(n,a,Y!==null?Y.baseLanes|y:y,y)}else Y!==null?(Dc(a,Y.cachePool),Sg(a,Y),Ys(),a.memoizedState=null):(n!==null&&Dc(a,null),qd(),Ys());return jn(n,a,B,y),a.child}function Mv(n,a,y,A){var B=zd();return B=B===null?null:{parent:bn._currentValue,pool:B},a.memoizedState={baseLanes:y,cachePool:B},n!==null&&Dc(a,null),qd(),cv(a),n!==null&&zl(n,a,A,!0),null}function Yc(n,a){var y=a.ref;if(y===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(d(284));(n===null||n.ref!==y)&&(a.flags|=4194816)}}function ph(n,a,y,A,B){return Pa(a),y=Kd(n,a,y,A,void 0,B),A=Qd(),n!==null&&!Mn?(Jd(n,a,B),gs(n,a,B)):(wr&&A&&Od(a),a.flags|=1,jn(n,a,y,B),a.child)}function Ev(n,a,y,A,B,Y){return Pa(a),a.updateQueue=null,y=Mg(a,A,y,B),wg(n),A=Qd(),n!==null&&!Mn?(Jd(n,a,Y),gs(n,a,Y)):(wr&&A&&Od(a),a.flags|=1,jn(n,a,y,Y),a.child)}function Tv(n,a,y,A,B){if(Pa(a),a.stateNode===null){var Y=wo,de=y.contextType;typeof de=="object"&&de!==null&&(Y=On(de)),Y=new y(A,Y),a.memoizedState=Y.state!==null&&Y.state!==void 0?Y.state:null,Y.updater=dh,a.stateNode=Y,Y._reactInternals=a,Y=a.stateNode,Y.props=A,Y.state=a.memoizedState,Y.refs={},Gd(a),de=y.contextType,Y.context=typeof de=="object"&&de!==null?On(de):wo,Y.state=a.memoizedState,de=y.getDerivedStateFromProps,typeof de=="function"&&(fh(a,y,de,A),Y.state=a.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof Y.getSnapshotBeforeUpdate=="function"||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(de=Y.state,typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount(),de!==Y.state&&dh.enqueueReplaceState(Y,Y.state,null),Yl(a,A,Y,B),ql(),Y.state=a.memoizedState),typeof Y.componentDidMount=="function"&&(a.flags|=4194308),A=!0}else if(n===null){Y=a.stateNode;var xe=a.memoizedProps,Ne=Ia(y,xe);Y.props=Ne;var nt=Y.context,gt=y.contextType;de=wo,typeof gt=="object"&&gt!==null&&(de=On(gt));var _t=y.getDerivedStateFromProps;gt=typeof _t=="function"||typeof Y.getSnapshotBeforeUpdate=="function",xe=a.pendingProps!==xe,gt||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(xe||nt!==de)&&dv(a,Y,A,de),Gs=!1;var ot=a.memoizedState;Y.state=ot,Yl(a,A,Y,B),ql(),nt=a.memoizedState,xe||ot!==nt||Gs?(typeof _t=="function"&&(fh(a,y,_t,A),nt=a.memoizedState),(Ne=Gs||fv(a,y,Ne,A,ot,nt,de))?(gt||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=A,a.memoizedState=nt),Y.props=A,Y.state=nt,Y.context=de,A=Ne):(typeof Y.componentDidMount=="function"&&(a.flags|=4194308),A=!1)}else{Y=a.stateNode,Hd(n,a),de=a.memoizedProps,gt=Ia(y,de),Y.props=gt,_t=a.pendingProps,ot=Y.context,nt=y.contextType,Ne=wo,typeof nt=="object"&&nt!==null&&(Ne=On(nt)),xe=y.getDerivedStateFromProps,(nt=typeof xe=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(de!==_t||ot!==Ne)&&dv(a,Y,A,Ne),Gs=!1,ot=a.memoizedState,Y.state=ot,Yl(a,A,Y,B),ql();var ft=a.memoizedState;de!==_t||ot!==ft||Gs||n!==null&&n.dependencies!==null&&Rc(n.dependencies)?(typeof xe=="function"&&(fh(a,y,xe,A),ft=a.memoizedState),(gt=Gs||fv(a,y,gt,A,ot,ft,Ne)||n!==null&&n.dependencies!==null&&Rc(n.dependencies))?(nt||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(A,ft,Ne),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(A,ft,Ne)),typeof Y.componentDidUpdate=="function"&&(a.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof Y.componentDidUpdate!="function"||de===n.memoizedProps&&ot===n.memoizedState||(a.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||de===n.memoizedProps&&ot===n.memoizedState||(a.flags|=1024),a.memoizedProps=A,a.memoizedState=ft),Y.props=A,Y.state=ft,Y.context=Ne,A=gt):(typeof Y.componentDidUpdate!="function"||de===n.memoizedProps&&ot===n.memoizedState||(a.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||de===n.memoizedProps&&ot===n.memoizedState||(a.flags|=1024),A=!1)}return Y=A,Yc(n,a),A=(a.flags&128)!==0,Y||A?(Y=a.stateNode,y=A&&typeof y.getDerivedStateFromError!="function"?null:Y.render(),a.flags|=1,n!==null&&A?(a.child=Oo(a,n.child,null,B),a.child=Oo(a,null,y,B)):jn(n,a,y,B),a.memoizedState=Y.state,n=a.child):n=gs(n,a,B),n}function Av(n,a,y,A){return Fl(),a.flags|=256,jn(n,a,y,A),a.child}var mh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yh(n){return{baseLanes:n,cachePool:pg()}}function gh(n,a,y){return n=n!==null?n.childLanes&~y:0,a&&(n|=xi),n}function jv(n,a,y){var A=a.pendingProps,B=!1,Y=(a.flags&128)!==0,de;if((de=Y)||(de=n!==null&&n.memoizedState===null?!1:(_n.current&2)!==0),de&&(B=!0,a.flags&=-129),de=(a.flags&32)!==0,a.flags&=-33,n===null){if(wr){if(B?qs(a):Ys(),wr){var xe=en,Ne;if(Ne=xe){e:{for(Ne=xe,xe=Yi;Ne.nodeType!==8;){if(!xe){xe=null;break e}if(Ne=Ni(Ne.nextSibling),Ne===null){xe=null;break e}}xe=Ne}xe!==null?(a.memoizedState={dehydrated:xe,treeContext:Ra!==null?{id:fs,overflow:ds}:null,retryLane:536870912,hydrationErrors:null},Ne=ti(18,null,null,0),Ne.stateNode=xe,Ne.return=a,a.child=Ne,Fn=a,en=null,Ne=!0):Ne=!1}Ne||La(a)}if(xe=a.memoizedState,xe!==null&&(xe=xe.dehydrated,xe!==null))return ep(xe)?a.lanes=32:a.lanes=536870912,null;ys(a)}return xe=A.children,A=A.fallback,B?(Ys(),B=a.mode,xe=Zc({mode:"hidden",children:xe},B),A=ja(A,B,y,null),xe.return=a,A.return=a,xe.sibling=A,a.child=xe,B=a.child,B.memoizedState=yh(y),B.childLanes=gh(n,de,y),a.memoizedState=mh,A):(qs(a),vh(a,xe))}if(Ne=n.memoizedState,Ne!==null&&(xe=Ne.dehydrated,xe!==null)){if(Y)a.flags&256?(qs(a),a.flags&=-257,a=bh(n,a,y)):a.memoizedState!==null?(Ys(),a.child=n.child,a.flags|=128,a=null):(Ys(),B=A.fallback,xe=a.mode,A=Zc({mode:"visible",children:A.children},xe),B=ja(B,xe,y,null),B.flags|=2,A.return=a,B.return=a,A.sibling=B,a.child=A,Oo(a,n.child,null,y),A=a.child,A.memoizedState=yh(y),A.childLanes=gh(n,de,y),a.memoizedState=mh,a=B);else if(qs(a),ep(xe)){if(de=xe.nextSibling&&xe.nextSibling.dataset,de)var nt=de.dgst;de=nt,A=Error(d(419)),A.stack="",A.digest=de,Bl({value:A,source:null,stack:null}),a=bh(n,a,y)}else if(Mn||zl(n,a,y,!1),de=(y&n.childLanes)!==0,Mn||de){if(de=Gr,de!==null&&(A=y&-y,A=(A&42)!==0?1:wt(A),A=(A&(de.suspendedLanes|y))!==0?0:A,A!==0&&A!==Ne.retryLane))throw Ne.retryLane=A,So(n,A),ai(de,n,A),bv;xe.data==="$?"||Ih(),a=bh(n,a,y)}else xe.data==="$?"?(a.flags|=192,a.child=n.child,a=null):(n=Ne.treeContext,en=Ni(xe.nextSibling),Fn=a,wr=!0,Da=null,Yi=!1,n!==null&&(vi[bi++]=fs,vi[bi++]=ds,vi[bi++]=Ra,fs=n.id,ds=n.overflow,Ra=a),a=vh(a,A.children),a.flags|=4096);return a}return B?(Ys(),B=A.fallback,xe=a.mode,Ne=n.child,nt=Ne.sibling,A=cs(Ne,{mode:"hidden",children:A.children}),A.subtreeFlags=Ne.subtreeFlags&65011712,nt!==null?B=cs(nt,B):(B=ja(B,xe,y,null),B.flags|=2),B.return=a,A.return=a,A.sibling=B,a.child=A,A=B,B=a.child,xe=n.child.memoizedState,xe===null?xe=yh(y):(Ne=xe.cachePool,Ne!==null?(nt=bn._currentValue,Ne=Ne.parent!==nt?{parent:nt,pool:nt}:Ne):Ne=pg(),xe={baseLanes:xe.baseLanes|y,cachePool:Ne}),B.memoizedState=xe,B.childLanes=gh(n,de,y),a.memoizedState=mh,A):(qs(a),y=n.child,n=y.sibling,y=cs(y,{mode:"visible",children:A.children}),y.return=a,y.sibling=null,n!==null&&(de=a.deletions,de===null?(a.deletions=[n],a.flags|=16):de.push(n)),a.child=y,a.memoizedState=null,y)}function vh(n,a){return a=Zc({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function Zc(n,a){return n=ti(22,n,null,a),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function bh(n,a,y){return Oo(a,n.child,null,y),n=vh(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function Rv(n,a,y){n.lanes|=a;var A=n.alternate;A!==null&&(A.lanes|=a),Id(n.return,a,y)}function _h(n,a,y,A,B){var Y=n.memoizedState;Y===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:A,tail:y,tailMode:B}:(Y.isBackwards=a,Y.rendering=null,Y.renderingStartTime=0,Y.last=A,Y.tail=y,Y.tailMode=B)}function Cv(n,a,y){var A=a.pendingProps,B=A.revealOrder,Y=A.tail;if(jn(n,a,A.children,y),A=_n.current,(A&2)!==0)A=A&1|2,a.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Rv(n,y,a);else if(n.tag===19)Rv(n,y,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}A&=1}switch(ee(_n,A),B){case"forwards":for(y=a.child,B=null;y!==null;)n=y.alternate,n!==null&&Wc(n)===null&&(B=y),y=y.sibling;y=B,y===null?(B=a.child,a.child=null):(B=y.sibling,y.sibling=null),_h(a,!1,B,y,Y);break;case"backwards":for(y=null,B=a.child,a.child=null;B!==null;){if(n=B.alternate,n!==null&&Wc(n)===null){a.child=B;break}n=B.sibling,B.sibling=y,y=B,B=n}_h(a,!0,y,null,Y);break;case"together":_h(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function gs(n,a,y){if(n!==null&&(a.dependencies=n.dependencies),$s|=a.lanes,(y&a.childLanes)===0)if(n!==null){if(zl(n,a,y,!1),(y&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(d(153));if(a.child!==null){for(n=a.child,y=cs(n,n.pendingProps),a.child=y,y.return=a;n.sibling!==null;)n=n.sibling,y=y.sibling=cs(n,n.pendingProps),y.return=a;y.sibling=null}return a.child}function xh(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&Rc(n)))}function FS(n,a,y){switch(a.tag){case 3:Z(a,a.stateNode.containerInfo),Vs(a,bn,n.memoizedState.cache),Fl();break;case 27:case 5:pe(a);break;case 4:Z(a,a.stateNode.containerInfo);break;case 10:Vs(a,a.type,a.memoizedProps.value);break;case 13:var A=a.memoizedState;if(A!==null)return A.dehydrated!==null?(qs(a),a.flags|=128,null):(y&a.child.childLanes)!==0?jv(n,a,y):(qs(a),n=gs(n,a,y),n!==null?n.sibling:null);qs(a);break;case 19:var B=(n.flags&128)!==0;if(A=(y&a.childLanes)!==0,A||(zl(n,a,y,!1),A=(y&a.childLanes)!==0),B){if(A)return Cv(n,a,y);a.flags|=128}if(B=a.memoizedState,B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),ee(_n,_n.current),A)break;return null;case 22:case 23:return a.lanes=0,wv(n,a,y);case 24:Vs(a,bn,n.memoizedState.cache)}return gs(n,a,y)}function Dv(n,a,y){if(n!==null)if(n.memoizedProps!==a.pendingProps)Mn=!0;else{if(!xh(n,y)&&(a.flags&128)===0)return Mn=!1,FS(n,a,y);Mn=(n.flags&131072)!==0}else Mn=!1,wr&&(a.flags&1048576)!==0&&og(a,jc,a.index);switch(a.lanes=0,a.tag){case 16:e:{n=a.pendingProps;var A=a.elementType,B=A._init;if(A=B(A._payload),a.type=A,typeof A=="function")Cd(A)?(n=Ia(A,n),a.tag=1,a=Tv(null,a,A,n,y)):(a.tag=0,a=ph(null,a,A,n,y));else{if(A!=null){if(B=A.$$typeof,B===g){a.tag=11,a=_v(null,a,A,n,y);break e}else if(B===x){a.tag=14,a=xv(null,a,A,n,y);break e}}throw a=N(A)||A,Error(d(306,a,""))}}return a;case 0:return ph(n,a,a.type,a.pendingProps,y);case 1:return A=a.type,B=Ia(A,a.pendingProps),Tv(n,a,A,B,y);case 3:e:{if(Z(a,a.stateNode.containerInfo),n===null)throw Error(d(387));A=a.pendingProps;var Y=a.memoizedState;B=Y.element,Hd(n,a),Yl(a,A,null,y);var de=a.memoizedState;if(A=de.cache,Vs(a,bn,A),A!==Y.cache&&kd(a,[bn],y,!0),ql(),A=de.element,Y.isDehydrated)if(Y={element:A,isDehydrated:!1,cache:de.cache},a.updateQueue.baseState=Y,a.memoizedState=Y,a.flags&256){a=Av(n,a,A,y);break e}else if(A!==B){B=yi(Error(d(424)),a),Bl(B),a=Av(n,a,A,y);break e}else{switch(n=a.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(en=Ni(n.firstChild),Fn=a,wr=!0,Da=null,Yi=!0,y=uv(a,null,A,y),a.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(Fl(),A===B){a=gs(n,a,y);break e}jn(n,a,A,y)}a=a.child}return a;case 26:return Yc(n,a),n===null?(y=U0(a.type,null,a.pendingProps,null))?a.memoizedState=y:wr||(y=a.type,n=a.pendingProps,A=cf(ce.current).createElement(y),A[Gt]=a,A[Kt]=n,Cn(A,y,n),Hr(A),a.stateNode=A):a.memoizedState=U0(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return pe(a),n===null&&wr&&(A=a.stateNode=L0(a.type,a.pendingProps,ce.current),Fn=a,Yi=!0,B=en,na(a.type)?(tp=B,en=Ni(A.firstChild)):en=B),jn(n,a,a.pendingProps.children,y),Yc(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&wr&&((B=A=en)&&(A=h2(A,a.type,a.pendingProps,Yi),A!==null?(a.stateNode=A,Fn=a,en=Ni(A.firstChild),Yi=!1,B=!0):B=!1),B||La(a)),pe(a),B=a.type,Y=a.pendingProps,de=n!==null?n.memoizedProps:null,A=Y.children,Qh(B,Y)?A=null:de!==null&&Qh(B,de)&&(a.flags|=32),a.memoizedState!==null&&(B=Kd(n,a,DS,null,null,y),yu._currentValue=B),Yc(n,a),jn(n,a,A,y),a.child;case 6:return n===null&&wr&&((n=y=en)&&(y=p2(y,a.pendingProps,Yi),y!==null?(a.stateNode=y,Fn=a,en=null,n=!0):n=!1),n||La(a)),null;case 13:return jv(n,a,y);case 4:return Z(a,a.stateNode.containerInfo),A=a.pendingProps,n===null?a.child=Oo(a,null,A,y):jn(n,a,A,y),a.child;case 11:return _v(n,a,a.type,a.pendingProps,y);case 7:return jn(n,a,a.pendingProps,y),a.child;case 8:return jn(n,a,a.pendingProps.children,y),a.child;case 12:return jn(n,a,a.pendingProps.children,y),a.child;case 10:return A=a.pendingProps,Vs(a,a.type,A.value),jn(n,a,A.children,y),a.child;case 9:return B=a.type._context,A=a.pendingProps.children,Pa(a),B=On(B),A=A(B),a.flags|=1,jn(n,a,A,y),a.child;case 14:return xv(n,a,a.type,a.pendingProps,y);case 15:return Sv(n,a,a.type,a.pendingProps,y);case 19:return Cv(n,a,y);case 31:return A=a.pendingProps,y=a.mode,A={mode:A.mode,children:A.children},n===null?(y=Zc(A,y),y.ref=a.ref,a.child=y,y.return=a,a=y):(y=cs(n.child,A),y.ref=a.ref,a.child=y,y.return=a,a=y),a;case 22:return wv(n,a,y);case 24:return Pa(a),A=On(bn),n===null?(B=zd(),B===null&&(B=Gr,Y=Fd(),B.pooledCache=Y,Y.refCount++,Y!==null&&(B.pooledCacheLanes|=y),B=Y),a.memoizedState={parent:A,cache:B},Gd(a),Vs(a,bn,B)):((n.lanes&y)!==0&&(Hd(n,a),Yl(a,null,null,y),ql()),B=n.memoizedState,Y=a.memoizedState,B.parent!==A?(B={parent:A,cache:A},a.memoizedState=B,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=B),Vs(a,bn,A)):(A=Y.cache,Vs(a,bn,A),A!==B.cache&&kd(a,[bn],y,!0))),jn(n,a,a.pendingProps.children,y),a.child;case 29:throw a.pendingProps}throw Error(d(156,a.tag))}function vs(n){n.flags|=4}function Lv(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!B0(a)){if(a=_i.current,a!==null&&((yr&4194048)===yr?Zi!==null:(yr&62914560)!==yr&&(yr&536870912)===0||a!==Zi))throw Wl=Vd,mg;n.flags|=8192}}function Kc(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?ke():536870912,n.lanes|=a,Io|=a)}function tu(n,a){if(!wr)switch(n.tailMode){case"hidden":a=n.tail;for(var y=null;a!==null;)a.alternate!==null&&(y=a),a=a.sibling;y===null?n.tail=null:y.sibling=null;break;case"collapsed":y=n.tail;for(var A=null;y!==null;)y.alternate!==null&&(A=y),y=y.sibling;A===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:A.sibling=null}}function Kr(n){var a=n.alternate!==null&&n.alternate.child===n.child,y=0,A=0;if(a)for(var B=n.child;B!==null;)y|=B.lanes|B.childLanes,A|=B.subtreeFlags&65011712,A|=B.flags&65011712,B.return=n,B=B.sibling;else for(B=n.child;B!==null;)y|=B.lanes|B.childLanes,A|=B.subtreeFlags,A|=B.flags,B.return=n,B=B.sibling;return n.subtreeFlags|=A,n.childLanes=y,a}function BS(n,a,y){var A=a.pendingProps;switch(Pd(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kr(a),null;case 1:return Kr(a),null;case 3:return y=a.stateNode,A=null,n!==null&&(A=n.memoizedState.cache),a.memoizedState.cache!==A&&(a.flags|=2048),ps(bn),ie(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(n===null||n.child===null)&&(kl(a)?vs(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,cg())),Kr(a),null;case 26:return y=a.memoizedState,n===null?(vs(a),y!==null?(Kr(a),Lv(a,y)):(Kr(a),a.flags&=-16777217)):y?y!==n.memoizedState?(vs(a),Kr(a),Lv(a,y)):(Kr(a),a.flags&=-16777217):(n.memoizedProps!==A&&vs(a),Kr(a),a.flags&=-16777217),null;case 27:ge(a),y=ce.current;var B=a.type;if(n!==null&&a.stateNode!=null)n.memoizedProps!==A&&vs(a);else{if(!A){if(a.stateNode===null)throw Error(d(166));return Kr(a),null}n=te.current,kl(a)?lg(a):(n=L0(B,A,y),a.stateNode=n,vs(a))}return Kr(a),null;case 5:if(ge(a),y=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==A&&vs(a);else{if(!A){if(a.stateNode===null)throw Error(d(166));return Kr(a),null}if(n=te.current,kl(a))lg(a);else{switch(B=cf(ce.current),n){case 1:n=B.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:n=B.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":n=B.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":n=B.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":n=B.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof A.is=="string"?B.createElement("select",{is:A.is}):B.createElement("select"),A.multiple?n.multiple=!0:A.size&&(n.size=A.size);break;default:n=typeof A.is=="string"?B.createElement(y,{is:A.is}):B.createElement(y)}}n[Gt]=a,n[Kt]=A;e:for(B=a.child;B!==null;){if(B.tag===5||B.tag===6)n.appendChild(B.stateNode);else if(B.tag!==4&&B.tag!==27&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===a)break e;for(;B.sibling===null;){if(B.return===null||B.return===a)break e;B=B.return}B.sibling.return=B.return,B=B.sibling}a.stateNode=n;e:switch(Cn(n,y,A),y){case"button":case"input":case"select":case"textarea":n=!!A.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&vs(a)}}return Kr(a),a.flags&=-16777217,null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==A&&vs(a);else{if(typeof A!="string"&&a.stateNode===null)throw Error(d(166));if(n=ce.current,kl(a)){if(n=a.stateNode,y=a.memoizedProps,A=null,B=Fn,B!==null)switch(B.tag){case 27:case 5:A=B.memoizedProps}n[Gt]=a,n=!!(n.nodeValue===y||A!==null&&A.suppressHydrationWarning===!0||E0(n.nodeValue,y)),n||La(a)}else n=cf(n).createTextNode(A),n[Gt]=a,a.stateNode=n}return Kr(a),null;case 13:if(A=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(B=kl(a),A!==null&&A.dehydrated!==null){if(n===null){if(!B)throw Error(d(318));if(B=a.memoizedState,B=B!==null?B.dehydrated:null,!B)throw Error(d(317));B[Gt]=a}else Fl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Kr(a),B=!1}else B=cg(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=B),B=!0;if(!B)return a.flags&256?(ys(a),a):(ys(a),null)}if(ys(a),(a.flags&128)!==0)return a.lanes=y,a;if(y=A!==null,n=n!==null&&n.memoizedState!==null,y){A=a.child,B=null,A.alternate!==null&&A.alternate.memoizedState!==null&&A.alternate.memoizedState.cachePool!==null&&(B=A.alternate.memoizedState.cachePool.pool);var Y=null;A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(Y=A.memoizedState.cachePool.pool),Y!==B&&(A.flags|=2048)}return y!==n&&y&&(a.child.flags|=8192),Kc(a,a.updateQueue),Kr(a),null;case 4:return ie(),n===null&&Xh(a.stateNode.containerInfo),Kr(a),null;case 10:return ps(a.type),Kr(a),null;case 19:if(J(_n),B=a.memoizedState,B===null)return Kr(a),null;if(A=(a.flags&128)!==0,Y=B.rendering,Y===null)if(A)tu(B,!1);else{if(tn!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(Y=Wc(n),Y!==null){for(a.flags|=128,tu(B,!1),n=Y.updateQueue,a.updateQueue=n,Kc(a,n),a.subtreeFlags=0,n=y,y=a.child;y!==null;)ag(y,n),y=y.sibling;return ee(_n,_n.current&1|2),a.child}n=n.sibling}B.tail!==null&&Me()>$c&&(a.flags|=128,A=!0,tu(B,!1),a.lanes=4194304)}else{if(!A)if(n=Wc(Y),n!==null){if(a.flags|=128,A=!0,n=n.updateQueue,a.updateQueue=n,Kc(a,n),tu(B,!0),B.tail===null&&B.tailMode==="hidden"&&!Y.alternate&&!wr)return Kr(a),null}else 2*Me()-B.renderingStartTime>$c&&y!==536870912&&(a.flags|=128,A=!0,tu(B,!1),a.lanes=4194304);B.isBackwards?(Y.sibling=a.child,a.child=Y):(n=B.last,n!==null?n.sibling=Y:a.child=Y,B.last=Y)}return B.tail!==null?(a=B.tail,B.rendering=a,B.tail=a.sibling,B.renderingStartTime=Me(),a.sibling=null,n=_n.current,ee(_n,A?n&1|2:n&1),a):(Kr(a),null);case 22:case 23:return ys(a),Yd(),A=a.memoizedState!==null,n!==null?n.memoizedState!==null!==A&&(a.flags|=8192):A&&(a.flags|=8192),A?(y&536870912)!==0&&(a.flags&128)===0&&(Kr(a),a.subtreeFlags&6&&(a.flags|=8192)):Kr(a),y=a.updateQueue,y!==null&&Kc(a,y.retryQueue),y=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(y=n.memoizedState.cachePool.pool),A=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(A=a.memoizedState.cachePool.pool),A!==y&&(a.flags|=2048),n!==null&&J(Ua),null;case 24:return y=null,n!==null&&(y=n.memoizedState.cache),a.memoizedState.cache!==y&&(a.flags|=2048),ps(bn),Kr(a),null;case 25:return null;case 30:return null}throw Error(d(156,a.tag))}function zS(n,a){switch(Pd(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return ps(bn),ie(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return ge(a),null;case 13:if(ys(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(d(340));Fl()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return J(_n),null;case 4:return ie(),null;case 10:return ps(a.type),null;case 22:case 23:return ys(a),Yd(),n!==null&&J(Ua),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return ps(bn),null;case 25:return null;default:return null}}function Ov(n,a){switch(Pd(a),a.tag){case 3:ps(bn),ie();break;case 26:case 27:case 5:ge(a);break;case 4:ie();break;case 13:ys(a);break;case 19:J(_n);break;case 10:ps(a.type);break;case 22:case 23:ys(a),Yd(),n!==null&&J(Ua);break;case 24:ps(bn)}}function ru(n,a){try{var y=a.updateQueue,A=y!==null?y.lastEffect:null;if(A!==null){var B=A.next;y=B;do{if((y.tag&n)===n){A=void 0;var Y=y.create,de=y.inst;A=Y(),de.destroy=A}y=y.next}while(y!==B)}}catch(xe){Br(a,a.return,xe)}}function Zs(n,a,y){try{var A=a.updateQueue,B=A!==null?A.lastEffect:null;if(B!==null){var Y=B.next;A=Y;do{if((A.tag&n)===n){var de=A.inst,xe=de.destroy;if(xe!==void 0){de.destroy=void 0,B=a;var Ne=y,nt=xe;try{nt()}catch(gt){Br(B,Ne,gt)}}}A=A.next}while(A!==Y)}}catch(gt){Br(a,a.return,gt)}}function Pv(n){var a=n.updateQueue;if(a!==null){var y=n.stateNode;try{xg(a,y)}catch(A){Br(n,n.return,A)}}}function Uv(n,a,y){y.props=Ia(n.type,n.memoizedProps),y.state=n.memoizedState;try{y.componentWillUnmount()}catch(A){Br(n,a,A)}}function nu(n,a){try{var y=n.ref;if(y!==null){switch(n.tag){case 26:case 27:case 5:var A=n.stateNode;break;case 30:A=n.stateNode;break;default:A=n.stateNode}typeof y=="function"?n.refCleanup=y(A):y.current=A}}catch(B){Br(n,a,B)}}function Ki(n,a){var y=n.ref,A=n.refCleanup;if(y!==null)if(typeof A=="function")try{A()}catch(B){Br(n,a,B)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(B){Br(n,a,B)}else y.current=null}function Nv(n){var a=n.type,y=n.memoizedProps,A=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":y.autoFocus&&A.focus();break e;case"img":y.src?A.src=y.src:y.srcSet&&(A.srcset=y.srcSet)}}catch(B){Br(n,n.return,B)}}function Sh(n,a,y){try{var A=n.stateNode;l2(A,n.type,y,a),A[Kt]=a}catch(B){Br(n,n.return,B)}}function Iv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&na(n.type)||n.tag===4}function wh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Iv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&na(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Mh(n,a,y){var A=n.tag;if(A===5||A===6)n=n.stateNode,a?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(n,a):(a=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,a.appendChild(n),y=y._reactRootContainer,y!=null||a.onclick!==null||(a.onclick=uf));else if(A!==4&&(A===27&&na(n.type)&&(y=n.stateNode,a=null),n=n.child,n!==null))for(Mh(n,a,y),n=n.sibling;n!==null;)Mh(n,a,y),n=n.sibling}function Qc(n,a,y){var A=n.tag;if(A===5||A===6)n=n.stateNode,a?y.insertBefore(n,a):y.appendChild(n);else if(A!==4&&(A===27&&na(n.type)&&(y=n.stateNode),n=n.child,n!==null))for(Qc(n,a,y),n=n.sibling;n!==null;)Qc(n,a,y),n=n.sibling}function kv(n){var a=n.stateNode,y=n.memoizedProps;try{for(var A=n.type,B=a.attributes;B.length;)a.removeAttributeNode(B[0]);Cn(a,A,y),a[Gt]=n,a[Kt]=y}catch(Y){Br(n,n.return,Y)}}var bs=!1,un=!1,Eh=!1,Fv=typeof WeakSet=="function"?WeakSet:Set,En=null;function VS(n,a){if(n=n.containerInfo,Zh=yf,n=jt(n),Jt(n)){if("selectionStart"in n)var y={start:n.selectionStart,end:n.selectionEnd};else e:{y=(y=n.ownerDocument)&&y.defaultView||window;var A=y.getSelection&&y.getSelection();if(A&&A.rangeCount!==0){y=A.anchorNode;var B=A.anchorOffset,Y=A.focusNode;A=A.focusOffset;try{y.nodeType,Y.nodeType}catch{y=null;break e}var de=0,xe=-1,Ne=-1,nt=0,gt=0,_t=n,ot=null;t:for(;;){for(var ft;_t!==y||B!==0&&_t.nodeType!==3||(xe=de+B),_t!==Y||A!==0&&_t.nodeType!==3||(Ne=de+A),_t.nodeType===3&&(de+=_t.nodeValue.length),(ft=_t.firstChild)!==null;)ot=_t,_t=ft;for(;;){if(_t===n)break t;if(ot===y&&++nt===B&&(xe=de),ot===Y&&++gt===A&&(Ne=de),(ft=_t.nextSibling)!==null)break;_t=ot,ot=_t.parentNode}_t=ft}y=xe===-1||Ne===-1?null:{start:xe,end:Ne}}else y=null}y=y||{start:0,end:0}}else y=null;for(Kh={focusedElem:n,selectionRange:y},yf=!1,En=a;En!==null;)if(a=En,n=a.child,(a.subtreeFlags&1024)!==0&&n!==null)n.return=a,En=n;else for(;En!==null;){switch(a=En,Y=a.alternate,n=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&Y!==null){n=void 0,y=a,B=Y.memoizedProps,Y=Y.memoizedState,A=y.stateNode;try{var qt=Ia(y.type,B,y.elementType===y.type);n=A.getSnapshotBeforeUpdate(qt,Y),A.__reactInternalSnapshotBeforeUpdate=n}catch(Ht){Br(y,y.return,Ht)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,y=n.nodeType,y===9)$h(n);else if(y===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":$h(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(d(163))}if(n=a.sibling,n!==null){n.return=a.return,En=n;break}En=a.return}}function Bv(n,a,y){var A=y.flags;switch(y.tag){case 0:case 11:case 15:Ks(n,y),A&4&&ru(5,y);break;case 1:if(Ks(n,y),A&4)if(n=y.stateNode,a===null)try{n.componentDidMount()}catch(de){Br(y,y.return,de)}else{var B=Ia(y.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(B,a,n.__reactInternalSnapshotBeforeUpdate)}catch(de){Br(y,y.return,de)}}A&64&&Pv(y),A&512&&nu(y,y.return);break;case 3:if(Ks(n,y),A&64&&(n=y.updateQueue,n!==null)){if(a=null,y.child!==null)switch(y.child.tag){case 27:case 5:a=y.child.stateNode;break;case 1:a=y.child.stateNode}try{xg(n,a)}catch(de){Br(y,y.return,de)}}break;case 27:a===null&&A&4&&kv(y);case 26:case 5:Ks(n,y),a===null&&A&4&&Nv(y),A&512&&nu(y,y.return);break;case 12:Ks(n,y);break;case 13:Ks(n,y),A&4&&Gv(n,y),A&64&&(n=y.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(y=QS.bind(null,y),m2(n,y))));break;case 22:if(A=y.memoizedState!==null||bs,!A){a=a!==null&&a.memoizedState!==null||un,B=bs;var Y=un;bs=A,(un=a)&&!Y?Qs(n,y,(y.subtreeFlags&8772)!==0):Ks(n,y),bs=B,un=Y}break;case 30:break;default:Ks(n,y)}}function zv(n){var a=n.alternate;a!==null&&(n.alternate=null,zv(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&kr(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var qr=null,qn=!1;function _s(n,a,y){for(y=y.child;y!==null;)Vv(n,a,y),y=y.sibling}function Vv(n,a,y){if(me&&typeof me.onCommitFiberUnmount=="function")try{me.onCommitFiberUnmount(He,y)}catch{}switch(y.tag){case 26:un||Ki(y,a),_s(n,a,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:un||Ki(y,a);var A=qr,B=qn;na(y.type)&&(qr=y.stateNode,qn=!1),_s(n,a,y),du(y.stateNode),qr=A,qn=B;break;case 5:un||Ki(y,a);case 6:if(A=qr,B=qn,qr=null,_s(n,a,y),qr=A,qn=B,qr!==null)if(qn)try{(qr.nodeType===9?qr.body:qr.nodeName==="HTML"?qr.ownerDocument.body:qr).removeChild(y.stateNode)}catch(Y){Br(y,a,Y)}else try{qr.removeChild(y.stateNode)}catch(Y){Br(y,a,Y)}break;case 18:qr!==null&&(qn?(n=qr,C0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,y.stateNode),_u(n)):C0(qr,y.stateNode));break;case 4:A=qr,B=qn,qr=y.stateNode.containerInfo,qn=!0,_s(n,a,y),qr=A,qn=B;break;case 0:case 11:case 14:case 15:un||Zs(2,y,a),un||Zs(4,y,a),_s(n,a,y);break;case 1:un||(Ki(y,a),A=y.stateNode,typeof A.componentWillUnmount=="function"&&Uv(y,a,A)),_s(n,a,y);break;case 21:_s(n,a,y);break;case 22:un=(A=un)||y.memoizedState!==null,_s(n,a,y),un=A;break;default:_s(n,a,y)}}function Gv(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{_u(n)}catch(y){Br(a,a.return,y)}}function GS(n){switch(n.tag){case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new Fv),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new Fv),a;default:throw Error(d(435,n.tag))}}function Th(n,a){var y=GS(n);a.forEach(function(A){var B=JS.bind(null,n,A);y.has(A)||(y.add(A),A.then(B,B))})}function ri(n,a){var y=a.deletions;if(y!==null)for(var A=0;A<y.length;A++){var B=y[A],Y=n,de=a,xe=de;e:for(;xe!==null;){switch(xe.tag){case 27:if(na(xe.type)){qr=xe.stateNode,qn=!1;break e}break;case 5:qr=xe.stateNode,qn=!1;break e;case 3:case 4:qr=xe.stateNode.containerInfo,qn=!0;break e}xe=xe.return}if(qr===null)throw Error(d(160));Vv(Y,de,B),qr=null,qn=!1,Y=B.alternate,Y!==null&&(Y.return=null),B.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Hv(a,n),a=a.sibling}var Ui=null;function Hv(n,a){var y=n.alternate,A=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:ri(a,n),ni(n),A&4&&(Zs(3,n,n.return),ru(3,n),Zs(5,n,n.return));break;case 1:ri(a,n),ni(n),A&512&&(un||y===null||Ki(y,y.return)),A&64&&bs&&(n=n.updateQueue,n!==null&&(A=n.callbacks,A!==null&&(y=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=y===null?A:y.concat(A))));break;case 26:var B=Ui;if(ri(a,n),ni(n),A&512&&(un||y===null||Ki(y,y.return)),A&4){var Y=y!==null?y.memoizedState:null;if(A=n.memoizedState,y===null)if(A===null)if(n.stateNode===null){e:{A=n.type,y=n.memoizedProps,B=B.ownerDocument||B;t:switch(A){case"title":Y=B.getElementsByTagName("title")[0],(!Y||Y[Vr]||Y[Gt]||Y.namespaceURI==="http://www.w3.org/2000/svg"||Y.hasAttribute("itemprop"))&&(Y=B.createElement(A),B.head.insertBefore(Y,B.querySelector("head > title"))),Cn(Y,A,y),Y[Gt]=n,Hr(Y),A=Y;break e;case"link":var de=k0("link","href",B).get(A+(y.href||""));if(de){for(var xe=0;xe<de.length;xe++)if(Y=de[xe],Y.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&Y.getAttribute("rel")===(y.rel==null?null:y.rel)&&Y.getAttribute("title")===(y.title==null?null:y.title)&&Y.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){de.splice(xe,1);break t}}Y=B.createElement(A),Cn(Y,A,y),B.head.appendChild(Y);break;case"meta":if(de=k0("meta","content",B).get(A+(y.content||""))){for(xe=0;xe<de.length;xe++)if(Y=de[xe],Y.getAttribute("content")===(y.content==null?null:""+y.content)&&Y.getAttribute("name")===(y.name==null?null:y.name)&&Y.getAttribute("property")===(y.property==null?null:y.property)&&Y.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&Y.getAttribute("charset")===(y.charSet==null?null:y.charSet)){de.splice(xe,1);break t}}Y=B.createElement(A),Cn(Y,A,y),B.head.appendChild(Y);break;default:throw Error(d(468,A))}Y[Gt]=n,Hr(Y),A=Y}n.stateNode=A}else F0(B,n.type,n.stateNode);else n.stateNode=I0(B,A,n.memoizedProps);else Y!==A?(Y===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):Y.count--,A===null?F0(B,n.type,n.stateNode):I0(B,A,n.memoizedProps)):A===null&&n.stateNode!==null&&Sh(n,n.memoizedProps,y.memoizedProps)}break;case 27:ri(a,n),ni(n),A&512&&(un||y===null||Ki(y,y.return)),y!==null&&A&4&&Sh(n,n.memoizedProps,y.memoizedProps);break;case 5:if(ri(a,n),ni(n),A&512&&(un||y===null||Ki(y,y.return)),n.flags&32){B=n.stateNode;try{fi(B,"")}catch(ft){Br(n,n.return,ft)}}A&4&&n.stateNode!=null&&(B=n.memoizedProps,Sh(n,B,y!==null?y.memoizedProps:B)),A&1024&&(Eh=!0);break;case 6:if(ri(a,n),ni(n),A&4){if(n.stateNode===null)throw Error(d(162));A=n.memoizedProps,y=n.stateNode;try{y.nodeValue=A}catch(ft){Br(n,n.return,ft)}}break;case 3:if(hf=null,B=Ui,Ui=ff(a.containerInfo),ri(a,n),Ui=B,ni(n),A&4&&y!==null&&y.memoizedState.isDehydrated)try{_u(a.containerInfo)}catch(ft){Br(n,n.return,ft)}Eh&&(Eh=!1,Wv(n));break;case 4:A=Ui,Ui=ff(n.stateNode.containerInfo),ri(a,n),ni(n),Ui=A;break;case 12:ri(a,n),ni(n);break;case 13:ri(a,n),ni(n),n.child.flags&8192&&n.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(Lh=Me()),A&4&&(A=n.updateQueue,A!==null&&(n.updateQueue=null,Th(n,A)));break;case 22:B=n.memoizedState!==null;var Ne=y!==null&&y.memoizedState!==null,nt=bs,gt=un;if(bs=nt||B,un=gt||Ne,ri(a,n),un=gt,bs=nt,ni(n),A&8192)e:for(a=n.stateNode,a._visibility=B?a._visibility&-2:a._visibility|1,B&&(y===null||Ne||bs||un||ka(n)),y=null,a=n;;){if(a.tag===5||a.tag===26){if(y===null){Ne=y=a;try{if(Y=Ne.stateNode,B)de=Y.style,typeof de.setProperty=="function"?de.setProperty("display","none","important"):de.display="none";else{xe=Ne.stateNode;var _t=Ne.memoizedProps.style,ot=_t!=null&&_t.hasOwnProperty("display")?_t.display:null;xe.style.display=ot==null||typeof ot=="boolean"?"":(""+ot).trim()}}catch(ft){Br(Ne,Ne.return,ft)}}}else if(a.tag===6){if(y===null){Ne=a;try{Ne.stateNode.nodeValue=B?"":Ne.memoizedProps}catch(ft){Br(Ne,Ne.return,ft)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;y===a&&(y=null),a=a.return}y===a&&(y=null),a.sibling.return=a.return,a=a.sibling}A&4&&(A=n.updateQueue,A!==null&&(y=A.retryQueue,y!==null&&(A.retryQueue=null,Th(n,y))));break;case 19:ri(a,n),ni(n),A&4&&(A=n.updateQueue,A!==null&&(n.updateQueue=null,Th(n,A)));break;case 30:break;case 21:break;default:ri(a,n),ni(n)}}function ni(n){var a=n.flags;if(a&2){try{for(var y,A=n.return;A!==null;){if(Iv(A)){y=A;break}A=A.return}if(y==null)throw Error(d(160));switch(y.tag){case 27:var B=y.stateNode,Y=wh(n);Qc(n,Y,B);break;case 5:var de=y.stateNode;y.flags&32&&(fi(de,""),y.flags&=-33);var xe=wh(n);Qc(n,xe,de);break;case 3:case 4:var Ne=y.stateNode.containerInfo,nt=wh(n);Mh(n,nt,Ne);break;default:throw Error(d(161))}}catch(gt){Br(n,n.return,gt)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function Wv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;Wv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function Ks(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Bv(n,a.alternate,a),a=a.sibling}function ka(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:Zs(4,a,a.return),ka(a);break;case 1:Ki(a,a.return);var y=a.stateNode;typeof y.componentWillUnmount=="function"&&Uv(a,a.return,y),ka(a);break;case 27:du(a.stateNode);case 26:case 5:Ki(a,a.return),ka(a);break;case 22:a.memoizedState===null&&ka(a);break;case 30:ka(a);break;default:ka(a)}n=n.sibling}}function Qs(n,a,y){for(y=y&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var A=a.alternate,B=n,Y=a,de=Y.flags;switch(Y.tag){case 0:case 11:case 15:Qs(B,Y,y),ru(4,Y);break;case 1:if(Qs(B,Y,y),A=Y,B=A.stateNode,typeof B.componentDidMount=="function")try{B.componentDidMount()}catch(nt){Br(A,A.return,nt)}if(A=Y,B=A.updateQueue,B!==null){var xe=A.stateNode;try{var Ne=B.shared.hiddenCallbacks;if(Ne!==null)for(B.shared.hiddenCallbacks=null,B=0;B<Ne.length;B++)_g(Ne[B],xe)}catch(nt){Br(A,A.return,nt)}}y&&de&64&&Pv(Y),nu(Y,Y.return);break;case 27:kv(Y);case 26:case 5:Qs(B,Y,y),y&&A===null&&de&4&&Nv(Y),nu(Y,Y.return);break;case 12:Qs(B,Y,y);break;case 13:Qs(B,Y,y),y&&de&4&&Gv(B,Y);break;case 22:Y.memoizedState===null&&Qs(B,Y,y),nu(Y,Y.return);break;case 30:break;default:Qs(B,Y,y)}a=a.sibling}}function Ah(n,a){var y=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(y=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==y&&(n!=null&&n.refCount++,y!=null&&Vl(y))}function jh(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Vl(n))}function Qi(n,a,y,A){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Xv(n,a,y,A),a=a.sibling}function Xv(n,a,y,A){var B=a.flags;switch(a.tag){case 0:case 11:case 15:Qi(n,a,y,A),B&2048&&ru(9,a);break;case 1:Qi(n,a,y,A);break;case 3:Qi(n,a,y,A),B&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&Vl(n)));break;case 12:if(B&2048){Qi(n,a,y,A),n=a.stateNode;try{var Y=a.memoizedProps,de=Y.id,xe=Y.onPostCommit;typeof xe=="function"&&xe(de,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(Ne){Br(a,a.return,Ne)}}else Qi(n,a,y,A);break;case 13:Qi(n,a,y,A);break;case 23:break;case 22:Y=a.stateNode,de=a.alternate,a.memoizedState!==null?Y._visibility&2?Qi(n,a,y,A):iu(n,a):Y._visibility&2?Qi(n,a,y,A):(Y._visibility|=2,Po(n,a,y,A,(a.subtreeFlags&10256)!==0)),B&2048&&Ah(de,a);break;case 24:Qi(n,a,y,A),B&2048&&jh(a.alternate,a);break;default:Qi(n,a,y,A)}}function Po(n,a,y,A,B){for(B=B&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var Y=n,de=a,xe=y,Ne=A,nt=de.flags;switch(de.tag){case 0:case 11:case 15:Po(Y,de,xe,Ne,B),ru(8,de);break;case 23:break;case 22:var gt=de.stateNode;de.memoizedState!==null?gt._visibility&2?Po(Y,de,xe,Ne,B):iu(Y,de):(gt._visibility|=2,Po(Y,de,xe,Ne,B)),B&&nt&2048&&Ah(de.alternate,de);break;case 24:Po(Y,de,xe,Ne,B),B&&nt&2048&&jh(de.alternate,de);break;default:Po(Y,de,xe,Ne,B)}a=a.sibling}}function iu(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var y=n,A=a,B=A.flags;switch(A.tag){case 22:iu(y,A),B&2048&&Ah(A.alternate,A);break;case 24:iu(y,A),B&2048&&jh(A.alternate,A);break;default:iu(y,A)}a=a.sibling}}var su=8192;function Uo(n){if(n.subtreeFlags&su)for(n=n.child;n!==null;)qv(n),n=n.sibling}function qv(n){switch(n.tag){case 26:Uo(n),n.flags&su&&n.memoizedState!==null&&j2(Ui,n.memoizedState,n.memoizedProps);break;case 5:Uo(n);break;case 3:case 4:var a=Ui;Ui=ff(n.stateNode.containerInfo),Uo(n),Ui=a;break;case 22:n.memoizedState===null&&(a=n.alternate,a!==null&&a.memoizedState!==null?(a=su,su=16777216,Uo(n),su=a):Uo(n));break;default:Uo(n)}}function Yv(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function au(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var y=0;y<a.length;y++){var A=a[y];En=A,Kv(A,n)}Yv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Zv(n),n=n.sibling}function Zv(n){switch(n.tag){case 0:case 11:case 15:au(n),n.flags&2048&&Zs(9,n,n.return);break;case 3:au(n);break;case 12:au(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,Jc(n)):au(n);break;default:au(n)}}function Jc(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var y=0;y<a.length;y++){var A=a[y];En=A,Kv(A,n)}Yv(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:Zs(8,a,a.return),Jc(a);break;case 22:y=a.stateNode,y._visibility&2&&(y._visibility&=-3,Jc(a));break;default:Jc(a)}n=n.sibling}}function Kv(n,a){for(;En!==null;){var y=En;switch(y.tag){case 0:case 11:case 15:Zs(8,y,a);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var A=y.memoizedState.cachePool.pool;A!=null&&A.refCount++}break;case 24:Vl(y.memoizedState.cache)}if(A=y.child,A!==null)A.return=y,En=A;else e:for(y=n;En!==null;){A=En;var B=A.sibling,Y=A.return;if(zv(A),A===y){En=null;break e}if(B!==null){B.return=Y,En=B;break e}En=Y}}}var HS={getCacheForType:function(n){var a=On(bn),y=a.data.get(n);return y===void 0&&(y=n(),a.data.set(n,y)),y}},WS=typeof WeakMap=="function"?WeakMap:Map,Tr=0,Gr=null,cr=null,yr=0,Ar=0,ii=null,Js=!1,No=!1,Rh=!1,xs=0,tn=0,$s=0,Fa=0,Ch=0,xi=0,Io=0,ou=null,Yn=null,Dh=!1,Lh=0,$c=1/0,ef=null,ea=null,Rn=0,ta=null,ko=null,Fo=0,Oh=0,Ph=null,Qv=null,lu=0,Uh=null;function si(){if((Tr&2)!==0&&yr!==0)return yr&-yr;if(k.T!==null){var n=To;return n!==0?n:Vh()}return Ct()}function Jv(){xi===0&&(xi=(yr&536870912)===0||wr?he():536870912);var n=_i.current;return n!==null&&(n.flags|=32),xi}function ai(n,a,y){(n===Gr&&(Ar===2||Ar===9)||n.cancelPendingCommit!==null)&&(Bo(n,0),ra(n,yr,xi,!1)),$e(n,y),((Tr&2)===0||n!==Gr)&&(n===Gr&&((Tr&2)===0&&(Fa|=y),tn===4&&ra(n,yr,xi,!1)),Ji(n))}function $v(n,a,y){if((Tr&6)!==0)throw Error(d(327));var A=!y&&(a&124)===0&&(a&n.expiredLanes)===0||oe(n,a),B=A?YS(n,a):kh(n,a,!0),Y=A;do{if(B===0){No&&!A&&ra(n,a,0,!1);break}else{if(y=n.current.alternate,Y&&!XS(y)){B=kh(n,a,!1),Y=!1;continue}if(B===2){if(Y=a,n.errorRecoveryDisabledLanes&Y)var de=0;else de=n.pendingLanes&-536870913,de=de!==0?de:de&536870912?536870912:0;if(de!==0){a=de;e:{var xe=n;B=ou;var Ne=xe.current.memoizedState.isDehydrated;if(Ne&&(Bo(xe,de).flags|=256),de=kh(xe,de,!1),de!==2){if(Rh&&!Ne){xe.errorRecoveryDisabledLanes|=Y,Fa|=Y,B=4;break e}Y=Yn,Yn=B,Y!==null&&(Yn===null?Yn=Y:Yn.push.apply(Yn,Y))}B=de}if(Y=!1,B!==2)continue}}if(B===1){Bo(n,0),ra(n,a,0,!0);break}e:{switch(A=n,Y=B,Y){case 0:case 1:throw Error(d(345));case 4:if((a&4194048)!==a)break;case 6:ra(A,a,xi,!Js);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(d(329))}if((a&62914560)===a&&(B=Lh+300-Me(),10<B)){if(ra(A,a,xi,!Js),ae(A,0,!0)!==0)break e;A.timeoutHandle=j0(e0.bind(null,A,y,Yn,ef,Dh,a,xi,Fa,Io,Js,Y,2,-0,0),B);break e}e0(A,y,Yn,ef,Dh,a,xi,Fa,Io,Js,Y,0,-0,0)}}break}while(!0);Ji(n)}function e0(n,a,y,A,B,Y,de,xe,Ne,nt,gt,_t,ot,ft){if(n.timeoutHandle=-1,_t=a.subtreeFlags,(_t&8192||(_t&16785408)===16785408)&&(mu={stylesheets:null,count:0,unsuspend:A2},qv(a),_t=R2(),_t!==null)){n.cancelPendingCommit=_t(o0.bind(null,n,a,Y,y,A,B,de,xe,Ne,gt,1,ot,ft)),ra(n,Y,de,!nt);return}o0(n,a,Y,y,A,B,de,xe,Ne)}function XS(n){for(var a=n;;){var y=a.tag;if((y===0||y===11||y===15)&&a.flags&16384&&(y=a.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var A=0;A<y.length;A++){var B=y[A],Y=B.getSnapshot;B=B.value;try{if(!lt(Y(),B))return!1}catch{return!1}}if(y=a.child,a.subtreeFlags&16384&&y!==null)y.return=a,a=y;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ra(n,a,y,A){a&=~Ch,a&=~Fa,n.suspendedLanes|=a,n.pingedLanes&=~a,A&&(n.warmLanes|=a),A=n.expirationTimes;for(var B=a;0<B;){var Y=31-Ie(B),de=1<<Y;A[Y]=-1,B&=~de}y!==0&&Ge(n,y,a)}function tf(){return(Tr&6)===0?(uu(0),!1):!0}function Nh(){if(cr!==null){if(Ar===0)var n=cr.return;else n=cr,hs=Oa=null,$d(n),Lo=null,$l=0,n=cr;for(;n!==null;)Ov(n.alternate,n),n=n.return;cr=null}}function Bo(n,a){var y=n.timeoutHandle;y!==-1&&(n.timeoutHandle=-1,c2(y)),y=n.cancelPendingCommit,y!==null&&(n.cancelPendingCommit=null,y()),Nh(),Gr=n,cr=y=cs(n.current,null),yr=a,Ar=0,ii=null,Js=!1,No=oe(n,a),Rh=!1,Io=xi=Ch=Fa=$s=tn=0,Yn=ou=null,Dh=!1,(a&8)!==0&&(a|=a&32);var A=n.entangledLanes;if(A!==0)for(n=n.entanglements,A&=a;0<A;){var B=31-Ie(A),Y=1<<B;a|=n[B],A&=~Y}return xs=a,wc(),y}function t0(n,a){sr=null,k.H=Vc,a===Hl||a===Lc?(a=vg(),Ar=3):a===mg?(a=vg(),Ar=4):Ar=a===bv?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ii=a,cr===null&&(tn=1,qc(n,yi(a,n.current)))}function r0(){var n=k.H;return k.H=Vc,n===null?Vc:n}function n0(){var n=k.A;return k.A=HS,n}function Ih(){tn=4,Js||(yr&4194048)!==yr&&_i.current!==null||(No=!0),($s&134217727)===0&&(Fa&134217727)===0||Gr===null||ra(Gr,yr,xi,!1)}function kh(n,a,y){var A=Tr;Tr|=2;var B=r0(),Y=n0();(Gr!==n||yr!==a)&&(ef=null,Bo(n,a)),a=!1;var de=tn;e:do try{if(Ar!==0&&cr!==null){var xe=cr,Ne=ii;switch(Ar){case 8:Nh(),de=6;break e;case 3:case 2:case 9:case 6:_i.current===null&&(a=!0);var nt=Ar;if(Ar=0,ii=null,zo(n,xe,Ne,nt),y&&No){de=0;break e}break;default:nt=Ar,Ar=0,ii=null,zo(n,xe,Ne,nt)}}qS(),de=tn;break}catch(gt){t0(n,gt)}while(!0);return a&&n.shellSuspendCounter++,hs=Oa=null,Tr=A,k.H=B,k.A=Y,cr===null&&(Gr=null,yr=0,wc()),de}function qS(){for(;cr!==null;)i0(cr)}function YS(n,a){var y=Tr;Tr|=2;var A=r0(),B=n0();Gr!==n||yr!==a?(ef=null,$c=Me()+500,Bo(n,a)):No=oe(n,a);e:do try{if(Ar!==0&&cr!==null){a=cr;var Y=ii;t:switch(Ar){case 1:Ar=0,ii=null,zo(n,a,Y,1);break;case 2:case 9:if(yg(Y)){Ar=0,ii=null,s0(a);break}a=function(){Ar!==2&&Ar!==9||Gr!==n||(Ar=7),Ji(n)},Y.then(a,a);break e;case 3:Ar=7;break e;case 4:Ar=5;break e;case 7:yg(Y)?(Ar=0,ii=null,s0(a)):(Ar=0,ii=null,zo(n,a,Y,7));break;case 5:var de=null;switch(cr.tag){case 26:de=cr.memoizedState;case 5:case 27:var xe=cr;if(!de||B0(de)){Ar=0,ii=null;var Ne=xe.sibling;if(Ne!==null)cr=Ne;else{var nt=xe.return;nt!==null?(cr=nt,rf(nt)):cr=null}break t}}Ar=0,ii=null,zo(n,a,Y,5);break;case 6:Ar=0,ii=null,zo(n,a,Y,6);break;case 8:Nh(),tn=6;break e;default:throw Error(d(462))}}ZS();break}catch(gt){t0(n,gt)}while(!0);return hs=Oa=null,k.H=A,k.A=B,Tr=y,cr!==null?0:(Gr=null,yr=0,wc(),tn)}function ZS(){for(;cr!==null&&!Te();)i0(cr)}function i0(n){var a=Dv(n.alternate,n,xs);n.memoizedProps=n.pendingProps,a===null?rf(n):cr=a}function s0(n){var a=n,y=a.alternate;switch(a.tag){case 15:case 0:a=Ev(y,a,a.pendingProps,a.type,void 0,yr);break;case 11:a=Ev(y,a,a.pendingProps,a.type.render,a.ref,yr);break;case 5:$d(a);default:Ov(y,a),a=cr=ag(a,xs),a=Dv(y,a,xs)}n.memoizedProps=n.pendingProps,a===null?rf(n):cr=a}function zo(n,a,y,A){hs=Oa=null,$d(a),Lo=null,$l=0;var B=a.return;try{if(kS(n,B,a,y,yr)){tn=1,qc(n,yi(y,n.current)),cr=null;return}}catch(Y){if(B!==null)throw cr=B,Y;tn=1,qc(n,yi(y,n.current)),cr=null;return}a.flags&32768?(wr||A===1?n=!0:No||(yr&536870912)!==0?n=!1:(Js=n=!0,(A===2||A===9||A===3||A===6)&&(A=_i.current,A!==null&&A.tag===13&&(A.flags|=16384))),a0(a,n)):rf(a)}function rf(n){var a=n;do{if((a.flags&32768)!==0){a0(a,Js);return}n=a.return;var y=BS(a.alternate,a,xs);if(y!==null){cr=y;return}if(a=a.sibling,a!==null){cr=a;return}cr=a=n}while(a!==null);tn===0&&(tn=5)}function a0(n,a){do{var y=zS(n.alternate,n);if(y!==null){y.flags&=32767,cr=y;return}if(y=n.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!a&&(n=n.sibling,n!==null)){cr=n;return}cr=n=y}while(n!==null);tn=6,cr=null}function o0(n,a,y,A,B,Y,de,xe,Ne){n.cancelPendingCommit=null;do nf();while(Rn!==0);if((Tr&6)!==0)throw Error(d(327));if(a!==null){if(a===n.current)throw Error(d(177));if(Y=a.lanes|a.childLanes,Y|=jd,Ee(n,y,Y,de,xe,Ne),n===Gr&&(cr=Gr=null,yr=0),ko=a,ta=n,Fo=y,Oh=Y,Ph=B,Qv=A,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,$S(Be,function(){return d0(),null})):(n.callbackNode=null,n.callbackPriority=0),A=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||A){A=k.T,k.T=null,B=H.p,H.p=2,de=Tr,Tr|=4;try{VS(n,a,y)}finally{Tr=de,H.p=B,k.T=A}}Rn=1,l0(),u0(),c0()}}function l0(){if(Rn===1){Rn=0;var n=ta,a=ko,y=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||y){y=k.T,k.T=null;var A=H.p;H.p=2;var B=Tr;Tr|=4;try{Hv(a,n);var Y=Kh,de=jt(n.containerInfo),xe=Y.focusedElem,Ne=Y.selectionRange;if(de!==xe&&xe&&xe.ownerDocument&&Et(xe.ownerDocument.documentElement,xe)){if(Ne!==null&&Jt(xe)){var nt=Ne.start,gt=Ne.end;if(gt===void 0&&(gt=nt),"selectionStart"in xe)xe.selectionStart=nt,xe.selectionEnd=Math.min(gt,xe.value.length);else{var _t=xe.ownerDocument||document,ot=_t&&_t.defaultView||window;if(ot.getSelection){var ft=ot.getSelection(),qt=xe.textContent.length,Ht=Math.min(Ne.start,qt),Pr=Ne.end===void 0?Ht:Math.min(Ne.end,qt);!ft.extend&&Ht>Pr&&(de=Pr,Pr=Ht,Ht=de);var et=At(xe,Ht),qe=At(xe,Pr);if(et&&qe&&(ft.rangeCount!==1||ft.anchorNode!==et.node||ft.anchorOffset!==et.offset||ft.focusNode!==qe.node||ft.focusOffset!==qe.offset)){var tt=_t.createRange();tt.setStart(et.node,et.offset),ft.removeAllRanges(),Ht>Pr?(ft.addRange(tt),ft.extend(qe.node,qe.offset)):(tt.setEnd(qe.node,qe.offset),ft.addRange(tt))}}}}for(_t=[],ft=xe;ft=ft.parentNode;)ft.nodeType===1&&_t.push({element:ft,left:ft.scrollLeft,top:ft.scrollTop});for(typeof xe.focus=="function"&&xe.focus(),xe=0;xe<_t.length;xe++){var bt=_t[xe];bt.element.scrollLeft=bt.left,bt.element.scrollTop=bt.top}}yf=!!Zh,Kh=Zh=null}finally{Tr=B,H.p=A,k.T=y}}n.current=a,Rn=2}}function u0(){if(Rn===2){Rn=0;var n=ta,a=ko,y=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||y){y=k.T,k.T=null;var A=H.p;H.p=2;var B=Tr;Tr|=4;try{Bv(n,a.alternate,a)}finally{Tr=B,H.p=A,k.T=y}}Rn=3}}function c0(){if(Rn===4||Rn===3){Rn=0,Ce();var n=ta,a=ko,y=Fo,A=Qv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Rn=5:(Rn=0,ko=ta=null,f0(n,n.pendingLanes));var B=n.pendingLanes;if(B===0&&(ea=null),Lt(y),a=a.stateNode,me&&typeof me.onCommitFiberRoot=="function")try{me.onCommitFiberRoot(He,a,void 0,(a.current.flags&128)===128)}catch{}if(A!==null){a=k.T,B=H.p,H.p=2,k.T=null;try{for(var Y=n.onRecoverableError,de=0;de<A.length;de++){var xe=A[de];Y(xe.value,{componentStack:xe.stack})}}finally{k.T=a,H.p=B}}(Fo&3)!==0&&nf(),Ji(n),B=n.pendingLanes,(y&4194090)!==0&&(B&42)!==0?n===Uh?lu++:(lu=0,Uh=n):lu=0,uu(0)}}function f0(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,Vl(a)))}function nf(n){return l0(),u0(),c0(),d0()}function d0(){if(Rn!==5)return!1;var n=ta,a=Oh;Oh=0;var y=Lt(Fo),A=k.T,B=H.p;try{H.p=32>y?32:y,k.T=null,y=Ph,Ph=null;var Y=ta,de=Fo;if(Rn=0,ko=ta=null,Fo=0,(Tr&6)!==0)throw Error(d(331));var xe=Tr;if(Tr|=4,Zv(Y.current),Xv(Y,Y.current,de,y),Tr=xe,uu(0,!1),me&&typeof me.onPostCommitFiberRoot=="function")try{me.onPostCommitFiberRoot(He,Y)}catch{}return!0}finally{H.p=B,k.T=A,f0(n,a)}}function h0(n,a,y){a=yi(y,a),a=hh(n.stateNode,a,2),n=Ws(n,a,2),n!==null&&($e(n,2),Ji(n))}function Br(n,a,y){if(n.tag===3)h0(n,n,y);else for(;a!==null;){if(a.tag===3){h0(a,n,y);break}else if(a.tag===1){var A=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(ea===null||!ea.has(A))){n=yi(y,n),y=gv(2),A=Ws(a,y,2),A!==null&&(vv(y,A,a,n),$e(A,2),Ji(A));break}}a=a.return}}function Fh(n,a,y){var A=n.pingCache;if(A===null){A=n.pingCache=new WS;var B=new Set;A.set(a,B)}else B=A.get(a),B===void 0&&(B=new Set,A.set(a,B));B.has(y)||(Rh=!0,B.add(y),n=KS.bind(null,n,a,y),a.then(n,n))}function KS(n,a,y){var A=n.pingCache;A!==null&&A.delete(a),n.pingedLanes|=n.suspendedLanes&y,n.warmLanes&=~y,Gr===n&&(yr&y)===y&&(tn===4||tn===3&&(yr&62914560)===yr&&300>Me()-Lh?(Tr&2)===0&&Bo(n,0):Ch|=y,Io===yr&&(Io=0)),Ji(n)}function p0(n,a){a===0&&(a=ke()),n=So(n,a),n!==null&&($e(n,a),Ji(n))}function QS(n){var a=n.memoizedState,y=0;a!==null&&(y=a.retryLane),p0(n,y)}function JS(n,a){var y=0;switch(n.tag){case 13:var A=n.stateNode,B=n.memoizedState;B!==null&&(y=B.retryLane);break;case 19:A=n.stateNode;break;case 22:A=n.stateNode._retryCache;break;default:throw Error(d(314))}A!==null&&A.delete(a),p0(n,y)}function $S(n,a){return le(n,a)}var sf=null,Vo=null,Bh=!1,af=!1,zh=!1,Ba=0;function Ji(n){n!==Vo&&n.next===null&&(Vo===null?sf=Vo=n:Vo=Vo.next=n),af=!0,Bh||(Bh=!0,t2())}function uu(n,a){if(!zh&&af){zh=!0;do for(var y=!1,A=sf;A!==null;){if(n!==0){var B=A.pendingLanes;if(B===0)var Y=0;else{var de=A.suspendedLanes,xe=A.pingedLanes;Y=(1<<31-Ie(42|n)+1)-1,Y&=B&~(de&~xe),Y=Y&201326741?Y&201326741|1:Y?Y|2:0}Y!==0&&(y=!0,v0(A,Y))}else Y=yr,Y=ae(A,A===Gr?Y:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),(Y&3)===0||oe(A,Y)||(y=!0,v0(A,Y));A=A.next}while(y);zh=!1}}function e2(){m0()}function m0(){af=Bh=!1;var n=0;Ba!==0&&(u2()&&(n=Ba),Ba=0);for(var a=Me(),y=null,A=sf;A!==null;){var B=A.next,Y=y0(A,a);Y===0?(A.next=null,y===null?sf=B:y.next=B,B===null&&(Vo=y)):(y=A,(n!==0||(Y&3)!==0)&&(af=!0)),A=B}uu(n)}function y0(n,a){for(var y=n.suspendedLanes,A=n.pingedLanes,B=n.expirationTimes,Y=n.pendingLanes&-62914561;0<Y;){var de=31-Ie(Y),xe=1<<de,Ne=B[de];Ne===-1?((xe&y)===0||(xe&A)!==0)&&(B[de]=_e(xe,a)):Ne<=a&&(n.expiredLanes|=xe),Y&=~xe}if(a=Gr,y=yr,y=ae(n,n===a?y:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),A=n.callbackNode,y===0||n===a&&(Ar===2||Ar===9)||n.cancelPendingCommit!==null)return A!==null&&A!==null&&re(A),n.callbackNode=null,n.callbackPriority=0;if((y&3)===0||oe(n,y)){if(a=y&-y,a===n.callbackPriority)return a;switch(A!==null&&re(A),Lt(y)){case 2:case 8:y=Fe;break;case 32:y=Be;break;case 268435456:y=ve;break;default:y=Be}return A=g0.bind(null,n),y=le(y,A),n.callbackPriority=a,n.callbackNode=y,a}return A!==null&&A!==null&&re(A),n.callbackPriority=2,n.callbackNode=null,2}function g0(n,a){if(Rn!==0&&Rn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var y=n.callbackNode;if(nf()&&n.callbackNode!==y)return null;var A=yr;return A=ae(n,n===Gr?A:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),A===0?null:($v(n,A,a),y0(n,Me()),n.callbackNode!=null&&n.callbackNode===y?g0.bind(null,n):null)}function v0(n,a){if(nf())return null;$v(n,a,!0)}function t2(){f2(function(){(Tr&6)!==0?le(Ue,e2):m0()})}function Vh(){return Ba===0&&(Ba=he()),Ba}function b0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ks(""+n)}function _0(n,a){var y=a.ownerDocument.createElement("input");return y.name=a.name,y.value=a.value,n.id&&y.setAttribute("form",n.id),a.parentNode.insertBefore(y,a),n=new FormData(n),y.parentNode.removeChild(y),n}function r2(n,a,y,A,B){if(a==="submit"&&y&&y.stateNode===B){var Y=b0((B[Kt]||null).action),de=A.submitter;de&&(a=(a=de[Kt]||null)?b0(a.formAction):de.getAttribute("formAction"),a!==null&&(Y=a,de=null));var xe=new po("action","action",null,A,B);n.push({event:xe,listeners:[{instance:null,listener:function(){if(A.defaultPrevented){if(Ba!==0){var Ne=de?_0(B,de):new FormData(B);lh(y,{pending:!0,data:Ne,method:B.method,action:Y},null,Ne)}}else typeof Y=="function"&&(xe.preventDefault(),Ne=de?_0(B,de):new FormData(B),lh(y,{pending:!0,data:Ne,method:B.method,action:Y},Y,Ne))},currentTarget:B}]})}}for(var Gh=0;Gh<Ad.length;Gh++){var Hh=Ad[Gh],n2=Hh.toLowerCase(),i2=Hh[0].toUpperCase()+Hh.slice(1);Pi(n2,"on"+i2)}Pi(Zr,"onAnimationEnd"),Pi(vn,"onAnimationIteration"),Pi(Dr,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(on,"onTransitionRun"),Pi(Ta,"onTransitionStart"),Pi(Aa,"onTransitionCancel"),Pi(rg,"onTransitionEnd"),ye("onMouseEnter",["mouseout","mouseover"]),ye("onMouseLeave",["mouseout","mouseover"]),ye("onPointerEnter",["pointerout","pointerover"]),ye("onPointerLeave",["pointerout","pointerover"]),xt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xt("onBeforeInput",["compositionend","keypress","textInput","paste"]),xt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cu));function x0(n,a){a=(a&4)!==0;for(var y=0;y<n.length;y++){var A=n[y],B=A.event;A=A.listeners;e:{var Y=void 0;if(a)for(var de=A.length-1;0<=de;de--){var xe=A[de],Ne=xe.instance,nt=xe.currentTarget;if(xe=xe.listener,Ne!==Y&&B.isPropagationStopped())break e;Y=xe,B.currentTarget=nt;try{Y(B)}catch(gt){Xc(gt)}B.currentTarget=null,Y=Ne}else for(de=0;de<A.length;de++){if(xe=A[de],Ne=xe.instance,nt=xe.currentTarget,xe=xe.listener,Ne!==Y&&B.isPropagationStopped())break e;Y=xe,B.currentTarget=nt;try{Y(B)}catch(gt){Xc(gt)}B.currentTarget=null,Y=Ne}}}}function fr(n,a){var y=a[lr];y===void 0&&(y=a[lr]=new Set);var A=n+"__bubble";y.has(A)||(S0(a,n,2,!1),y.add(A))}function Wh(n,a,y){var A=0;a&&(A|=4),S0(y,n,A,a)}var of="_reactListening"+Math.random().toString(36).slice(2);function Xh(n){if(!n[of]){n[of]=!0,as.forEach(function(y){y!=="selectionchange"&&(s2.has(y)||Wh(y,!1,n),Wh(y,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[of]||(a[of]=!0,Wh("selectionchange",!1,a))}}function S0(n,a,y,A){switch(X0(a)){case 2:var B=L2;break;case 8:B=O2;break;default:B=ap}y=B.bind(null,a,y,n),B=void 0,!Ll||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(B=!0),A?B!==void 0?n.addEventListener(a,y,{capture:!0,passive:B}):n.addEventListener(a,y,!0):B!==void 0?n.addEventListener(a,y,{passive:B}):n.addEventListener(a,y,!1)}function qh(n,a,y,A,B){var Y=A;if((a&1)===0&&(a&2)===0&&A!==null)e:for(;;){if(A===null)return;var de=A.tag;if(de===3||de===4){var xe=A.stateNode.containerInfo;if(xe===B)break;if(de===4)for(de=A.return;de!==null;){var Ne=de.tag;if((Ne===3||Ne===4)&&de.stateNode.containerInfo===B)return;de=de.return}for(;xe!==null;){if(de=ar(xe),de===null)return;if(Ne=de.tag,Ne===5||Ne===6||Ne===26||Ne===27){A=Y=de;continue e}xe=xe.parentNode}}A=A.return}Dl(function(){var nt=Y,gt=co(y),_t=[];e:{var ot=ng.get(n);if(ot!==void 0){var ft=po,qt=n;switch(n){case"keypress":if(ho(y)===0)break e;case"keydown":case"keyup":ft=mc;break;case"focusin":qt="focus",ft=yo;break;case"focusout":qt="blur",ft=yo;break;case"beforeblur":case"afterblur":ft=yo;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=Bs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=Hi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=bo;break;case Zr:case vn:case Dr:ft=ac;break;case rg:ft=gc;break;case"scroll":case"scrollend":ft=mi;break;case"wheel":ft=Xi;break;case"copy":case"cut":case"paste":ft=lc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=Ul;break;case"toggle":case"beforetoggle":ft=wd}var Ht=(a&4)!==0,Pr=!Ht&&(n==="scroll"||n==="scrollend"),et=Ht?ot!==null?ot+"Capture":null:ot;Ht=[];for(var qe=nt,tt;qe!==null;){var bt=qe;if(tt=bt.stateNode,bt=bt.tag,bt!==5&&bt!==26&&bt!==27||tt===null||et===null||(bt=hi(qe,et),bt!=null&&Ht.push(fu(qe,bt,tt))),Pr)break;qe=qe.return}0<Ht.length&&(ot=new ft(ot,qt,null,y,gt),_t.push({event:ot,listeners:Ht}))}}if((a&7)===0){e:{if(ot=n==="mouseover"||n==="pointerover",ft=n==="mouseout"||n==="pointerout",ot&&y!==uo&&(qt=y.relatedTarget||y.fromElement)&&(ar(qt)||qt[vr]))break e;if((ft||ot)&&(ot=gt.window===gt?gt:(ot=gt.ownerDocument)?ot.defaultView||ot.parentWindow:window,ft?(qt=y.relatedTarget||y.toElement,ft=nt,qt=qt?ar(qt):null,qt!==null&&(Pr=D(qt),Ht=qt.tag,qt!==Pr||Ht!==5&&Ht!==27&&Ht!==6)&&(qt=null)):(ft=null,qt=nt),ft!==qt)){if(Ht=Bs,bt="onMouseLeave",et="onMouseEnter",qe="mouse",(n==="pointerout"||n==="pointerover")&&(Ht=Ul,bt="onPointerLeave",et="onPointerEnter",qe="pointer"),Pr=ft==null?ot:ci(ft),tt=qt==null?ot:ci(qt),ot=new Ht(bt,qe+"leave",ft,y,gt),ot.target=Pr,ot.relatedTarget=tt,bt=null,ar(gt)===nt&&(Ht=new Ht(et,qe+"enter",qt,y,gt),Ht.target=tt,Ht.relatedTarget=Pr,bt=Ht),Pr=bt,ft&&qt)t:{for(Ht=ft,et=qt,qe=0,tt=Ht;tt;tt=Go(tt))qe++;for(tt=0,bt=et;bt;bt=Go(bt))tt++;for(;0<qe-tt;)Ht=Go(Ht),qe--;for(;0<tt-qe;)et=Go(et),tt--;for(;qe--;){if(Ht===et||et!==null&&Ht===et.alternate)break t;Ht=Go(Ht),et=Go(et)}Ht=null}else Ht=null;ft!==null&&w0(_t,ot,ft,Ht,!1),qt!==null&&Pr!==null&&w0(_t,Pr,qt,Ht,!0)}}e:{if(ot=nt?ci(nt):window,ft=ot.nodeName&&ot.nodeName.toLowerCase(),ft==="select"||ft==="input"&&ot.type==="file")var Ut=K;else if(Yr(ot))if($)Ut=St;else{Ut=Je;var or=Qe}else ft=ot.nodeName,!ft||ft.toLowerCase()!=="input"||ot.type!=="checkbox"&&ot.type!=="radio"?nt&&Cl(nt.elementType)&&(Ut=K):Ut=Pe;if(Ut&&(Ut=Ut(n,nt))){_o(_t,Ut,y,gt);break e}or&&or(n,ot,nt),n==="focusout"&&nt&&ot.type==="number"&&nt.memoizedProps.value!=null&&sn(ot,"number",ot.value)}switch(or=nt?ci(nt):window,n){case"focusin":(Yr(or)||or.contentEditable==="true")&&(dr=or,Rr=nt,Sr=null);break;case"focusout":Sr=Rr=dr=null;break;case"mousedown":gr=!0;break;case"contextmenu":case"mouseup":case"dragend":gr=!1,Zt(_t,y,gt);break;case"selectionchange":if(ir)break;case"keydown":case"keyup":Zt(_t,y,gt)}var Bt;if(qi)e:{switch(n){case"compositionstart":var Wt="onCompositionStart";break e;case"compositionend":Wt="onCompositionEnd";break e;case"compositionupdate":Wt="onCompositionUpdate";break e}Wt=void 0}else zs?_c(n,y)&&(Wt="onCompositionEnd"):n==="keydown"&&y.keyCode===229&&(Wt="onCompositionStart");Wt&&(Mr&&y.locale!=="ko"&&(zs||Wt!=="onCompositionStart"?Wt==="onCompositionEnd"&&zs&&(Bt=Pl()):(Li=gt,Ol="value"in Li?Li.value:Li.textContent,zs=!0)),or=lf(nt,Wt),0<or.length&&(Wt=new go(Wt,n,null,y,gt),_t.push({event:Wt,listeners:or}),Bt?Wt.data=Bt:(Bt=xc(y),Bt!==null&&(Wt.data=Bt)))),(Bt=Md?Ed(n,y):Td(n,y))&&(Wt=lf(nt,"onBeforeInput"),0<Wt.length&&(or=new go("onBeforeInput","beforeinput",null,y,gt),_t.push({event:or,listeners:Wt}),or.data=Bt)),r2(_t,n,nt,y,gt)}x0(_t,a)})}function fu(n,a,y){return{instance:n,listener:a,currentTarget:y}}function lf(n,a){for(var y=a+"Capture",A=[];n!==null;){var B=n,Y=B.stateNode;if(B=B.tag,B!==5&&B!==26&&B!==27||Y===null||(B=hi(n,y),B!=null&&A.unshift(fu(n,B,Y)),B=hi(n,a),B!=null&&A.push(fu(n,B,Y))),n.tag===3)return A;n=n.return}return[]}function Go(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function w0(n,a,y,A,B){for(var Y=a._reactName,de=[];y!==null&&y!==A;){var xe=y,Ne=xe.alternate,nt=xe.stateNode;if(xe=xe.tag,Ne!==null&&Ne===A)break;xe!==5&&xe!==26&&xe!==27||nt===null||(Ne=nt,B?(nt=hi(y,Y),nt!=null&&de.unshift(fu(y,nt,Ne))):B||(nt=hi(y,Y),nt!=null&&de.push(fu(y,nt,Ne)))),y=y.return}de.length!==0&&n.push({event:a,listeners:de})}var a2=/\r\n?/g,o2=/\u0000|\uFFFD/g;function M0(n){return(typeof n=="string"?n:""+n).replace(a2,`
`).replace(o2,"")}function E0(n,a){return a=M0(a),M0(n)===a}function uf(){}function Or(n,a,y,A,B,Y){switch(y){case"children":typeof A=="string"?a==="body"||a==="textarea"&&A===""||fi(n,A):(typeof A=="number"||typeof A=="bigint")&&a!=="body"&&fi(n,""+A);break;case"className":vt(n,"class",A);break;case"tabIndex":vt(n,"tabindex",A);break;case"dir":case"role":case"viewBox":case"width":case"height":vt(n,y,A);break;case"style":Rl(n,A,Y);break;case"data":if(a!=="object"){vt(n,"data",A);break}case"src":case"href":if(A===""&&(a!=="a"||y!=="href")){n.removeAttribute(y);break}if(A==null||typeof A=="function"||typeof A=="symbol"||typeof A=="boolean"){n.removeAttribute(y);break}A=ks(""+A),n.setAttribute(y,A);break;case"action":case"formAction":if(typeof A=="function"){n.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Y=="function"&&(y==="formAction"?(a!=="input"&&Or(n,a,"name",B.name,B,null),Or(n,a,"formEncType",B.formEncType,B,null),Or(n,a,"formMethod",B.formMethod,B,null),Or(n,a,"formTarget",B.formTarget,B,null)):(Or(n,a,"encType",B.encType,B,null),Or(n,a,"method",B.method,B,null),Or(n,a,"target",B.target,B,null)));if(A==null||typeof A=="symbol"||typeof A=="boolean"){n.removeAttribute(y);break}A=ks(""+A),n.setAttribute(y,A);break;case"onClick":A!=null&&(n.onclick=uf);break;case"onScroll":A!=null&&fr("scroll",n);break;case"onScrollEnd":A!=null&&fr("scrollend",n);break;case"dangerouslySetInnerHTML":if(A!=null){if(typeof A!="object"||!("__html"in A))throw Error(d(61));if(y=A.__html,y!=null){if(B.children!=null)throw Error(d(60));n.innerHTML=y}}break;case"multiple":n.multiple=A&&typeof A!="function"&&typeof A!="symbol";break;case"muted":n.muted=A&&typeof A!="function"&&typeof A!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(A==null||typeof A=="function"||typeof A=="boolean"||typeof A=="symbol"){n.removeAttribute("xlink:href");break}y=ks(""+A),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":A!=null&&typeof A!="function"&&typeof A!="symbol"?n.setAttribute(y,""+A):n.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":A&&typeof A!="function"&&typeof A!="symbol"?n.setAttribute(y,""):n.removeAttribute(y);break;case"capture":case"download":A===!0?n.setAttribute(y,""):A!==!1&&A!=null&&typeof A!="function"&&typeof A!="symbol"?n.setAttribute(y,A):n.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":A!=null&&typeof A!="function"&&typeof A!="symbol"&&!isNaN(A)&&1<=A?n.setAttribute(y,A):n.removeAttribute(y);break;case"rowSpan":case"start":A==null||typeof A=="function"||typeof A=="symbol"||isNaN(A)?n.removeAttribute(y):n.setAttribute(y,A);break;case"popover":fr("beforetoggle",n),fr("toggle",n),rt(n,"popover",A);break;case"xlinkActuate":dt(n,"http://www.w3.org/1999/xlink","xlink:actuate",A);break;case"xlinkArcrole":dt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",A);break;case"xlinkRole":dt(n,"http://www.w3.org/1999/xlink","xlink:role",A);break;case"xlinkShow":dt(n,"http://www.w3.org/1999/xlink","xlink:show",A);break;case"xlinkTitle":dt(n,"http://www.w3.org/1999/xlink","xlink:title",A);break;case"xlinkType":dt(n,"http://www.w3.org/1999/xlink","xlink:type",A);break;case"xmlBase":dt(n,"http://www.w3.org/XML/1998/namespace","xml:base",A);break;case"xmlLang":dt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",A);break;case"xmlSpace":dt(n,"http://www.w3.org/XML/1998/namespace","xml:space",A);break;case"is":rt(n,"is",A);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=nc.get(y)||y,rt(n,y,A))}}function Yh(n,a,y,A,B,Y){switch(y){case"style":Rl(n,A,Y);break;case"dangerouslySetInnerHTML":if(A!=null){if(typeof A!="object"||!("__html"in A))throw Error(d(61));if(y=A.__html,y!=null){if(B.children!=null)throw Error(d(60));n.innerHTML=y}}break;case"children":typeof A=="string"?fi(n,A):(typeof A=="number"||typeof A=="bigint")&&fi(n,""+A);break;case"onScroll":A!=null&&fr("scroll",n);break;case"onScrollEnd":A!=null&&fr("scrollend",n);break;case"onClick":A!=null&&(n.onclick=uf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Le.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(B=y.endsWith("Capture"),a=y.slice(2,B?y.length-7:void 0),Y=n[Kt]||null,Y=Y!=null?Y[y]:null,typeof Y=="function"&&n.removeEventListener(a,Y,B),typeof A=="function")){typeof Y!="function"&&Y!==null&&(y in n?n[y]=null:n.hasAttribute(y)&&n.removeAttribute(y)),n.addEventListener(a,A,B);break e}y in n?n[y]=A:A===!0?n.setAttribute(y,""):rt(n,y,A)}}}function Cn(n,a,y){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fr("error",n),fr("load",n);var A=!1,B=!1,Y;for(Y in y)if(y.hasOwnProperty(Y)){var de=y[Y];if(de!=null)switch(Y){case"src":A=!0;break;case"srcSet":B=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,a));default:Or(n,a,Y,de,y,null)}}B&&Or(n,a,"srcSet",y.srcSet,y,null),A&&Or(n,a,"src",y.src,y,null);return;case"input":fr("invalid",n);var xe=Y=de=B=null,Ne=null,nt=null;for(A in y)if(y.hasOwnProperty(A)){var gt=y[A];if(gt!=null)switch(A){case"name":B=gt;break;case"type":de=gt;break;case"checked":Ne=gt;break;case"defaultChecked":nt=gt;break;case"value":Y=gt;break;case"defaultValue":xe=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(d(137,a));break;default:Or(n,a,A,gt,y,null)}}mr(n,Y,xe,Ne,nt,de,B,!1),Xr(n);return;case"select":fr("invalid",n),A=de=Y=null;for(B in y)if(y.hasOwnProperty(B)&&(xe=y[B],xe!=null))switch(B){case"value":Y=xe;break;case"defaultValue":de=xe;break;case"multiple":A=xe;default:Or(n,a,B,xe,y,null)}a=Y,y=de,n.multiple=!!A,a!=null?an(n,!!A,a,!1):y!=null&&an(n,!!A,y,!0);return;case"textarea":fr("invalid",n),Y=B=A=null;for(de in y)if(y.hasOwnProperty(de)&&(xe=y[de],xe!=null))switch(de){case"value":A=xe;break;case"defaultValue":B=xe;break;case"children":Y=xe;break;case"dangerouslySetInnerHTML":if(xe!=null)throw Error(d(91));break;default:Or(n,a,de,xe,y,null)}gn(n,A,B,Y),Xr(n);return;case"option":for(Ne in y)if(y.hasOwnProperty(Ne)&&(A=y[Ne],A!=null))switch(Ne){case"selected":n.selected=A&&typeof A!="function"&&typeof A!="symbol";break;default:Or(n,a,Ne,A,y,null)}return;case"dialog":fr("beforetoggle",n),fr("toggle",n),fr("cancel",n),fr("close",n);break;case"iframe":case"object":fr("load",n);break;case"video":case"audio":for(A=0;A<cu.length;A++)fr(cu[A],n);break;case"image":fr("error",n),fr("load",n);break;case"details":fr("toggle",n);break;case"embed":case"source":case"link":fr("error",n),fr("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(nt in y)if(y.hasOwnProperty(nt)&&(A=y[nt],A!=null))switch(nt){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,a));default:Or(n,a,nt,A,y,null)}return;default:if(Cl(a)){for(gt in y)y.hasOwnProperty(gt)&&(A=y[gt],A!==void 0&&Yh(n,a,gt,A,y,void 0));return}}for(xe in y)y.hasOwnProperty(xe)&&(A=y[xe],A!=null&&Or(n,a,xe,A,y,null))}function l2(n,a,y,A){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var B=null,Y=null,de=null,xe=null,Ne=null,nt=null,gt=null;for(ft in y){var _t=y[ft];if(y.hasOwnProperty(ft)&&_t!=null)switch(ft){case"checked":break;case"value":break;case"defaultValue":Ne=_t;default:A.hasOwnProperty(ft)||Or(n,a,ft,null,A,_t)}}for(var ot in A){var ft=A[ot];if(_t=y[ot],A.hasOwnProperty(ot)&&(ft!=null||_t!=null))switch(ot){case"type":Y=ft;break;case"name":B=ft;break;case"checked":nt=ft;break;case"defaultChecked":gt=ft;break;case"value":de=ft;break;case"defaultValue":xe=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(d(137,a));break;default:ft!==_t&&Or(n,a,ot,ft,A,_t)}}nn(n,de,xe,Ne,nt,gt,Y,B);return;case"select":ft=de=xe=ot=null;for(Y in y)if(Ne=y[Y],y.hasOwnProperty(Y)&&Ne!=null)switch(Y){case"value":break;case"multiple":ft=Ne;default:A.hasOwnProperty(Y)||Or(n,a,Y,null,A,Ne)}for(B in A)if(Y=A[B],Ne=y[B],A.hasOwnProperty(B)&&(Y!=null||Ne!=null))switch(B){case"value":ot=Y;break;case"defaultValue":xe=Y;break;case"multiple":de=Y;default:Y!==Ne&&Or(n,a,B,Y,A,Ne)}a=xe,y=de,A=ft,ot!=null?an(n,!!y,ot,!1):!!A!=!!y&&(a!=null?an(n,!!y,a,!0):an(n,!!y,y?[]:"",!1));return;case"textarea":ft=ot=null;for(xe in y)if(B=y[xe],y.hasOwnProperty(xe)&&B!=null&&!A.hasOwnProperty(xe))switch(xe){case"value":break;case"children":break;default:Or(n,a,xe,null,A,B)}for(de in A)if(B=A[de],Y=y[de],A.hasOwnProperty(de)&&(B!=null||Y!=null))switch(de){case"value":ot=B;break;case"defaultValue":ft=B;break;case"children":break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(d(91));break;default:B!==Y&&Or(n,a,de,B,A,Y)}dn(n,ot,ft);return;case"option":for(var qt in y)if(ot=y[qt],y.hasOwnProperty(qt)&&ot!=null&&!A.hasOwnProperty(qt))switch(qt){case"selected":n.selected=!1;break;default:Or(n,a,qt,null,A,ot)}for(Ne in A)if(ot=A[Ne],ft=y[Ne],A.hasOwnProperty(Ne)&&ot!==ft&&(ot!=null||ft!=null))switch(Ne){case"selected":n.selected=ot&&typeof ot!="function"&&typeof ot!="symbol";break;default:Or(n,a,Ne,ot,A,ft)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ht in y)ot=y[Ht],y.hasOwnProperty(Ht)&&ot!=null&&!A.hasOwnProperty(Ht)&&Or(n,a,Ht,null,A,ot);for(nt in A)if(ot=A[nt],ft=y[nt],A.hasOwnProperty(nt)&&ot!==ft&&(ot!=null||ft!=null))switch(nt){case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(d(137,a));break;default:Or(n,a,nt,ot,A,ft)}return;default:if(Cl(a)){for(var Pr in y)ot=y[Pr],y.hasOwnProperty(Pr)&&ot!==void 0&&!A.hasOwnProperty(Pr)&&Yh(n,a,Pr,void 0,A,ot);for(gt in A)ot=A[gt],ft=y[gt],!A.hasOwnProperty(gt)||ot===ft||ot===void 0&&ft===void 0||Yh(n,a,gt,ot,A,ft);return}}for(var et in y)ot=y[et],y.hasOwnProperty(et)&&ot!=null&&!A.hasOwnProperty(et)&&Or(n,a,et,null,A,ot);for(_t in A)ot=A[_t],ft=y[_t],!A.hasOwnProperty(_t)||ot===ft||ot==null&&ft==null||Or(n,a,_t,ot,A,ft)}var Zh=null,Kh=null;function cf(n){return n.nodeType===9?n:n.ownerDocument}function T0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function A0(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function Qh(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Jh=null;function u2(){var n=window.event;return n&&n.type==="popstate"?n===Jh?!1:(Jh=n,!0):(Jh=null,!1)}var j0=typeof setTimeout=="function"?setTimeout:void 0,c2=typeof clearTimeout=="function"?clearTimeout:void 0,R0=typeof Promise=="function"?Promise:void 0,f2=typeof queueMicrotask=="function"?queueMicrotask:typeof R0<"u"?function(n){return R0.resolve(null).then(n).catch(d2)}:j0;function d2(n){setTimeout(function(){throw n})}function na(n){return n==="head"}function C0(n,a){var y=a,A=0,B=0;do{var Y=y.nextSibling;if(n.removeChild(y),Y&&Y.nodeType===8)if(y=Y.data,y==="/$"){if(0<A&&8>A){y=A;var de=n.ownerDocument;if(y&1&&du(de.documentElement),y&2&&du(de.body),y&4)for(y=de.head,du(y),de=y.firstChild;de;){var xe=de.nextSibling,Ne=de.nodeName;de[Vr]||Ne==="SCRIPT"||Ne==="STYLE"||Ne==="LINK"&&de.rel.toLowerCase()==="stylesheet"||y.removeChild(de),de=xe}}if(B===0){n.removeChild(Y),_u(a);return}B--}else y==="$"||y==="$?"||y==="$!"?B++:A=y.charCodeAt(0)-48;else A=0;y=Y}while(y);_u(a)}function $h(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var y=a;switch(a=a.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":$h(y),kr(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}n.removeChild(y)}}function h2(n,a,y,A){for(;n.nodeType===1;){var B=y;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!A&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(A){if(!n[Vr])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(Y=n.getAttribute("rel"),Y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(Y!==B.rel||n.getAttribute("href")!==(B.href==null||B.href===""?null:B.href)||n.getAttribute("crossorigin")!==(B.crossOrigin==null?null:B.crossOrigin)||n.getAttribute("title")!==(B.title==null?null:B.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(Y=n.getAttribute("src"),(Y!==(B.src==null?null:B.src)||n.getAttribute("type")!==(B.type==null?null:B.type)||n.getAttribute("crossorigin")!==(B.crossOrigin==null?null:B.crossOrigin))&&Y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var Y=B.name==null?null:""+B.name;if(B.type==="hidden"&&n.getAttribute("name")===Y)return n}else return n;if(n=Ni(n.nextSibling),n===null)break}return null}function p2(n,a,y){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!y||(n=Ni(n.nextSibling),n===null))return null;return n}function ep(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function m2(n,a){var y=n.ownerDocument;if(n.data!=="$?"||y.readyState==="complete")a();else{var A=function(){a(),y.removeEventListener("DOMContentLoaded",A)};y.addEventListener("DOMContentLoaded",A),n._reactRetry=A}}function Ni(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return n}var tp=null;function D0(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var y=n.data;if(y==="$"||y==="$!"||y==="$?"){if(a===0)return n;a--}else y==="/$"&&a++}n=n.previousSibling}return null}function L0(n,a,y){switch(a=cf(y),n){case"html":if(n=a.documentElement,!n)throw Error(d(452));return n;case"head":if(n=a.head,!n)throw Error(d(453));return n;case"body":if(n=a.body,!n)throw Error(d(454));return n;default:throw Error(d(451))}}function du(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);kr(n)}var Si=new Map,O0=new Set;function ff(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ss=H.d;H.d={f:y2,r:g2,D:v2,C:b2,L:_2,m:x2,X:w2,S:S2,M:M2};function y2(){var n=Ss.f(),a=tf();return n||a}function g2(n){var a=Gn(n);a!==null&&a.tag===5&&a.type==="form"?$g(a):Ss.r(n)}var Ho=typeof document>"u"?null:document;function P0(n,a,y){var A=Ho;if(A&&typeof a=="string"&&a){var B=jr(a);B='link[rel="'+n+'"][href="'+B+'"]',typeof y=="string"&&(B+='[crossorigin="'+y+'"]'),O0.has(B)||(O0.add(B),n={rel:n,crossOrigin:y,href:a},A.querySelector(B)===null&&(a=A.createElement("link"),Cn(a,"link",n),Hr(a),A.head.appendChild(a)))}}function v2(n){Ss.D(n),P0("dns-prefetch",n,null)}function b2(n,a){Ss.C(n,a),P0("preconnect",n,a)}function _2(n,a,y){Ss.L(n,a,y);var A=Ho;if(A&&n&&a){var B='link[rel="preload"][as="'+jr(a)+'"]';a==="image"&&y&&y.imageSrcSet?(B+='[imagesrcset="'+jr(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(B+='[imagesizes="'+jr(y.imageSizes)+'"]')):B+='[href="'+jr(n)+'"]';var Y=B;switch(a){case"style":Y=Wo(n);break;case"script":Y=Xo(n)}Si.has(Y)||(n=p({rel:"preload",href:a==="image"&&y&&y.imageSrcSet?void 0:n,as:a},y),Si.set(Y,n),A.querySelector(B)!==null||a==="style"&&A.querySelector(hu(Y))||a==="script"&&A.querySelector(pu(Y))||(a=A.createElement("link"),Cn(a,"link",n),Hr(a),A.head.appendChild(a)))}}function x2(n,a){Ss.m(n,a);var y=Ho;if(y&&n){var A=a&&typeof a.as=="string"?a.as:"script",B='link[rel="modulepreload"][as="'+jr(A)+'"][href="'+jr(n)+'"]',Y=B;switch(A){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Y=Xo(n)}if(!Si.has(Y)&&(n=p({rel:"modulepreload",href:n},a),Si.set(Y,n),y.querySelector(B)===null)){switch(A){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(pu(Y)))return}A=y.createElement("link"),Cn(A,"link",n),Hr(A),y.head.appendChild(A)}}}function S2(n,a,y){Ss.S(n,a,y);var A=Ho;if(A&&n){var B=Jn(A).hoistableStyles,Y=Wo(n);a=a||"default";var de=B.get(Y);if(!de){var xe={loading:0,preload:null};if(de=A.querySelector(hu(Y)))xe.loading=5;else{n=p({rel:"stylesheet",href:n,"data-precedence":a},y),(y=Si.get(Y))&&rp(n,y);var Ne=de=A.createElement("link");Hr(Ne),Cn(Ne,"link",n),Ne._p=new Promise(function(nt,gt){Ne.onload=nt,Ne.onerror=gt}),Ne.addEventListener("load",function(){xe.loading|=1}),Ne.addEventListener("error",function(){xe.loading|=2}),xe.loading|=4,df(de,a,A)}de={type:"stylesheet",instance:de,count:1,state:xe},B.set(Y,de)}}}function w2(n,a){Ss.X(n,a);var y=Ho;if(y&&n){var A=Jn(y).hoistableScripts,B=Xo(n),Y=A.get(B);Y||(Y=y.querySelector(pu(B)),Y||(n=p({src:n,async:!0},a),(a=Si.get(B))&&np(n,a),Y=y.createElement("script"),Hr(Y),Cn(Y,"link",n),y.head.appendChild(Y)),Y={type:"script",instance:Y,count:1,state:null},A.set(B,Y))}}function M2(n,a){Ss.M(n,a);var y=Ho;if(y&&n){var A=Jn(y).hoistableScripts,B=Xo(n),Y=A.get(B);Y||(Y=y.querySelector(pu(B)),Y||(n=p({src:n,async:!0,type:"module"},a),(a=Si.get(B))&&np(n,a),Y=y.createElement("script"),Hr(Y),Cn(Y,"link",n),y.head.appendChild(Y)),Y={type:"script",instance:Y,count:1,state:null},A.set(B,Y))}}function U0(n,a,y,A){var B=(B=ce.current)?ff(B):null;if(!B)throw Error(d(446));switch(n){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(a=Wo(y.href),y=Jn(B).hoistableStyles,A=y.get(a),A||(A={type:"style",instance:null,count:0,state:null},y.set(a,A)),A):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){n=Wo(y.href);var Y=Jn(B).hoistableStyles,de=Y.get(n);if(de||(B=B.ownerDocument||B,de={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Y.set(n,de),(Y=B.querySelector(hu(n)))&&!Y._p&&(de.instance=Y,de.state.loading=5),Si.has(n)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},Si.set(n,y),Y||E2(B,n,y,de.state))),a&&A===null)throw Error(d(528,""));return de}if(a&&A!==null)throw Error(d(529,""));return null;case"script":return a=y.async,y=y.src,typeof y=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Xo(y),y=Jn(B).hoistableScripts,A=y.get(a),A||(A={type:"script",instance:null,count:0,state:null},y.set(a,A)),A):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,n))}}function Wo(n){return'href="'+jr(n)+'"'}function hu(n){return'link[rel="stylesheet"]['+n+"]"}function N0(n){return p({},n,{"data-precedence":n.precedence,precedence:null})}function E2(n,a,y,A){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?A.loading=1:(a=n.createElement("link"),A.preload=a,a.addEventListener("load",function(){return A.loading|=1}),a.addEventListener("error",function(){return A.loading|=2}),Cn(a,"link",y),Hr(a),n.head.appendChild(a))}function Xo(n){return'[src="'+jr(n)+'"]'}function pu(n){return"script[async]"+n}function I0(n,a,y){if(a.count++,a.instance===null)switch(a.type){case"style":var A=n.querySelector('style[data-href~="'+jr(y.href)+'"]');if(A)return a.instance=A,Hr(A),A;var B=p({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return A=(n.ownerDocument||n).createElement("style"),Hr(A),Cn(A,"style",B),df(A,y.precedence,n),a.instance=A;case"stylesheet":B=Wo(y.href);var Y=n.querySelector(hu(B));if(Y)return a.state.loading|=4,a.instance=Y,Hr(Y),Y;A=N0(y),(B=Si.get(B))&&rp(A,B),Y=(n.ownerDocument||n).createElement("link"),Hr(Y);var de=Y;return de._p=new Promise(function(xe,Ne){de.onload=xe,de.onerror=Ne}),Cn(Y,"link",A),a.state.loading|=4,df(Y,y.precedence,n),a.instance=Y;case"script":return Y=Xo(y.src),(B=n.querySelector(pu(Y)))?(a.instance=B,Hr(B),B):(A=y,(B=Si.get(Y))&&(A=p({},y),np(A,B)),n=n.ownerDocument||n,B=n.createElement("script"),Hr(B),Cn(B,"link",A),n.head.appendChild(B),a.instance=B);case"void":return null;default:throw Error(d(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(A=a.instance,a.state.loading|=4,df(A,y.precedence,n));return a.instance}function df(n,a,y){for(var A=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),B=A.length?A[A.length-1]:null,Y=B,de=0;de<A.length;de++){var xe=A[de];if(xe.dataset.precedence===a)Y=xe;else if(Y!==B)break}Y?Y.parentNode.insertBefore(n,Y.nextSibling):(a=y.nodeType===9?y.head:y,a.insertBefore(n,a.firstChild))}function rp(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function np(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var hf=null;function k0(n,a,y){if(hf===null){var A=new Map,B=hf=new Map;B.set(y,A)}else B=hf,A=B.get(y),A||(A=new Map,B.set(y,A));if(A.has(n))return A;for(A.set(n,null),y=y.getElementsByTagName(n),B=0;B<y.length;B++){var Y=y[B];if(!(Y[Vr]||Y[Gt]||n==="link"&&Y.getAttribute("rel")==="stylesheet")&&Y.namespaceURI!=="http://www.w3.org/2000/svg"){var de=Y.getAttribute(a)||"";de=n+de;var xe=A.get(de);xe?xe.push(Y):A.set(de,[Y])}}return A}function F0(n,a,y){n=n.ownerDocument||n,n.head.insertBefore(y,a==="title"?n.querySelector("head > title"):null)}function T2(n,a,y){if(y===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return n=a.disabled,typeof a.precedence=="string"&&n==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function B0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var mu=null;function A2(){}function j2(n,a,y){if(mu===null)throw Error(d(475));var A=mu;if(a.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var B=Wo(y.href),Y=n.querySelector(hu(B));if(Y){n=Y._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(A.count++,A=pf.bind(A),n.then(A,A)),a.state.loading|=4,a.instance=Y,Hr(Y);return}Y=n.ownerDocument||n,y=N0(y),(B=Si.get(B))&&rp(y,B),Y=Y.createElement("link"),Hr(Y);var de=Y;de._p=new Promise(function(xe,Ne){de.onload=xe,de.onerror=Ne}),Cn(Y,"link",y),a.instance=Y}A.stylesheets===null&&(A.stylesheets=new Map),A.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(A.count++,a=pf.bind(A),n.addEventListener("load",a),n.addEventListener("error",a))}}function R2(){if(mu===null)throw Error(d(475));var n=mu;return n.stylesheets&&n.count===0&&ip(n,n.stylesheets),0<n.count?function(a){var y=setTimeout(function(){if(n.stylesheets&&ip(n,n.stylesheets),n.unsuspend){var A=n.unsuspend;n.unsuspend=null,A()}},6e4);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(y)}}:null}function pf(){if(this.count--,this.count===0){if(this.stylesheets)ip(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var mf=null;function ip(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,mf=new Map,a.forEach(C2,n),mf=null,pf.call(n))}function C2(n,a){if(!(a.state.loading&4)){var y=mf.get(n);if(y)var A=y.get(null);else{y=new Map,mf.set(n,y);for(var B=n.querySelectorAll("link[data-precedence],style[data-precedence]"),Y=0;Y<B.length;Y++){var de=B[Y];(de.nodeName==="LINK"||de.getAttribute("media")!=="not all")&&(y.set(de.dataset.precedence,de),A=de)}A&&y.set(null,A)}B=a.instance,de=B.getAttribute("data-precedence"),Y=y.get(de)||A,Y===A&&y.set(null,B),y.set(de,B),this.count++,A=pf.bind(this),B.addEventListener("load",A),B.addEventListener("error",A),Y?Y.parentNode.insertBefore(B,Y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(B,n.firstChild)),a.state.loading|=4}}var yu={$$typeof:m,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function D2(n,a,y,A,B,Y,de,xe){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=We(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=We(0),this.hiddenUpdates=We(null),this.identifierPrefix=A,this.onUncaughtError=B,this.onCaughtError=Y,this.onRecoverableError=de,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=xe,this.incompleteTransitions=new Map}function z0(n,a,y,A,B,Y,de,xe,Ne,nt,gt,_t){return n=new D2(n,a,y,de,xe,Ne,nt,_t),a=1,Y===!0&&(a|=24),Y=ti(3,null,null,a),n.current=Y,Y.stateNode=n,a=Fd(),a.refCount++,n.pooledCache=a,a.refCount++,Y.memoizedState={element:A,isDehydrated:y,cache:a},Gd(Y),n}function V0(n){return n?(n=wo,n):wo}function G0(n,a,y,A,B,Y){B=V0(B),A.context===null?A.context=B:A.pendingContext=B,A=Hs(a),A.payload={element:y},Y=Y===void 0?null:Y,Y!==null&&(A.callback=Y),y=Ws(n,A,a),y!==null&&(ai(y,n,a),Xl(y,n,a))}function H0(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var y=n.retryLane;n.retryLane=y!==0&&y<a?y:a}}function sp(n,a){H0(n,a),(n=n.alternate)&&H0(n,a)}function W0(n){if(n.tag===13){var a=So(n,67108864);a!==null&&ai(a,n,67108864),sp(n,67108864)}}var yf=!0;function L2(n,a,y,A){var B=k.T;k.T=null;var Y=H.p;try{H.p=2,ap(n,a,y,A)}finally{H.p=Y,k.T=B}}function O2(n,a,y,A){var B=k.T;k.T=null;var Y=H.p;try{H.p=8,ap(n,a,y,A)}finally{H.p=Y,k.T=B}}function ap(n,a,y,A){if(yf){var B=op(A);if(B===null)qh(n,a,A,gf,y),q0(n,A);else if(U2(B,n,a,y,A))A.stopPropagation();else if(q0(n,A),a&4&&-1<P2.indexOf(n)){for(;B!==null;){var Y=Gn(B);if(Y!==null)switch(Y.tag){case 3:if(Y=Y.stateNode,Y.current.memoizedState.isDehydrated){var de=fe(Y.pendingLanes);if(de!==0){var xe=Y;for(xe.pendingLanes|=2,xe.entangledLanes|=2;de;){var Ne=1<<31-Ie(de);xe.entanglements[1]|=Ne,de&=~Ne}Ji(Y),(Tr&6)===0&&($c=Me()+500,uu(0))}}break;case 13:xe=So(Y,2),xe!==null&&ai(xe,Y,2),tf(),sp(Y,2)}if(Y=op(A),Y===null&&qh(n,a,A,gf,y),Y===B)break;B=Y}B!==null&&A.stopPropagation()}else qh(n,a,A,null,y)}}function op(n){return n=co(n),lp(n)}var gf=null;function lp(n){if(gf=null,n=ar(n),n!==null){var a=D(n);if(a===null)n=null;else{var y=a.tag;if(y===13){if(n=U(a),n!==null)return n;n=null}else if(y===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return gf=n,null}function X0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Se()){case Ue:return 2;case Fe:return 8;case Be:case st:return 32;case ve:return 268435456;default:return 32}default:return 32}}var up=!1,ia=null,sa=null,aa=null,gu=new Map,vu=new Map,oa=[],P2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function q0(n,a){switch(n){case"focusin":case"focusout":ia=null;break;case"dragenter":case"dragleave":sa=null;break;case"mouseover":case"mouseout":aa=null;break;case"pointerover":case"pointerout":gu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":vu.delete(a.pointerId)}}function bu(n,a,y,A,B,Y){return n===null||n.nativeEvent!==Y?(n={blockedOn:a,domEventName:y,eventSystemFlags:A,nativeEvent:Y,targetContainers:[B]},a!==null&&(a=Gn(a),a!==null&&W0(a)),n):(n.eventSystemFlags|=A,a=n.targetContainers,B!==null&&a.indexOf(B)===-1&&a.push(B),n)}function U2(n,a,y,A,B){switch(a){case"focusin":return ia=bu(ia,n,a,y,A,B),!0;case"dragenter":return sa=bu(sa,n,a,y,A,B),!0;case"mouseover":return aa=bu(aa,n,a,y,A,B),!0;case"pointerover":var Y=B.pointerId;return gu.set(Y,bu(gu.get(Y)||null,n,a,y,A,B)),!0;case"gotpointercapture":return Y=B.pointerId,vu.set(Y,bu(vu.get(Y)||null,n,a,y,A,B)),!0}return!1}function Y0(n){var a=ar(n.target);if(a!==null){var y=D(a);if(y!==null){if(a=y.tag,a===13){if(a=U(y),a!==null){n.blockedOn=a,Ft(n.priority,function(){if(y.tag===13){var A=si();A=wt(A);var B=So(y,A);B!==null&&ai(B,y,A),sp(y,A)}});return}}else if(a===3&&y.stateNode.current.memoizedState.isDehydrated){n.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}n.blockedOn=null}function vf(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var y=op(n.nativeEvent);if(y===null){y=n.nativeEvent;var A=new y.constructor(y.type,y);uo=A,y.target.dispatchEvent(A),uo=null}else return a=Gn(y),a!==null&&W0(a),n.blockedOn=y,!1;a.shift()}return!0}function Z0(n,a,y){vf(n)&&y.delete(a)}function N2(){up=!1,ia!==null&&vf(ia)&&(ia=null),sa!==null&&vf(sa)&&(sa=null),aa!==null&&vf(aa)&&(aa=null),gu.forEach(Z0),vu.forEach(Z0)}function bf(n,a){n.blockedOn===a&&(n.blockedOn=null,up||(up=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,N2)))}var _f=null;function K0(n){_f!==n&&(_f=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){_f===n&&(_f=null);for(var a=0;a<n.length;a+=3){var y=n[a],A=n[a+1],B=n[a+2];if(typeof A!="function"){if(lp(A||y)===null)continue;break}var Y=Gn(y);Y!==null&&(n.splice(a,3),a-=3,lh(Y,{pending:!0,data:B,method:y.method,action:A},A,B))}}))}function _u(n){function a(Ne){return bf(Ne,n)}ia!==null&&bf(ia,n),sa!==null&&bf(sa,n),aa!==null&&bf(aa,n),gu.forEach(a),vu.forEach(a);for(var y=0;y<oa.length;y++){var A=oa[y];A.blockedOn===n&&(A.blockedOn=null)}for(;0<oa.length&&(y=oa[0],y.blockedOn===null);)Y0(y),y.blockedOn===null&&oa.shift();if(y=(n.ownerDocument||n).$$reactFormReplay,y!=null)for(A=0;A<y.length;A+=3){var B=y[A],Y=y[A+1],de=B[Kt]||null;if(typeof Y=="function")de||K0(y);else if(de){var xe=null;if(Y&&Y.hasAttribute("formAction")){if(B=Y,de=Y[Kt]||null)xe=de.formAction;else if(lp(B)!==null)continue}else xe=de.action;typeof xe=="function"?y[A+1]=xe:(y.splice(A,3),A-=3),K0(y)}}}function cp(n){this._internalRoot=n}xf.prototype.render=cp.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(d(409));var y=a.current,A=si();G0(y,A,n,a,null,null)},xf.prototype.unmount=cp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;G0(n.current,2,null,n,null,null),tf(),a[vr]=null}};function xf(n){this._internalRoot=n}xf.prototype.unstable_scheduleHydration=function(n){if(n){var a=Ct();n={blockedOn:null,target:n,priority:a};for(var y=0;y<oa.length&&a!==0&&a<oa[y].priority;y++);oa.splice(y,0,n),y===0&&Y0(n)}};var Q0=r.version;if(Q0!=="19.1.0")throw Error(d(527,Q0,"19.1.0"));H.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(d(188)):(n=Object.keys(n).join(","),Error(d(268,n)));return n=R(a),n=n!==null?M(n):null,n=n===null?null:n.stateNode,n};var I2={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sf.isDisabled&&Sf.supportsFiber)try{He=Sf.inject(I2),me=Sf}catch{}}return Su.createRoot=function(n,a){if(!T(n))throw Error(d(299));var y=!1,A="",B=hv,Y=pv,de=mv,xe=null;return a!=null&&(a.unstable_strictMode===!0&&(y=!0),a.identifierPrefix!==void 0&&(A=a.identifierPrefix),a.onUncaughtError!==void 0&&(B=a.onUncaughtError),a.onCaughtError!==void 0&&(Y=a.onCaughtError),a.onRecoverableError!==void 0&&(de=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(xe=a.unstable_transitionCallbacks)),a=z0(n,1,!1,null,null,y,A,B,Y,de,xe,null),n[vr]=a.current,Xh(n),new cp(a)},Su.hydrateRoot=function(n,a,y){if(!T(n))throw Error(d(299));var A=!1,B="",Y=hv,de=pv,xe=mv,Ne=null,nt=null;return y!=null&&(y.unstable_strictMode===!0&&(A=!0),y.identifierPrefix!==void 0&&(B=y.identifierPrefix),y.onUncaughtError!==void 0&&(Y=y.onUncaughtError),y.onCaughtError!==void 0&&(de=y.onCaughtError),y.onRecoverableError!==void 0&&(xe=y.onRecoverableError),y.unstable_transitionCallbacks!==void 0&&(Ne=y.unstable_transitionCallbacks),y.formState!==void 0&&(nt=y.formState)),a=z0(n,1,!0,a,y??null,A,B,Y,de,xe,Ne,nt),a.context=V0(null),y=a.current,A=si(),A=wt(A),B=Hs(A),B.callback=null,Ws(y,B,A),y=A,a.current.lanes=y,$e(a,y),Ji(a),n[vr]=a.current,Xh(n),new xf(a)},Su.version="19.1.0",Su}var ob;function Y2(){if(ob)return hp.exports;ob=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),hp.exports=q2(),hp.exports}var Z2=Y2();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const py="177",K2=0,lb=1,Q2=2,v1=1,J2=2,js=3,ba=0,Qn=1,Rs=2,ga=0,hl=1,ub=2,cb=3,fb=4,$2=5,Qa=100,ew=101,tw=102,rw=103,nw=104,iw=200,sw=201,aw=202,ow=203,om=204,lm=205,lw=206,uw=207,cw=208,fw=209,dw=210,hw=211,pw=212,mw=213,yw=214,um=0,cm=1,fm=2,yl=3,dm=4,hm=5,pm=6,mm=7,b1=0,gw=1,vw=2,va=0,bw=1,_w=2,xw=3,Sw=4,ww=5,Mw=6,Ew=7,_1=300,gl=301,vl=302,ym=303,gm=304,md=306,vm=1e3,$a=1001,bm=1002,ji=1003,Tw=1004,wf=1005,es=1006,gp=1007,eo=1008,Os=1009,x1=1010,S1=1011,Nu=1012,my=1013,ao=1014,Cs=1015,qu=1016,yy=1017,gy=1018,Iu=1020,w1=35902,M1=1021,E1=1022,Vi=1023,ku=1026,Fu=1027,T1=1028,vy=1029,A1=1030,by=1031,_y=1033,Zf=33776,Kf=33777,Qf=33778,Jf=33779,_m=35840,xm=35841,Sm=35842,wm=35843,Mm=36196,Em=37492,Tm=37496,Am=37808,jm=37809,Rm=37810,Cm=37811,Dm=37812,Lm=37813,Om=37814,Pm=37815,Um=37816,Nm=37817,Im=37818,km=37819,Fm=37820,Bm=37821,$f=36492,zm=36494,Vm=36495,j1=36283,Gm=36284,Hm=36285,Wm=36286,Aw=3200,jw=3201,Rw=0,Cw=1,ya="",Ti="srgb",bl="srgb-linear",ad="linear",Ur="srgb",qo=7680,db=519,Dw=512,Lw=513,Ow=514,R1=515,Pw=516,Uw=517,Nw=518,Iw=519,hb=35044,pb="300 es",Ds=2e3,od=2001;class wl{addEventListener(r,i){this._listeners===void 0&&(this._listeners={});const d=this._listeners;d[r]===void 0&&(d[r]=[]),d[r].indexOf(i)===-1&&d[r].push(i)}hasEventListener(r,i){const d=this._listeners;return d===void 0?!1:d[r]!==void 0&&d[r].indexOf(i)!==-1}removeEventListener(r,i){const d=this._listeners;if(d===void 0)return;const T=d[r];if(T!==void 0){const D=T.indexOf(i);D!==-1&&T.splice(D,1)}}dispatchEvent(r){const i=this._listeners;if(i===void 0)return;const d=i[r.type];if(d!==void 0){r.target=this;const T=d.slice(0);for(let D=0,U=T.length;D<U;D++)T[D].call(this,r);r.target=null}}}const Un=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],vp=Math.PI/180,Xm=180/Math.PI;function Yu(){const s=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Math.random()*4294967295|0,d=Math.random()*4294967295|0;return(Un[s&255]+Un[s>>8&255]+Un[s>>16&255]+Un[s>>24&255]+"-"+Un[r&255]+Un[r>>8&255]+"-"+Un[r>>16&15|64]+Un[r>>24&255]+"-"+Un[i&63|128]+Un[i>>8&255]+"-"+Un[i>>16&255]+Un[i>>24&255]+Un[d&255]+Un[d>>8&255]+Un[d>>16&255]+Un[d>>24&255]).toLowerCase()}function pr(s,r,i){return Math.max(r,Math.min(i,s))}function kw(s,r){return(s%r+r)%r}function bp(s,r,i){return(1-i)*s+i*r}function wu(s,r){switch(r.constructor){case Float32Array:return s;case Uint32Array:return s/4294967295;case Uint16Array:return s/65535;case Uint8Array:return s/255;case Int32Array:return Math.max(s/2147483647,-1);case Int16Array:return Math.max(s/32767,-1);case Int8Array:return Math.max(s/127,-1);default:throw new Error("Invalid component type.")}}function Zn(s,r){switch(r.constructor){case Float32Array:return s;case Uint32Array:return Math.round(s*4294967295);case Uint16Array:return Math.round(s*65535);case Uint8Array:return Math.round(s*255);case Int32Array:return Math.round(s*2147483647);case Int16Array:return Math.round(s*32767);case Int8Array:return Math.round(s*127);default:throw new Error("Invalid component type.")}}class zr{constructor(r=0,i=0){zr.prototype.isVector2=!0,this.x=r,this.y=i}get width(){return this.x}set width(r){this.x=r}get height(){return this.y}set height(r){this.y=r}set(r,i){return this.x=r,this.y=i,this}setScalar(r){return this.x=r,this.y=r,this}setX(r){return this.x=r,this}setY(r){return this.y=r,this}setComponent(r,i){switch(r){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+r)}return this}getComponent(r){switch(r){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+r)}}clone(){return new this.constructor(this.x,this.y)}copy(r){return this.x=r.x,this.y=r.y,this}add(r){return this.x+=r.x,this.y+=r.y,this}addScalar(r){return this.x+=r,this.y+=r,this}addVectors(r,i){return this.x=r.x+i.x,this.y=r.y+i.y,this}addScaledVector(r,i){return this.x+=r.x*i,this.y+=r.y*i,this}sub(r){return this.x-=r.x,this.y-=r.y,this}subScalar(r){return this.x-=r,this.y-=r,this}subVectors(r,i){return this.x=r.x-i.x,this.y=r.y-i.y,this}multiply(r){return this.x*=r.x,this.y*=r.y,this}multiplyScalar(r){return this.x*=r,this.y*=r,this}divide(r){return this.x/=r.x,this.y/=r.y,this}divideScalar(r){return this.multiplyScalar(1/r)}applyMatrix3(r){const i=this.x,d=this.y,T=r.elements;return this.x=T[0]*i+T[3]*d+T[6],this.y=T[1]*i+T[4]*d+T[7],this}min(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this}max(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this}clamp(r,i){return this.x=pr(this.x,r.x,i.x),this.y=pr(this.y,r.y,i.y),this}clampScalar(r,i){return this.x=pr(this.x,r,i),this.y=pr(this.y,r,i),this}clampLength(r,i){const d=this.length();return this.divideScalar(d||1).multiplyScalar(pr(d,r,i))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(r){return this.x*r.x+this.y*r.y}cross(r){return this.x*r.y-this.y*r.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(r){const i=Math.sqrt(this.lengthSq()*r.lengthSq());if(i===0)return Math.PI/2;const d=this.dot(r)/i;return Math.acos(pr(d,-1,1))}distanceTo(r){return Math.sqrt(this.distanceToSquared(r))}distanceToSquared(r){const i=this.x-r.x,d=this.y-r.y;return i*i+d*d}manhattanDistanceTo(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)}setLength(r){return this.normalize().multiplyScalar(r)}lerp(r,i){return this.x+=(r.x-this.x)*i,this.y+=(r.y-this.y)*i,this}lerpVectors(r,i,d){return this.x=r.x+(i.x-r.x)*d,this.y=r.y+(i.y-r.y)*d,this}equals(r){return r.x===this.x&&r.y===this.y}fromArray(r,i=0){return this.x=r[i],this.y=r[i+1],this}toArray(r=[],i=0){return r[i]=this.x,r[i+1]=this.y,r}fromBufferAttribute(r,i){return this.x=r.getX(i),this.y=r.getY(i),this}rotateAround(r,i){const d=Math.cos(i),T=Math.sin(i),D=this.x-r.x,U=this.y-r.y;return this.x=D*d-U*T+r.x,this.y=D*T+U*d+r.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Zu{constructor(r=0,i=0,d=0,T=1){this.isQuaternion=!0,this._x=r,this._y=i,this._z=d,this._w=T}static slerpFlat(r,i,d,T,D,U,t){let R=d[T+0],M=d[T+1],p=d[T+2],f=d[T+3];const h=D[U+0],b=D[U+1],w=D[U+2],c=D[U+3];if(t===0){r[i+0]=R,r[i+1]=M,r[i+2]=p,r[i+3]=f;return}if(t===1){r[i+0]=h,r[i+1]=b,r[i+2]=w,r[i+3]=c;return}if(f!==c||R!==h||M!==b||p!==w){let l=1-t;const o=R*h+M*b+p*w+f*c,u=o>=0?1:-1,m=1-o*o;if(m>Number.EPSILON){const _=Math.sqrt(m),v=Math.atan2(_,o*u);l=Math.sin(l*v)/_,t=Math.sin(t*v)/_}const g=t*u;if(R=R*l+h*g,M=M*l+b*g,p=p*l+w*g,f=f*l+c*g,l===1-t){const _=1/Math.sqrt(R*R+M*M+p*p+f*f);R*=_,M*=_,p*=_,f*=_}}r[i]=R,r[i+1]=M,r[i+2]=p,r[i+3]=f}static multiplyQuaternionsFlat(r,i,d,T,D,U){const t=d[T],R=d[T+1],M=d[T+2],p=d[T+3],f=D[U],h=D[U+1],b=D[U+2],w=D[U+3];return r[i]=t*w+p*f+R*b-M*h,r[i+1]=R*w+p*h+M*f-t*b,r[i+2]=M*w+p*b+t*h-R*f,r[i+3]=p*w-t*f-R*h-M*b,r}get x(){return this._x}set x(r){this._x=r,this._onChangeCallback()}get y(){return this._y}set y(r){this._y=r,this._onChangeCallback()}get z(){return this._z}set z(r){this._z=r,this._onChangeCallback()}get w(){return this._w}set w(r){this._w=r,this._onChangeCallback()}set(r,i,d,T){return this._x=r,this._y=i,this._z=d,this._w=T,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(r){return this._x=r.x,this._y=r.y,this._z=r.z,this._w=r.w,this._onChangeCallback(),this}setFromEuler(r,i=!0){const d=r._x,T=r._y,D=r._z,U=r._order,t=Math.cos,R=Math.sin,M=t(d/2),p=t(T/2),f=t(D/2),h=R(d/2),b=R(T/2),w=R(D/2);switch(U){case"XYZ":this._x=h*p*f+M*b*w,this._y=M*b*f-h*p*w,this._z=M*p*w+h*b*f,this._w=M*p*f-h*b*w;break;case"YXZ":this._x=h*p*f+M*b*w,this._y=M*b*f-h*p*w,this._z=M*p*w-h*b*f,this._w=M*p*f+h*b*w;break;case"ZXY":this._x=h*p*f-M*b*w,this._y=M*b*f+h*p*w,this._z=M*p*w+h*b*f,this._w=M*p*f-h*b*w;break;case"ZYX":this._x=h*p*f-M*b*w,this._y=M*b*f+h*p*w,this._z=M*p*w-h*b*f,this._w=M*p*f+h*b*w;break;case"YZX":this._x=h*p*f+M*b*w,this._y=M*b*f+h*p*w,this._z=M*p*w-h*b*f,this._w=M*p*f-h*b*w;break;case"XZY":this._x=h*p*f-M*b*w,this._y=M*b*f-h*p*w,this._z=M*p*w+h*b*f,this._w=M*p*f+h*b*w;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+U)}return i===!0&&this._onChangeCallback(),this}setFromAxisAngle(r,i){const d=i/2,T=Math.sin(d);return this._x=r.x*T,this._y=r.y*T,this._z=r.z*T,this._w=Math.cos(d),this._onChangeCallback(),this}setFromRotationMatrix(r){const i=r.elements,d=i[0],T=i[4],D=i[8],U=i[1],t=i[5],R=i[9],M=i[2],p=i[6],f=i[10],h=d+t+f;if(h>0){const b=.5/Math.sqrt(h+1);this._w=.25/b,this._x=(p-R)*b,this._y=(D-M)*b,this._z=(U-T)*b}else if(d>t&&d>f){const b=2*Math.sqrt(1+d-t-f);this._w=(p-R)/b,this._x=.25*b,this._y=(T+U)/b,this._z=(D+M)/b}else if(t>f){const b=2*Math.sqrt(1+t-d-f);this._w=(D-M)/b,this._x=(T+U)/b,this._y=.25*b,this._z=(R+p)/b}else{const b=2*Math.sqrt(1+f-d-t);this._w=(U-T)/b,this._x=(D+M)/b,this._y=(R+p)/b,this._z=.25*b}return this._onChangeCallback(),this}setFromUnitVectors(r,i){let d=r.dot(i)+1;return d<Number.EPSILON?(d=0,Math.abs(r.x)>Math.abs(r.z)?(this._x=-r.y,this._y=r.x,this._z=0,this._w=d):(this._x=0,this._y=-r.z,this._z=r.y,this._w=d)):(this._x=r.y*i.z-r.z*i.y,this._y=r.z*i.x-r.x*i.z,this._z=r.x*i.y-r.y*i.x,this._w=d),this.normalize()}angleTo(r){return 2*Math.acos(Math.abs(pr(this.dot(r),-1,1)))}rotateTowards(r,i){const d=this.angleTo(r);if(d===0)return this;const T=Math.min(1,i/d);return this.slerp(r,T),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(r){return this._x*r._x+this._y*r._y+this._z*r._z+this._w*r._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let r=this.length();return r===0?(this._x=0,this._y=0,this._z=0,this._w=1):(r=1/r,this._x=this._x*r,this._y=this._y*r,this._z=this._z*r,this._w=this._w*r),this._onChangeCallback(),this}multiply(r){return this.multiplyQuaternions(this,r)}premultiply(r){return this.multiplyQuaternions(r,this)}multiplyQuaternions(r,i){const d=r._x,T=r._y,D=r._z,U=r._w,t=i._x,R=i._y,M=i._z,p=i._w;return this._x=d*p+U*t+T*M-D*R,this._y=T*p+U*R+D*t-d*M,this._z=D*p+U*M+d*R-T*t,this._w=U*p-d*t-T*R-D*M,this._onChangeCallback(),this}slerp(r,i){if(i===0)return this;if(i===1)return this.copy(r);const d=this._x,T=this._y,D=this._z,U=this._w;let t=U*r._w+d*r._x+T*r._y+D*r._z;if(t<0?(this._w=-r._w,this._x=-r._x,this._y=-r._y,this._z=-r._z,t=-t):this.copy(r),t>=1)return this._w=U,this._x=d,this._y=T,this._z=D,this;const R=1-t*t;if(R<=Number.EPSILON){const b=1-i;return this._w=b*U+i*this._w,this._x=b*d+i*this._x,this._y=b*T+i*this._y,this._z=b*D+i*this._z,this.normalize(),this}const M=Math.sqrt(R),p=Math.atan2(M,t),f=Math.sin((1-i)*p)/M,h=Math.sin(i*p)/M;return this._w=U*f+this._w*h,this._x=d*f+this._x*h,this._y=T*f+this._y*h,this._z=D*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(r,i,d){return this.copy(r).slerp(i,d)}random(){const r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random(),d=Math.random(),T=Math.sqrt(1-d),D=Math.sqrt(d);return this.set(T*Math.sin(r),T*Math.cos(r),D*Math.sin(i),D*Math.cos(i))}equals(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._w===this._w}fromArray(r,i=0){return this._x=r[i],this._y=r[i+1],this._z=r[i+2],this._w=r[i+3],this._onChangeCallback(),this}toArray(r=[],i=0){return r[i]=this._x,r[i+1]=this._y,r[i+2]=this._z,r[i+3]=this._w,r}fromBufferAttribute(r,i){return this._x=r.getX(i),this._y=r.getY(i),this._z=r.getZ(i),this._w=r.getW(i),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(r){return this._onChangeCallback=r,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class pt{constructor(r=0,i=0,d=0){pt.prototype.isVector3=!0,this.x=r,this.y=i,this.z=d}set(r,i,d){return d===void 0&&(d=this.z),this.x=r,this.y=i,this.z=d,this}setScalar(r){return this.x=r,this.y=r,this.z=r,this}setX(r){return this.x=r,this}setY(r){return this.y=r,this}setZ(r){return this.z=r,this}setComponent(r,i){switch(r){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+r)}return this}getComponent(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+r)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(r){return this.x=r.x,this.y=r.y,this.z=r.z,this}add(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z,this}addScalar(r){return this.x+=r,this.y+=r,this.z+=r,this}addVectors(r,i){return this.x=r.x+i.x,this.y=r.y+i.y,this.z=r.z+i.z,this}addScaledVector(r,i){return this.x+=r.x*i,this.y+=r.y*i,this.z+=r.z*i,this}sub(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z,this}subScalar(r){return this.x-=r,this.y-=r,this.z-=r,this}subVectors(r,i){return this.x=r.x-i.x,this.y=r.y-i.y,this.z=r.z-i.z,this}multiply(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z,this}multiplyScalar(r){return this.x*=r,this.y*=r,this.z*=r,this}multiplyVectors(r,i){return this.x=r.x*i.x,this.y=r.y*i.y,this.z=r.z*i.z,this}applyEuler(r){return this.applyQuaternion(mb.setFromEuler(r))}applyAxisAngle(r,i){return this.applyQuaternion(mb.setFromAxisAngle(r,i))}applyMatrix3(r){const i=this.x,d=this.y,T=this.z,D=r.elements;return this.x=D[0]*i+D[3]*d+D[6]*T,this.y=D[1]*i+D[4]*d+D[7]*T,this.z=D[2]*i+D[5]*d+D[8]*T,this}applyNormalMatrix(r){return this.applyMatrix3(r).normalize()}applyMatrix4(r){const i=this.x,d=this.y,T=this.z,D=r.elements,U=1/(D[3]*i+D[7]*d+D[11]*T+D[15]);return this.x=(D[0]*i+D[4]*d+D[8]*T+D[12])*U,this.y=(D[1]*i+D[5]*d+D[9]*T+D[13])*U,this.z=(D[2]*i+D[6]*d+D[10]*T+D[14])*U,this}applyQuaternion(r){const i=this.x,d=this.y,T=this.z,D=r.x,U=r.y,t=r.z,R=r.w,M=2*(U*T-t*d),p=2*(t*i-D*T),f=2*(D*d-U*i);return this.x=i+R*M+U*f-t*p,this.y=d+R*p+t*M-D*f,this.z=T+R*f+D*p-U*M,this}project(r){return this.applyMatrix4(r.matrixWorldInverse).applyMatrix4(r.projectionMatrix)}unproject(r){return this.applyMatrix4(r.projectionMatrixInverse).applyMatrix4(r.matrixWorld)}transformDirection(r){const i=this.x,d=this.y,T=this.z,D=r.elements;return this.x=D[0]*i+D[4]*d+D[8]*T,this.y=D[1]*i+D[5]*d+D[9]*T,this.z=D[2]*i+D[6]*d+D[10]*T,this.normalize()}divide(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z,this}divideScalar(r){return this.multiplyScalar(1/r)}min(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this}max(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this}clamp(r,i){return this.x=pr(this.x,r.x,i.x),this.y=pr(this.y,r.y,i.y),this.z=pr(this.z,r.z,i.z),this}clampScalar(r,i){return this.x=pr(this.x,r,i),this.y=pr(this.y,r,i),this.z=pr(this.z,r,i),this}clampLength(r,i){const d=this.length();return this.divideScalar(d||1).multiplyScalar(pr(d,r,i))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(r){return this.x*r.x+this.y*r.y+this.z*r.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(r){return this.normalize().multiplyScalar(r)}lerp(r,i){return this.x+=(r.x-this.x)*i,this.y+=(r.y-this.y)*i,this.z+=(r.z-this.z)*i,this}lerpVectors(r,i,d){return this.x=r.x+(i.x-r.x)*d,this.y=r.y+(i.y-r.y)*d,this.z=r.z+(i.z-r.z)*d,this}cross(r){return this.crossVectors(this,r)}crossVectors(r,i){const d=r.x,T=r.y,D=r.z,U=i.x,t=i.y,R=i.z;return this.x=T*R-D*t,this.y=D*U-d*R,this.z=d*t-T*U,this}projectOnVector(r){const i=r.lengthSq();if(i===0)return this.set(0,0,0);const d=r.dot(this)/i;return this.copy(r).multiplyScalar(d)}projectOnPlane(r){return _p.copy(this).projectOnVector(r),this.sub(_p)}reflect(r){return this.sub(_p.copy(r).multiplyScalar(2*this.dot(r)))}angleTo(r){const i=Math.sqrt(this.lengthSq()*r.lengthSq());if(i===0)return Math.PI/2;const d=this.dot(r)/i;return Math.acos(pr(d,-1,1))}distanceTo(r){return Math.sqrt(this.distanceToSquared(r))}distanceToSquared(r){const i=this.x-r.x,d=this.y-r.y,T=this.z-r.z;return i*i+d*d+T*T}manhattanDistanceTo(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)+Math.abs(this.z-r.z)}setFromSpherical(r){return this.setFromSphericalCoords(r.radius,r.phi,r.theta)}setFromSphericalCoords(r,i,d){const T=Math.sin(i)*r;return this.x=T*Math.sin(d),this.y=Math.cos(i)*r,this.z=T*Math.cos(d),this}setFromCylindrical(r){return this.setFromCylindricalCoords(r.radius,r.theta,r.y)}setFromCylindricalCoords(r,i,d){return this.x=r*Math.sin(i),this.y=d,this.z=r*Math.cos(i),this}setFromMatrixPosition(r){const i=r.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(r){const i=this.setFromMatrixColumn(r,0).length(),d=this.setFromMatrixColumn(r,1).length(),T=this.setFromMatrixColumn(r,2).length();return this.x=i,this.y=d,this.z=T,this}setFromMatrixColumn(r,i){return this.fromArray(r.elements,i*4)}setFromMatrix3Column(r,i){return this.fromArray(r.elements,i*3)}setFromEuler(r){return this.x=r._x,this.y=r._y,this.z=r._z,this}setFromColor(r){return this.x=r.r,this.y=r.g,this.z=r.b,this}equals(r){return r.x===this.x&&r.y===this.y&&r.z===this.z}fromArray(r,i=0){return this.x=r[i],this.y=r[i+1],this.z=r[i+2],this}toArray(r=[],i=0){return r[i]=this.x,r[i+1]=this.y,r[i+2]=this.z,r}fromBufferAttribute(r,i){return this.x=r.getX(i),this.y=r.getY(i),this.z=r.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const r=Math.random()*Math.PI*2,i=Math.random()*2-1,d=Math.sqrt(1-i*i);return this.x=d*Math.cos(r),this.y=i,this.z=d*Math.sin(r),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _p=new pt,mb=new Zu;class rr{constructor(r,i,d,T,D,U,t,R,M){rr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],r!==void 0&&this.set(r,i,d,T,D,U,t,R,M)}set(r,i,d,T,D,U,t,R,M){const p=this.elements;return p[0]=r,p[1]=T,p[2]=t,p[3]=i,p[4]=D,p[5]=R,p[6]=d,p[7]=U,p[8]=M,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(r){const i=this.elements,d=r.elements;return i[0]=d[0],i[1]=d[1],i[2]=d[2],i[3]=d[3],i[4]=d[4],i[5]=d[5],i[6]=d[6],i[7]=d[7],i[8]=d[8],this}extractBasis(r,i,d){return r.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),d.setFromMatrix3Column(this,2),this}setFromMatrix4(r){const i=r.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(r){return this.multiplyMatrices(this,r)}premultiply(r){return this.multiplyMatrices(r,this)}multiplyMatrices(r,i){const d=r.elements,T=i.elements,D=this.elements,U=d[0],t=d[3],R=d[6],M=d[1],p=d[4],f=d[7],h=d[2],b=d[5],w=d[8],c=T[0],l=T[3],o=T[6],u=T[1],m=T[4],g=T[7],_=T[2],v=T[5],x=T[8];return D[0]=U*c+t*u+R*_,D[3]=U*l+t*m+R*v,D[6]=U*o+t*g+R*x,D[1]=M*c+p*u+f*_,D[4]=M*l+p*m+f*v,D[7]=M*o+p*g+f*x,D[2]=h*c+b*u+w*_,D[5]=h*l+b*m+w*v,D[8]=h*o+b*g+w*x,this}multiplyScalar(r){const i=this.elements;return i[0]*=r,i[3]*=r,i[6]*=r,i[1]*=r,i[4]*=r,i[7]*=r,i[2]*=r,i[5]*=r,i[8]*=r,this}determinant(){const r=this.elements,i=r[0],d=r[1],T=r[2],D=r[3],U=r[4],t=r[5],R=r[6],M=r[7],p=r[8];return i*U*p-i*t*M-d*D*p+d*t*R+T*D*M-T*U*R}invert(){const r=this.elements,i=r[0],d=r[1],T=r[2],D=r[3],U=r[4],t=r[5],R=r[6],M=r[7],p=r[8],f=p*U-t*M,h=t*R-p*D,b=M*D-U*R,w=i*f+d*h+T*b;if(w===0)return this.set(0,0,0,0,0,0,0,0,0);const c=1/w;return r[0]=f*c,r[1]=(T*M-p*d)*c,r[2]=(t*d-T*U)*c,r[3]=h*c,r[4]=(p*i-T*R)*c,r[5]=(T*D-t*i)*c,r[6]=b*c,r[7]=(d*R-M*i)*c,r[8]=(U*i-d*D)*c,this}transpose(){let r;const i=this.elements;return r=i[1],i[1]=i[3],i[3]=r,r=i[2],i[2]=i[6],i[6]=r,r=i[5],i[5]=i[7],i[7]=r,this}getNormalMatrix(r){return this.setFromMatrix4(r).invert().transpose()}transposeIntoArray(r){const i=this.elements;return r[0]=i[0],r[1]=i[3],r[2]=i[6],r[3]=i[1],r[4]=i[4],r[5]=i[7],r[6]=i[2],r[7]=i[5],r[8]=i[8],this}setUvTransform(r,i,d,T,D,U,t){const R=Math.cos(D),M=Math.sin(D);return this.set(d*R,d*M,-d*(R*U+M*t)+U+r,-T*M,T*R,-T*(-M*U+R*t)+t+i,0,0,1),this}scale(r,i){return this.premultiply(xp.makeScale(r,i)),this}rotate(r){return this.premultiply(xp.makeRotation(-r)),this}translate(r,i){return this.premultiply(xp.makeTranslation(r,i)),this}makeTranslation(r,i){return r.isVector2?this.set(1,0,r.x,0,1,r.y,0,0,1):this.set(1,0,r,0,1,i,0,0,1),this}makeRotation(r){const i=Math.cos(r),d=Math.sin(r);return this.set(i,-d,0,d,i,0,0,0,1),this}makeScale(r,i){return this.set(r,0,0,0,i,0,0,0,1),this}equals(r){const i=this.elements,d=r.elements;for(let T=0;T<9;T++)if(i[T]!==d[T])return!1;return!0}fromArray(r,i=0){for(let d=0;d<9;d++)this.elements[d]=r[d+i];return this}toArray(r=[],i=0){const d=this.elements;return r[i]=d[0],r[i+1]=d[1],r[i+2]=d[2],r[i+3]=d[3],r[i+4]=d[4],r[i+5]=d[5],r[i+6]=d[6],r[i+7]=d[7],r[i+8]=d[8],r}clone(){return new this.constructor().fromArray(this.elements)}}const xp=new rr;function C1(s){for(let r=s.length-1;r>=0;--r)if(s[r]>=65535)return!0;return!1}function ld(s){return document.createElementNS("http://www.w3.org/1999/xhtml",s)}function Fw(){const s=ld("canvas");return s.style.display="block",s}const yb={};function pl(s){s in yb||(yb[s]=!0,console.warn(s))}function Bw(s,r,i){return new Promise(function(d,T){function D(){switch(s.clientWaitSync(r,s.SYNC_FLUSH_COMMANDS_BIT,0)){case s.WAIT_FAILED:T();break;case s.TIMEOUT_EXPIRED:setTimeout(D,i);break;default:d()}}setTimeout(D,i)})}function zw(s){const r=s.elements;r[2]=.5*r[2]+.5*r[3],r[6]=.5*r[6]+.5*r[7],r[10]=.5*r[10]+.5*r[11],r[14]=.5*r[14]+.5*r[15]}function Vw(s){const r=s.elements;r[11]===-1?(r[10]=-r[10]-1,r[14]=-r[14]):(r[10]=-r[10],r[14]=-r[14]+1)}const gb=new rr().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),vb=new rr().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Gw(){const s={enabled:!0,workingColorSpace:bl,spaces:{},convert:function(T,D,U){return this.enabled===!1||D===U||!D||!U||(this.spaces[D].transfer===Ur&&(T.r=Ls(T.r),T.g=Ls(T.g),T.b=Ls(T.b)),this.spaces[D].primaries!==this.spaces[U].primaries&&(T.applyMatrix3(this.spaces[D].toXYZ),T.applyMatrix3(this.spaces[U].fromXYZ)),this.spaces[U].transfer===Ur&&(T.r=ml(T.r),T.g=ml(T.g),T.b=ml(T.b))),T},workingToColorSpace:function(T,D){return this.convert(T,this.workingColorSpace,D)},colorSpaceToWorking:function(T,D){return this.convert(T,D,this.workingColorSpace)},getPrimaries:function(T){return this.spaces[T].primaries},getTransfer:function(T){return T===ya?ad:this.spaces[T].transfer},getLuminanceCoefficients:function(T,D=this.workingColorSpace){return T.fromArray(this.spaces[D].luminanceCoefficients)},define:function(T){Object.assign(this.spaces,T)},_getMatrix:function(T,D,U){return T.copy(this.spaces[D].toXYZ).multiply(this.spaces[U].fromXYZ)},_getDrawingBufferColorSpace:function(T){return this.spaces[T].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(T=this.workingColorSpace){return this.spaces[T].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(T,D){return pl("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),s.workingToColorSpace(T,D)},toWorkingColorSpace:function(T,D){return pl("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),s.colorSpaceToWorking(T,D)}},r=[.64,.33,.3,.6,.15,.06],i=[.2126,.7152,.0722],d=[.3127,.329];return s.define({[bl]:{primaries:r,whitePoint:d,transfer:ad,toXYZ:gb,fromXYZ:vb,luminanceCoefficients:i,workingColorSpaceConfig:{unpackColorSpace:Ti},outputColorSpaceConfig:{drawingBufferColorSpace:Ti}},[Ti]:{primaries:r,whitePoint:d,transfer:Ur,toXYZ:gb,fromXYZ:vb,luminanceCoefficients:i,outputColorSpaceConfig:{drawingBufferColorSpace:Ti}}}),s}const xr=Gw();function Ls(s){return s<.04045?s*.0773993808:Math.pow(s*.9478672986+.0521327014,2.4)}function ml(s){return s<.0031308?s*12.92:1.055*Math.pow(s,.41666)-.055}let Yo;class Hw{static getDataURL(r,i="image/png"){if(/^data:/i.test(r.src)||typeof HTMLCanvasElement>"u")return r.src;let d;if(r instanceof HTMLCanvasElement)d=r;else{Yo===void 0&&(Yo=ld("canvas")),Yo.width=r.width,Yo.height=r.height;const T=Yo.getContext("2d");r instanceof ImageData?T.putImageData(r,0,0):T.drawImage(r,0,0,r.width,r.height),d=Yo}return d.toDataURL(i)}static sRGBToLinear(r){if(typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap){const i=ld("canvas");i.width=r.width,i.height=r.height;const d=i.getContext("2d");d.drawImage(r,0,0,r.width,r.height);const T=d.getImageData(0,0,r.width,r.height),D=T.data;for(let U=0;U<D.length;U++)D[U]=Ls(D[U]/255)*255;return d.putImageData(T,0,0),i}else if(r.data){const i=r.data.slice(0);for(let d=0;d<i.length;d++)i instanceof Uint8Array||i instanceof Uint8ClampedArray?i[d]=Math.floor(Ls(i[d]/255)*255):i[d]=Ls(i[d]);return{data:i,width:r.width,height:r.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),r}}let Ww=0;class xy{constructor(r=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Ww++}),this.uuid=Yu(),this.data=r,this.dataReady=!0,this.version=0}getSize(r){const i=this.data;return i instanceof HTMLVideoElement?r.set(i.videoWidth,i.videoHeight):i!==null?r.set(i.width,i.height,i.depth||0):r.set(0,0,0),r}set needsUpdate(r){r===!0&&this.version++}toJSON(r){const i=r===void 0||typeof r=="string";if(!i&&r.images[this.uuid]!==void 0)return r.images[this.uuid];const d={uuid:this.uuid,url:""},T=this.data;if(T!==null){let D;if(Array.isArray(T)){D=[];for(let U=0,t=T.length;U<t;U++)T[U].isDataTexture?D.push(Sp(T[U].image)):D.push(Sp(T[U]))}else D=Sp(T);d.url=D}return i||(r.images[this.uuid]=d),d}}function Sp(s){return typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&s instanceof ImageBitmap?Hw.getDataURL(s):s.data?{data:Array.from(s.data),width:s.width,height:s.height,type:s.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Xw=0;const wp=new pt;class Vn extends wl{constructor(r=Vn.DEFAULT_IMAGE,i=Vn.DEFAULT_MAPPING,d=$a,T=$a,D=es,U=eo,t=Vi,R=Os,M=Vn.DEFAULT_ANISOTROPY,p=ya){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Xw++}),this.uuid=Yu(),this.name="",this.source=new xy(r),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=d,this.wrapT=T,this.magFilter=D,this.minFilter=U,this.anisotropy=M,this.format=t,this.internalFormat=null,this.type=R,this.offset=new zr(0,0),this.repeat=new zr(1,1),this.center=new zr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new rr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(r&&r.depth&&r.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(wp).x}get height(){return this.source.getSize(wp).y}get depth(){return this.source.getSize(wp).z}get image(){return this.source.data}set image(r=null){this.source.data=r}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(r,i){this.updateRanges.push({start:r,count:i})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(r){return this.name=r.name,this.source=r.source,this.mipmaps=r.mipmaps.slice(0),this.mapping=r.mapping,this.channel=r.channel,this.wrapS=r.wrapS,this.wrapT=r.wrapT,this.magFilter=r.magFilter,this.minFilter=r.minFilter,this.anisotropy=r.anisotropy,this.format=r.format,this.internalFormat=r.internalFormat,this.type=r.type,this.offset.copy(r.offset),this.repeat.copy(r.repeat),this.center.copy(r.center),this.rotation=r.rotation,this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrix.copy(r.matrix),this.generateMipmaps=r.generateMipmaps,this.premultiplyAlpha=r.premultiplyAlpha,this.flipY=r.flipY,this.unpackAlignment=r.unpackAlignment,this.colorSpace=r.colorSpace,this.renderTarget=r.renderTarget,this.isRenderTargetTexture=r.isRenderTargetTexture,this.isArrayTexture=r.isArrayTexture,this.userData=JSON.parse(JSON.stringify(r.userData)),this.needsUpdate=!0,this}setValues(r){for(const i in r){const d=r[i];if(d===void 0){console.warn(`THREE.Texture.setValues(): parameter '${i}' has value of undefined.`);continue}const T=this[i];if(T===void 0){console.warn(`THREE.Texture.setValues(): property '${i}' does not exist.`);continue}T&&d&&T.isVector2&&d.isVector2||T&&d&&T.isVector3&&d.isVector3||T&&d&&T.isMatrix3&&d.isMatrix3?T.copy(d):this[i]=d}}toJSON(r){const i=r===void 0||typeof r=="string";if(!i&&r.textures[this.uuid]!==void 0)return r.textures[this.uuid];const d={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(r).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(d.userData=this.userData),i||(r.textures[this.uuid]=d),d}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(r){if(this.mapping!==_1)return r;if(r.applyMatrix3(this.matrix),r.x<0||r.x>1)switch(this.wrapS){case vm:r.x=r.x-Math.floor(r.x);break;case $a:r.x=r.x<0?0:1;break;case bm:Math.abs(Math.floor(r.x)%2)===1?r.x=Math.ceil(r.x)-r.x:r.x=r.x-Math.floor(r.x);break}if(r.y<0||r.y>1)switch(this.wrapT){case vm:r.y=r.y-Math.floor(r.y);break;case $a:r.y=r.y<0?0:1;break;case bm:Math.abs(Math.floor(r.y)%2)===1?r.y=Math.ceil(r.y)-r.y:r.y=r.y-Math.floor(r.y);break}return this.flipY&&(r.y=1-r.y),r}set needsUpdate(r){r===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(r){r===!0&&this.pmremVersion++}}Vn.DEFAULT_IMAGE=null;Vn.DEFAULT_MAPPING=_1;Vn.DEFAULT_ANISOTROPY=1;class fn{constructor(r=0,i=0,d=0,T=1){fn.prototype.isVector4=!0,this.x=r,this.y=i,this.z=d,this.w=T}get width(){return this.z}set width(r){this.z=r}get height(){return this.w}set height(r){this.w=r}set(r,i,d,T){return this.x=r,this.y=i,this.z=d,this.w=T,this}setScalar(r){return this.x=r,this.y=r,this.z=r,this.w=r,this}setX(r){return this.x=r,this}setY(r){return this.y=r,this}setZ(r){return this.z=r,this}setW(r){return this.w=r,this}setComponent(r,i){switch(r){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+r)}return this}getComponent(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+r)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(r){return this.x=r.x,this.y=r.y,this.z=r.z,this.w=r.w!==void 0?r.w:1,this}add(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z,this.w+=r.w,this}addScalar(r){return this.x+=r,this.y+=r,this.z+=r,this.w+=r,this}addVectors(r,i){return this.x=r.x+i.x,this.y=r.y+i.y,this.z=r.z+i.z,this.w=r.w+i.w,this}addScaledVector(r,i){return this.x+=r.x*i,this.y+=r.y*i,this.z+=r.z*i,this.w+=r.w*i,this}sub(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z,this.w-=r.w,this}subScalar(r){return this.x-=r,this.y-=r,this.z-=r,this.w-=r,this}subVectors(r,i){return this.x=r.x-i.x,this.y=r.y-i.y,this.z=r.z-i.z,this.w=r.w-i.w,this}multiply(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z,this.w*=r.w,this}multiplyScalar(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this}applyMatrix4(r){const i=this.x,d=this.y,T=this.z,D=this.w,U=r.elements;return this.x=U[0]*i+U[4]*d+U[8]*T+U[12]*D,this.y=U[1]*i+U[5]*d+U[9]*T+U[13]*D,this.z=U[2]*i+U[6]*d+U[10]*T+U[14]*D,this.w=U[3]*i+U[7]*d+U[11]*T+U[15]*D,this}divide(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z,this.w/=r.w,this}divideScalar(r){return this.multiplyScalar(1/r)}setAxisAngleFromQuaternion(r){this.w=2*Math.acos(r.w);const i=Math.sqrt(1-r.w*r.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=r.x/i,this.y=r.y/i,this.z=r.z/i),this}setAxisAngleFromRotationMatrix(r){let i,d,T,D;const R=r.elements,M=R[0],p=R[4],f=R[8],h=R[1],b=R[5],w=R[9],c=R[2],l=R[6],o=R[10];if(Math.abs(p-h)<.01&&Math.abs(f-c)<.01&&Math.abs(w-l)<.01){if(Math.abs(p+h)<.1&&Math.abs(f+c)<.1&&Math.abs(w+l)<.1&&Math.abs(M+b+o-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;const m=(M+1)/2,g=(b+1)/2,_=(o+1)/2,v=(p+h)/4,x=(f+c)/4,E=(w+l)/4;return m>g&&m>_?m<.01?(d=0,T=.707106781,D=.707106781):(d=Math.sqrt(m),T=v/d,D=x/d):g>_?g<.01?(d=.707106781,T=0,D=.707106781):(T=Math.sqrt(g),d=v/T,D=E/T):_<.01?(d=.707106781,T=.707106781,D=0):(D=Math.sqrt(_),d=x/D,T=E/D),this.set(d,T,D,i),this}let u=Math.sqrt((l-w)*(l-w)+(f-c)*(f-c)+(h-p)*(h-p));return Math.abs(u)<.001&&(u=1),this.x=(l-w)/u,this.y=(f-c)/u,this.z=(h-p)/u,this.w=Math.acos((M+b+o-1)/2),this}setFromMatrixPosition(r){const i=r.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this.w=i[15],this}min(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this.w=Math.min(this.w,r.w),this}max(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this.w=Math.max(this.w,r.w),this}clamp(r,i){return this.x=pr(this.x,r.x,i.x),this.y=pr(this.y,r.y,i.y),this.z=pr(this.z,r.z,i.z),this.w=pr(this.w,r.w,i.w),this}clampScalar(r,i){return this.x=pr(this.x,r,i),this.y=pr(this.y,r,i),this.z=pr(this.z,r,i),this.w=pr(this.w,r,i),this}clampLength(r,i){const d=this.length();return this.divideScalar(d||1).multiplyScalar(pr(d,r,i))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(r){return this.normalize().multiplyScalar(r)}lerp(r,i){return this.x+=(r.x-this.x)*i,this.y+=(r.y-this.y)*i,this.z+=(r.z-this.z)*i,this.w+=(r.w-this.w)*i,this}lerpVectors(r,i,d){return this.x=r.x+(i.x-r.x)*d,this.y=r.y+(i.y-r.y)*d,this.z=r.z+(i.z-r.z)*d,this.w=r.w+(i.w-r.w)*d,this}equals(r){return r.x===this.x&&r.y===this.y&&r.z===this.z&&r.w===this.w}fromArray(r,i=0){return this.x=r[i],this.y=r[i+1],this.z=r[i+2],this.w=r[i+3],this}toArray(r=[],i=0){return r[i]=this.x,r[i+1]=this.y,r[i+2]=this.z,r[i+3]=this.w,r}fromBufferAttribute(r,i){return this.x=r.getX(i),this.y=r.getY(i),this.z=r.getZ(i),this.w=r.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class qw extends wl{constructor(r=1,i=1,d={}){super(),d=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:es,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},d),this.isRenderTarget=!0,this.width=r,this.height=i,this.depth=d.depth,this.scissor=new fn(0,0,r,i),this.scissorTest=!1,this.viewport=new fn(0,0,r,i);const T={width:r,height:i,depth:d.depth},D=new Vn(T);this.textures=[];const U=d.count;for(let t=0;t<U;t++)this.textures[t]=D.clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;this._setTextureOptions(d),this.depthBuffer=d.depthBuffer,this.stencilBuffer=d.stencilBuffer,this.resolveDepthBuffer=d.resolveDepthBuffer,this.resolveStencilBuffer=d.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=d.depthTexture,this.samples=d.samples,this.multiview=d.multiview}_setTextureOptions(r={}){const i={minFilter:es,generateMipmaps:!1,flipY:!1,internalFormat:null};r.mapping!==void 0&&(i.mapping=r.mapping),r.wrapS!==void 0&&(i.wrapS=r.wrapS),r.wrapT!==void 0&&(i.wrapT=r.wrapT),r.wrapR!==void 0&&(i.wrapR=r.wrapR),r.magFilter!==void 0&&(i.magFilter=r.magFilter),r.minFilter!==void 0&&(i.minFilter=r.minFilter),r.format!==void 0&&(i.format=r.format),r.type!==void 0&&(i.type=r.type),r.anisotropy!==void 0&&(i.anisotropy=r.anisotropy),r.colorSpace!==void 0&&(i.colorSpace=r.colorSpace),r.flipY!==void 0&&(i.flipY=r.flipY),r.generateMipmaps!==void 0&&(i.generateMipmaps=r.generateMipmaps),r.internalFormat!==void 0&&(i.internalFormat=r.internalFormat);for(let d=0;d<this.textures.length;d++)this.textures[d].setValues(i)}get texture(){return this.textures[0]}set texture(r){this.textures[0]=r}set depthTexture(r){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),r!==null&&(r.renderTarget=this),this._depthTexture=r}get depthTexture(){return this._depthTexture}setSize(r,i,d=1){if(this.width!==r||this.height!==i||this.depth!==d){this.width=r,this.height=i,this.depth=d;for(let T=0,D=this.textures.length;T<D;T++)this.textures[T].image.width=r,this.textures[T].image.height=i,this.textures[T].image.depth=d,this.textures[T].isArrayTexture=this.textures[T].image.depth>1;this.dispose()}this.viewport.set(0,0,r,i),this.scissor.set(0,0,r,i)}clone(){return new this.constructor().copy(this)}copy(r){this.width=r.width,this.height=r.height,this.depth=r.depth,this.scissor.copy(r.scissor),this.scissorTest=r.scissorTest,this.viewport.copy(r.viewport),this.textures.length=0;for(let i=0,d=r.textures.length;i<d;i++){this.textures[i]=r.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0,this.textures[i].renderTarget=this;const T=Object.assign({},r.textures[i].image);this.textures[i].source=new xy(T)}return this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,r.depthTexture!==null&&(this.depthTexture=r.depthTexture.clone()),this.samples=r.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class oo extends qw{constructor(r=1,i=1,d={}){super(r,i,d),this.isWebGLRenderTarget=!0}}class D1 extends Vn{constructor(r=null,i=1,d=1,T=1){super(null),this.isDataArrayTexture=!0,this.image={data:r,width:i,height:d,depth:T},this.magFilter=ji,this.minFilter=ji,this.wrapR=$a,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(r){this.layerUpdates.add(r)}clearLayerUpdates(){this.layerUpdates.clear()}}class Yw extends Vn{constructor(r=null,i=1,d=1,T=1){super(null),this.isData3DTexture=!0,this.image={data:r,width:i,height:d,depth:T},this.magFilter=ji,this.minFilter=ji,this.wrapR=$a,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ku{constructor(r=new pt(1/0,1/0,1/0),i=new pt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=r,this.max=i}set(r,i){return this.min.copy(r),this.max.copy(i),this}setFromArray(r){this.makeEmpty();for(let i=0,d=r.length;i<d;i+=3)this.expandByPoint(Ii.fromArray(r,i));return this}setFromBufferAttribute(r){this.makeEmpty();for(let i=0,d=r.count;i<d;i++)this.expandByPoint(Ii.fromBufferAttribute(r,i));return this}setFromPoints(r){this.makeEmpty();for(let i=0,d=r.length;i<d;i++)this.expandByPoint(r[i]);return this}setFromCenterAndSize(r,i){const d=Ii.copy(i).multiplyScalar(.5);return this.min.copy(r).sub(d),this.max.copy(r).add(d),this}setFromObject(r,i=!1){return this.makeEmpty(),this.expandByObject(r,i)}clone(){return new this.constructor().copy(this)}copy(r){return this.min.copy(r.min),this.max.copy(r.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(r){return this.isEmpty()?r.set(0,0,0):r.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(r){return this.isEmpty()?r.set(0,0,0):r.subVectors(this.max,this.min)}expandByPoint(r){return this.min.min(r),this.max.max(r),this}expandByVector(r){return this.min.sub(r),this.max.add(r),this}expandByScalar(r){return this.min.addScalar(-r),this.max.addScalar(r),this}expandByObject(r,i=!1){r.updateWorldMatrix(!1,!1);const d=r.geometry;if(d!==void 0){const D=d.getAttribute("position");if(i===!0&&D!==void 0&&r.isInstancedMesh!==!0)for(let U=0,t=D.count;U<t;U++)r.isMesh===!0?r.getVertexPosition(U,Ii):Ii.fromBufferAttribute(D,U),Ii.applyMatrix4(r.matrixWorld),this.expandByPoint(Ii);else r.boundingBox!==void 0?(r.boundingBox===null&&r.computeBoundingBox(),Mf.copy(r.boundingBox)):(d.boundingBox===null&&d.computeBoundingBox(),Mf.copy(d.boundingBox)),Mf.applyMatrix4(r.matrixWorld),this.union(Mf)}const T=r.children;for(let D=0,U=T.length;D<U;D++)this.expandByObject(T[D],i);return this}containsPoint(r){return r.x>=this.min.x&&r.x<=this.max.x&&r.y>=this.min.y&&r.y<=this.max.y&&r.z>=this.min.z&&r.z<=this.max.z}containsBox(r){return this.min.x<=r.min.x&&r.max.x<=this.max.x&&this.min.y<=r.min.y&&r.max.y<=this.max.y&&this.min.z<=r.min.z&&r.max.z<=this.max.z}getParameter(r,i){return i.set((r.x-this.min.x)/(this.max.x-this.min.x),(r.y-this.min.y)/(this.max.y-this.min.y),(r.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(r){return r.max.x>=this.min.x&&r.min.x<=this.max.x&&r.max.y>=this.min.y&&r.min.y<=this.max.y&&r.max.z>=this.min.z&&r.min.z<=this.max.z}intersectsSphere(r){return this.clampPoint(r.center,Ii),Ii.distanceToSquared(r.center)<=r.radius*r.radius}intersectsPlane(r){let i,d;return r.normal.x>0?(i=r.normal.x*this.min.x,d=r.normal.x*this.max.x):(i=r.normal.x*this.max.x,d=r.normal.x*this.min.x),r.normal.y>0?(i+=r.normal.y*this.min.y,d+=r.normal.y*this.max.y):(i+=r.normal.y*this.max.y,d+=r.normal.y*this.min.y),r.normal.z>0?(i+=r.normal.z*this.min.z,d+=r.normal.z*this.max.z):(i+=r.normal.z*this.max.z,d+=r.normal.z*this.min.z),i<=-r.constant&&d>=-r.constant}intersectsTriangle(r){if(this.isEmpty())return!1;this.getCenter(Mu),Ef.subVectors(this.max,Mu),Zo.subVectors(r.a,Mu),Ko.subVectors(r.b,Mu),Qo.subVectors(r.c,Mu),ua.subVectors(Ko,Zo),ca.subVectors(Qo,Ko),za.subVectors(Zo,Qo);let i=[0,-ua.z,ua.y,0,-ca.z,ca.y,0,-za.z,za.y,ua.z,0,-ua.x,ca.z,0,-ca.x,za.z,0,-za.x,-ua.y,ua.x,0,-ca.y,ca.x,0,-za.y,za.x,0];return!Mp(i,Zo,Ko,Qo,Ef)||(i=[1,0,0,0,1,0,0,0,1],!Mp(i,Zo,Ko,Qo,Ef))?!1:(Tf.crossVectors(ua,ca),i=[Tf.x,Tf.y,Tf.z],Mp(i,Zo,Ko,Qo,Ef))}clampPoint(r,i){return i.copy(r).clamp(this.min,this.max)}distanceToPoint(r){return this.clampPoint(r,Ii).distanceTo(r)}getBoundingSphere(r){return this.isEmpty()?r.makeEmpty():(this.getCenter(r.center),r.radius=this.getSize(Ii).length()*.5),r}intersect(r){return this.min.max(r.min),this.max.min(r.max),this.isEmpty()&&this.makeEmpty(),this}union(r){return this.min.min(r.min),this.max.max(r.max),this}applyMatrix4(r){return this.isEmpty()?this:(ws[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(r),ws[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(r),ws[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(r),ws[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(r),ws[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(r),ws[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(r),ws[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(r),ws[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(r),this.setFromPoints(ws),this)}translate(r){return this.min.add(r),this.max.add(r),this}equals(r){return r.min.equals(this.min)&&r.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(r){return this.min.fromArray(r.min),this.max.fromArray(r.max),this}}const ws=[new pt,new pt,new pt,new pt,new pt,new pt,new pt,new pt],Ii=new pt,Mf=new Ku,Zo=new pt,Ko=new pt,Qo=new pt,ua=new pt,ca=new pt,za=new pt,Mu=new pt,Ef=new pt,Tf=new pt,Va=new pt;function Mp(s,r,i,d,T){for(let D=0,U=s.length-3;D<=U;D+=3){Va.fromArray(s,D);const t=T.x*Math.abs(Va.x)+T.y*Math.abs(Va.y)+T.z*Math.abs(Va.z),R=r.dot(Va),M=i.dot(Va),p=d.dot(Va);if(Math.max(-Math.max(R,M,p),Math.min(R,M,p))>t)return!1}return!0}const Zw=new Ku,Eu=new pt,Ep=new pt;class Sy{constructor(r=new pt,i=-1){this.isSphere=!0,this.center=r,this.radius=i}set(r,i){return this.center.copy(r),this.radius=i,this}setFromPoints(r,i){const d=this.center;i!==void 0?d.copy(i):Zw.setFromPoints(r).getCenter(d);let T=0;for(let D=0,U=r.length;D<U;D++)T=Math.max(T,d.distanceToSquared(r[D]));return this.radius=Math.sqrt(T),this}copy(r){return this.center.copy(r.center),this.radius=r.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(r){return r.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(r){return r.distanceTo(this.center)-this.radius}intersectsSphere(r){const i=this.radius+r.radius;return r.center.distanceToSquared(this.center)<=i*i}intersectsBox(r){return r.intersectsSphere(this)}intersectsPlane(r){return Math.abs(r.distanceToPoint(this.center))<=this.radius}clampPoint(r,i){const d=this.center.distanceToSquared(r);return i.copy(r),d>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i}getBoundingBox(r){return this.isEmpty()?(r.makeEmpty(),r):(r.set(this.center,this.center),r.expandByScalar(this.radius),r)}applyMatrix4(r){return this.center.applyMatrix4(r),this.radius=this.radius*r.getMaxScaleOnAxis(),this}translate(r){return this.center.add(r),this}expandByPoint(r){if(this.isEmpty())return this.center.copy(r),this.radius=0,this;Eu.subVectors(r,this.center);const i=Eu.lengthSq();if(i>this.radius*this.radius){const d=Math.sqrt(i),T=(d-this.radius)*.5;this.center.addScaledVector(Eu,T/d),this.radius+=T}return this}union(r){return r.isEmpty()?this:this.isEmpty()?(this.copy(r),this):(this.center.equals(r.center)===!0?this.radius=Math.max(this.radius,r.radius):(Ep.subVectors(r.center,this.center).setLength(r.radius),this.expandByPoint(Eu.copy(r.center).add(Ep)),this.expandByPoint(Eu.copy(r.center).sub(Ep))),this)}equals(r){return r.center.equals(this.center)&&r.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(r){return this.radius=r.radius,this.center.fromArray(r.center),this}}const Ms=new pt,Tp=new pt,Af=new pt,fa=new pt,Ap=new pt,jf=new pt,jp=new pt;class Kw{constructor(r=new pt,i=new pt(0,0,-1)){this.origin=r,this.direction=i}set(r,i){return this.origin.copy(r),this.direction.copy(i),this}copy(r){return this.origin.copy(r.origin),this.direction.copy(r.direction),this}at(r,i){return i.copy(this.origin).addScaledVector(this.direction,r)}lookAt(r){return this.direction.copy(r).sub(this.origin).normalize(),this}recast(r){return this.origin.copy(this.at(r,Ms)),this}closestPointToPoint(r,i){i.subVectors(r,this.origin);const d=i.dot(this.direction);return d<0?i.copy(this.origin):i.copy(this.origin).addScaledVector(this.direction,d)}distanceToPoint(r){return Math.sqrt(this.distanceSqToPoint(r))}distanceSqToPoint(r){const i=Ms.subVectors(r,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(r):(Ms.copy(this.origin).addScaledVector(this.direction,i),Ms.distanceToSquared(r))}distanceSqToSegment(r,i,d,T){Tp.copy(r).add(i).multiplyScalar(.5),Af.copy(i).sub(r).normalize(),fa.copy(this.origin).sub(Tp);const D=r.distanceTo(i)*.5,U=-this.direction.dot(Af),t=fa.dot(this.direction),R=-fa.dot(Af),M=fa.lengthSq(),p=Math.abs(1-U*U);let f,h,b,w;if(p>0)if(f=U*R-t,h=U*t-R,w=D*p,f>=0)if(h>=-w)if(h<=w){const c=1/p;f*=c,h*=c,b=f*(f+U*h+2*t)+h*(U*f+h+2*R)+M}else h=D,f=Math.max(0,-(U*h+t)),b=-f*f+h*(h+2*R)+M;else h=-D,f=Math.max(0,-(U*h+t)),b=-f*f+h*(h+2*R)+M;else h<=-w?(f=Math.max(0,-(-U*D+t)),h=f>0?-D:Math.min(Math.max(-D,-R),D),b=-f*f+h*(h+2*R)+M):h<=w?(f=0,h=Math.min(Math.max(-D,-R),D),b=h*(h+2*R)+M):(f=Math.max(0,-(U*D+t)),h=f>0?D:Math.min(Math.max(-D,-R),D),b=-f*f+h*(h+2*R)+M);else h=U>0?-D:D,f=Math.max(0,-(U*h+t)),b=-f*f+h*(h+2*R)+M;return d&&d.copy(this.origin).addScaledVector(this.direction,f),T&&T.copy(Tp).addScaledVector(Af,h),b}intersectSphere(r,i){Ms.subVectors(r.center,this.origin);const d=Ms.dot(this.direction),T=Ms.dot(Ms)-d*d,D=r.radius*r.radius;if(T>D)return null;const U=Math.sqrt(D-T),t=d-U,R=d+U;return R<0?null:t<0?this.at(R,i):this.at(t,i)}intersectsSphere(r){return r.radius<0?!1:this.distanceSqToPoint(r.center)<=r.radius*r.radius}distanceToPlane(r){const i=r.normal.dot(this.direction);if(i===0)return r.distanceToPoint(this.origin)===0?0:null;const d=-(this.origin.dot(r.normal)+r.constant)/i;return d>=0?d:null}intersectPlane(r,i){const d=this.distanceToPlane(r);return d===null?null:this.at(d,i)}intersectsPlane(r){const i=r.distanceToPoint(this.origin);return i===0||r.normal.dot(this.direction)*i<0}intersectBox(r,i){let d,T,D,U,t,R;const M=1/this.direction.x,p=1/this.direction.y,f=1/this.direction.z,h=this.origin;return M>=0?(d=(r.min.x-h.x)*M,T=(r.max.x-h.x)*M):(d=(r.max.x-h.x)*M,T=(r.min.x-h.x)*M),p>=0?(D=(r.min.y-h.y)*p,U=(r.max.y-h.y)*p):(D=(r.max.y-h.y)*p,U=(r.min.y-h.y)*p),d>U||D>T||((D>d||isNaN(d))&&(d=D),(U<T||isNaN(T))&&(T=U),f>=0?(t=(r.min.z-h.z)*f,R=(r.max.z-h.z)*f):(t=(r.max.z-h.z)*f,R=(r.min.z-h.z)*f),d>R||t>T)||((t>d||d!==d)&&(d=t),(R<T||T!==T)&&(T=R),T<0)?null:this.at(d>=0?d:T,i)}intersectsBox(r){return this.intersectBox(r,Ms)!==null}intersectTriangle(r,i,d,T,D){Ap.subVectors(i,r),jf.subVectors(d,r),jp.crossVectors(Ap,jf);let U=this.direction.dot(jp),t;if(U>0){if(T)return null;t=1}else if(U<0)t=-1,U=-U;else return null;fa.subVectors(this.origin,r);const R=t*this.direction.dot(jf.crossVectors(fa,jf));if(R<0)return null;const M=t*this.direction.dot(Ap.cross(fa));if(M<0||R+M>U)return null;const p=-t*fa.dot(jp);return p<0?null:this.at(p/U,D)}applyMatrix4(r){return this.origin.applyMatrix4(r),this.direction.transformDirection(r),this}equals(r){return r.origin.equals(this.origin)&&r.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class yn{constructor(r,i,d,T,D,U,t,R,M,p,f,h,b,w,c,l){yn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r!==void 0&&this.set(r,i,d,T,D,U,t,R,M,p,f,h,b,w,c,l)}set(r,i,d,T,D,U,t,R,M,p,f,h,b,w,c,l){const o=this.elements;return o[0]=r,o[4]=i,o[8]=d,o[12]=T,o[1]=D,o[5]=U,o[9]=t,o[13]=R,o[2]=M,o[6]=p,o[10]=f,o[14]=h,o[3]=b,o[7]=w,o[11]=c,o[15]=l,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new yn().fromArray(this.elements)}copy(r){const i=this.elements,d=r.elements;return i[0]=d[0],i[1]=d[1],i[2]=d[2],i[3]=d[3],i[4]=d[4],i[5]=d[5],i[6]=d[6],i[7]=d[7],i[8]=d[8],i[9]=d[9],i[10]=d[10],i[11]=d[11],i[12]=d[12],i[13]=d[13],i[14]=d[14],i[15]=d[15],this}copyPosition(r){const i=this.elements,d=r.elements;return i[12]=d[12],i[13]=d[13],i[14]=d[14],this}setFromMatrix3(r){const i=r.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(r,i,d){return r.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),d.setFromMatrixColumn(this,2),this}makeBasis(r,i,d){return this.set(r.x,i.x,d.x,0,r.y,i.y,d.y,0,r.z,i.z,d.z,0,0,0,0,1),this}extractRotation(r){const i=this.elements,d=r.elements,T=1/Jo.setFromMatrixColumn(r,0).length(),D=1/Jo.setFromMatrixColumn(r,1).length(),U=1/Jo.setFromMatrixColumn(r,2).length();return i[0]=d[0]*T,i[1]=d[1]*T,i[2]=d[2]*T,i[3]=0,i[4]=d[4]*D,i[5]=d[5]*D,i[6]=d[6]*D,i[7]=0,i[8]=d[8]*U,i[9]=d[9]*U,i[10]=d[10]*U,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(r){const i=this.elements,d=r.x,T=r.y,D=r.z,U=Math.cos(d),t=Math.sin(d),R=Math.cos(T),M=Math.sin(T),p=Math.cos(D),f=Math.sin(D);if(r.order==="XYZ"){const h=U*p,b=U*f,w=t*p,c=t*f;i[0]=R*p,i[4]=-R*f,i[8]=M,i[1]=b+w*M,i[5]=h-c*M,i[9]=-t*R,i[2]=c-h*M,i[6]=w+b*M,i[10]=U*R}else if(r.order==="YXZ"){const h=R*p,b=R*f,w=M*p,c=M*f;i[0]=h+c*t,i[4]=w*t-b,i[8]=U*M,i[1]=U*f,i[5]=U*p,i[9]=-t,i[2]=b*t-w,i[6]=c+h*t,i[10]=U*R}else if(r.order==="ZXY"){const h=R*p,b=R*f,w=M*p,c=M*f;i[0]=h-c*t,i[4]=-U*f,i[8]=w+b*t,i[1]=b+w*t,i[5]=U*p,i[9]=c-h*t,i[2]=-U*M,i[6]=t,i[10]=U*R}else if(r.order==="ZYX"){const h=U*p,b=U*f,w=t*p,c=t*f;i[0]=R*p,i[4]=w*M-b,i[8]=h*M+c,i[1]=R*f,i[5]=c*M+h,i[9]=b*M-w,i[2]=-M,i[6]=t*R,i[10]=U*R}else if(r.order==="YZX"){const h=U*R,b=U*M,w=t*R,c=t*M;i[0]=R*p,i[4]=c-h*f,i[8]=w*f+b,i[1]=f,i[5]=U*p,i[9]=-t*p,i[2]=-M*p,i[6]=b*f+w,i[10]=h-c*f}else if(r.order==="XZY"){const h=U*R,b=U*M,w=t*R,c=t*M;i[0]=R*p,i[4]=-f,i[8]=M*p,i[1]=h*f+c,i[5]=U*p,i[9]=b*f-w,i[2]=w*f-b,i[6]=t*p,i[10]=c*f+h}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(r){return this.compose(Qw,r,Jw)}lookAt(r,i,d){const T=this.elements;return oi.subVectors(r,i),oi.lengthSq()===0&&(oi.z=1),oi.normalize(),da.crossVectors(d,oi),da.lengthSq()===0&&(Math.abs(d.z)===1?oi.x+=1e-4:oi.z+=1e-4,oi.normalize(),da.crossVectors(d,oi)),da.normalize(),Rf.crossVectors(oi,da),T[0]=da.x,T[4]=Rf.x,T[8]=oi.x,T[1]=da.y,T[5]=Rf.y,T[9]=oi.y,T[2]=da.z,T[6]=Rf.z,T[10]=oi.z,this}multiply(r){return this.multiplyMatrices(this,r)}premultiply(r){return this.multiplyMatrices(r,this)}multiplyMatrices(r,i){const d=r.elements,T=i.elements,D=this.elements,U=d[0],t=d[4],R=d[8],M=d[12],p=d[1],f=d[5],h=d[9],b=d[13],w=d[2],c=d[6],l=d[10],o=d[14],u=d[3],m=d[7],g=d[11],_=d[15],v=T[0],x=T[4],E=T[8],j=T[12],O=T[1],P=T[5],L=T[9],z=T[13],N=T[2],V=T[6],k=T[10],H=T[14],G=T[3],F=T[7],W=T[11],Q=T[15];return D[0]=U*v+t*O+R*N+M*G,D[4]=U*x+t*P+R*V+M*F,D[8]=U*E+t*L+R*k+M*W,D[12]=U*j+t*z+R*H+M*Q,D[1]=p*v+f*O+h*N+b*G,D[5]=p*x+f*P+h*V+b*F,D[9]=p*E+f*L+h*k+b*W,D[13]=p*j+f*z+h*H+b*Q,D[2]=w*v+c*O+l*N+o*G,D[6]=w*x+c*P+l*V+o*F,D[10]=w*E+c*L+l*k+o*W,D[14]=w*j+c*z+l*H+o*Q,D[3]=u*v+m*O+g*N+_*G,D[7]=u*x+m*P+g*V+_*F,D[11]=u*E+m*L+g*k+_*W,D[15]=u*j+m*z+g*H+_*Q,this}multiplyScalar(r){const i=this.elements;return i[0]*=r,i[4]*=r,i[8]*=r,i[12]*=r,i[1]*=r,i[5]*=r,i[9]*=r,i[13]*=r,i[2]*=r,i[6]*=r,i[10]*=r,i[14]*=r,i[3]*=r,i[7]*=r,i[11]*=r,i[15]*=r,this}determinant(){const r=this.elements,i=r[0],d=r[4],T=r[8],D=r[12],U=r[1],t=r[5],R=r[9],M=r[13],p=r[2],f=r[6],h=r[10],b=r[14],w=r[3],c=r[7],l=r[11],o=r[15];return w*(+D*R*f-T*M*f-D*t*h+d*M*h+T*t*b-d*R*b)+c*(+i*R*b-i*M*h+D*U*h-T*U*b+T*M*p-D*R*p)+l*(+i*M*f-i*t*b-D*U*f+d*U*b+D*t*p-d*M*p)+o*(-T*t*p-i*R*f+i*t*h+T*U*f-d*U*h+d*R*p)}transpose(){const r=this.elements;let i;return i=r[1],r[1]=r[4],r[4]=i,i=r[2],r[2]=r[8],r[8]=i,i=r[6],r[6]=r[9],r[9]=i,i=r[3],r[3]=r[12],r[12]=i,i=r[7],r[7]=r[13],r[13]=i,i=r[11],r[11]=r[14],r[14]=i,this}setPosition(r,i,d){const T=this.elements;return r.isVector3?(T[12]=r.x,T[13]=r.y,T[14]=r.z):(T[12]=r,T[13]=i,T[14]=d),this}invert(){const r=this.elements,i=r[0],d=r[1],T=r[2],D=r[3],U=r[4],t=r[5],R=r[6],M=r[7],p=r[8],f=r[9],h=r[10],b=r[11],w=r[12],c=r[13],l=r[14],o=r[15],u=f*l*M-c*h*M+c*R*b-t*l*b-f*R*o+t*h*o,m=w*h*M-p*l*M-w*R*b+U*l*b+p*R*o-U*h*o,g=p*c*M-w*f*M+w*t*b-U*c*b-p*t*o+U*f*o,_=w*f*R-p*c*R-w*t*h+U*c*h+p*t*l-U*f*l,v=i*u+d*m+T*g+D*_;if(v===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/v;return r[0]=u*x,r[1]=(c*h*D-f*l*D-c*T*b+d*l*b+f*T*o-d*h*o)*x,r[2]=(t*l*D-c*R*D+c*T*M-d*l*M-t*T*o+d*R*o)*x,r[3]=(f*R*D-t*h*D-f*T*M+d*h*M+t*T*b-d*R*b)*x,r[4]=m*x,r[5]=(p*l*D-w*h*D+w*T*b-i*l*b-p*T*o+i*h*o)*x,r[6]=(w*R*D-U*l*D-w*T*M+i*l*M+U*T*o-i*R*o)*x,r[7]=(U*h*D-p*R*D+p*T*M-i*h*M-U*T*b+i*R*b)*x,r[8]=g*x,r[9]=(w*f*D-p*c*D-w*d*b+i*c*b+p*d*o-i*f*o)*x,r[10]=(U*c*D-w*t*D+w*d*M-i*c*M-U*d*o+i*t*o)*x,r[11]=(p*t*D-U*f*D-p*d*M+i*f*M+U*d*b-i*t*b)*x,r[12]=_*x,r[13]=(p*c*T-w*f*T+w*d*h-i*c*h-p*d*l+i*f*l)*x,r[14]=(w*t*T-U*c*T-w*d*R+i*c*R+U*d*l-i*t*l)*x,r[15]=(U*f*T-p*t*T+p*d*R-i*f*R-U*d*h+i*t*h)*x,this}scale(r){const i=this.elements,d=r.x,T=r.y,D=r.z;return i[0]*=d,i[4]*=T,i[8]*=D,i[1]*=d,i[5]*=T,i[9]*=D,i[2]*=d,i[6]*=T,i[10]*=D,i[3]*=d,i[7]*=T,i[11]*=D,this}getMaxScaleOnAxis(){const r=this.elements,i=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],d=r[4]*r[4]+r[5]*r[5]+r[6]*r[6],T=r[8]*r[8]+r[9]*r[9]+r[10]*r[10];return Math.sqrt(Math.max(i,d,T))}makeTranslation(r,i,d){return r.isVector3?this.set(1,0,0,r.x,0,1,0,r.y,0,0,1,r.z,0,0,0,1):this.set(1,0,0,r,0,1,0,i,0,0,1,d,0,0,0,1),this}makeRotationX(r){const i=Math.cos(r),d=Math.sin(r);return this.set(1,0,0,0,0,i,-d,0,0,d,i,0,0,0,0,1),this}makeRotationY(r){const i=Math.cos(r),d=Math.sin(r);return this.set(i,0,d,0,0,1,0,0,-d,0,i,0,0,0,0,1),this}makeRotationZ(r){const i=Math.cos(r),d=Math.sin(r);return this.set(i,-d,0,0,d,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(r,i){const d=Math.cos(i),T=Math.sin(i),D=1-d,U=r.x,t=r.y,R=r.z,M=D*U,p=D*t;return this.set(M*U+d,M*t-T*R,M*R+T*t,0,M*t+T*R,p*t+d,p*R-T*U,0,M*R-T*t,p*R+T*U,D*R*R+d,0,0,0,0,1),this}makeScale(r,i,d){return this.set(r,0,0,0,0,i,0,0,0,0,d,0,0,0,0,1),this}makeShear(r,i,d,T,D,U){return this.set(1,d,D,0,r,1,U,0,i,T,1,0,0,0,0,1),this}compose(r,i,d){const T=this.elements,D=i._x,U=i._y,t=i._z,R=i._w,M=D+D,p=U+U,f=t+t,h=D*M,b=D*p,w=D*f,c=U*p,l=U*f,o=t*f,u=R*M,m=R*p,g=R*f,_=d.x,v=d.y,x=d.z;return T[0]=(1-(c+o))*_,T[1]=(b+g)*_,T[2]=(w-m)*_,T[3]=0,T[4]=(b-g)*v,T[5]=(1-(h+o))*v,T[6]=(l+u)*v,T[7]=0,T[8]=(w+m)*x,T[9]=(l-u)*x,T[10]=(1-(h+c))*x,T[11]=0,T[12]=r.x,T[13]=r.y,T[14]=r.z,T[15]=1,this}decompose(r,i,d){const T=this.elements;let D=Jo.set(T[0],T[1],T[2]).length();const U=Jo.set(T[4],T[5],T[6]).length(),t=Jo.set(T[8],T[9],T[10]).length();this.determinant()<0&&(D=-D),r.x=T[12],r.y=T[13],r.z=T[14],ki.copy(this);const M=1/D,p=1/U,f=1/t;return ki.elements[0]*=M,ki.elements[1]*=M,ki.elements[2]*=M,ki.elements[4]*=p,ki.elements[5]*=p,ki.elements[6]*=p,ki.elements[8]*=f,ki.elements[9]*=f,ki.elements[10]*=f,i.setFromRotationMatrix(ki),d.x=D,d.y=U,d.z=t,this}makePerspective(r,i,d,T,D,U,t=Ds){const R=this.elements,M=2*D/(i-r),p=2*D/(d-T),f=(i+r)/(i-r),h=(d+T)/(d-T);let b,w;if(t===Ds)b=-(U+D)/(U-D),w=-2*U*D/(U-D);else if(t===od)b=-U/(U-D),w=-U*D/(U-D);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+t);return R[0]=M,R[4]=0,R[8]=f,R[12]=0,R[1]=0,R[5]=p,R[9]=h,R[13]=0,R[2]=0,R[6]=0,R[10]=b,R[14]=w,R[3]=0,R[7]=0,R[11]=-1,R[15]=0,this}makeOrthographic(r,i,d,T,D,U,t=Ds){const R=this.elements,M=1/(i-r),p=1/(d-T),f=1/(U-D),h=(i+r)*M,b=(d+T)*p;let w,c;if(t===Ds)w=(U+D)*f,c=-2*f;else if(t===od)w=D*f,c=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+t);return R[0]=2*M,R[4]=0,R[8]=0,R[12]=-h,R[1]=0,R[5]=2*p,R[9]=0,R[13]=-b,R[2]=0,R[6]=0,R[10]=c,R[14]=-w,R[3]=0,R[7]=0,R[11]=0,R[15]=1,this}equals(r){const i=this.elements,d=r.elements;for(let T=0;T<16;T++)if(i[T]!==d[T])return!1;return!0}fromArray(r,i=0){for(let d=0;d<16;d++)this.elements[d]=r[d+i];return this}toArray(r=[],i=0){const d=this.elements;return r[i]=d[0],r[i+1]=d[1],r[i+2]=d[2],r[i+3]=d[3],r[i+4]=d[4],r[i+5]=d[5],r[i+6]=d[6],r[i+7]=d[7],r[i+8]=d[8],r[i+9]=d[9],r[i+10]=d[10],r[i+11]=d[11],r[i+12]=d[12],r[i+13]=d[13],r[i+14]=d[14],r[i+15]=d[15],r}}const Jo=new pt,ki=new yn,Qw=new pt(0,0,0),Jw=new pt(1,1,1),da=new pt,Rf=new pt,oi=new pt,bb=new yn,_b=new Zu;class Ps{constructor(r=0,i=0,d=0,T=Ps.DEFAULT_ORDER){this.isEuler=!0,this._x=r,this._y=i,this._z=d,this._order=T}get x(){return this._x}set x(r){this._x=r,this._onChangeCallback()}get y(){return this._y}set y(r){this._y=r,this._onChangeCallback()}get z(){return this._z}set z(r){this._z=r,this._onChangeCallback()}get order(){return this._order}set order(r){this._order=r,this._onChangeCallback()}set(r,i,d,T=this._order){return this._x=r,this._y=i,this._z=d,this._order=T,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(r){return this._x=r._x,this._y=r._y,this._z=r._z,this._order=r._order,this._onChangeCallback(),this}setFromRotationMatrix(r,i=this._order,d=!0){const T=r.elements,D=T[0],U=T[4],t=T[8],R=T[1],M=T[5],p=T[9],f=T[2],h=T[6],b=T[10];switch(i){case"XYZ":this._y=Math.asin(pr(t,-1,1)),Math.abs(t)<.9999999?(this._x=Math.atan2(-p,b),this._z=Math.atan2(-U,D)):(this._x=Math.atan2(h,M),this._z=0);break;case"YXZ":this._x=Math.asin(-pr(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(t,b),this._z=Math.atan2(R,M)):(this._y=Math.atan2(-f,D),this._z=0);break;case"ZXY":this._x=Math.asin(pr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,b),this._z=Math.atan2(-U,M)):(this._y=0,this._z=Math.atan2(R,D));break;case"ZYX":this._y=Math.asin(-pr(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,b),this._z=Math.atan2(R,D)):(this._x=0,this._z=Math.atan2(-U,M));break;case"YZX":this._z=Math.asin(pr(R,-1,1)),Math.abs(R)<.9999999?(this._x=Math.atan2(-p,M),this._y=Math.atan2(-f,D)):(this._x=0,this._y=Math.atan2(t,b));break;case"XZY":this._z=Math.asin(-pr(U,-1,1)),Math.abs(U)<.9999999?(this._x=Math.atan2(h,M),this._y=Math.atan2(t,D)):(this._x=Math.atan2(-p,b),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,d===!0&&this._onChangeCallback(),this}setFromQuaternion(r,i,d){return bb.makeRotationFromQuaternion(r),this.setFromRotationMatrix(bb,i,d)}setFromVector3(r,i=this._order){return this.set(r.x,r.y,r.z,i)}reorder(r){return _b.setFromEuler(this),this.setFromQuaternion(_b,r)}equals(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._order===this._order}fromArray(r){return this._x=r[0],this._y=r[1],this._z=r[2],r[3]!==void 0&&(this._order=r[3]),this._onChangeCallback(),this}toArray(r=[],i=0){return r[i]=this._x,r[i+1]=this._y,r[i+2]=this._z,r[i+3]=this._order,r}_onChange(r){return this._onChangeCallback=r,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ps.DEFAULT_ORDER="XYZ";class L1{constructor(){this.mask=1}set(r){this.mask=(1<<r|0)>>>0}enable(r){this.mask|=1<<r|0}enableAll(){this.mask=-1}toggle(r){this.mask^=1<<r|0}disable(r){this.mask&=~(1<<r|0)}disableAll(){this.mask=0}test(r){return(this.mask&r.mask)!==0}isEnabled(r){return(this.mask&(1<<r|0))!==0}}let $w=0;const xb=new pt,$o=new Zu,Es=new yn,Cf=new pt,Tu=new pt,eM=new pt,tM=new Zu,Sb=new pt(1,0,0),wb=new pt(0,1,0),Mb=new pt(0,0,1),Eb={type:"added"},rM={type:"removed"},el={type:"childadded",child:null},Rp={type:"childremoved",child:null};class ui extends wl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:$w++}),this.uuid=Yu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ui.DEFAULT_UP.clone();const r=new pt,i=new Ps,d=new Zu,T=new pt(1,1,1);function D(){d.setFromEuler(i,!1)}function U(){i.setFromQuaternion(d,void 0,!1)}i._onChange(D),d._onChange(U),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:d},scale:{configurable:!0,enumerable:!0,value:T},modelViewMatrix:{value:new yn},normalMatrix:{value:new rr}}),this.matrix=new yn,this.matrixWorld=new yn,this.matrixAutoUpdate=ui.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ui.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new L1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(r){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(r),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(r){return this.quaternion.premultiply(r),this}setRotationFromAxisAngle(r,i){this.quaternion.setFromAxisAngle(r,i)}setRotationFromEuler(r){this.quaternion.setFromEuler(r,!0)}setRotationFromMatrix(r){this.quaternion.setFromRotationMatrix(r)}setRotationFromQuaternion(r){this.quaternion.copy(r)}rotateOnAxis(r,i){return $o.setFromAxisAngle(r,i),this.quaternion.multiply($o),this}rotateOnWorldAxis(r,i){return $o.setFromAxisAngle(r,i),this.quaternion.premultiply($o),this}rotateX(r){return this.rotateOnAxis(Sb,r)}rotateY(r){return this.rotateOnAxis(wb,r)}rotateZ(r){return this.rotateOnAxis(Mb,r)}translateOnAxis(r,i){return xb.copy(r).applyQuaternion(this.quaternion),this.position.add(xb.multiplyScalar(i)),this}translateX(r){return this.translateOnAxis(Sb,r)}translateY(r){return this.translateOnAxis(wb,r)}translateZ(r){return this.translateOnAxis(Mb,r)}localToWorld(r){return this.updateWorldMatrix(!0,!1),r.applyMatrix4(this.matrixWorld)}worldToLocal(r){return this.updateWorldMatrix(!0,!1),r.applyMatrix4(Es.copy(this.matrixWorld).invert())}lookAt(r,i,d){r.isVector3?Cf.copy(r):Cf.set(r,i,d);const T=this.parent;this.updateWorldMatrix(!0,!1),Tu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Es.lookAt(Tu,Cf,this.up):Es.lookAt(Cf,Tu,this.up),this.quaternion.setFromRotationMatrix(Es),T&&(Es.extractRotation(T.matrixWorld),$o.setFromRotationMatrix(Es),this.quaternion.premultiply($o.invert()))}add(r){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return r===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",r),this):(r&&r.isObject3D?(r.removeFromParent(),r.parent=this,this.children.push(r),r.dispatchEvent(Eb),el.child=r,this.dispatchEvent(el),el.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",r),this)}remove(r){if(arguments.length>1){for(let d=0;d<arguments.length;d++)this.remove(arguments[d]);return this}const i=this.children.indexOf(r);return i!==-1&&(r.parent=null,this.children.splice(i,1),r.dispatchEvent(rM),Rp.child=r,this.dispatchEvent(Rp),Rp.child=null),this}removeFromParent(){const r=this.parent;return r!==null&&r.remove(this),this}clear(){return this.remove(...this.children)}attach(r){return this.updateWorldMatrix(!0,!1),Es.copy(this.matrixWorld).invert(),r.parent!==null&&(r.parent.updateWorldMatrix(!0,!1),Es.multiply(r.parent.matrixWorld)),r.applyMatrix4(Es),r.removeFromParent(),r.parent=this,this.children.push(r),r.updateWorldMatrix(!1,!0),r.dispatchEvent(Eb),el.child=r,this.dispatchEvent(el),el.child=null,this}getObjectById(r){return this.getObjectByProperty("id",r)}getObjectByName(r){return this.getObjectByProperty("name",r)}getObjectByProperty(r,i){if(this[r]===i)return this;for(let d=0,T=this.children.length;d<T;d++){const U=this.children[d].getObjectByProperty(r,i);if(U!==void 0)return U}}getObjectsByProperty(r,i,d=[]){this[r]===i&&d.push(this);const T=this.children;for(let D=0,U=T.length;D<U;D++)T[D].getObjectsByProperty(r,i,d);return d}getWorldPosition(r){return this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(r){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tu,r,eM),r}getWorldScale(r){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tu,tM,r),r}getWorldDirection(r){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return r.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(r){r(this);const i=this.children;for(let d=0,T=i.length;d<T;d++)i[d].traverse(r)}traverseVisible(r){if(this.visible===!1)return;r(this);const i=this.children;for(let d=0,T=i.length;d<T;d++)i[d].traverseVisible(r)}traverseAncestors(r){const i=this.parent;i!==null&&(r(i),i.traverseAncestors(r))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(r){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||r)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,r=!0);const i=this.children;for(let d=0,T=i.length;d<T;d++)i[d].updateMatrixWorld(r)}updateWorldMatrix(r,i){const d=this.parent;if(r===!0&&d!==null&&d.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){const T=this.children;for(let D=0,U=T.length;D<U;D++)T[D].updateWorldMatrix(!1,!0)}}toJSON(r){const i=r===void 0||typeof r=="string",d={};i&&(r={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},d.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const T={};T.uuid=this.uuid,T.type=this.type,this.name!==""&&(T.name=this.name),this.castShadow===!0&&(T.castShadow=!0),this.receiveShadow===!0&&(T.receiveShadow=!0),this.visible===!1&&(T.visible=!1),this.frustumCulled===!1&&(T.frustumCulled=!1),this.renderOrder!==0&&(T.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(T.userData=this.userData),T.layers=this.layers.mask,T.matrix=this.matrix.toArray(),T.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(T.matrixAutoUpdate=!1),this.isInstancedMesh&&(T.type="InstancedMesh",T.count=this.count,T.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(T.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(T.type="BatchedMesh",T.perObjectFrustumCulled=this.perObjectFrustumCulled,T.sortObjects=this.sortObjects,T.drawRanges=this._drawRanges,T.reservedRanges=this._reservedRanges,T.geometryInfo=this._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox?t.boundingBox.toJSON():void 0,boundingSphere:t.boundingSphere?t.boundingSphere.toJSON():void 0})),T.instanceInfo=this._instanceInfo.map(t=>({...t})),T.availableInstanceIds=this._availableInstanceIds.slice(),T.availableGeometryIds=this._availableGeometryIds.slice(),T.nextIndexStart=this._nextIndexStart,T.nextVertexStart=this._nextVertexStart,T.geometryCount=this._geometryCount,T.maxInstanceCount=this._maxInstanceCount,T.maxVertexCount=this._maxVertexCount,T.maxIndexCount=this._maxIndexCount,T.geometryInitialized=this._geometryInitialized,T.matricesTexture=this._matricesTexture.toJSON(r),T.indirectTexture=this._indirectTexture.toJSON(r),this._colorsTexture!==null&&(T.colorsTexture=this._colorsTexture.toJSON(r)),this.boundingSphere!==null&&(T.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(T.boundingBox=this.boundingBox.toJSON()));function D(t,R){return t[R.uuid]===void 0&&(t[R.uuid]=R.toJSON(r)),R.uuid}if(this.isScene)this.background&&(this.background.isColor?T.background=this.background.toJSON():this.background.isTexture&&(T.background=this.background.toJSON(r).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(T.environment=this.environment.toJSON(r).uuid);else if(this.isMesh||this.isLine||this.isPoints){T.geometry=D(r.geometries,this.geometry);const t=this.geometry.parameters;if(t!==void 0&&t.shapes!==void 0){const R=t.shapes;if(Array.isArray(R))for(let M=0,p=R.length;M<p;M++){const f=R[M];D(r.shapes,f)}else D(r.shapes,R)}}if(this.isSkinnedMesh&&(T.bindMode=this.bindMode,T.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(D(r.skeletons,this.skeleton),T.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const t=[];for(let R=0,M=this.material.length;R<M;R++)t.push(D(r.materials,this.material[R]));T.material=t}else T.material=D(r.materials,this.material);if(this.children.length>0){T.children=[];for(let t=0;t<this.children.length;t++)T.children.push(this.children[t].toJSON(r).object)}if(this.animations.length>0){T.animations=[];for(let t=0;t<this.animations.length;t++){const R=this.animations[t];T.animations.push(D(r.animations,R))}}if(i){const t=U(r.geometries),R=U(r.materials),M=U(r.textures),p=U(r.images),f=U(r.shapes),h=U(r.skeletons),b=U(r.animations),w=U(r.nodes);t.length>0&&(d.geometries=t),R.length>0&&(d.materials=R),M.length>0&&(d.textures=M),p.length>0&&(d.images=p),f.length>0&&(d.shapes=f),h.length>0&&(d.skeletons=h),b.length>0&&(d.animations=b),w.length>0&&(d.nodes=w)}return d.object=T,d;function U(t){const R=[];for(const M in t){const p=t[M];delete p.metadata,R.push(p)}return R}}clone(r){return new this.constructor().copy(this,r)}copy(r,i=!0){if(this.name=r.name,this.up.copy(r.up),this.position.copy(r.position),this.rotation.order=r.rotation.order,this.quaternion.copy(r.quaternion),this.scale.copy(r.scale),this.matrix.copy(r.matrix),this.matrixWorld.copy(r.matrixWorld),this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrixWorldAutoUpdate=r.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=r.matrixWorldNeedsUpdate,this.layers.mask=r.layers.mask,this.visible=r.visible,this.castShadow=r.castShadow,this.receiveShadow=r.receiveShadow,this.frustumCulled=r.frustumCulled,this.renderOrder=r.renderOrder,this.animations=r.animations.slice(),this.userData=JSON.parse(JSON.stringify(r.userData)),i===!0)for(let d=0;d<r.children.length;d++){const T=r.children[d];this.add(T.clone())}return this}}ui.DEFAULT_UP=new pt(0,1,0);ui.DEFAULT_MATRIX_AUTO_UPDATE=!0;ui.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Fi=new pt,Ts=new pt,Cp=new pt,As=new pt,tl=new pt,rl=new pt,Tb=new pt,Dp=new pt,Lp=new pt,Op=new pt,Pp=new fn,Up=new fn,Np=new fn;class zi{constructor(r=new pt,i=new pt,d=new pt){this.a=r,this.b=i,this.c=d}static getNormal(r,i,d,T){T.subVectors(d,i),Fi.subVectors(r,i),T.cross(Fi);const D=T.lengthSq();return D>0?T.multiplyScalar(1/Math.sqrt(D)):T.set(0,0,0)}static getBarycoord(r,i,d,T,D){Fi.subVectors(T,i),Ts.subVectors(d,i),Cp.subVectors(r,i);const U=Fi.dot(Fi),t=Fi.dot(Ts),R=Fi.dot(Cp),M=Ts.dot(Ts),p=Ts.dot(Cp),f=U*M-t*t;if(f===0)return D.set(0,0,0),null;const h=1/f,b=(M*R-t*p)*h,w=(U*p-t*R)*h;return D.set(1-b-w,w,b)}static containsPoint(r,i,d,T){return this.getBarycoord(r,i,d,T,As)===null?!1:As.x>=0&&As.y>=0&&As.x+As.y<=1}static getInterpolation(r,i,d,T,D,U,t,R){return this.getBarycoord(r,i,d,T,As)===null?(R.x=0,R.y=0,"z"in R&&(R.z=0),"w"in R&&(R.w=0),null):(R.setScalar(0),R.addScaledVector(D,As.x),R.addScaledVector(U,As.y),R.addScaledVector(t,As.z),R)}static getInterpolatedAttribute(r,i,d,T,D,U){return Pp.setScalar(0),Up.setScalar(0),Np.setScalar(0),Pp.fromBufferAttribute(r,i),Up.fromBufferAttribute(r,d),Np.fromBufferAttribute(r,T),U.setScalar(0),U.addScaledVector(Pp,D.x),U.addScaledVector(Up,D.y),U.addScaledVector(Np,D.z),U}static isFrontFacing(r,i,d,T){return Fi.subVectors(d,i),Ts.subVectors(r,i),Fi.cross(Ts).dot(T)<0}set(r,i,d){return this.a.copy(r),this.b.copy(i),this.c.copy(d),this}setFromPointsAndIndices(r,i,d,T){return this.a.copy(r[i]),this.b.copy(r[d]),this.c.copy(r[T]),this}setFromAttributeAndIndices(r,i,d,T){return this.a.fromBufferAttribute(r,i),this.b.fromBufferAttribute(r,d),this.c.fromBufferAttribute(r,T),this}clone(){return new this.constructor().copy(this)}copy(r){return this.a.copy(r.a),this.b.copy(r.b),this.c.copy(r.c),this}getArea(){return Fi.subVectors(this.c,this.b),Ts.subVectors(this.a,this.b),Fi.cross(Ts).length()*.5}getMidpoint(r){return r.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(r){return zi.getNormal(this.a,this.b,this.c,r)}getPlane(r){return r.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(r,i){return zi.getBarycoord(r,this.a,this.b,this.c,i)}getInterpolation(r,i,d,T,D){return zi.getInterpolation(r,this.a,this.b,this.c,i,d,T,D)}containsPoint(r){return zi.containsPoint(r,this.a,this.b,this.c)}isFrontFacing(r){return zi.isFrontFacing(this.a,this.b,this.c,r)}intersectsBox(r){return r.intersectsTriangle(this)}closestPointToPoint(r,i){const d=this.a,T=this.b,D=this.c;let U,t;tl.subVectors(T,d),rl.subVectors(D,d),Dp.subVectors(r,d);const R=tl.dot(Dp),M=rl.dot(Dp);if(R<=0&&M<=0)return i.copy(d);Lp.subVectors(r,T);const p=tl.dot(Lp),f=rl.dot(Lp);if(p>=0&&f<=p)return i.copy(T);const h=R*f-p*M;if(h<=0&&R>=0&&p<=0)return U=R/(R-p),i.copy(d).addScaledVector(tl,U);Op.subVectors(r,D);const b=tl.dot(Op),w=rl.dot(Op);if(w>=0&&b<=w)return i.copy(D);const c=b*M-R*w;if(c<=0&&M>=0&&w<=0)return t=M/(M-w),i.copy(d).addScaledVector(rl,t);const l=p*w-b*f;if(l<=0&&f-p>=0&&b-w>=0)return Tb.subVectors(D,T),t=(f-p)/(f-p+(b-w)),i.copy(T).addScaledVector(Tb,t);const o=1/(l+c+h);return U=c*o,t=h*o,i.copy(d).addScaledVector(tl,U).addScaledVector(rl,t)}equals(r){return r.a.equals(this.a)&&r.b.equals(this.b)&&r.c.equals(this.c)}}const O1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ha={h:0,s:0,l:0},Df={h:0,s:0,l:0};function Ip(s,r,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?s+(r-s)*6*i:i<1/2?r:i<2/3?s+(r-s)*6*(2/3-i):s}class Nr{constructor(r,i,d){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(r,i,d)}set(r,i,d){if(i===void 0&&d===void 0){const T=r;T&&T.isColor?this.copy(T):typeof T=="number"?this.setHex(T):typeof T=="string"&&this.setStyle(T)}else this.setRGB(r,i,d);return this}setScalar(r){return this.r=r,this.g=r,this.b=r,this}setHex(r,i=Ti){return r=Math.floor(r),this.r=(r>>16&255)/255,this.g=(r>>8&255)/255,this.b=(r&255)/255,xr.colorSpaceToWorking(this,i),this}setRGB(r,i,d,T=xr.workingColorSpace){return this.r=r,this.g=i,this.b=d,xr.colorSpaceToWorking(this,T),this}setHSL(r,i,d,T=xr.workingColorSpace){if(r=kw(r,1),i=pr(i,0,1),d=pr(d,0,1),i===0)this.r=this.g=this.b=d;else{const D=d<=.5?d*(1+i):d+i-d*i,U=2*d-D;this.r=Ip(U,D,r+1/3),this.g=Ip(U,D,r),this.b=Ip(U,D,r-1/3)}return xr.colorSpaceToWorking(this,T),this}setStyle(r,i=Ti){function d(D){D!==void 0&&parseFloat(D)<1&&console.warn("THREE.Color: Alpha component of "+r+" will be ignored.")}let T;if(T=/^(\w+)\(([^\)]*)\)/.exec(r)){let D;const U=T[1],t=T[2];switch(U){case"rgb":case"rgba":if(D=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(t))return d(D[4]),this.setRGB(Math.min(255,parseInt(D[1],10))/255,Math.min(255,parseInt(D[2],10))/255,Math.min(255,parseInt(D[3],10))/255,i);if(D=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(t))return d(D[4]),this.setRGB(Math.min(100,parseInt(D[1],10))/100,Math.min(100,parseInt(D[2],10))/100,Math.min(100,parseInt(D[3],10))/100,i);break;case"hsl":case"hsla":if(D=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(t))return d(D[4]),this.setHSL(parseFloat(D[1])/360,parseFloat(D[2])/100,parseFloat(D[3])/100,i);break;default:console.warn("THREE.Color: Unknown color model "+r)}}else if(T=/^\#([A-Fa-f\d]+)$/.exec(r)){const D=T[1],U=D.length;if(U===3)return this.setRGB(parseInt(D.charAt(0),16)/15,parseInt(D.charAt(1),16)/15,parseInt(D.charAt(2),16)/15,i);if(U===6)return this.setHex(parseInt(D,16),i);console.warn("THREE.Color: Invalid hex color "+r)}else if(r&&r.length>0)return this.setColorName(r,i);return this}setColorName(r,i=Ti){const d=O1[r.toLowerCase()];return d!==void 0?this.setHex(d,i):console.warn("THREE.Color: Unknown color "+r),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(r){return this.r=r.r,this.g=r.g,this.b=r.b,this}copySRGBToLinear(r){return this.r=Ls(r.r),this.g=Ls(r.g),this.b=Ls(r.b),this}copyLinearToSRGB(r){return this.r=ml(r.r),this.g=ml(r.g),this.b=ml(r.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(r=Ti){return xr.workingToColorSpace(Nn.copy(this),r),Math.round(pr(Nn.r*255,0,255))*65536+Math.round(pr(Nn.g*255,0,255))*256+Math.round(pr(Nn.b*255,0,255))}getHexString(r=Ti){return("000000"+this.getHex(r).toString(16)).slice(-6)}getHSL(r,i=xr.workingColorSpace){xr.workingToColorSpace(Nn.copy(this),i);const d=Nn.r,T=Nn.g,D=Nn.b,U=Math.max(d,T,D),t=Math.min(d,T,D);let R,M;const p=(t+U)/2;if(t===U)R=0,M=0;else{const f=U-t;switch(M=p<=.5?f/(U+t):f/(2-U-t),U){case d:R=(T-D)/f+(T<D?6:0);break;case T:R=(D-d)/f+2;break;case D:R=(d-T)/f+4;break}R/=6}return r.h=R,r.s=M,r.l=p,r}getRGB(r,i=xr.workingColorSpace){return xr.workingToColorSpace(Nn.copy(this),i),r.r=Nn.r,r.g=Nn.g,r.b=Nn.b,r}getStyle(r=Ti){xr.workingToColorSpace(Nn.copy(this),r);const i=Nn.r,d=Nn.g,T=Nn.b;return r!==Ti?`color(${r} ${i.toFixed(3)} ${d.toFixed(3)} ${T.toFixed(3)})`:`rgb(${Math.round(i*255)},${Math.round(d*255)},${Math.round(T*255)})`}offsetHSL(r,i,d){return this.getHSL(ha),this.setHSL(ha.h+r,ha.s+i,ha.l+d)}add(r){return this.r+=r.r,this.g+=r.g,this.b+=r.b,this}addColors(r,i){return this.r=r.r+i.r,this.g=r.g+i.g,this.b=r.b+i.b,this}addScalar(r){return this.r+=r,this.g+=r,this.b+=r,this}sub(r){return this.r=Math.max(0,this.r-r.r),this.g=Math.max(0,this.g-r.g),this.b=Math.max(0,this.b-r.b),this}multiply(r){return this.r*=r.r,this.g*=r.g,this.b*=r.b,this}multiplyScalar(r){return this.r*=r,this.g*=r,this.b*=r,this}lerp(r,i){return this.r+=(r.r-this.r)*i,this.g+=(r.g-this.g)*i,this.b+=(r.b-this.b)*i,this}lerpColors(r,i,d){return this.r=r.r+(i.r-r.r)*d,this.g=r.g+(i.g-r.g)*d,this.b=r.b+(i.b-r.b)*d,this}lerpHSL(r,i){this.getHSL(ha),r.getHSL(Df);const d=bp(ha.h,Df.h,i),T=bp(ha.s,Df.s,i),D=bp(ha.l,Df.l,i);return this.setHSL(d,T,D),this}setFromVector3(r){return this.r=r.x,this.g=r.y,this.b=r.z,this}applyMatrix3(r){const i=this.r,d=this.g,T=this.b,D=r.elements;return this.r=D[0]*i+D[3]*d+D[6]*T,this.g=D[1]*i+D[4]*d+D[7]*T,this.b=D[2]*i+D[5]*d+D[8]*T,this}equals(r){return r.r===this.r&&r.g===this.g&&r.b===this.b}fromArray(r,i=0){return this.r=r[i],this.g=r[i+1],this.b=r[i+2],this}toArray(r=[],i=0){return r[i]=this.r,r[i+1]=this.g,r[i+2]=this.b,r}fromBufferAttribute(r,i){return this.r=r.getX(i),this.g=r.getY(i),this.b=r.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Nn=new Nr;Nr.NAMES=O1;let nM=0;class yd extends wl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:nM++}),this.uuid=Yu(),this.name="",this.type="Material",this.blending=hl,this.side=ba,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=om,this.blendDst=lm,this.blendEquation=Qa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Nr(0,0,0),this.blendAlpha=0,this.depthFunc=yl,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=db,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=qo,this.stencilZFail=qo,this.stencilZPass=qo,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(r){this._alphaTest>0!=r>0&&this.version++,this._alphaTest=r}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(r){if(r!==void 0)for(const i in r){const d=r[i];if(d===void 0){console.warn(`THREE.Material: parameter '${i}' has value of undefined.`);continue}const T=this[i];if(T===void 0){console.warn(`THREE.Material: '${i}' is not a property of THREE.${this.type}.`);continue}T&&T.isColor?T.set(d):T&&T.isVector3&&d&&d.isVector3?T.copy(d):this[i]=d}}toJSON(r){const i=r===void 0||typeof r=="string";i&&(r={textures:{},images:{}});const d={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};d.uuid=this.uuid,d.type=this.type,this.name!==""&&(d.name=this.name),this.color&&this.color.isColor&&(d.color=this.color.getHex()),this.roughness!==void 0&&(d.roughness=this.roughness),this.metalness!==void 0&&(d.metalness=this.metalness),this.sheen!==void 0&&(d.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(d.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(d.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(d.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(d.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(d.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(d.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(d.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(d.shininess=this.shininess),this.clearcoat!==void 0&&(d.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(d.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(d.clearcoatMap=this.clearcoatMap.toJSON(r).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(d.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(r).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(d.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(r).uuid,d.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(d.dispersion=this.dispersion),this.iridescence!==void 0&&(d.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(d.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(d.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(d.iridescenceMap=this.iridescenceMap.toJSON(r).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(d.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(r).uuid),this.anisotropy!==void 0&&(d.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(d.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(d.anisotropyMap=this.anisotropyMap.toJSON(r).uuid),this.map&&this.map.isTexture&&(d.map=this.map.toJSON(r).uuid),this.matcap&&this.matcap.isTexture&&(d.matcap=this.matcap.toJSON(r).uuid),this.alphaMap&&this.alphaMap.isTexture&&(d.alphaMap=this.alphaMap.toJSON(r).uuid),this.lightMap&&this.lightMap.isTexture&&(d.lightMap=this.lightMap.toJSON(r).uuid,d.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(d.aoMap=this.aoMap.toJSON(r).uuid,d.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(d.bumpMap=this.bumpMap.toJSON(r).uuid,d.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(d.normalMap=this.normalMap.toJSON(r).uuid,d.normalMapType=this.normalMapType,d.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(d.displacementMap=this.displacementMap.toJSON(r).uuid,d.displacementScale=this.displacementScale,d.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(d.roughnessMap=this.roughnessMap.toJSON(r).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(d.metalnessMap=this.metalnessMap.toJSON(r).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(d.emissiveMap=this.emissiveMap.toJSON(r).uuid),this.specularMap&&this.specularMap.isTexture&&(d.specularMap=this.specularMap.toJSON(r).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(d.specularIntensityMap=this.specularIntensityMap.toJSON(r).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(d.specularColorMap=this.specularColorMap.toJSON(r).uuid),this.envMap&&this.envMap.isTexture&&(d.envMap=this.envMap.toJSON(r).uuid,this.combine!==void 0&&(d.combine=this.combine)),this.envMapRotation!==void 0&&(d.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(d.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(d.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(d.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(d.gradientMap=this.gradientMap.toJSON(r).uuid),this.transmission!==void 0&&(d.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(d.transmissionMap=this.transmissionMap.toJSON(r).uuid),this.thickness!==void 0&&(d.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(d.thicknessMap=this.thicknessMap.toJSON(r).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(d.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(d.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(d.size=this.size),this.shadowSide!==null&&(d.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(d.sizeAttenuation=this.sizeAttenuation),this.blending!==hl&&(d.blending=this.blending),this.side!==ba&&(d.side=this.side),this.vertexColors===!0&&(d.vertexColors=!0),this.opacity<1&&(d.opacity=this.opacity),this.transparent===!0&&(d.transparent=!0),this.blendSrc!==om&&(d.blendSrc=this.blendSrc),this.blendDst!==lm&&(d.blendDst=this.blendDst),this.blendEquation!==Qa&&(d.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(d.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(d.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(d.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(d.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(d.blendAlpha=this.blendAlpha),this.depthFunc!==yl&&(d.depthFunc=this.depthFunc),this.depthTest===!1&&(d.depthTest=this.depthTest),this.depthWrite===!1&&(d.depthWrite=this.depthWrite),this.colorWrite===!1&&(d.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(d.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==db&&(d.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(d.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(d.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==qo&&(d.stencilFail=this.stencilFail),this.stencilZFail!==qo&&(d.stencilZFail=this.stencilZFail),this.stencilZPass!==qo&&(d.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(d.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(d.rotation=this.rotation),this.polygonOffset===!0&&(d.polygonOffset=!0),this.polygonOffsetFactor!==0&&(d.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(d.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(d.linewidth=this.linewidth),this.dashSize!==void 0&&(d.dashSize=this.dashSize),this.gapSize!==void 0&&(d.gapSize=this.gapSize),this.scale!==void 0&&(d.scale=this.scale),this.dithering===!0&&(d.dithering=!0),this.alphaTest>0&&(d.alphaTest=this.alphaTest),this.alphaHash===!0&&(d.alphaHash=!0),this.alphaToCoverage===!0&&(d.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(d.premultipliedAlpha=!0),this.forceSinglePass===!0&&(d.forceSinglePass=!0),this.wireframe===!0&&(d.wireframe=!0),this.wireframeLinewidth>1&&(d.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(d.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(d.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(d.flatShading=!0),this.visible===!1&&(d.visible=!1),this.toneMapped===!1&&(d.toneMapped=!1),this.fog===!1&&(d.fog=!1),Object.keys(this.userData).length>0&&(d.userData=this.userData);function T(D){const U=[];for(const t in D){const R=D[t];delete R.metadata,U.push(R)}return U}if(i){const D=T(r.textures),U=T(r.images);D.length>0&&(d.textures=D),U.length>0&&(d.images=U)}return d}clone(){return new this.constructor().copy(this)}copy(r){this.name=r.name,this.blending=r.blending,this.side=r.side,this.vertexColors=r.vertexColors,this.opacity=r.opacity,this.transparent=r.transparent,this.blendSrc=r.blendSrc,this.blendDst=r.blendDst,this.blendEquation=r.blendEquation,this.blendSrcAlpha=r.blendSrcAlpha,this.blendDstAlpha=r.blendDstAlpha,this.blendEquationAlpha=r.blendEquationAlpha,this.blendColor.copy(r.blendColor),this.blendAlpha=r.blendAlpha,this.depthFunc=r.depthFunc,this.depthTest=r.depthTest,this.depthWrite=r.depthWrite,this.stencilWriteMask=r.stencilWriteMask,this.stencilFunc=r.stencilFunc,this.stencilRef=r.stencilRef,this.stencilFuncMask=r.stencilFuncMask,this.stencilFail=r.stencilFail,this.stencilZFail=r.stencilZFail,this.stencilZPass=r.stencilZPass,this.stencilWrite=r.stencilWrite;const i=r.clippingPlanes;let d=null;if(i!==null){const T=i.length;d=new Array(T);for(let D=0;D!==T;++D)d[D]=i[D].clone()}return this.clippingPlanes=d,this.clipIntersection=r.clipIntersection,this.clipShadows=r.clipShadows,this.shadowSide=r.shadowSide,this.colorWrite=r.colorWrite,this.precision=r.precision,this.polygonOffset=r.polygonOffset,this.polygonOffsetFactor=r.polygonOffsetFactor,this.polygonOffsetUnits=r.polygonOffsetUnits,this.dithering=r.dithering,this.alphaTest=r.alphaTest,this.alphaHash=r.alphaHash,this.alphaToCoverage=r.alphaToCoverage,this.premultipliedAlpha=r.premultipliedAlpha,this.forceSinglePass=r.forceSinglePass,this.visible=r.visible,this.toneMapped=r.toneMapped,this.userData=JSON.parse(JSON.stringify(r.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(r){r===!0&&this.version++}}class P1 extends yd{constructor(r){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Nr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ps,this.combine=b1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.envMapRotation.copy(r.envMapRotation),this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.fog=r.fog,this}}const mn=new pt,Lf=new zr;let iM=0;class rs{constructor(r,i,d=!1){if(Array.isArray(r))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:iM++}),this.name="",this.array=r,this.itemSize=i,this.count=r!==void 0?r.length/i:0,this.normalized=d,this.usage=hb,this.updateRanges=[],this.gpuType=Cs,this.version=0}onUploadCallback(){}set needsUpdate(r){r===!0&&this.version++}setUsage(r){return this.usage=r,this}addUpdateRange(r,i){this.updateRanges.push({start:r,count:i})}clearUpdateRanges(){this.updateRanges.length=0}copy(r){return this.name=r.name,this.array=new r.array.constructor(r.array),this.itemSize=r.itemSize,this.count=r.count,this.normalized=r.normalized,this.usage=r.usage,this.gpuType=r.gpuType,this}copyAt(r,i,d){r*=this.itemSize,d*=i.itemSize;for(let T=0,D=this.itemSize;T<D;T++)this.array[r+T]=i.array[d+T];return this}copyArray(r){return this.array.set(r),this}applyMatrix3(r){if(this.itemSize===2)for(let i=0,d=this.count;i<d;i++)Lf.fromBufferAttribute(this,i),Lf.applyMatrix3(r),this.setXY(i,Lf.x,Lf.y);else if(this.itemSize===3)for(let i=0,d=this.count;i<d;i++)mn.fromBufferAttribute(this,i),mn.applyMatrix3(r),this.setXYZ(i,mn.x,mn.y,mn.z);return this}applyMatrix4(r){for(let i=0,d=this.count;i<d;i++)mn.fromBufferAttribute(this,i),mn.applyMatrix4(r),this.setXYZ(i,mn.x,mn.y,mn.z);return this}applyNormalMatrix(r){for(let i=0,d=this.count;i<d;i++)mn.fromBufferAttribute(this,i),mn.applyNormalMatrix(r),this.setXYZ(i,mn.x,mn.y,mn.z);return this}transformDirection(r){for(let i=0,d=this.count;i<d;i++)mn.fromBufferAttribute(this,i),mn.transformDirection(r),this.setXYZ(i,mn.x,mn.y,mn.z);return this}set(r,i=0){return this.array.set(r,i),this}getComponent(r,i){let d=this.array[r*this.itemSize+i];return this.normalized&&(d=wu(d,this.array)),d}setComponent(r,i,d){return this.normalized&&(d=Zn(d,this.array)),this.array[r*this.itemSize+i]=d,this}getX(r){let i=this.array[r*this.itemSize];return this.normalized&&(i=wu(i,this.array)),i}setX(r,i){return this.normalized&&(i=Zn(i,this.array)),this.array[r*this.itemSize]=i,this}getY(r){let i=this.array[r*this.itemSize+1];return this.normalized&&(i=wu(i,this.array)),i}setY(r,i){return this.normalized&&(i=Zn(i,this.array)),this.array[r*this.itemSize+1]=i,this}getZ(r){let i=this.array[r*this.itemSize+2];return this.normalized&&(i=wu(i,this.array)),i}setZ(r,i){return this.normalized&&(i=Zn(i,this.array)),this.array[r*this.itemSize+2]=i,this}getW(r){let i=this.array[r*this.itemSize+3];return this.normalized&&(i=wu(i,this.array)),i}setW(r,i){return this.normalized&&(i=Zn(i,this.array)),this.array[r*this.itemSize+3]=i,this}setXY(r,i,d){return r*=this.itemSize,this.normalized&&(i=Zn(i,this.array),d=Zn(d,this.array)),this.array[r+0]=i,this.array[r+1]=d,this}setXYZ(r,i,d,T){return r*=this.itemSize,this.normalized&&(i=Zn(i,this.array),d=Zn(d,this.array),T=Zn(T,this.array)),this.array[r+0]=i,this.array[r+1]=d,this.array[r+2]=T,this}setXYZW(r,i,d,T,D){return r*=this.itemSize,this.normalized&&(i=Zn(i,this.array),d=Zn(d,this.array),T=Zn(T,this.array),D=Zn(D,this.array)),this.array[r+0]=i,this.array[r+1]=d,this.array[r+2]=T,this.array[r+3]=D,this}onUpload(r){return this.onUploadCallback=r,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const r={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(r.name=this.name),this.usage!==hb&&(r.usage=this.usage),r}}class U1 extends rs{constructor(r,i,d){super(new Uint16Array(r),i,d)}}class N1 extends rs{constructor(r,i,d){super(new Uint32Array(r),i,d)}}class no extends rs{constructor(r,i,d){super(new Float32Array(r),i,d)}}let sM=0;const wi=new yn,kp=new ui,nl=new pt,li=new Ku,Au=new Ku,An=new pt;class lo extends wl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:sM++}),this.uuid=Yu(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(r){return Array.isArray(r)?this.index=new(C1(r)?N1:U1)(r,1):this.index=r,this}setIndirect(r){return this.indirect=r,this}getIndirect(){return this.indirect}getAttribute(r){return this.attributes[r]}setAttribute(r,i){return this.attributes[r]=i,this}deleteAttribute(r){return delete this.attributes[r],this}hasAttribute(r){return this.attributes[r]!==void 0}addGroup(r,i,d=0){this.groups.push({start:r,count:i,materialIndex:d})}clearGroups(){this.groups=[]}setDrawRange(r,i){this.drawRange.start=r,this.drawRange.count=i}applyMatrix4(r){const i=this.attributes.position;i!==void 0&&(i.applyMatrix4(r),i.needsUpdate=!0);const d=this.attributes.normal;if(d!==void 0){const D=new rr().getNormalMatrix(r);d.applyNormalMatrix(D),d.needsUpdate=!0}const T=this.attributes.tangent;return T!==void 0&&(T.transformDirection(r),T.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(r){return wi.makeRotationFromQuaternion(r),this.applyMatrix4(wi),this}rotateX(r){return wi.makeRotationX(r),this.applyMatrix4(wi),this}rotateY(r){return wi.makeRotationY(r),this.applyMatrix4(wi),this}rotateZ(r){return wi.makeRotationZ(r),this.applyMatrix4(wi),this}translate(r,i,d){return wi.makeTranslation(r,i,d),this.applyMatrix4(wi),this}scale(r,i,d){return wi.makeScale(r,i,d),this.applyMatrix4(wi),this}lookAt(r){return kp.lookAt(r),kp.updateMatrix(),this.applyMatrix4(kp.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(nl).negate(),this.translate(nl.x,nl.y,nl.z),this}setFromPoints(r){const i=this.getAttribute("position");if(i===void 0){const d=[];for(let T=0,D=r.length;T<D;T++){const U=r[T];d.push(U.x,U.y,U.z||0)}this.setAttribute("position",new no(d,3))}else{const d=Math.min(r.length,i.count);for(let T=0;T<d;T++){const D=r[T];i.setXYZ(T,D.x,D.y,D.z||0)}r.length>i.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),i.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ku);const r=this.attributes.position,i=this.morphAttributes.position;if(r&&r.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new pt(-1/0,-1/0,-1/0),new pt(1/0,1/0,1/0));return}if(r!==void 0){if(this.boundingBox.setFromBufferAttribute(r),i)for(let d=0,T=i.length;d<T;d++){const D=i[d];li.setFromBufferAttribute(D),this.morphTargetsRelative?(An.addVectors(this.boundingBox.min,li.min),this.boundingBox.expandByPoint(An),An.addVectors(this.boundingBox.max,li.max),this.boundingBox.expandByPoint(An)):(this.boundingBox.expandByPoint(li.min),this.boundingBox.expandByPoint(li.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sy);const r=this.attributes.position,i=this.morphAttributes.position;if(r&&r.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new pt,1/0);return}if(r){const d=this.boundingSphere.center;if(li.setFromBufferAttribute(r),i)for(let D=0,U=i.length;D<U;D++){const t=i[D];Au.setFromBufferAttribute(t),this.morphTargetsRelative?(An.addVectors(li.min,Au.min),li.expandByPoint(An),An.addVectors(li.max,Au.max),li.expandByPoint(An)):(li.expandByPoint(Au.min),li.expandByPoint(Au.max))}li.getCenter(d);let T=0;for(let D=0,U=r.count;D<U;D++)An.fromBufferAttribute(r,D),T=Math.max(T,d.distanceToSquared(An));if(i)for(let D=0,U=i.length;D<U;D++){const t=i[D],R=this.morphTargetsRelative;for(let M=0,p=t.count;M<p;M++)An.fromBufferAttribute(t,M),R&&(nl.fromBufferAttribute(r,M),An.add(nl)),T=Math.max(T,d.distanceToSquared(An))}this.boundingSphere.radius=Math.sqrt(T),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const r=this.index,i=this.attributes;if(r===null||i.position===void 0||i.normal===void 0||i.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const d=i.position,T=i.normal,D=i.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new rs(new Float32Array(4*d.count),4));const U=this.getAttribute("tangent"),t=[],R=[];for(let E=0;E<d.count;E++)t[E]=new pt,R[E]=new pt;const M=new pt,p=new pt,f=new pt,h=new zr,b=new zr,w=new zr,c=new pt,l=new pt;function o(E,j,O){M.fromBufferAttribute(d,E),p.fromBufferAttribute(d,j),f.fromBufferAttribute(d,O),h.fromBufferAttribute(D,E),b.fromBufferAttribute(D,j),w.fromBufferAttribute(D,O),p.sub(M),f.sub(M),b.sub(h),w.sub(h);const P=1/(b.x*w.y-w.x*b.y);isFinite(P)&&(c.copy(p).multiplyScalar(w.y).addScaledVector(f,-b.y).multiplyScalar(P),l.copy(f).multiplyScalar(b.x).addScaledVector(p,-w.x).multiplyScalar(P),t[E].add(c),t[j].add(c),t[O].add(c),R[E].add(l),R[j].add(l),R[O].add(l))}let u=this.groups;u.length===0&&(u=[{start:0,count:r.count}]);for(let E=0,j=u.length;E<j;++E){const O=u[E],P=O.start,L=O.count;for(let z=P,N=P+L;z<N;z+=3)o(r.getX(z+0),r.getX(z+1),r.getX(z+2))}const m=new pt,g=new pt,_=new pt,v=new pt;function x(E){_.fromBufferAttribute(T,E),v.copy(_);const j=t[E];m.copy(j),m.sub(_.multiplyScalar(_.dot(j))).normalize(),g.crossVectors(v,j);const P=g.dot(R[E])<0?-1:1;U.setXYZW(E,m.x,m.y,m.z,P)}for(let E=0,j=u.length;E<j;++E){const O=u[E],P=O.start,L=O.count;for(let z=P,N=P+L;z<N;z+=3)x(r.getX(z+0)),x(r.getX(z+1)),x(r.getX(z+2))}}computeVertexNormals(){const r=this.index,i=this.getAttribute("position");if(i!==void 0){let d=this.getAttribute("normal");if(d===void 0)d=new rs(new Float32Array(i.count*3),3),this.setAttribute("normal",d);else for(let h=0,b=d.count;h<b;h++)d.setXYZ(h,0,0,0);const T=new pt,D=new pt,U=new pt,t=new pt,R=new pt,M=new pt,p=new pt,f=new pt;if(r)for(let h=0,b=r.count;h<b;h+=3){const w=r.getX(h+0),c=r.getX(h+1),l=r.getX(h+2);T.fromBufferAttribute(i,w),D.fromBufferAttribute(i,c),U.fromBufferAttribute(i,l),p.subVectors(U,D),f.subVectors(T,D),p.cross(f),t.fromBufferAttribute(d,w),R.fromBufferAttribute(d,c),M.fromBufferAttribute(d,l),t.add(p),R.add(p),M.add(p),d.setXYZ(w,t.x,t.y,t.z),d.setXYZ(c,R.x,R.y,R.z),d.setXYZ(l,M.x,M.y,M.z)}else for(let h=0,b=i.count;h<b;h+=3)T.fromBufferAttribute(i,h+0),D.fromBufferAttribute(i,h+1),U.fromBufferAttribute(i,h+2),p.subVectors(U,D),f.subVectors(T,D),p.cross(f),d.setXYZ(h+0,p.x,p.y,p.z),d.setXYZ(h+1,p.x,p.y,p.z),d.setXYZ(h+2,p.x,p.y,p.z);this.normalizeNormals(),d.needsUpdate=!0}}normalizeNormals(){const r=this.attributes.normal;for(let i=0,d=r.count;i<d;i++)An.fromBufferAttribute(r,i),An.normalize(),r.setXYZ(i,An.x,An.y,An.z)}toNonIndexed(){function r(t,R){const M=t.array,p=t.itemSize,f=t.normalized,h=new M.constructor(R.length*p);let b=0,w=0;for(let c=0,l=R.length;c<l;c++){t.isInterleavedBufferAttribute?b=R[c]*t.data.stride+t.offset:b=R[c]*p;for(let o=0;o<p;o++)h[w++]=M[b++]}return new rs(h,p,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const i=new lo,d=this.index.array,T=this.attributes;for(const t in T){const R=T[t],M=r(R,d);i.setAttribute(t,M)}const D=this.morphAttributes;for(const t in D){const R=[],M=D[t];for(let p=0,f=M.length;p<f;p++){const h=M[p],b=r(h,d);R.push(b)}i.morphAttributes[t]=R}i.morphTargetsRelative=this.morphTargetsRelative;const U=this.groups;for(let t=0,R=U.length;t<R;t++){const M=U[t];i.addGroup(M.start,M.count,M.materialIndex)}return i}toJSON(){const r={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),Object.keys(this.userData).length>0&&(r.userData=this.userData),this.parameters!==void 0){const R=this.parameters;for(const M in R)R[M]!==void 0&&(r[M]=R[M]);return r}r.data={attributes:{}};const i=this.index;i!==null&&(r.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});const d=this.attributes;for(const R in d){const M=d[R];r.data.attributes[R]=M.toJSON(r.data)}const T={};let D=!1;for(const R in this.morphAttributes){const M=this.morphAttributes[R],p=[];for(let f=0,h=M.length;f<h;f++){const b=M[f];p.push(b.toJSON(r.data))}p.length>0&&(T[R]=p,D=!0)}D&&(r.data.morphAttributes=T,r.data.morphTargetsRelative=this.morphTargetsRelative);const U=this.groups;U.length>0&&(r.data.groups=JSON.parse(JSON.stringify(U)));const t=this.boundingSphere;return t!==null&&(r.data.boundingSphere=t.toJSON()),r}clone(){return new this.constructor().copy(this)}copy(r){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const i={};this.name=r.name;const d=r.index;d!==null&&this.setIndex(d.clone());const T=r.attributes;for(const M in T){const p=T[M];this.setAttribute(M,p.clone(i))}const D=r.morphAttributes;for(const M in D){const p=[],f=D[M];for(let h=0,b=f.length;h<b;h++)p.push(f[h].clone(i));this.morphAttributes[M]=p}this.morphTargetsRelative=r.morphTargetsRelative;const U=r.groups;for(let M=0,p=U.length;M<p;M++){const f=U[M];this.addGroup(f.start,f.count,f.materialIndex)}const t=r.boundingBox;t!==null&&(this.boundingBox=t.clone());const R=r.boundingSphere;return R!==null&&(this.boundingSphere=R.clone()),this.drawRange.start=r.drawRange.start,this.drawRange.count=r.drawRange.count,this.userData=r.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Ab=new yn,Ga=new Kw,Of=new Sy,jb=new pt,Pf=new pt,Uf=new pt,Nf=new pt,Fp=new pt,If=new pt,Rb=new pt,kf=new pt;class ts extends ui{constructor(r=new lo,i=new P1){super(),this.isMesh=!0,this.type="Mesh",this.geometry=r,this.material=i,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(r,i){return super.copy(r,i),r.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=r.morphTargetInfluences.slice()),r.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},r.morphTargetDictionary)),this.material=Array.isArray(r.material)?r.material.slice():r.material,this.geometry=r.geometry,this}updateMorphTargets(){const i=this.geometry.morphAttributes,d=Object.keys(i);if(d.length>0){const T=i[d[0]];if(T!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let D=0,U=T.length;D<U;D++){const t=T[D].name||String(D);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=D}}}}getVertexPosition(r,i){const d=this.geometry,T=d.attributes.position,D=d.morphAttributes.position,U=d.morphTargetsRelative;i.fromBufferAttribute(T,r);const t=this.morphTargetInfluences;if(D&&t){If.set(0,0,0);for(let R=0,M=D.length;R<M;R++){const p=t[R],f=D[R];p!==0&&(Fp.fromBufferAttribute(f,r),U?If.addScaledVector(Fp,p):If.addScaledVector(Fp.sub(i),p))}i.add(If)}return i}raycast(r,i){const d=this.geometry,T=this.material,D=this.matrixWorld;T!==void 0&&(d.boundingSphere===null&&d.computeBoundingSphere(),Of.copy(d.boundingSphere),Of.applyMatrix4(D),Ga.copy(r.ray).recast(r.near),!(Of.containsPoint(Ga.origin)===!1&&(Ga.intersectSphere(Of,jb)===null||Ga.origin.distanceToSquared(jb)>(r.far-r.near)**2))&&(Ab.copy(D).invert(),Ga.copy(r.ray).applyMatrix4(Ab),!(d.boundingBox!==null&&Ga.intersectsBox(d.boundingBox)===!1)&&this._computeIntersections(r,i,Ga)))}_computeIntersections(r,i,d){let T;const D=this.geometry,U=this.material,t=D.index,R=D.attributes.position,M=D.attributes.uv,p=D.attributes.uv1,f=D.attributes.normal,h=D.groups,b=D.drawRange;if(t!==null)if(Array.isArray(U))for(let w=0,c=h.length;w<c;w++){const l=h[w],o=U[l.materialIndex],u=Math.max(l.start,b.start),m=Math.min(t.count,Math.min(l.start+l.count,b.start+b.count));for(let g=u,_=m;g<_;g+=3){const v=t.getX(g),x=t.getX(g+1),E=t.getX(g+2);T=Ff(this,o,r,d,M,p,f,v,x,E),T&&(T.faceIndex=Math.floor(g/3),T.face.materialIndex=l.materialIndex,i.push(T))}}else{const w=Math.max(0,b.start),c=Math.min(t.count,b.start+b.count);for(let l=w,o=c;l<o;l+=3){const u=t.getX(l),m=t.getX(l+1),g=t.getX(l+2);T=Ff(this,U,r,d,M,p,f,u,m,g),T&&(T.faceIndex=Math.floor(l/3),i.push(T))}}else if(R!==void 0)if(Array.isArray(U))for(let w=0,c=h.length;w<c;w++){const l=h[w],o=U[l.materialIndex],u=Math.max(l.start,b.start),m=Math.min(R.count,Math.min(l.start+l.count,b.start+b.count));for(let g=u,_=m;g<_;g+=3){const v=g,x=g+1,E=g+2;T=Ff(this,o,r,d,M,p,f,v,x,E),T&&(T.faceIndex=Math.floor(g/3),T.face.materialIndex=l.materialIndex,i.push(T))}}else{const w=Math.max(0,b.start),c=Math.min(R.count,b.start+b.count);for(let l=w,o=c;l<o;l+=3){const u=l,m=l+1,g=l+2;T=Ff(this,U,r,d,M,p,f,u,m,g),T&&(T.faceIndex=Math.floor(l/3),i.push(T))}}}}function aM(s,r,i,d,T,D,U,t){let R;if(r.side===Qn?R=d.intersectTriangle(U,D,T,!0,t):R=d.intersectTriangle(T,D,U,r.side===ba,t),R===null)return null;kf.copy(t),kf.applyMatrix4(s.matrixWorld);const M=i.ray.origin.distanceTo(kf);return M<i.near||M>i.far?null:{distance:M,point:kf.clone(),object:s}}function Ff(s,r,i,d,T,D,U,t,R,M){s.getVertexPosition(t,Pf),s.getVertexPosition(R,Uf),s.getVertexPosition(M,Nf);const p=aM(s,r,i,d,Pf,Uf,Nf,Rb);if(p){const f=new pt;zi.getBarycoord(Rb,Pf,Uf,Nf,f),T&&(p.uv=zi.getInterpolatedAttribute(T,t,R,M,f,new zr)),D&&(p.uv1=zi.getInterpolatedAttribute(D,t,R,M,f,new zr)),U&&(p.normal=zi.getInterpolatedAttribute(U,t,R,M,f,new pt),p.normal.dot(d.direction)>0&&p.normal.multiplyScalar(-1));const h={a:t,b:R,c:M,normal:new pt,materialIndex:0};zi.getNormal(Pf,Uf,Nf,h.normal),p.face=h,p.barycoord=f}return p}class Qu extends lo{constructor(r=1,i=1,d=1,T=1,D=1,U=1){super(),this.type="BoxGeometry",this.parameters={width:r,height:i,depth:d,widthSegments:T,heightSegments:D,depthSegments:U};const t=this;T=Math.floor(T),D=Math.floor(D),U=Math.floor(U);const R=[],M=[],p=[],f=[];let h=0,b=0;w("z","y","x",-1,-1,d,i,r,U,D,0),w("z","y","x",1,-1,d,i,-r,U,D,1),w("x","z","y",1,1,r,d,i,T,U,2),w("x","z","y",1,-1,r,d,-i,T,U,3),w("x","y","z",1,-1,r,i,d,T,D,4),w("x","y","z",-1,-1,r,i,-d,T,D,5),this.setIndex(R),this.setAttribute("position",new no(M,3)),this.setAttribute("normal",new no(p,3)),this.setAttribute("uv",new no(f,2));function w(c,l,o,u,m,g,_,v,x,E,j){const O=g/x,P=_/E,L=g/2,z=_/2,N=v/2,V=x+1,k=E+1;let H=0,G=0;const F=new pt;for(let W=0;W<k;W++){const Q=W*P-z;for(let J=0;J<V;J++){const ee=J*O-L;F[c]=ee*u,F[l]=Q*m,F[o]=N,M.push(F.x,F.y,F.z),F[c]=0,F[l]=0,F[o]=v>0?1:-1,p.push(F.x,F.y,F.z),f.push(J/x),f.push(1-W/E),H+=1}}for(let W=0;W<E;W++)for(let Q=0;Q<x;Q++){const J=h+Q+V*W,ee=h+Q+V*(W+1),te=h+(Q+1)+V*(W+1),se=h+(Q+1)+V*W;R.push(J,ee,se),R.push(ee,te,se),G+=6}t.addGroup(b,G,j),b+=G,h+=H}}copy(r){return super.copy(r),this.parameters=Object.assign({},r.parameters),this}static fromJSON(r){return new Qu(r.width,r.height,r.depth,r.widthSegments,r.heightSegments,r.depthSegments)}}function _l(s){const r={};for(const i in s){r[i]={};for(const d in s[i]){const T=s[i][d];T&&(T.isColor||T.isMatrix3||T.isMatrix4||T.isVector2||T.isVector3||T.isVector4||T.isTexture||T.isQuaternion)?T.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),r[i][d]=null):r[i][d]=T.clone():Array.isArray(T)?r[i][d]=T.slice():r[i][d]=T}}return r}function Bn(s){const r={};for(let i=0;i<s.length;i++){const d=_l(s[i]);for(const T in d)r[T]=d[T]}return r}function oM(s){const r=[];for(let i=0;i<s.length;i++)r.push(s[i].clone());return r}function I1(s){const r=s.getRenderTarget();return r===null?s.outputColorSpace:r.isXRRenderTarget===!0?r.texture.colorSpace:xr.workingColorSpace}const lM={clone:_l,merge:Bn};var uM=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,cM=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Us extends yd{constructor(r){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=uM,this.fragmentShader=cM,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,r!==void 0&&this.setValues(r)}copy(r){return super.copy(r),this.fragmentShader=r.fragmentShader,this.vertexShader=r.vertexShader,this.uniforms=_l(r.uniforms),this.uniformsGroups=oM(r.uniformsGroups),this.defines=Object.assign({},r.defines),this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.fog=r.fog,this.lights=r.lights,this.clipping=r.clipping,this.extensions=Object.assign({},r.extensions),this.glslVersion=r.glslVersion,this}toJSON(r){const i=super.toJSON(r);i.glslVersion=this.glslVersion,i.uniforms={};for(const T in this.uniforms){const U=this.uniforms[T].value;U&&U.isTexture?i.uniforms[T]={type:"t",value:U.toJSON(r).uuid}:U&&U.isColor?i.uniforms[T]={type:"c",value:U.getHex()}:U&&U.isVector2?i.uniforms[T]={type:"v2",value:U.toArray()}:U&&U.isVector3?i.uniforms[T]={type:"v3",value:U.toArray()}:U&&U.isVector4?i.uniforms[T]={type:"v4",value:U.toArray()}:U&&U.isMatrix3?i.uniforms[T]={type:"m3",value:U.toArray()}:U&&U.isMatrix4?i.uniforms[T]={type:"m4",value:U.toArray()}:i.uniforms[T]={value:U}}Object.keys(this.defines).length>0&&(i.defines=this.defines),i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader,i.lights=this.lights,i.clipping=this.clipping;const d={};for(const T in this.extensions)this.extensions[T]===!0&&(d[T]=!0);return Object.keys(d).length>0&&(i.extensions=d),i}}class k1 extends ui{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new yn,this.projectionMatrix=new yn,this.projectionMatrixInverse=new yn,this.coordinateSystem=Ds}copy(r,i){return super.copy(r,i),this.matrixWorldInverse.copy(r.matrixWorldInverse),this.projectionMatrix.copy(r.projectionMatrix),this.projectionMatrixInverse.copy(r.projectionMatrixInverse),this.coordinateSystem=r.coordinateSystem,this}getWorldDirection(r){return super.getWorldDirection(r).negate()}updateMatrixWorld(r){super.updateMatrixWorld(r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(r,i){super.updateWorldMatrix(r,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const pa=new pt,Cb=new zr,Db=new zr;class Ai extends k1{constructor(r=50,i=1,d=.1,T=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=r,this.zoom=1,this.near=d,this.far=T,this.focus=10,this.aspect=i,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(r,i){return super.copy(r,i),this.fov=r.fov,this.zoom=r.zoom,this.near=r.near,this.far=r.far,this.focus=r.focus,this.aspect=r.aspect,this.view=r.view===null?null:Object.assign({},r.view),this.filmGauge=r.filmGauge,this.filmOffset=r.filmOffset,this}setFocalLength(r){const i=.5*this.getFilmHeight()/r;this.fov=Xm*2*Math.atan(i),this.updateProjectionMatrix()}getFocalLength(){const r=Math.tan(vp*.5*this.fov);return .5*this.getFilmHeight()/r}getEffectiveFOV(){return Xm*2*Math.atan(Math.tan(vp*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(r,i,d){pa.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(pa.x,pa.y).multiplyScalar(-r/pa.z),pa.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),d.set(pa.x,pa.y).multiplyScalar(-r/pa.z)}getViewSize(r,i){return this.getViewBounds(r,Cb,Db),i.subVectors(Db,Cb)}setViewOffset(r,i,d,T,D,U){this.aspect=r/i,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=r,this.view.fullHeight=i,this.view.offsetX=d,this.view.offsetY=T,this.view.width=D,this.view.height=U,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const r=this.near;let i=r*Math.tan(vp*.5*this.fov)/this.zoom,d=2*i,T=this.aspect*d,D=-.5*T;const U=this.view;if(this.view!==null&&this.view.enabled){const R=U.fullWidth,M=U.fullHeight;D+=U.offsetX*T/R,i-=U.offsetY*d/M,T*=U.width/R,d*=U.height/M}const t=this.filmOffset;t!==0&&(D+=r*t/this.getFilmWidth()),this.projectionMatrix.makePerspective(D,D+T,i,i-d,r,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(r){const i=super.toJSON(r);return i.object.fov=this.fov,i.object.zoom=this.zoom,i.object.near=this.near,i.object.far=this.far,i.object.focus=this.focus,i.object.aspect=this.aspect,this.view!==null&&(i.object.view=Object.assign({},this.view)),i.object.filmGauge=this.filmGauge,i.object.filmOffset=this.filmOffset,i}}const il=-90,sl=1;class fM extends ui{constructor(r,i,d){super(),this.type="CubeCamera",this.renderTarget=d,this.coordinateSystem=null,this.activeMipmapLevel=0;const T=new Ai(il,sl,r,i);T.layers=this.layers,this.add(T);const D=new Ai(il,sl,r,i);D.layers=this.layers,this.add(D);const U=new Ai(il,sl,r,i);U.layers=this.layers,this.add(U);const t=new Ai(il,sl,r,i);t.layers=this.layers,this.add(t);const R=new Ai(il,sl,r,i);R.layers=this.layers,this.add(R);const M=new Ai(il,sl,r,i);M.layers=this.layers,this.add(M)}updateCoordinateSystem(){const r=this.coordinateSystem,i=this.children.concat(),[d,T,D,U,t,R]=i;for(const M of i)this.remove(M);if(r===Ds)d.up.set(0,1,0),d.lookAt(1,0,0),T.up.set(0,1,0),T.lookAt(-1,0,0),D.up.set(0,0,-1),D.lookAt(0,1,0),U.up.set(0,0,1),U.lookAt(0,-1,0),t.up.set(0,1,0),t.lookAt(0,0,1),R.up.set(0,1,0),R.lookAt(0,0,-1);else if(r===od)d.up.set(0,-1,0),d.lookAt(-1,0,0),T.up.set(0,-1,0),T.lookAt(1,0,0),D.up.set(0,0,1),D.lookAt(0,1,0),U.up.set(0,0,-1),U.lookAt(0,-1,0),t.up.set(0,-1,0),t.lookAt(0,0,1),R.up.set(0,-1,0),R.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+r);for(const M of i)this.add(M),M.updateMatrixWorld()}update(r,i){this.parent===null&&this.updateMatrixWorld();const{renderTarget:d,activeMipmapLevel:T}=this;this.coordinateSystem!==r.coordinateSystem&&(this.coordinateSystem=r.coordinateSystem,this.updateCoordinateSystem());const[D,U,t,R,M,p]=this.children,f=r.getRenderTarget(),h=r.getActiveCubeFace(),b=r.getActiveMipmapLevel(),w=r.xr.enabled;r.xr.enabled=!1;const c=d.texture.generateMipmaps;d.texture.generateMipmaps=!1,r.setRenderTarget(d,0,T),r.render(i,D),r.setRenderTarget(d,1,T),r.render(i,U),r.setRenderTarget(d,2,T),r.render(i,t),r.setRenderTarget(d,3,T),r.render(i,R),r.setRenderTarget(d,4,T),r.render(i,M),d.texture.generateMipmaps=c,r.setRenderTarget(d,5,T),r.render(i,p),r.setRenderTarget(f,h,b),r.xr.enabled=w,d.texture.needsPMREMUpdate=!0}}class F1 extends Vn{constructor(r=[],i=gl,d,T,D,U,t,R,M,p){super(r,i,d,T,D,U,t,R,M,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(r){this.image=r}}class dM extends oo{constructor(r=1,i={}){super(r,r,i),this.isWebGLCubeRenderTarget=!0;const d={width:r,height:r,depth:1},T=[d,d,d,d,d,d];this.texture=new F1(T),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(r,i){this.texture.type=i.type,this.texture.colorSpace=i.colorSpace,this.texture.generateMipmaps=i.generateMipmaps,this.texture.minFilter=i.minFilter,this.texture.magFilter=i.magFilter;const d={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},T=new Qu(5,5,5),D=new Us({name:"CubemapFromEquirect",uniforms:_l(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,side:Qn,blending:ga});D.uniforms.tEquirect.value=i;const U=new ts(T,D),t=i.minFilter;return i.minFilter===eo&&(i.minFilter=es),new fM(1,10,this).update(r,U),i.minFilter=t,U.geometry.dispose(),U.material.dispose(),this}clear(r,i=!0,d=!0,T=!0){const D=r.getRenderTarget();for(let U=0;U<6;U++)r.setRenderTarget(this,U),r.clear(i,d,T);r.setRenderTarget(D)}}class Bf extends ui{constructor(){super(),this.isGroup=!0,this.type="Group"}}const hM={type:"move"};class Bp{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Bf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Bf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new pt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new pt),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Bf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new pt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new pt),this._grip}dispatchEvent(r){return this._targetRay!==null&&this._targetRay.dispatchEvent(r),this._grip!==null&&this._grip.dispatchEvent(r),this._hand!==null&&this._hand.dispatchEvent(r),this}connect(r){if(r&&r.hand){const i=this._hand;if(i)for(const d of r.hand.values())this._getHandJoint(i,d)}return this.dispatchEvent({type:"connected",data:r}),this}disconnect(r){return this.dispatchEvent({type:"disconnected",data:r}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(r,i,d){let T=null,D=null,U=null;const t=this._targetRay,R=this._grip,M=this._hand;if(r&&i.session.visibilityState!=="visible-blurred"){if(M&&r.hand){U=!0;for(const c of r.hand.values()){const l=i.getJointPose(c,d),o=this._getHandJoint(M,c);l!==null&&(o.matrix.fromArray(l.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,o.jointRadius=l.radius),o.visible=l!==null}const p=M.joints["index-finger-tip"],f=M.joints["thumb-tip"],h=p.position.distanceTo(f.position),b=.02,w=.005;M.inputState.pinching&&h>b+w?(M.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:r.handedness,target:this})):!M.inputState.pinching&&h<=b-w&&(M.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:r.handedness,target:this}))}else R!==null&&r.gripSpace&&(D=i.getPose(r.gripSpace,d),D!==null&&(R.matrix.fromArray(D.transform.matrix),R.matrix.decompose(R.position,R.rotation,R.scale),R.matrixWorldNeedsUpdate=!0,D.linearVelocity?(R.hasLinearVelocity=!0,R.linearVelocity.copy(D.linearVelocity)):R.hasLinearVelocity=!1,D.angularVelocity?(R.hasAngularVelocity=!0,R.angularVelocity.copy(D.angularVelocity)):R.hasAngularVelocity=!1));t!==null&&(T=i.getPose(r.targetRaySpace,d),T===null&&D!==null&&(T=D),T!==null&&(t.matrix.fromArray(T.transform.matrix),t.matrix.decompose(t.position,t.rotation,t.scale),t.matrixWorldNeedsUpdate=!0,T.linearVelocity?(t.hasLinearVelocity=!0,t.linearVelocity.copy(T.linearVelocity)):t.hasLinearVelocity=!1,T.angularVelocity?(t.hasAngularVelocity=!0,t.angularVelocity.copy(T.angularVelocity)):t.hasAngularVelocity=!1,this.dispatchEvent(hM)))}return t!==null&&(t.visible=T!==null),R!==null&&(R.visible=D!==null),M!==null&&(M.visible=U!==null),this}_getHandJoint(r,i){if(r.joints[i.jointName]===void 0){const d=new Bf;d.matrixAutoUpdate=!1,d.visible=!1,r.joints[i.jointName]=d,r.add(d)}return r.joints[i.jointName]}}class pM extends ui{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ps,this.environmentIntensity=1,this.environmentRotation=new Ps,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(r,i){return super.copy(r,i),r.background!==null&&(this.background=r.background.clone()),r.environment!==null&&(this.environment=r.environment.clone()),r.fog!==null&&(this.fog=r.fog.clone()),this.backgroundBlurriness=r.backgroundBlurriness,this.backgroundIntensity=r.backgroundIntensity,this.backgroundRotation.copy(r.backgroundRotation),this.environmentIntensity=r.environmentIntensity,this.environmentRotation.copy(r.environmentRotation),r.overrideMaterial!==null&&(this.overrideMaterial=r.overrideMaterial.clone()),this.matrixAutoUpdate=r.matrixAutoUpdate,this}toJSON(r){const i=super.toJSON(r);return this.fog!==null&&(i.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(i.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(i.object.backgroundIntensity=this.backgroundIntensity),i.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(i.object.environmentIntensity=this.environmentIntensity),i.object.environmentRotation=this.environmentRotation.toArray(),i}}const zp=new pt,mM=new pt,yM=new rr;class Ya{constructor(r=new pt(1,0,0),i=0){this.isPlane=!0,this.normal=r,this.constant=i}set(r,i){return this.normal.copy(r),this.constant=i,this}setComponents(r,i,d,T){return this.normal.set(r,i,d),this.constant=T,this}setFromNormalAndCoplanarPoint(r,i){return this.normal.copy(r),this.constant=-i.dot(this.normal),this}setFromCoplanarPoints(r,i,d){const T=zp.subVectors(d,i).cross(mM.subVectors(r,i)).normalize();return this.setFromNormalAndCoplanarPoint(T,r),this}copy(r){return this.normal.copy(r.normal),this.constant=r.constant,this}normalize(){const r=1/this.normal.length();return this.normal.multiplyScalar(r),this.constant*=r,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(r){return this.normal.dot(r)+this.constant}distanceToSphere(r){return this.distanceToPoint(r.center)-r.radius}projectPoint(r,i){return i.copy(r).addScaledVector(this.normal,-this.distanceToPoint(r))}intersectLine(r,i){const d=r.delta(zp),T=this.normal.dot(d);if(T===0)return this.distanceToPoint(r.start)===0?i.copy(r.start):null;const D=-(r.start.dot(this.normal)+this.constant)/T;return D<0||D>1?null:i.copy(r.start).addScaledVector(d,D)}intersectsLine(r){const i=this.distanceToPoint(r.start),d=this.distanceToPoint(r.end);return i<0&&d>0||d<0&&i>0}intersectsBox(r){return r.intersectsPlane(this)}intersectsSphere(r){return r.intersectsPlane(this)}coplanarPoint(r){return r.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(r,i){const d=i||yM.getNormalMatrix(r),T=this.coplanarPoint(zp).applyMatrix4(r),D=this.normal.applyMatrix3(d).normalize();return this.constant=-T.dot(D),this}translate(r){return this.constant-=r.dot(this.normal),this}equals(r){return r.normal.equals(this.normal)&&r.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ha=new Sy,zf=new pt;class B1{constructor(r=new Ya,i=new Ya,d=new Ya,T=new Ya,D=new Ya,U=new Ya){this.planes=[r,i,d,T,D,U]}set(r,i,d,T,D,U){const t=this.planes;return t[0].copy(r),t[1].copy(i),t[2].copy(d),t[3].copy(T),t[4].copy(D),t[5].copy(U),this}copy(r){const i=this.planes;for(let d=0;d<6;d++)i[d].copy(r.planes[d]);return this}setFromProjectionMatrix(r,i=Ds){const d=this.planes,T=r.elements,D=T[0],U=T[1],t=T[2],R=T[3],M=T[4],p=T[5],f=T[6],h=T[7],b=T[8],w=T[9],c=T[10],l=T[11],o=T[12],u=T[13],m=T[14],g=T[15];if(d[0].setComponents(R-D,h-M,l-b,g-o).normalize(),d[1].setComponents(R+D,h+M,l+b,g+o).normalize(),d[2].setComponents(R+U,h+p,l+w,g+u).normalize(),d[3].setComponents(R-U,h-p,l-w,g-u).normalize(),d[4].setComponents(R-t,h-f,l-c,g-m).normalize(),i===Ds)d[5].setComponents(R+t,h+f,l+c,g+m).normalize();else if(i===od)d[5].setComponents(t,f,c,m).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+i);return this}intersectsObject(r){if(r.boundingSphere!==void 0)r.boundingSphere===null&&r.computeBoundingSphere(),Ha.copy(r.boundingSphere).applyMatrix4(r.matrixWorld);else{const i=r.geometry;i.boundingSphere===null&&i.computeBoundingSphere(),Ha.copy(i.boundingSphere).applyMatrix4(r.matrixWorld)}return this.intersectsSphere(Ha)}intersectsSprite(r){return Ha.center.set(0,0,0),Ha.radius=.7071067811865476,Ha.applyMatrix4(r.matrixWorld),this.intersectsSphere(Ha)}intersectsSphere(r){const i=this.planes,d=r.center,T=-r.radius;for(let D=0;D<6;D++)if(i[D].distanceToPoint(d)<T)return!1;return!0}intersectsBox(r){const i=this.planes;for(let d=0;d<6;d++){const T=i[d];if(zf.x=T.normal.x>0?r.max.x:r.min.x,zf.y=T.normal.y>0?r.max.y:r.min.y,zf.z=T.normal.z>0?r.max.z:r.min.z,T.distanceToPoint(zf)<0)return!1}return!0}containsPoint(r){const i=this.planes;for(let d=0;d<6;d++)if(i[d].distanceToPoint(r)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class gM extends Vn{constructor(r,i,d,T,D,U,t,R,M){super(r,i,d,T,D,U,t,R,M),this.isCanvasTexture=!0,this.needsUpdate=!0}}class z1 extends Vn{constructor(r,i,d=ao,T,D,U,t=ji,R=ji,M,p=ku,f=1){if(p!==ku&&p!==Fu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const h={width:r,height:i,depth:f};super(h,T,D,U,t,R,p,d,M),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(r){return super.copy(r),this.source=new xy(Object.assign({},r.image)),this.compareFunction=r.compareFunction,this}toJSON(r){const i=super.toJSON(r);return this.compareFunction!==null&&(i.compareFunction=this.compareFunction),i}}class Ju extends lo{constructor(r=1,i=1,d=1,T=1){super(),this.type="PlaneGeometry",this.parameters={width:r,height:i,widthSegments:d,heightSegments:T};const D=r/2,U=i/2,t=Math.floor(d),R=Math.floor(T),M=t+1,p=R+1,f=r/t,h=i/R,b=[],w=[],c=[],l=[];for(let o=0;o<p;o++){const u=o*h-U;for(let m=0;m<M;m++){const g=m*f-D;w.push(g,-u,0),c.push(0,0,1),l.push(m/t),l.push(1-o/R)}}for(let o=0;o<R;o++)for(let u=0;u<t;u++){const m=u+M*o,g=u+M*(o+1),_=u+1+M*(o+1),v=u+1+M*o;b.push(m,g,v),b.push(g,_,v)}this.setIndex(b),this.setAttribute("position",new no(w,3)),this.setAttribute("normal",new no(c,3)),this.setAttribute("uv",new no(l,2))}copy(r){return super.copy(r),this.parameters=Object.assign({},r.parameters),this}static fromJSON(r){return new Ju(r.width,r.height,r.widthSegments,r.heightSegments)}}class vM extends yd{constructor(r){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Aw,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(r)}copy(r){return super.copy(r),this.depthPacking=r.depthPacking,this.map=r.map,this.alphaMap=r.alphaMap,this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this}}class bM extends yd{constructor(r){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(r)}copy(r){return super.copy(r),this.map=r.map,this.alphaMap=r.alphaMap,this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this}}class _M extends k1{constructor(r=-1,i=1,d=1,T=-1,D=.1,U=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=r,this.right=i,this.top=d,this.bottom=T,this.near=D,this.far=U,this.updateProjectionMatrix()}copy(r,i){return super.copy(r,i),this.left=r.left,this.right=r.right,this.top=r.top,this.bottom=r.bottom,this.near=r.near,this.far=r.far,this.zoom=r.zoom,this.view=r.view===null?null:Object.assign({},r.view),this}setViewOffset(r,i,d,T,D,U){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=r,this.view.fullHeight=i,this.view.offsetX=d,this.view.offsetY=T,this.view.width=D,this.view.height=U,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const r=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),d=(this.right+this.left)/2,T=(this.top+this.bottom)/2;let D=d-r,U=d+r,t=T+i,R=T-i;if(this.view!==null&&this.view.enabled){const M=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;D+=M*this.view.offsetX,U=D+M*this.view.width,t-=p*this.view.offsetY,R=t-p*this.view.height}this.projectionMatrix.makeOrthographic(D,U,t,R,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(r){const i=super.toJSON(r);return i.object.zoom=this.zoom,i.object.left=this.left,i.object.right=this.right,i.object.top=this.top,i.object.bottom=this.bottom,i.object.near=this.near,i.object.far=this.far,this.view!==null&&(i.object.view=Object.assign({},this.view)),i}}class xM extends Ai{constructor(r=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=r}}function Lb(s,r,i,d){const T=SM(d);switch(i){case M1:return s*r;case T1:return s*r/T.components*T.byteLength;case vy:return s*r/T.components*T.byteLength;case A1:return s*r*2/T.components*T.byteLength;case by:return s*r*2/T.components*T.byteLength;case E1:return s*r*3/T.components*T.byteLength;case Vi:return s*r*4/T.components*T.byteLength;case _y:return s*r*4/T.components*T.byteLength;case Zf:case Kf:return Math.floor((s+3)/4)*Math.floor((r+3)/4)*8;case Qf:case Jf:return Math.floor((s+3)/4)*Math.floor((r+3)/4)*16;case xm:case wm:return Math.max(s,16)*Math.max(r,8)/4;case _m:case Sm:return Math.max(s,8)*Math.max(r,8)/2;case Mm:case Em:return Math.floor((s+3)/4)*Math.floor((r+3)/4)*8;case Tm:return Math.floor((s+3)/4)*Math.floor((r+3)/4)*16;case Am:return Math.floor((s+3)/4)*Math.floor((r+3)/4)*16;case jm:return Math.floor((s+4)/5)*Math.floor((r+3)/4)*16;case Rm:return Math.floor((s+4)/5)*Math.floor((r+4)/5)*16;case Cm:return Math.floor((s+5)/6)*Math.floor((r+4)/5)*16;case Dm:return Math.floor((s+5)/6)*Math.floor((r+5)/6)*16;case Lm:return Math.floor((s+7)/8)*Math.floor((r+4)/5)*16;case Om:return Math.floor((s+7)/8)*Math.floor((r+5)/6)*16;case Pm:return Math.floor((s+7)/8)*Math.floor((r+7)/8)*16;case Um:return Math.floor((s+9)/10)*Math.floor((r+4)/5)*16;case Nm:return Math.floor((s+9)/10)*Math.floor((r+5)/6)*16;case Im:return Math.floor((s+9)/10)*Math.floor((r+7)/8)*16;case km:return Math.floor((s+9)/10)*Math.floor((r+9)/10)*16;case Fm:return Math.floor((s+11)/12)*Math.floor((r+9)/10)*16;case Bm:return Math.floor((s+11)/12)*Math.floor((r+11)/12)*16;case $f:case zm:case Vm:return Math.ceil(s/4)*Math.ceil(r/4)*16;case j1:case Gm:return Math.ceil(s/4)*Math.ceil(r/4)*8;case Hm:case Wm:return Math.ceil(s/4)*Math.ceil(r/4)*16}throw new Error(`Unable to determine texture byte length for ${i} format.`)}function SM(s){switch(s){case Os:case x1:return{byteLength:1,components:1};case Nu:case S1:case qu:return{byteLength:2,components:1};case yy:case gy:return{byteLength:2,components:4};case ao:case my:case Cs:return{byteLength:4,components:1};case w1:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${s}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:py}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=py);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function V1(){let s=null,r=!1,i=null,d=null;function T(D,U){i(D,U),d=s.requestAnimationFrame(T)}return{start:function(){r!==!0&&i!==null&&(d=s.requestAnimationFrame(T),r=!0)},stop:function(){s.cancelAnimationFrame(d),r=!1},setAnimationLoop:function(D){i=D},setContext:function(D){s=D}}}function wM(s){const r=new WeakMap;function i(t,R){const M=t.array,p=t.usage,f=M.byteLength,h=s.createBuffer();s.bindBuffer(R,h),s.bufferData(R,M,p),t.onUploadCallback();let b;if(M instanceof Float32Array)b=s.FLOAT;else if(M instanceof Uint16Array)t.isFloat16BufferAttribute?b=s.HALF_FLOAT:b=s.UNSIGNED_SHORT;else if(M instanceof Int16Array)b=s.SHORT;else if(M instanceof Uint32Array)b=s.UNSIGNED_INT;else if(M instanceof Int32Array)b=s.INT;else if(M instanceof Int8Array)b=s.BYTE;else if(M instanceof Uint8Array)b=s.UNSIGNED_BYTE;else if(M instanceof Uint8ClampedArray)b=s.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+M);return{buffer:h,type:b,bytesPerElement:M.BYTES_PER_ELEMENT,version:t.version,size:f}}function d(t,R,M){const p=R.array,f=R.updateRanges;if(s.bindBuffer(M,t),f.length===0)s.bufferSubData(M,0,p);else{f.sort((b,w)=>b.start-w.start);let h=0;for(let b=1;b<f.length;b++){const w=f[h],c=f[b];c.start<=w.start+w.count+1?w.count=Math.max(w.count,c.start+c.count-w.start):(++h,f[h]=c)}f.length=h+1;for(let b=0,w=f.length;b<w;b++){const c=f[b];s.bufferSubData(M,c.start*p.BYTES_PER_ELEMENT,p,c.start,c.count)}R.clearUpdateRanges()}R.onUploadCallback()}function T(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)}function D(t){t.isInterleavedBufferAttribute&&(t=t.data);const R=r.get(t);R&&(s.deleteBuffer(R.buffer),r.delete(t))}function U(t,R){if(t.isInterleavedBufferAttribute&&(t=t.data),t.isGLBufferAttribute){const p=r.get(t);(!p||p.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version});return}const M=r.get(t);if(M===void 0)r.set(t,i(t,R));else if(M.version<t.version){if(M.size!==t.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");d(M.buffer,t,R),M.version=t.version}}return{get:T,remove:D,update:U}}var MM=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,EM=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,TM=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,AM=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,jM=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,RM=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,CM=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,DM=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,LM=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,OM=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,PM=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,UM=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,NM=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,IM=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,kM=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,FM=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,BM=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,zM=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,VM=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,GM=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,HM=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,WM=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,XM=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,qM=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,YM=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,ZM=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,KM=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,QM=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,JM=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,$M=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,eE="gl_FragColor = linearToOutputTexel( gl_FragColor );",tE=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,rE=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,nE=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,iE=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,sE=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,aE=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,oE=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,lE=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,uE=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,cE=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,fE=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,dE=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,hE=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,pE=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,mE=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,yE=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,gE=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,vE=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,bE=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,_E=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,xE=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,SE=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,wE=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,ME=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,EE=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,TE=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,AE=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,jE=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,RE=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,CE=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,DE=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,LE=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,OE=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,PE=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,UE=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,NE=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,IE=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,kE=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,FE=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,BE=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,zE=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,VE=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,GE=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,HE=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,WE=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,XE=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,qE=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,YE=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,ZE=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,KE=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,QE=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,JE=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,$E=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,eT=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,tT=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,rT=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,nT=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,iT=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,sT=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,aT=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,oT=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,lT=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,uT=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,cT=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,fT=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,dT=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,hT=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,pT=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,mT=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,yT=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,gT=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,vT=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,bT=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,_T=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,xT=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,ST=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const wT=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,MT=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ET=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,TT=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,AT=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,jT=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,RT=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,CT=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,DT=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,LT=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,OT=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,PT=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,UT=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,NT=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,IT=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,kT=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FT=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,BT=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zT=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,VT=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,GT=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,HT=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,WT=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XT=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qT=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,YT=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZT=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,KT=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QT=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,JT=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,$T=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eA=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,tA=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,rA=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,nr={alphahash_fragment:MM,alphahash_pars_fragment:EM,alphamap_fragment:TM,alphamap_pars_fragment:AM,alphatest_fragment:jM,alphatest_pars_fragment:RM,aomap_fragment:CM,aomap_pars_fragment:DM,batching_pars_vertex:LM,batching_vertex:OM,begin_vertex:PM,beginnormal_vertex:UM,bsdfs:NM,iridescence_fragment:IM,bumpmap_pars_fragment:kM,clipping_planes_fragment:FM,clipping_planes_pars_fragment:BM,clipping_planes_pars_vertex:zM,clipping_planes_vertex:VM,color_fragment:GM,color_pars_fragment:HM,color_pars_vertex:WM,color_vertex:XM,common:qM,cube_uv_reflection_fragment:YM,defaultnormal_vertex:ZM,displacementmap_pars_vertex:KM,displacementmap_vertex:QM,emissivemap_fragment:JM,emissivemap_pars_fragment:$M,colorspace_fragment:eE,colorspace_pars_fragment:tE,envmap_fragment:rE,envmap_common_pars_fragment:nE,envmap_pars_fragment:iE,envmap_pars_vertex:sE,envmap_physical_pars_fragment:yE,envmap_vertex:aE,fog_vertex:oE,fog_pars_vertex:lE,fog_fragment:uE,fog_pars_fragment:cE,gradientmap_pars_fragment:fE,lightmap_pars_fragment:dE,lights_lambert_fragment:hE,lights_lambert_pars_fragment:pE,lights_pars_begin:mE,lights_toon_fragment:gE,lights_toon_pars_fragment:vE,lights_phong_fragment:bE,lights_phong_pars_fragment:_E,lights_physical_fragment:xE,lights_physical_pars_fragment:SE,lights_fragment_begin:wE,lights_fragment_maps:ME,lights_fragment_end:EE,logdepthbuf_fragment:TE,logdepthbuf_pars_fragment:AE,logdepthbuf_pars_vertex:jE,logdepthbuf_vertex:RE,map_fragment:CE,map_pars_fragment:DE,map_particle_fragment:LE,map_particle_pars_fragment:OE,metalnessmap_fragment:PE,metalnessmap_pars_fragment:UE,morphinstance_vertex:NE,morphcolor_vertex:IE,morphnormal_vertex:kE,morphtarget_pars_vertex:FE,morphtarget_vertex:BE,normal_fragment_begin:zE,normal_fragment_maps:VE,normal_pars_fragment:GE,normal_pars_vertex:HE,normal_vertex:WE,normalmap_pars_fragment:XE,clearcoat_normal_fragment_begin:qE,clearcoat_normal_fragment_maps:YE,clearcoat_pars_fragment:ZE,iridescence_pars_fragment:KE,opaque_fragment:QE,packing:JE,premultiplied_alpha_fragment:$E,project_vertex:eT,dithering_fragment:tT,dithering_pars_fragment:rT,roughnessmap_fragment:nT,roughnessmap_pars_fragment:iT,shadowmap_pars_fragment:sT,shadowmap_pars_vertex:aT,shadowmap_vertex:oT,shadowmask_pars_fragment:lT,skinbase_vertex:uT,skinning_pars_vertex:cT,skinning_vertex:fT,skinnormal_vertex:dT,specularmap_fragment:hT,specularmap_pars_fragment:pT,tonemapping_fragment:mT,tonemapping_pars_fragment:yT,transmission_fragment:gT,transmission_pars_fragment:vT,uv_pars_fragment:bT,uv_pars_vertex:_T,uv_vertex:xT,worldpos_vertex:ST,background_vert:wT,background_frag:MT,backgroundCube_vert:ET,backgroundCube_frag:TT,cube_vert:AT,cube_frag:jT,depth_vert:RT,depth_frag:CT,distanceRGBA_vert:DT,distanceRGBA_frag:LT,equirect_vert:OT,equirect_frag:PT,linedashed_vert:UT,linedashed_frag:NT,meshbasic_vert:IT,meshbasic_frag:kT,meshlambert_vert:FT,meshlambert_frag:BT,meshmatcap_vert:zT,meshmatcap_frag:VT,meshnormal_vert:GT,meshnormal_frag:HT,meshphong_vert:WT,meshphong_frag:XT,meshphysical_vert:qT,meshphysical_frag:YT,meshtoon_vert:ZT,meshtoon_frag:KT,points_vert:QT,points_frag:JT,shadow_vert:$T,shadow_frag:eA,sprite_vert:tA,sprite_frag:rA},Rt={common:{diffuse:{value:new Nr(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new rr},alphaMap:{value:null},alphaMapTransform:{value:new rr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new rr}},envmap:{envMap:{value:null},envMapRotation:{value:new rr},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new rr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new rr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new rr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new rr},normalScale:{value:new zr(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new rr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new rr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new rr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new rr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Nr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Nr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new rr},alphaTest:{value:0},uvTransform:{value:new rr}},sprite:{diffuse:{value:new Nr(16777215)},opacity:{value:1},center:{value:new zr(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new rr},alphaMap:{value:null},alphaMapTransform:{value:new rr},alphaTest:{value:0}}},$i={basic:{uniforms:Bn([Rt.common,Rt.specularmap,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.fog]),vertexShader:nr.meshbasic_vert,fragmentShader:nr.meshbasic_frag},lambert:{uniforms:Bn([Rt.common,Rt.specularmap,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.fog,Rt.lights,{emissive:{value:new Nr(0)}}]),vertexShader:nr.meshlambert_vert,fragmentShader:nr.meshlambert_frag},phong:{uniforms:Bn([Rt.common,Rt.specularmap,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.fog,Rt.lights,{emissive:{value:new Nr(0)},specular:{value:new Nr(1118481)},shininess:{value:30}}]),vertexShader:nr.meshphong_vert,fragmentShader:nr.meshphong_frag},standard:{uniforms:Bn([Rt.common,Rt.envmap,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.roughnessmap,Rt.metalnessmap,Rt.fog,Rt.lights,{emissive:{value:new Nr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:nr.meshphysical_vert,fragmentShader:nr.meshphysical_frag},toon:{uniforms:Bn([Rt.common,Rt.aomap,Rt.lightmap,Rt.emissivemap,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.gradientmap,Rt.fog,Rt.lights,{emissive:{value:new Nr(0)}}]),vertexShader:nr.meshtoon_vert,fragmentShader:nr.meshtoon_frag},matcap:{uniforms:Bn([Rt.common,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,Rt.fog,{matcap:{value:null}}]),vertexShader:nr.meshmatcap_vert,fragmentShader:nr.meshmatcap_frag},points:{uniforms:Bn([Rt.points,Rt.fog]),vertexShader:nr.points_vert,fragmentShader:nr.points_frag},dashed:{uniforms:Bn([Rt.common,Rt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nr.linedashed_vert,fragmentShader:nr.linedashed_frag},depth:{uniforms:Bn([Rt.common,Rt.displacementmap]),vertexShader:nr.depth_vert,fragmentShader:nr.depth_frag},normal:{uniforms:Bn([Rt.common,Rt.bumpmap,Rt.normalmap,Rt.displacementmap,{opacity:{value:1}}]),vertexShader:nr.meshnormal_vert,fragmentShader:nr.meshnormal_frag},sprite:{uniforms:Bn([Rt.sprite,Rt.fog]),vertexShader:nr.sprite_vert,fragmentShader:nr.sprite_frag},background:{uniforms:{uvTransform:{value:new rr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:nr.background_vert,fragmentShader:nr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new rr}},vertexShader:nr.backgroundCube_vert,fragmentShader:nr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:nr.cube_vert,fragmentShader:nr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nr.equirect_vert,fragmentShader:nr.equirect_frag},distanceRGBA:{uniforms:Bn([Rt.common,Rt.displacementmap,{referencePosition:{value:new pt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nr.distanceRGBA_vert,fragmentShader:nr.distanceRGBA_frag},shadow:{uniforms:Bn([Rt.lights,Rt.fog,{color:{value:new Nr(0)},opacity:{value:1}}]),vertexShader:nr.shadow_vert,fragmentShader:nr.shadow_frag}};$i.physical={uniforms:Bn([$i.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new rr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new rr},clearcoatNormalScale:{value:new zr(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new rr},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new rr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new rr},sheen:{value:0},sheenColor:{value:new Nr(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new rr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new rr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new rr},transmissionSamplerSize:{value:new zr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new rr},attenuationDistance:{value:0},attenuationColor:{value:new Nr(0)},specularColor:{value:new Nr(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new rr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new rr},anisotropyVector:{value:new zr},anisotropyMap:{value:null},anisotropyMapTransform:{value:new rr}}]),vertexShader:nr.meshphysical_vert,fragmentShader:nr.meshphysical_frag};const Vf={r:0,b:0,g:0},Wa=new Ps,nA=new yn;function iA(s,r,i,d,T,D,U){const t=new Nr(0);let R=D===!0?0:1,M,p,f=null,h=0,b=null;function w(m){let g=m.isScene===!0?m.background:null;return g&&g.isTexture&&(g=(m.backgroundBlurriness>0?i:r).get(g)),g}function c(m){let g=!1;const _=w(m);_===null?o(t,R):_&&_.isColor&&(o(_,1),g=!0);const v=s.xr.getEnvironmentBlendMode();v==="additive"?d.buffers.color.setClear(0,0,0,1,U):v==="alpha-blend"&&d.buffers.color.setClear(0,0,0,0,U),(s.autoClear||g)&&(d.buffers.depth.setTest(!0),d.buffers.depth.setMask(!0),d.buffers.color.setMask(!0),s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil))}function l(m,g){const _=w(g);_&&(_.isCubeTexture||_.mapping===md)?(p===void 0&&(p=new ts(new Qu(1,1,1),new Us({name:"BackgroundCubeMaterial",uniforms:_l($i.backgroundCube.uniforms),vertexShader:$i.backgroundCube.vertexShader,fragmentShader:$i.backgroundCube.fragmentShader,side:Qn,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(v,x,E){this.matrixWorld.copyPosition(E.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),T.update(p)),Wa.copy(g.backgroundRotation),Wa.x*=-1,Wa.y*=-1,Wa.z*=-1,_.isCubeTexture&&_.isRenderTargetTexture===!1&&(Wa.y*=-1,Wa.z*=-1),p.material.uniforms.envMap.value=_,p.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(nA.makeRotationFromEuler(Wa)),p.material.toneMapped=xr.getTransfer(_.colorSpace)!==Ur,(f!==_||h!==_.version||b!==s.toneMapping)&&(p.material.needsUpdate=!0,f=_,h=_.version,b=s.toneMapping),p.layers.enableAll(),m.unshift(p,p.geometry,p.material,0,0,null)):_&&_.isTexture&&(M===void 0&&(M=new ts(new Ju(2,2),new Us({name:"BackgroundMaterial",uniforms:_l($i.background.uniforms),vertexShader:$i.background.vertexShader,fragmentShader:$i.background.fragmentShader,side:ba,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),M.geometry.deleteAttribute("normal"),Object.defineProperty(M.material,"map",{get:function(){return this.uniforms.t2D.value}}),T.update(M)),M.material.uniforms.t2D.value=_,M.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,M.material.toneMapped=xr.getTransfer(_.colorSpace)!==Ur,_.matrixAutoUpdate===!0&&_.updateMatrix(),M.material.uniforms.uvTransform.value.copy(_.matrix),(f!==_||h!==_.version||b!==s.toneMapping)&&(M.material.needsUpdate=!0,f=_,h=_.version,b=s.toneMapping),M.layers.enableAll(),m.unshift(M,M.geometry,M.material,0,0,null))}function o(m,g){m.getRGB(Vf,I1(s)),d.buffers.color.setClear(Vf.r,Vf.g,Vf.b,g,U)}function u(){p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0),M!==void 0&&(M.geometry.dispose(),M.material.dispose(),M=void 0)}return{getClearColor:function(){return t},setClearColor:function(m,g=1){t.set(m),R=g,o(t,R)},getClearAlpha:function(){return R},setClearAlpha:function(m){R=m,o(t,R)},render:c,addToRenderList:l,dispose:u}}function sA(s,r){const i=s.getParameter(s.MAX_VERTEX_ATTRIBS),d={},T=h(null);let D=T,U=!1;function t(O,P,L,z,N){let V=!1;const k=f(z,L,P);D!==k&&(D=k,M(D.object)),V=b(O,z,L,N),V&&w(O,z,L,N),N!==null&&r.update(N,s.ELEMENT_ARRAY_BUFFER),(V||U)&&(U=!1,g(O,P,L,z),N!==null&&s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,r.get(N).buffer))}function R(){return s.createVertexArray()}function M(O){return s.bindVertexArray(O)}function p(O){return s.deleteVertexArray(O)}function f(O,P,L){const z=L.wireframe===!0;let N=d[O.id];N===void 0&&(N={},d[O.id]=N);let V=N[P.id];V===void 0&&(V={},N[P.id]=V);let k=V[z];return k===void 0&&(k=h(R()),V[z]=k),k}function h(O){const P=[],L=[],z=[];for(let N=0;N<i;N++)P[N]=0,L[N]=0,z[N]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:P,enabledAttributes:L,attributeDivisors:z,object:O,attributes:{},index:null}}function b(O,P,L,z){const N=D.attributes,V=P.attributes;let k=0;const H=L.getAttributes();for(const G in H)if(H[G].location>=0){const W=N[G];let Q=V[G];if(Q===void 0&&(G==="instanceMatrix"&&O.instanceMatrix&&(Q=O.instanceMatrix),G==="instanceColor"&&O.instanceColor&&(Q=O.instanceColor)),W===void 0||W.attribute!==Q||Q&&W.data!==Q.data)return!0;k++}return D.attributesNum!==k||D.index!==z}function w(O,P,L,z){const N={},V=P.attributes;let k=0;const H=L.getAttributes();for(const G in H)if(H[G].location>=0){let W=V[G];W===void 0&&(G==="instanceMatrix"&&O.instanceMatrix&&(W=O.instanceMatrix),G==="instanceColor"&&O.instanceColor&&(W=O.instanceColor));const Q={};Q.attribute=W,W&&W.data&&(Q.data=W.data),N[G]=Q,k++}D.attributes=N,D.attributesNum=k,D.index=z}function c(){const O=D.newAttributes;for(let P=0,L=O.length;P<L;P++)O[P]=0}function l(O){o(O,0)}function o(O,P){const L=D.newAttributes,z=D.enabledAttributes,N=D.attributeDivisors;L[O]=1,z[O]===0&&(s.enableVertexAttribArray(O),z[O]=1),N[O]!==P&&(s.vertexAttribDivisor(O,P),N[O]=P)}function u(){const O=D.newAttributes,P=D.enabledAttributes;for(let L=0,z=P.length;L<z;L++)P[L]!==O[L]&&(s.disableVertexAttribArray(L),P[L]=0)}function m(O,P,L,z,N,V,k){k===!0?s.vertexAttribIPointer(O,P,L,N,V):s.vertexAttribPointer(O,P,L,z,N,V)}function g(O,P,L,z){c();const N=z.attributes,V=L.getAttributes(),k=P.defaultAttributeValues;for(const H in V){const G=V[H];if(G.location>=0){let F=N[H];if(F===void 0&&(H==="instanceMatrix"&&O.instanceMatrix&&(F=O.instanceMatrix),H==="instanceColor"&&O.instanceColor&&(F=O.instanceColor)),F!==void 0){const W=F.normalized,Q=F.itemSize,J=r.get(F);if(J===void 0)continue;const ee=J.buffer,te=J.type,se=J.bytesPerElement,ce=te===s.INT||te===s.UNSIGNED_INT||F.gpuType===my;if(F.isInterleavedBufferAttribute){const q=F.data,Z=q.stride,ie=F.offset;if(q.isInstancedInterleavedBuffer){for(let pe=0;pe<G.locationSize;pe++)o(G.location+pe,q.meshPerAttribute);O.isInstancedMesh!==!0&&z._maxInstanceCount===void 0&&(z._maxInstanceCount=q.meshPerAttribute*q.count)}else for(let pe=0;pe<G.locationSize;pe++)l(G.location+pe);s.bindBuffer(s.ARRAY_BUFFER,ee);for(let pe=0;pe<G.locationSize;pe++)m(G.location+pe,Q/G.locationSize,te,W,Z*se,(ie+Q/G.locationSize*pe)*se,ce)}else{if(F.isInstancedBufferAttribute){for(let q=0;q<G.locationSize;q++)o(G.location+q,F.meshPerAttribute);O.isInstancedMesh!==!0&&z._maxInstanceCount===void 0&&(z._maxInstanceCount=F.meshPerAttribute*F.count)}else for(let q=0;q<G.locationSize;q++)l(G.location+q);s.bindBuffer(s.ARRAY_BUFFER,ee);for(let q=0;q<G.locationSize;q++)m(G.location+q,Q/G.locationSize,te,W,Q*se,Q/G.locationSize*q*se,ce)}}else if(k!==void 0){const W=k[H];if(W!==void 0)switch(W.length){case 2:s.vertexAttrib2fv(G.location,W);break;case 3:s.vertexAttrib3fv(G.location,W);break;case 4:s.vertexAttrib4fv(G.location,W);break;default:s.vertexAttrib1fv(G.location,W)}}}}u()}function _(){E();for(const O in d){const P=d[O];for(const L in P){const z=P[L];for(const N in z)p(z[N].object),delete z[N];delete P[L]}delete d[O]}}function v(O){if(d[O.id]===void 0)return;const P=d[O.id];for(const L in P){const z=P[L];for(const N in z)p(z[N].object),delete z[N];delete P[L]}delete d[O.id]}function x(O){for(const P in d){const L=d[P];if(L[O.id]===void 0)continue;const z=L[O.id];for(const N in z)p(z[N].object),delete z[N];delete L[O.id]}}function E(){j(),U=!0,D!==T&&(D=T,M(D.object))}function j(){T.geometry=null,T.program=null,T.wireframe=!1}return{setup:t,reset:E,resetDefaultState:j,dispose:_,releaseStatesOfGeometry:v,releaseStatesOfProgram:x,initAttributes:c,enableAttribute:l,disableUnusedAttributes:u}}function aA(s,r,i){let d;function T(M){d=M}function D(M,p){s.drawArrays(d,M,p),i.update(p,d,1)}function U(M,p,f){f!==0&&(s.drawArraysInstanced(d,M,p,f),i.update(p,d,f))}function t(M,p,f){if(f===0)return;r.get("WEBGL_multi_draw").multiDrawArraysWEBGL(d,M,0,p,0,f);let b=0;for(let w=0;w<f;w++)b+=p[w];i.update(b,d,1)}function R(M,p,f,h){if(f===0)return;const b=r.get("WEBGL_multi_draw");if(b===null)for(let w=0;w<M.length;w++)U(M[w],p[w],h[w]);else{b.multiDrawArraysInstancedWEBGL(d,M,0,p,0,h,0,f);let w=0;for(let c=0;c<f;c++)w+=p[c]*h[c];i.update(w,d,1)}}this.setMode=T,this.render=D,this.renderInstances=U,this.renderMultiDraw=t,this.renderMultiDrawInstances=R}function oA(s,r,i,d){let T;function D(){if(T!==void 0)return T;if(r.has("EXT_texture_filter_anisotropic")===!0){const x=r.get("EXT_texture_filter_anisotropic");T=s.getParameter(x.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else T=0;return T}function U(x){return!(x!==Vi&&d.convert(x)!==s.getParameter(s.IMPLEMENTATION_COLOR_READ_FORMAT))}function t(x){const E=x===qu&&(r.has("EXT_color_buffer_half_float")||r.has("EXT_color_buffer_float"));return!(x!==Os&&d.convert(x)!==s.getParameter(s.IMPLEMENTATION_COLOR_READ_TYPE)&&x!==Cs&&!E)}function R(x){if(x==="highp"){if(s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.HIGH_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT).precision>0)return"highp";x="mediump"}return x==="mediump"&&s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.MEDIUM_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let M=i.precision!==void 0?i.precision:"highp";const p=R(M);p!==M&&(console.warn("THREE.WebGLRenderer:",M,"not supported, using",p,"instead."),M=p);const f=i.logarithmicDepthBuffer===!0,h=i.reverseDepthBuffer===!0&&r.has("EXT_clip_control"),b=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS),w=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS),c=s.getParameter(s.MAX_TEXTURE_SIZE),l=s.getParameter(s.MAX_CUBE_MAP_TEXTURE_SIZE),o=s.getParameter(s.MAX_VERTEX_ATTRIBS),u=s.getParameter(s.MAX_VERTEX_UNIFORM_VECTORS),m=s.getParameter(s.MAX_VARYING_VECTORS),g=s.getParameter(s.MAX_FRAGMENT_UNIFORM_VECTORS),_=w>0,v=s.getParameter(s.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:D,getMaxPrecision:R,textureFormatReadable:U,textureTypeReadable:t,precision:M,logarithmicDepthBuffer:f,reverseDepthBuffer:h,maxTextures:b,maxVertexTextures:w,maxTextureSize:c,maxCubemapSize:l,maxAttributes:o,maxVertexUniforms:u,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:_,maxSamples:v}}function lA(s){const r=this;let i=null,d=0,T=!1,D=!1;const U=new Ya,t=new rr,R={value:null,needsUpdate:!1};this.uniform=R,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const b=f.length!==0||h||d!==0||T;return T=h,d=f.length,b},this.beginShadows=function(){D=!0,p(null)},this.endShadows=function(){D=!1},this.setGlobalState=function(f,h){i=p(f,h,0)},this.setState=function(f,h,b){const w=f.clippingPlanes,c=f.clipIntersection,l=f.clipShadows,o=s.get(f);if(!T||w===null||w.length===0||D&&!l)D?p(null):M();else{const u=D?0:d,m=u*4;let g=o.clippingState||null;R.value=g,g=p(w,h,m,b);for(let _=0;_!==m;++_)g[_]=i[_];o.clippingState=g,this.numIntersection=c?this.numPlanes:0,this.numPlanes+=u}};function M(){R.value!==i&&(R.value=i,R.needsUpdate=d>0),r.numPlanes=d,r.numIntersection=0}function p(f,h,b,w){const c=f!==null?f.length:0;let l=null;if(c!==0){if(l=R.value,w!==!0||l===null){const o=b+c*4,u=h.matrixWorldInverse;t.getNormalMatrix(u),(l===null||l.length<o)&&(l=new Float32Array(o));for(let m=0,g=b;m!==c;++m,g+=4)U.copy(f[m]).applyMatrix4(u,t),U.normal.toArray(l,g),l[g+3]=U.constant}R.value=l,R.needsUpdate=!0}return r.numPlanes=c,r.numIntersection=0,l}}function uA(s){let r=new WeakMap;function i(U,t){return t===ym?U.mapping=gl:t===gm&&(U.mapping=vl),U}function d(U){if(U&&U.isTexture){const t=U.mapping;if(t===ym||t===gm)if(r.has(U)){const R=r.get(U).texture;return i(R,U.mapping)}else{const R=U.image;if(R&&R.height>0){const M=new dM(R.height);return M.fromEquirectangularTexture(s,U),r.set(U,M),U.addEventListener("dispose",T),i(M.texture,U.mapping)}else return null}}return U}function T(U){const t=U.target;t.removeEventListener("dispose",T);const R=r.get(t);R!==void 0&&(r.delete(t),R.dispose())}function D(){r=new WeakMap}return{get:d,dispose:D}}const ol=4,Ob=[.125,.215,.35,.446,.526,.582],Ja=20,Vp=new _M,Pb=new Nr;let Gp=null,Hp=0,Wp=0,Xp=!1;const Za=(1+Math.sqrt(5))/2,al=1/Za,Ub=[new pt(-Za,al,0),new pt(Za,al,0),new pt(-al,0,Za),new pt(al,0,Za),new pt(0,Za,-al),new pt(0,Za,al),new pt(-1,1,-1),new pt(1,1,-1),new pt(-1,1,1),new pt(1,1,1)],cA=new pt;class Nb{constructor(r){this._renderer=r,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(r,i=0,d=.1,T=100,D={}){const{size:U=256,position:t=cA}=D;Gp=this._renderer.getRenderTarget(),Hp=this._renderer.getActiveCubeFace(),Wp=this._renderer.getActiveMipmapLevel(),Xp=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(U);const R=this._allocateTargets();return R.depthBuffer=!0,this._sceneToCubeUV(r,d,T,R,t),i>0&&this._blur(R,0,0,i),this._applyPMREM(R),this._cleanup(R),R}fromEquirectangular(r,i=null){return this._fromTexture(r,i)}fromCubemap(r,i=null){return this._fromTexture(r,i)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Fb(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=kb(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(r){this._lodMax=Math.floor(Math.log2(r)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let r=0;r<this._lodPlanes.length;r++)this._lodPlanes[r].dispose()}_cleanup(r){this._renderer.setRenderTarget(Gp,Hp,Wp),this._renderer.xr.enabled=Xp,r.scissorTest=!1,Gf(r,0,0,r.width,r.height)}_fromTexture(r,i){r.mapping===gl||r.mapping===vl?this._setSize(r.image.length===0?16:r.image[0].width||r.image[0].image.width):this._setSize(r.image.width/4),Gp=this._renderer.getRenderTarget(),Hp=this._renderer.getActiveCubeFace(),Wp=this._renderer.getActiveMipmapLevel(),Xp=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const d=i||this._allocateTargets();return this._textureToCubeUV(r,d),this._applyPMREM(d),this._cleanup(d),d}_allocateTargets(){const r=3*Math.max(this._cubeSize,112),i=4*this._cubeSize,d={magFilter:es,minFilter:es,generateMipmaps:!1,type:qu,format:Vi,colorSpace:bl,depthBuffer:!1},T=Ib(r,i,d);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==r||this._pingPongRenderTarget.height!==i){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Ib(r,i,d);const{_lodMax:D}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=fA(D)),this._blurMaterial=dA(D,r,i)}return T}_compileMaterial(r){const i=new ts(this._lodPlanes[0],r);this._renderer.compile(i,Vp)}_sceneToCubeUV(r,i,d,T,D){const R=new Ai(90,1,i,d),M=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],f=this._renderer,h=f.autoClear,b=f.toneMapping;f.getClearColor(Pb),f.toneMapping=va,f.autoClear=!1;const w=new P1({name:"PMREM.Background",side:Qn,depthWrite:!1,depthTest:!1}),c=new ts(new Qu,w);let l=!1;const o=r.background;o?o.isColor&&(w.color.copy(o),r.background=null,l=!0):(w.color.copy(Pb),l=!0);for(let u=0;u<6;u++){const m=u%3;m===0?(R.up.set(0,M[u],0),R.position.set(D.x,D.y,D.z),R.lookAt(D.x+p[u],D.y,D.z)):m===1?(R.up.set(0,0,M[u]),R.position.set(D.x,D.y,D.z),R.lookAt(D.x,D.y+p[u],D.z)):(R.up.set(0,M[u],0),R.position.set(D.x,D.y,D.z),R.lookAt(D.x,D.y,D.z+p[u]));const g=this._cubeSize;Gf(T,m*g,u>2?g:0,g,g),f.setRenderTarget(T),l&&f.render(c,R),f.render(r,R)}c.geometry.dispose(),c.material.dispose(),f.toneMapping=b,f.autoClear=h,r.background=o}_textureToCubeUV(r,i){const d=this._renderer,T=r.mapping===gl||r.mapping===vl;T?(this._cubemapMaterial===null&&(this._cubemapMaterial=Fb()),this._cubemapMaterial.uniforms.flipEnvMap.value=r.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=kb());const D=T?this._cubemapMaterial:this._equirectMaterial,U=new ts(this._lodPlanes[0],D),t=D.uniforms;t.envMap.value=r;const R=this._cubeSize;Gf(i,0,0,3*R,2*R),d.setRenderTarget(i),d.render(U,Vp)}_applyPMREM(r){const i=this._renderer,d=i.autoClear;i.autoClear=!1;const T=this._lodPlanes.length;for(let D=1;D<T;D++){const U=Math.sqrt(this._sigmas[D]*this._sigmas[D]-this._sigmas[D-1]*this._sigmas[D-1]),t=Ub[(T-D-1)%Ub.length];this._blur(r,D-1,D,U,t)}i.autoClear=d}_blur(r,i,d,T,D){const U=this._pingPongRenderTarget;this._halfBlur(r,U,i,d,T,"latitudinal",D),this._halfBlur(U,r,d,d,T,"longitudinal",D)}_halfBlur(r,i,d,T,D,U,t){const R=this._renderer,M=this._blurMaterial;U!=="latitudinal"&&U!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,f=new ts(this._lodPlanes[T],M),h=M.uniforms,b=this._sizeLods[d]-1,w=isFinite(D)?Math.PI/(2*b):2*Math.PI/(2*Ja-1),c=D/w,l=isFinite(D)?1+Math.floor(p*c):Ja;l>Ja&&console.warn(`sigmaRadians, ${D}, is too large and will clip, as it requested ${l} samples when the maximum is set to ${Ja}`);const o=[];let u=0;for(let x=0;x<Ja;++x){const E=x/c,j=Math.exp(-E*E/2);o.push(j),x===0?u+=j:x<l&&(u+=2*j)}for(let x=0;x<o.length;x++)o[x]=o[x]/u;h.envMap.value=r.texture,h.samples.value=l,h.weights.value=o,h.latitudinal.value=U==="latitudinal",t&&(h.poleAxis.value=t);const{_lodMax:m}=this;h.dTheta.value=w,h.mipInt.value=m-d;const g=this._sizeLods[T],_=3*g*(T>m-ol?T-m+ol:0),v=4*(this._cubeSize-g);Gf(i,_,v,3*g,2*g),R.setRenderTarget(i),R.render(f,Vp)}}function fA(s){const r=[],i=[],d=[];let T=s;const D=s-ol+1+Ob.length;for(let U=0;U<D;U++){const t=Math.pow(2,T);i.push(t);let R=1/t;U>s-ol?R=Ob[U-s+ol-1]:U===0&&(R=0),d.push(R);const M=1/(t-2),p=-M,f=1+M,h=[p,p,f,p,f,f,p,p,f,f,p,f],b=6,w=6,c=3,l=2,o=1,u=new Float32Array(c*w*b),m=new Float32Array(l*w*b),g=new Float32Array(o*w*b);for(let v=0;v<b;v++){const x=v%3*2/3-1,E=v>2?0:-1,j=[x,E,0,x+2/3,E,0,x+2/3,E+1,0,x,E,0,x+2/3,E+1,0,x,E+1,0];u.set(j,c*w*v),m.set(h,l*w*v);const O=[v,v,v,v,v,v];g.set(O,o*w*v)}const _=new lo;_.setAttribute("position",new rs(u,c)),_.setAttribute("uv",new rs(m,l)),_.setAttribute("faceIndex",new rs(g,o)),r.push(_),T>ol&&T--}return{lodPlanes:r,sizeLods:i,sigmas:d}}function Ib(s,r,i){const d=new oo(s,r,i);return d.texture.mapping=md,d.texture.name="PMREM.cubeUv",d.scissorTest=!0,d}function Gf(s,r,i,d,T){s.viewport.set(r,i,d,T),s.scissor.set(r,i,d,T)}function dA(s,r,i){const d=new Float32Array(Ja),T=new pt(0,1,0);return new Us({name:"SphericalGaussianBlur",defines:{n:Ja,CUBEUV_TEXEL_WIDTH:1/r,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${s}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:d},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:T}},vertexShader:wy(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ga,depthTest:!1,depthWrite:!1})}function kb(){return new Us({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:wy(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ga,depthTest:!1,depthWrite:!1})}function Fb(){return new Us({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:wy(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ga,depthTest:!1,depthWrite:!1})}function wy(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function hA(s){let r=new WeakMap,i=null;function d(t){if(t&&t.isTexture){const R=t.mapping,M=R===ym||R===gm,p=R===gl||R===vl;if(M||p){let f=r.get(t);const h=f!==void 0?f.texture.pmremVersion:0;if(t.isRenderTargetTexture&&t.pmremVersion!==h)return i===null&&(i=new Nb(s)),f=M?i.fromEquirectangular(t,f):i.fromCubemap(t,f),f.texture.pmremVersion=t.pmremVersion,r.set(t,f),f.texture;if(f!==void 0)return f.texture;{const b=t.image;return M&&b&&b.height>0||p&&b&&T(b)?(i===null&&(i=new Nb(s)),f=M?i.fromEquirectangular(t):i.fromCubemap(t),f.texture.pmremVersion=t.pmremVersion,r.set(t,f),t.addEventListener("dispose",D),f.texture):null}}}return t}function T(t){let R=0;const M=6;for(let p=0;p<M;p++)t[p]!==void 0&&R++;return R===M}function D(t){const R=t.target;R.removeEventListener("dispose",D);const M=r.get(R);M!==void 0&&(r.delete(R),M.dispose())}function U(){r=new WeakMap,i!==null&&(i.dispose(),i=null)}return{get:d,dispose:U}}function pA(s){const r={};function i(d){if(r[d]!==void 0)return r[d];let T;switch(d){case"WEBGL_depth_texture":T=s.getExtension("WEBGL_depth_texture")||s.getExtension("MOZ_WEBGL_depth_texture")||s.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":T=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":T=s.getExtension("WEBGL_compressed_texture_s3tc")||s.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":T=s.getExtension("WEBGL_compressed_texture_pvrtc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:T=s.getExtension(d)}return r[d]=T,T}return{has:function(d){return i(d)!==null},init:function(){i("EXT_color_buffer_float"),i("WEBGL_clip_cull_distance"),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture"),i("WEBGL_render_shared_exponent")},get:function(d){const T=i(d);return T===null&&pl("THREE.WebGLRenderer: "+d+" extension not supported."),T}}}function mA(s,r,i,d){const T={},D=new WeakMap;function U(f){const h=f.target;h.index!==null&&r.remove(h.index);for(const w in h.attributes)r.remove(h.attributes[w]);h.removeEventListener("dispose",U),delete T[h.id];const b=D.get(h);b&&(r.remove(b),D.delete(h)),d.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,i.memory.geometries--}function t(f,h){return T[h.id]===!0||(h.addEventListener("dispose",U),T[h.id]=!0,i.memory.geometries++),h}function R(f){const h=f.attributes;for(const b in h)r.update(h[b],s.ARRAY_BUFFER)}function M(f){const h=[],b=f.index,w=f.attributes.position;let c=0;if(b!==null){const u=b.array;c=b.version;for(let m=0,g=u.length;m<g;m+=3){const _=u[m+0],v=u[m+1],x=u[m+2];h.push(_,v,v,x,x,_)}}else if(w!==void 0){const u=w.array;c=w.version;for(let m=0,g=u.length/3-1;m<g;m+=3){const _=m+0,v=m+1,x=m+2;h.push(_,v,v,x,x,_)}}else return;const l=new(C1(h)?N1:U1)(h,1);l.version=c;const o=D.get(f);o&&r.remove(o),D.set(f,l)}function p(f){const h=D.get(f);if(h){const b=f.index;b!==null&&h.version<b.version&&M(f)}else M(f);return D.get(f)}return{get:t,update:R,getWireframeAttribute:p}}function yA(s,r,i){let d;function T(h){d=h}let D,U;function t(h){D=h.type,U=h.bytesPerElement}function R(h,b){s.drawElements(d,b,D,h*U),i.update(b,d,1)}function M(h,b,w){w!==0&&(s.drawElementsInstanced(d,b,D,h*U,w),i.update(b,d,w))}function p(h,b,w){if(w===0)return;r.get("WEBGL_multi_draw").multiDrawElementsWEBGL(d,b,0,D,h,0,w);let l=0;for(let o=0;o<w;o++)l+=b[o];i.update(l,d,1)}function f(h,b,w,c){if(w===0)return;const l=r.get("WEBGL_multi_draw");if(l===null)for(let o=0;o<h.length;o++)M(h[o]/U,b[o],c[o]);else{l.multiDrawElementsInstancedWEBGL(d,b,0,D,h,0,c,0,w);let o=0;for(let u=0;u<w;u++)o+=b[u]*c[u];i.update(o,d,1)}}this.setMode=T,this.setIndex=t,this.render=R,this.renderInstances=M,this.renderMultiDraw=p,this.renderMultiDrawInstances=f}function gA(s){const r={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function d(D,U,t){switch(i.calls++,U){case s.TRIANGLES:i.triangles+=t*(D/3);break;case s.LINES:i.lines+=t*(D/2);break;case s.LINE_STRIP:i.lines+=t*(D-1);break;case s.LINE_LOOP:i.lines+=t*D;break;case s.POINTS:i.points+=t*D;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",U);break}}function T(){i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:r,render:i,programs:null,autoReset:!0,reset:T,update:d}}function vA(s,r,i){const d=new WeakMap,T=new fn;function D(U,t,R){const M=U.morphTargetInfluences,p=t.morphAttributes.position||t.morphAttributes.normal||t.morphAttributes.color,f=p!==void 0?p.length:0;let h=d.get(t);if(h===void 0||h.count!==f){let O=function(){E.dispose(),d.delete(t),t.removeEventListener("dispose",O)};var b=O;h!==void 0&&h.texture.dispose();const w=t.morphAttributes.position!==void 0,c=t.morphAttributes.normal!==void 0,l=t.morphAttributes.color!==void 0,o=t.morphAttributes.position||[],u=t.morphAttributes.normal||[],m=t.morphAttributes.color||[];let g=0;w===!0&&(g=1),c===!0&&(g=2),l===!0&&(g=3);let _=t.attributes.position.count*g,v=1;_>r.maxTextureSize&&(v=Math.ceil(_/r.maxTextureSize),_=r.maxTextureSize);const x=new Float32Array(_*v*4*f),E=new D1(x,_,v,f);E.type=Cs,E.needsUpdate=!0;const j=g*4;for(let P=0;P<f;P++){const L=o[P],z=u[P],N=m[P],V=_*v*4*P;for(let k=0;k<L.count;k++){const H=k*j;w===!0&&(T.fromBufferAttribute(L,k),x[V+H+0]=T.x,x[V+H+1]=T.y,x[V+H+2]=T.z,x[V+H+3]=0),c===!0&&(T.fromBufferAttribute(z,k),x[V+H+4]=T.x,x[V+H+5]=T.y,x[V+H+6]=T.z,x[V+H+7]=0),l===!0&&(T.fromBufferAttribute(N,k),x[V+H+8]=T.x,x[V+H+9]=T.y,x[V+H+10]=T.z,x[V+H+11]=N.itemSize===4?T.w:1)}}h={count:f,texture:E,size:new zr(_,v)},d.set(t,h),t.addEventListener("dispose",O)}if(U.isInstancedMesh===!0&&U.morphTexture!==null)R.getUniforms().setValue(s,"morphTexture",U.morphTexture,i);else{let w=0;for(let l=0;l<M.length;l++)w+=M[l];const c=t.morphTargetsRelative?1:1-w;R.getUniforms().setValue(s,"morphTargetBaseInfluence",c),R.getUniforms().setValue(s,"morphTargetInfluences",M)}R.getUniforms().setValue(s,"morphTargetsTexture",h.texture,i),R.getUniforms().setValue(s,"morphTargetsTextureSize",h.size)}return{update:D}}function bA(s,r,i,d){let T=new WeakMap;function D(R){const M=d.render.frame,p=R.geometry,f=r.get(R,p);if(T.get(f)!==M&&(r.update(f),T.set(f,M)),R.isInstancedMesh&&(R.hasEventListener("dispose",t)===!1&&R.addEventListener("dispose",t),T.get(R)!==M&&(i.update(R.instanceMatrix,s.ARRAY_BUFFER),R.instanceColor!==null&&i.update(R.instanceColor,s.ARRAY_BUFFER),T.set(R,M))),R.isSkinnedMesh){const h=R.skeleton;T.get(h)!==M&&(h.update(),T.set(h,M))}return f}function U(){T=new WeakMap}function t(R){const M=R.target;M.removeEventListener("dispose",t),i.remove(M.instanceMatrix),M.instanceColor!==null&&i.remove(M.instanceColor)}return{update:D,dispose:U}}const G1=new Vn,Bb=new z1(1,1),H1=new D1,W1=new Yw,X1=new F1,zb=[],Vb=[],Gb=new Float32Array(16),Hb=new Float32Array(9),Wb=new Float32Array(4);function Ml(s,r,i){const d=s[0];if(d<=0||d>0)return s;const T=r*i;let D=zb[T];if(D===void 0&&(D=new Float32Array(T),zb[T]=D),r!==0){d.toArray(D,0);for(let U=1,t=0;U!==r;++U)t+=i,s[U].toArray(D,t)}return D}function xn(s,r){if(s.length!==r.length)return!1;for(let i=0,d=s.length;i<d;i++)if(s[i]!==r[i])return!1;return!0}function Sn(s,r){for(let i=0,d=r.length;i<d;i++)s[i]=r[i]}function gd(s,r){let i=Vb[r];i===void 0&&(i=new Int32Array(r),Vb[r]=i);for(let d=0;d!==r;++d)i[d]=s.allocateTextureUnit();return i}function _A(s,r){const i=this.cache;i[0]!==r&&(s.uniform1f(this.addr,r),i[0]=r)}function xA(s,r){const i=this.cache;if(r.x!==void 0)(i[0]!==r.x||i[1]!==r.y)&&(s.uniform2f(this.addr,r.x,r.y),i[0]=r.x,i[1]=r.y);else{if(xn(i,r))return;s.uniform2fv(this.addr,r),Sn(i,r)}}function SA(s,r){const i=this.cache;if(r.x!==void 0)(i[0]!==r.x||i[1]!==r.y||i[2]!==r.z)&&(s.uniform3f(this.addr,r.x,r.y,r.z),i[0]=r.x,i[1]=r.y,i[2]=r.z);else if(r.r!==void 0)(i[0]!==r.r||i[1]!==r.g||i[2]!==r.b)&&(s.uniform3f(this.addr,r.r,r.g,r.b),i[0]=r.r,i[1]=r.g,i[2]=r.b);else{if(xn(i,r))return;s.uniform3fv(this.addr,r),Sn(i,r)}}function wA(s,r){const i=this.cache;if(r.x!==void 0)(i[0]!==r.x||i[1]!==r.y||i[2]!==r.z||i[3]!==r.w)&&(s.uniform4f(this.addr,r.x,r.y,r.z,r.w),i[0]=r.x,i[1]=r.y,i[2]=r.z,i[3]=r.w);else{if(xn(i,r))return;s.uniform4fv(this.addr,r),Sn(i,r)}}function MA(s,r){const i=this.cache,d=r.elements;if(d===void 0){if(xn(i,r))return;s.uniformMatrix2fv(this.addr,!1,r),Sn(i,r)}else{if(xn(i,d))return;Wb.set(d),s.uniformMatrix2fv(this.addr,!1,Wb),Sn(i,d)}}function EA(s,r){const i=this.cache,d=r.elements;if(d===void 0){if(xn(i,r))return;s.uniformMatrix3fv(this.addr,!1,r),Sn(i,r)}else{if(xn(i,d))return;Hb.set(d),s.uniformMatrix3fv(this.addr,!1,Hb),Sn(i,d)}}function TA(s,r){const i=this.cache,d=r.elements;if(d===void 0){if(xn(i,r))return;s.uniformMatrix4fv(this.addr,!1,r),Sn(i,r)}else{if(xn(i,d))return;Gb.set(d),s.uniformMatrix4fv(this.addr,!1,Gb),Sn(i,d)}}function AA(s,r){const i=this.cache;i[0]!==r&&(s.uniform1i(this.addr,r),i[0]=r)}function jA(s,r){const i=this.cache;if(r.x!==void 0)(i[0]!==r.x||i[1]!==r.y)&&(s.uniform2i(this.addr,r.x,r.y),i[0]=r.x,i[1]=r.y);else{if(xn(i,r))return;s.uniform2iv(this.addr,r),Sn(i,r)}}function RA(s,r){const i=this.cache;if(r.x!==void 0)(i[0]!==r.x||i[1]!==r.y||i[2]!==r.z)&&(s.uniform3i(this.addr,r.x,r.y,r.z),i[0]=r.x,i[1]=r.y,i[2]=r.z);else{if(xn(i,r))return;s.uniform3iv(this.addr,r),Sn(i,r)}}function CA(s,r){const i=this.cache;if(r.x!==void 0)(i[0]!==r.x||i[1]!==r.y||i[2]!==r.z||i[3]!==r.w)&&(s.uniform4i(this.addr,r.x,r.y,r.z,r.w),i[0]=r.x,i[1]=r.y,i[2]=r.z,i[3]=r.w);else{if(xn(i,r))return;s.uniform4iv(this.addr,r),Sn(i,r)}}function DA(s,r){const i=this.cache;i[0]!==r&&(s.uniform1ui(this.addr,r),i[0]=r)}function LA(s,r){const i=this.cache;if(r.x!==void 0)(i[0]!==r.x||i[1]!==r.y)&&(s.uniform2ui(this.addr,r.x,r.y),i[0]=r.x,i[1]=r.y);else{if(xn(i,r))return;s.uniform2uiv(this.addr,r),Sn(i,r)}}function OA(s,r){const i=this.cache;if(r.x!==void 0)(i[0]!==r.x||i[1]!==r.y||i[2]!==r.z)&&(s.uniform3ui(this.addr,r.x,r.y,r.z),i[0]=r.x,i[1]=r.y,i[2]=r.z);else{if(xn(i,r))return;s.uniform3uiv(this.addr,r),Sn(i,r)}}function PA(s,r){const i=this.cache;if(r.x!==void 0)(i[0]!==r.x||i[1]!==r.y||i[2]!==r.z||i[3]!==r.w)&&(s.uniform4ui(this.addr,r.x,r.y,r.z,r.w),i[0]=r.x,i[1]=r.y,i[2]=r.z,i[3]=r.w);else{if(xn(i,r))return;s.uniform4uiv(this.addr,r),Sn(i,r)}}function UA(s,r,i){const d=this.cache,T=i.allocateTextureUnit();d[0]!==T&&(s.uniform1i(this.addr,T),d[0]=T);let D;this.type===s.SAMPLER_2D_SHADOW?(Bb.compareFunction=R1,D=Bb):D=G1,i.setTexture2D(r||D,T)}function NA(s,r,i){const d=this.cache,T=i.allocateTextureUnit();d[0]!==T&&(s.uniform1i(this.addr,T),d[0]=T),i.setTexture3D(r||W1,T)}function IA(s,r,i){const d=this.cache,T=i.allocateTextureUnit();d[0]!==T&&(s.uniform1i(this.addr,T),d[0]=T),i.setTextureCube(r||X1,T)}function kA(s,r,i){const d=this.cache,T=i.allocateTextureUnit();d[0]!==T&&(s.uniform1i(this.addr,T),d[0]=T),i.setTexture2DArray(r||H1,T)}function FA(s){switch(s){case 5126:return _A;case 35664:return xA;case 35665:return SA;case 35666:return wA;case 35674:return MA;case 35675:return EA;case 35676:return TA;case 5124:case 35670:return AA;case 35667:case 35671:return jA;case 35668:case 35672:return RA;case 35669:case 35673:return CA;case 5125:return DA;case 36294:return LA;case 36295:return OA;case 36296:return PA;case 35678:case 36198:case 36298:case 36306:case 35682:return UA;case 35679:case 36299:case 36307:return NA;case 35680:case 36300:case 36308:case 36293:return IA;case 36289:case 36303:case 36311:case 36292:return kA}}function BA(s,r){s.uniform1fv(this.addr,r)}function zA(s,r){const i=Ml(r,this.size,2);s.uniform2fv(this.addr,i)}function VA(s,r){const i=Ml(r,this.size,3);s.uniform3fv(this.addr,i)}function GA(s,r){const i=Ml(r,this.size,4);s.uniform4fv(this.addr,i)}function HA(s,r){const i=Ml(r,this.size,4);s.uniformMatrix2fv(this.addr,!1,i)}function WA(s,r){const i=Ml(r,this.size,9);s.uniformMatrix3fv(this.addr,!1,i)}function XA(s,r){const i=Ml(r,this.size,16);s.uniformMatrix4fv(this.addr,!1,i)}function qA(s,r){s.uniform1iv(this.addr,r)}function YA(s,r){s.uniform2iv(this.addr,r)}function ZA(s,r){s.uniform3iv(this.addr,r)}function KA(s,r){s.uniform4iv(this.addr,r)}function QA(s,r){s.uniform1uiv(this.addr,r)}function JA(s,r){s.uniform2uiv(this.addr,r)}function $A(s,r){s.uniform3uiv(this.addr,r)}function ej(s,r){s.uniform4uiv(this.addr,r)}function tj(s,r,i){const d=this.cache,T=r.length,D=gd(i,T);xn(d,D)||(s.uniform1iv(this.addr,D),Sn(d,D));for(let U=0;U!==T;++U)i.setTexture2D(r[U]||G1,D[U])}function rj(s,r,i){const d=this.cache,T=r.length,D=gd(i,T);xn(d,D)||(s.uniform1iv(this.addr,D),Sn(d,D));for(let U=0;U!==T;++U)i.setTexture3D(r[U]||W1,D[U])}function nj(s,r,i){const d=this.cache,T=r.length,D=gd(i,T);xn(d,D)||(s.uniform1iv(this.addr,D),Sn(d,D));for(let U=0;U!==T;++U)i.setTextureCube(r[U]||X1,D[U])}function ij(s,r,i){const d=this.cache,T=r.length,D=gd(i,T);xn(d,D)||(s.uniform1iv(this.addr,D),Sn(d,D));for(let U=0;U!==T;++U)i.setTexture2DArray(r[U]||H1,D[U])}function sj(s){switch(s){case 5126:return BA;case 35664:return zA;case 35665:return VA;case 35666:return GA;case 35674:return HA;case 35675:return WA;case 35676:return XA;case 5124:case 35670:return qA;case 35667:case 35671:return YA;case 35668:case 35672:return ZA;case 35669:case 35673:return KA;case 5125:return QA;case 36294:return JA;case 36295:return $A;case 36296:return ej;case 35678:case 36198:case 36298:case 36306:case 35682:return tj;case 35679:case 36299:case 36307:return rj;case 35680:case 36300:case 36308:case 36293:return nj;case 36289:case 36303:case 36311:case 36292:return ij}}class aj{constructor(r,i,d){this.id=r,this.addr=d,this.cache=[],this.type=i.type,this.setValue=FA(i.type)}}class oj{constructor(r,i,d){this.id=r,this.addr=d,this.cache=[],this.type=i.type,this.size=i.size,this.setValue=sj(i.type)}}class lj{constructor(r){this.id=r,this.seq=[],this.map={}}setValue(r,i,d){const T=this.seq;for(let D=0,U=T.length;D!==U;++D){const t=T[D];t.setValue(r,i[t.id],d)}}}const qp=/(\w+)(\])?(\[|\.)?/g;function Xb(s,r){s.seq.push(r),s.map[r.id]=r}function uj(s,r,i){const d=s.name,T=d.length;for(qp.lastIndex=0;;){const D=qp.exec(d),U=qp.lastIndex;let t=D[1];const R=D[2]==="]",M=D[3];if(R&&(t=t|0),M===void 0||M==="["&&U+2===T){Xb(i,M===void 0?new aj(t,s,r):new oj(t,s,r));break}else{let f=i.map[t];f===void 0&&(f=new lj(t),Xb(i,f)),i=f}}}class ed{constructor(r,i){this.seq=[],this.map={};const d=r.getProgramParameter(i,r.ACTIVE_UNIFORMS);for(let T=0;T<d;++T){const D=r.getActiveUniform(i,T),U=r.getUniformLocation(i,D.name);uj(D,U,this)}}setValue(r,i,d,T){const D=this.map[i];D!==void 0&&D.setValue(r,d,T)}setOptional(r,i,d){const T=i[d];T!==void 0&&this.setValue(r,d,T)}static upload(r,i,d,T){for(let D=0,U=i.length;D!==U;++D){const t=i[D],R=d[t.id];R.needsUpdate!==!1&&t.setValue(r,R.value,T)}}static seqWithValue(r,i){const d=[];for(let T=0,D=r.length;T!==D;++T){const U=r[T];U.id in i&&d.push(U)}return d}}function qb(s,r,i){const d=s.createShader(r);return s.shaderSource(d,i),s.compileShader(d),d}const cj=37297;let fj=0;function dj(s,r){const i=s.split(`
`),d=[],T=Math.max(r-6,0),D=Math.min(r+6,i.length);for(let U=T;U<D;U++){const t=U+1;d.push(`${t===r?">":" "} ${t}: ${i[U]}`)}return d.join(`
`)}const Yb=new rr;function hj(s){xr._getMatrix(Yb,xr.workingColorSpace,s);const r=`mat3( ${Yb.elements.map(i=>i.toFixed(4))} )`;switch(xr.getTransfer(s)){case ad:return[r,"LinearTransferOETF"];case Ur:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",s),[r,"LinearTransferOETF"]}}function Zb(s,r,i){const d=s.getShaderParameter(r,s.COMPILE_STATUS),T=s.getShaderInfoLog(r).trim();if(d&&T==="")return"";const D=/ERROR: 0:(\d+)/.exec(T);if(D){const U=parseInt(D[1]);return i.toUpperCase()+`

`+T+`

`+dj(s.getShaderSource(r),U)}else return T}function pj(s,r){const i=hj(r);return[`vec4 ${s}( vec4 value ) {`,`	return ${i[1]}( vec4( value.rgb * ${i[0]}, value.a ) );`,"}"].join(`
`)}function mj(s,r){let i;switch(r){case bw:i="Linear";break;case _w:i="Reinhard";break;case xw:i="Cineon";break;case Sw:i="ACESFilmic";break;case Mw:i="AgX";break;case Ew:i="Neutral";break;case ww:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",r),i="Linear"}return"vec3 "+s+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}const Hf=new pt;function yj(){xr.getLuminanceCoefficients(Hf);const s=Hf.x.toFixed(4),r=Hf.y.toFixed(4),i=Hf.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${s}, ${r}, ${i} );`,"	return dot( weights, rgb );","}"].join(`
`)}function gj(s){return[s.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",s.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Ru).join(`
`)}function vj(s){const r=[];for(const i in s){const d=s[i];d!==!1&&r.push("#define "+i+" "+d)}return r.join(`
`)}function bj(s,r){const i={},d=s.getProgramParameter(r,s.ACTIVE_ATTRIBUTES);for(let T=0;T<d;T++){const D=s.getActiveAttrib(r,T),U=D.name;let t=1;D.type===s.FLOAT_MAT2&&(t=2),D.type===s.FLOAT_MAT3&&(t=3),D.type===s.FLOAT_MAT4&&(t=4),i[U]={type:D.type,location:s.getAttribLocation(r,U),locationSize:t}}return i}function Ru(s){return s!==""}function Kb(s,r){const i=r.numSpotLightShadows+r.numSpotLightMaps-r.numSpotLightShadowsWithMaps;return s.replace(/NUM_DIR_LIGHTS/g,r.numDirLights).replace(/NUM_SPOT_LIGHTS/g,r.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,r.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,r.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,r.numPointLights).replace(/NUM_HEMI_LIGHTS/g,r.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,r.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,r.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,r.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,r.numPointLightShadows)}function Qb(s,r){return s.replace(/NUM_CLIPPING_PLANES/g,r.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,r.numClippingPlanes-r.numClipIntersection)}const _j=/^[ \t]*#include +<([\w\d./]+)>/gm;function qm(s){return s.replace(_j,Sj)}const xj=new Map;function Sj(s,r){let i=nr[r];if(i===void 0){const d=xj.get(r);if(d!==void 0)i=nr[d],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',r,d);else throw new Error("Can not resolve #include <"+r+">")}return qm(i)}const wj=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Jb(s){return s.replace(wj,Mj)}function Mj(s,r,i,d){let T="";for(let D=parseInt(r);D<parseInt(i);D++)T+=d.replace(/\[\s*i\s*\]/g,"[ "+D+" ]").replace(/UNROLLED_LOOP_INDEX/g,D);return T}function $b(s){let r=`precision ${s.precision} float;
	precision ${s.precision} int;
	precision ${s.precision} sampler2D;
	precision ${s.precision} samplerCube;
	precision ${s.precision} sampler3D;
	precision ${s.precision} sampler2DArray;
	precision ${s.precision} sampler2DShadow;
	precision ${s.precision} samplerCubeShadow;
	precision ${s.precision} sampler2DArrayShadow;
	precision ${s.precision} isampler2D;
	precision ${s.precision} isampler3D;
	precision ${s.precision} isamplerCube;
	precision ${s.precision} isampler2DArray;
	precision ${s.precision} usampler2D;
	precision ${s.precision} usampler3D;
	precision ${s.precision} usamplerCube;
	precision ${s.precision} usampler2DArray;
	`;return s.precision==="highp"?r+=`
#define HIGH_PRECISION`:s.precision==="mediump"?r+=`
#define MEDIUM_PRECISION`:s.precision==="lowp"&&(r+=`
#define LOW_PRECISION`),r}function Ej(s){let r="SHADOWMAP_TYPE_BASIC";return s.shadowMapType===v1?r="SHADOWMAP_TYPE_PCF":s.shadowMapType===J2?r="SHADOWMAP_TYPE_PCF_SOFT":s.shadowMapType===js&&(r="SHADOWMAP_TYPE_VSM"),r}function Tj(s){let r="ENVMAP_TYPE_CUBE";if(s.envMap)switch(s.envMapMode){case gl:case vl:r="ENVMAP_TYPE_CUBE";break;case md:r="ENVMAP_TYPE_CUBE_UV";break}return r}function Aj(s){let r="ENVMAP_MODE_REFLECTION";if(s.envMap)switch(s.envMapMode){case vl:r="ENVMAP_MODE_REFRACTION";break}return r}function jj(s){let r="ENVMAP_BLENDING_NONE";if(s.envMap)switch(s.combine){case b1:r="ENVMAP_BLENDING_MULTIPLY";break;case gw:r="ENVMAP_BLENDING_MIX";break;case vw:r="ENVMAP_BLENDING_ADD";break}return r}function Rj(s){const r=s.envMapCubeUVHeight;if(r===null)return null;const i=Math.log2(r)-2,d=1/r;return{texelWidth:1/(3*Math.max(Math.pow(2,i),7*16)),texelHeight:d,maxMip:i}}function Cj(s,r,i,d){const T=s.getContext(),D=i.defines;let U=i.vertexShader,t=i.fragmentShader;const R=Ej(i),M=Tj(i),p=Aj(i),f=jj(i),h=Rj(i),b=gj(i),w=vj(D),c=T.createProgram();let l,o,u=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?(l=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,w].filter(Ru).join(`
`),l.length>0&&(l+=`
`),o=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,w].filter(Ru).join(`
`),o.length>0&&(o+=`
`)):(l=[$b(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,w,i.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",i.batching?"#define USE_BATCHING":"",i.batchingColor?"#define USE_BATCHING_COLOR":"",i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.instancingMorph?"#define USE_INSTANCING_MORPH":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+p:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.displacementMap?"#define USE_DISPLACEMENTMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.mapUv?"#define MAP_UV "+i.mapUv:"",i.alphaMapUv?"#define ALPHAMAP_UV "+i.alphaMapUv:"",i.lightMapUv?"#define LIGHTMAP_UV "+i.lightMapUv:"",i.aoMapUv?"#define AOMAP_UV "+i.aoMapUv:"",i.emissiveMapUv?"#define EMISSIVEMAP_UV "+i.emissiveMapUv:"",i.bumpMapUv?"#define BUMPMAP_UV "+i.bumpMapUv:"",i.normalMapUv?"#define NORMALMAP_UV "+i.normalMapUv:"",i.displacementMapUv?"#define DISPLACEMENTMAP_UV "+i.displacementMapUv:"",i.metalnessMapUv?"#define METALNESSMAP_UV "+i.metalnessMapUv:"",i.roughnessMapUv?"#define ROUGHNESSMAP_UV "+i.roughnessMapUv:"",i.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+i.anisotropyMapUv:"",i.clearcoatMapUv?"#define CLEARCOATMAP_UV "+i.clearcoatMapUv:"",i.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+i.clearcoatNormalMapUv:"",i.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+i.clearcoatRoughnessMapUv:"",i.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+i.iridescenceMapUv:"",i.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+i.iridescenceThicknessMapUv:"",i.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+i.sheenColorMapUv:"",i.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+i.sheenRoughnessMapUv:"",i.specularMapUv?"#define SPECULARMAP_UV "+i.specularMapUv:"",i.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+i.specularColorMapUv:"",i.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+i.specularIntensityMapUv:"",i.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+i.transmissionMapUv:"",i.thicknessMapUv?"#define THICKNESSMAP_UV "+i.thicknessMapUv:"",i.vertexTangents&&i.flatShading===!1?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.morphColors?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+R:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ru).join(`
`),o=[$b(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,w,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+M:"",i.envMap?"#define "+p:"",i.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.dispersion?"#define USE_DISPERSION":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.vertexTangents&&i.flatShading===!1?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor||i.batchingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+R:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==va?"#define TONE_MAPPING":"",i.toneMapping!==va?nr.tonemapping_pars_fragment:"",i.toneMapping!==va?mj("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",nr.colorspace_pars_fragment,pj("linearToOutputTexel",i.outputColorSpace),yj(),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(Ru).join(`
`)),U=qm(U),U=Kb(U,i),U=Qb(U,i),t=qm(t),t=Kb(t,i),t=Qb(t,i),U=Jb(U),t=Jb(t),i.isRawShaderMaterial!==!0&&(u=`#version 300 es
`,l=[b,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+l,o=["#define varying in",i.glslVersion===pb?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===pb?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+o);const m=u+l+U,g=u+o+t,_=qb(T,T.VERTEX_SHADER,m),v=qb(T,T.FRAGMENT_SHADER,g);T.attachShader(c,_),T.attachShader(c,v),i.index0AttributeName!==void 0?T.bindAttribLocation(c,0,i.index0AttributeName):i.morphTargets===!0&&T.bindAttribLocation(c,0,"position"),T.linkProgram(c);function x(P){if(s.debug.checkShaderErrors){const L=T.getProgramInfoLog(c).trim(),z=T.getShaderInfoLog(_).trim(),N=T.getShaderInfoLog(v).trim();let V=!0,k=!0;if(T.getProgramParameter(c,T.LINK_STATUS)===!1)if(V=!1,typeof s.debug.onShaderError=="function")s.debug.onShaderError(T,c,_,v);else{const H=Zb(T,_,"vertex"),G=Zb(T,v,"fragment");console.error("THREE.WebGLProgram: Shader Error "+T.getError()+" - VALIDATE_STATUS "+T.getProgramParameter(c,T.VALIDATE_STATUS)+`

Material Name: `+P.name+`
Material Type: `+P.type+`

Program Info Log: `+L+`
`+H+`
`+G)}else L!==""?console.warn("THREE.WebGLProgram: Program Info Log:",L):(z===""||N==="")&&(k=!1);k&&(P.diagnostics={runnable:V,programLog:L,vertexShader:{log:z,prefix:l},fragmentShader:{log:N,prefix:o}})}T.deleteShader(_),T.deleteShader(v),E=new ed(T,c),j=bj(T,c)}let E;this.getUniforms=function(){return E===void 0&&x(this),E};let j;this.getAttributes=function(){return j===void 0&&x(this),j};let O=i.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return O===!1&&(O=T.getProgramParameter(c,cj)),O},this.destroy=function(){d.releaseStatesOfProgram(this),T.deleteProgram(c),this.program=void 0},this.type=i.shaderType,this.name=i.shaderName,this.id=fj++,this.cacheKey=r,this.usedTimes=1,this.program=c,this.vertexShader=_,this.fragmentShader=v,this}let Dj=0;class Lj{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(r){const i=r.vertexShader,d=r.fragmentShader,T=this._getShaderStage(i),D=this._getShaderStage(d),U=this._getShaderCacheForMaterial(r);return U.has(T)===!1&&(U.add(T),T.usedTimes++),U.has(D)===!1&&(U.add(D),D.usedTimes++),this}remove(r){const i=this.materialCache.get(r);for(const d of i)d.usedTimes--,d.usedTimes===0&&this.shaderCache.delete(d.code);return this.materialCache.delete(r),this}getVertexShaderID(r){return this._getShaderStage(r.vertexShader).id}getFragmentShaderID(r){return this._getShaderStage(r.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(r){const i=this.materialCache;let d=i.get(r);return d===void 0&&(d=new Set,i.set(r,d)),d}_getShaderStage(r){const i=this.shaderCache;let d=i.get(r);return d===void 0&&(d=new Oj(r),i.set(r,d)),d}}class Oj{constructor(r){this.id=Dj++,this.code=r,this.usedTimes=0}}function Pj(s,r,i,d,T,D,U){const t=new L1,R=new Lj,M=new Set,p=[],f=T.logarithmicDepthBuffer,h=T.vertexTextures;let b=T.precision;const w={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function c(j){return M.add(j),j===0?"uv":`uv${j}`}function l(j,O,P,L,z){const N=L.fog,V=z.geometry,k=j.isMeshStandardMaterial?L.environment:null,H=(j.isMeshStandardMaterial?i:r).get(j.envMap||k),G=H&&H.mapping===md?H.image.height:null,F=w[j.type];j.precision!==null&&(b=T.getMaxPrecision(j.precision),b!==j.precision&&console.warn("THREE.WebGLProgram.getParameters:",j.precision,"not supported, using",b,"instead."));const W=V.morphAttributes.position||V.morphAttributes.normal||V.morphAttributes.color,Q=W!==void 0?W.length:0;let J=0;V.morphAttributes.position!==void 0&&(J=1),V.morphAttributes.normal!==void 0&&(J=2),V.morphAttributes.color!==void 0&&(J=3);let ee,te,se,ce;if(F){const Ct=$i[F];ee=Ct.vertexShader,te=Ct.fragmentShader}else ee=j.vertexShader,te=j.fragmentShader,R.update(j),se=R.getVertexShaderID(j),ce=R.getFragmentShaderID(j);const q=s.getRenderTarget(),Z=s.state.buffers.depth.getReversed(),ie=z.isInstancedMesh===!0,pe=z.isBatchedMesh===!0,ge=!!j.map,be=!!j.matcap,le=!!H,re=!!j.aoMap,Te=!!j.lightMap,Ce=!!j.bumpMap,Me=!!j.normalMap,Se=!!j.displacementMap,Ue=!!j.emissiveMap,Fe=!!j.metalnessMap,Be=!!j.roughnessMap,st=j.anisotropy>0,ve=j.clearcoat>0,ue=j.dispersion>0,ze=j.iridescence>0,He=j.sheen>0,me=j.transmission>0,je=st&&!!j.anisotropyMap,Ie=ve&&!!j.clearcoatMap,Ye=ve&&!!j.clearcoatNormalMap,it=ve&&!!j.clearcoatRoughnessMap,yt=ze&&!!j.iridescenceMap,Ze=ze&&!!j.iridescenceThicknessMap,at=He&&!!j.sheenColorMap,fe=He&&!!j.sheenRoughnessMap,ae=!!j.specularMap,oe=!!j.specularColorMap,_e=!!j.specularIntensityMap,he=me&&!!j.transmissionMap,ke=me&&!!j.thicknessMap,We=!!j.gradientMap,$e=!!j.alphaMap,Ee=j.alphaTest>0,Ge=!!j.alphaHash,ht=!!j.extensions;let wt=va;j.toneMapped&&(q===null||q.isXRRenderTarget===!0)&&(wt=s.toneMapping);const Lt={shaderID:F,shaderType:j.type,shaderName:j.name,vertexShader:ee,fragmentShader:te,defines:j.defines,customVertexShaderID:se,customFragmentShaderID:ce,isRawShaderMaterial:j.isRawShaderMaterial===!0,glslVersion:j.glslVersion,precision:b,batching:pe,batchingColor:pe&&z._colorsTexture!==null,instancing:ie,instancingColor:ie&&z.instanceColor!==null,instancingMorph:ie&&z.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:q===null?s.outputColorSpace:q.isXRRenderTarget===!0?q.texture.colorSpace:bl,alphaToCoverage:!!j.alphaToCoverage,map:ge,matcap:be,envMap:le,envMapMode:le&&H.mapping,envMapCubeUVHeight:G,aoMap:re,lightMap:Te,bumpMap:Ce,normalMap:Me,displacementMap:h&&Se,emissiveMap:Ue,normalMapObjectSpace:Me&&j.normalMapType===Cw,normalMapTangentSpace:Me&&j.normalMapType===Rw,metalnessMap:Fe,roughnessMap:Be,anisotropy:st,anisotropyMap:je,clearcoat:ve,clearcoatMap:Ie,clearcoatNormalMap:Ye,clearcoatRoughnessMap:it,dispersion:ue,iridescence:ze,iridescenceMap:yt,iridescenceThicknessMap:Ze,sheen:He,sheenColorMap:at,sheenRoughnessMap:fe,specularMap:ae,specularColorMap:oe,specularIntensityMap:_e,transmission:me,transmissionMap:he,thicknessMap:ke,gradientMap:We,opaque:j.transparent===!1&&j.blending===hl&&j.alphaToCoverage===!1,alphaMap:$e,alphaTest:Ee,alphaHash:Ge,combine:j.combine,mapUv:ge&&c(j.map.channel),aoMapUv:re&&c(j.aoMap.channel),lightMapUv:Te&&c(j.lightMap.channel),bumpMapUv:Ce&&c(j.bumpMap.channel),normalMapUv:Me&&c(j.normalMap.channel),displacementMapUv:Se&&c(j.displacementMap.channel),emissiveMapUv:Ue&&c(j.emissiveMap.channel),metalnessMapUv:Fe&&c(j.metalnessMap.channel),roughnessMapUv:Be&&c(j.roughnessMap.channel),anisotropyMapUv:je&&c(j.anisotropyMap.channel),clearcoatMapUv:Ie&&c(j.clearcoatMap.channel),clearcoatNormalMapUv:Ye&&c(j.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:it&&c(j.clearcoatRoughnessMap.channel),iridescenceMapUv:yt&&c(j.iridescenceMap.channel),iridescenceThicknessMapUv:Ze&&c(j.iridescenceThicknessMap.channel),sheenColorMapUv:at&&c(j.sheenColorMap.channel),sheenRoughnessMapUv:fe&&c(j.sheenRoughnessMap.channel),specularMapUv:ae&&c(j.specularMap.channel),specularColorMapUv:oe&&c(j.specularColorMap.channel),specularIntensityMapUv:_e&&c(j.specularIntensityMap.channel),transmissionMapUv:he&&c(j.transmissionMap.channel),thicknessMapUv:ke&&c(j.thicknessMap.channel),alphaMapUv:$e&&c(j.alphaMap.channel),vertexTangents:!!V.attributes.tangent&&(Me||st),vertexColors:j.vertexColors,vertexAlphas:j.vertexColors===!0&&!!V.attributes.color&&V.attributes.color.itemSize===4,pointsUvs:z.isPoints===!0&&!!V.attributes.uv&&(ge||$e),fog:!!N,useFog:j.fog===!0,fogExp2:!!N&&N.isFogExp2,flatShading:j.flatShading===!0,sizeAttenuation:j.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:Z,skinning:z.isSkinnedMesh===!0,morphTargets:V.morphAttributes.position!==void 0,morphNormals:V.morphAttributes.normal!==void 0,morphColors:V.morphAttributes.color!==void 0,morphTargetsCount:Q,morphTextureStride:J,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numLightProbes:O.numLightProbes,numClippingPlanes:U.numPlanes,numClipIntersection:U.numIntersection,dithering:j.dithering,shadowMapEnabled:s.shadowMap.enabled&&P.length>0,shadowMapType:s.shadowMap.type,toneMapping:wt,decodeVideoTexture:ge&&j.map.isVideoTexture===!0&&xr.getTransfer(j.map.colorSpace)===Ur,decodeVideoTextureEmissive:Ue&&j.emissiveMap.isVideoTexture===!0&&xr.getTransfer(j.emissiveMap.colorSpace)===Ur,premultipliedAlpha:j.premultipliedAlpha,doubleSided:j.side===Rs,flipSided:j.side===Qn,useDepthPacking:j.depthPacking>=0,depthPacking:j.depthPacking||0,index0AttributeName:j.index0AttributeName,extensionClipCullDistance:ht&&j.extensions.clipCullDistance===!0&&d.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ht&&j.extensions.multiDraw===!0||pe)&&d.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:d.has("KHR_parallel_shader_compile"),customProgramCacheKey:j.customProgramCacheKey()};return Lt.vertexUv1s=M.has(1),Lt.vertexUv2s=M.has(2),Lt.vertexUv3s=M.has(3),M.clear(),Lt}function o(j){const O=[];if(j.shaderID?O.push(j.shaderID):(O.push(j.customVertexShaderID),O.push(j.customFragmentShaderID)),j.defines!==void 0)for(const P in j.defines)O.push(P),O.push(j.defines[P]);return j.isRawShaderMaterial===!1&&(u(O,j),m(O,j),O.push(s.outputColorSpace)),O.push(j.customProgramCacheKey),O.join()}function u(j,O){j.push(O.precision),j.push(O.outputColorSpace),j.push(O.envMapMode),j.push(O.envMapCubeUVHeight),j.push(O.mapUv),j.push(O.alphaMapUv),j.push(O.lightMapUv),j.push(O.aoMapUv),j.push(O.bumpMapUv),j.push(O.normalMapUv),j.push(O.displacementMapUv),j.push(O.emissiveMapUv),j.push(O.metalnessMapUv),j.push(O.roughnessMapUv),j.push(O.anisotropyMapUv),j.push(O.clearcoatMapUv),j.push(O.clearcoatNormalMapUv),j.push(O.clearcoatRoughnessMapUv),j.push(O.iridescenceMapUv),j.push(O.iridescenceThicknessMapUv),j.push(O.sheenColorMapUv),j.push(O.sheenRoughnessMapUv),j.push(O.specularMapUv),j.push(O.specularColorMapUv),j.push(O.specularIntensityMapUv),j.push(O.transmissionMapUv),j.push(O.thicknessMapUv),j.push(O.combine),j.push(O.fogExp2),j.push(O.sizeAttenuation),j.push(O.morphTargetsCount),j.push(O.morphAttributeCount),j.push(O.numDirLights),j.push(O.numPointLights),j.push(O.numSpotLights),j.push(O.numSpotLightMaps),j.push(O.numHemiLights),j.push(O.numRectAreaLights),j.push(O.numDirLightShadows),j.push(O.numPointLightShadows),j.push(O.numSpotLightShadows),j.push(O.numSpotLightShadowsWithMaps),j.push(O.numLightProbes),j.push(O.shadowMapType),j.push(O.toneMapping),j.push(O.numClippingPlanes),j.push(O.numClipIntersection),j.push(O.depthPacking)}function m(j,O){t.disableAll(),O.supportsVertexTextures&&t.enable(0),O.instancing&&t.enable(1),O.instancingColor&&t.enable(2),O.instancingMorph&&t.enable(3),O.matcap&&t.enable(4),O.envMap&&t.enable(5),O.normalMapObjectSpace&&t.enable(6),O.normalMapTangentSpace&&t.enable(7),O.clearcoat&&t.enable(8),O.iridescence&&t.enable(9),O.alphaTest&&t.enable(10),O.vertexColors&&t.enable(11),O.vertexAlphas&&t.enable(12),O.vertexUv1s&&t.enable(13),O.vertexUv2s&&t.enable(14),O.vertexUv3s&&t.enable(15),O.vertexTangents&&t.enable(16),O.anisotropy&&t.enable(17),O.alphaHash&&t.enable(18),O.batching&&t.enable(19),O.dispersion&&t.enable(20),O.batchingColor&&t.enable(21),j.push(t.mask),t.disableAll(),O.fog&&t.enable(0),O.useFog&&t.enable(1),O.flatShading&&t.enable(2),O.logarithmicDepthBuffer&&t.enable(3),O.reverseDepthBuffer&&t.enable(4),O.skinning&&t.enable(5),O.morphTargets&&t.enable(6),O.morphNormals&&t.enable(7),O.morphColors&&t.enable(8),O.premultipliedAlpha&&t.enable(9),O.shadowMapEnabled&&t.enable(10),O.doubleSided&&t.enable(11),O.flipSided&&t.enable(12),O.useDepthPacking&&t.enable(13),O.dithering&&t.enable(14),O.transmission&&t.enable(15),O.sheen&&t.enable(16),O.opaque&&t.enable(17),O.pointsUvs&&t.enable(18),O.decodeVideoTexture&&t.enable(19),O.decodeVideoTextureEmissive&&t.enable(20),O.alphaToCoverage&&t.enable(21),j.push(t.mask)}function g(j){const O=w[j.type];let P;if(O){const L=$i[O];P=lM.clone(L.uniforms)}else P=j.uniforms;return P}function _(j,O){let P;for(let L=0,z=p.length;L<z;L++){const N=p[L];if(N.cacheKey===O){P=N,++P.usedTimes;break}}return P===void 0&&(P=new Cj(s,O,j,D),p.push(P)),P}function v(j){if(--j.usedTimes===0){const O=p.indexOf(j);p[O]=p[p.length-1],p.pop(),j.destroy()}}function x(j){R.remove(j)}function E(){R.dispose()}return{getParameters:l,getProgramCacheKey:o,getUniforms:g,acquireProgram:_,releaseProgram:v,releaseShaderCache:x,programs:p,dispose:E}}function Uj(){let s=new WeakMap;function r(U){return s.has(U)}function i(U){let t=s.get(U);return t===void 0&&(t={},s.set(U,t)),t}function d(U){s.delete(U)}function T(U,t,R){s.get(U)[t]=R}function D(){s=new WeakMap}return{has:r,get:i,remove:d,update:T,dispose:D}}function Nj(s,r){return s.groupOrder!==r.groupOrder?s.groupOrder-r.groupOrder:s.renderOrder!==r.renderOrder?s.renderOrder-r.renderOrder:s.material.id!==r.material.id?s.material.id-r.material.id:s.z!==r.z?s.z-r.z:s.id-r.id}function e_(s,r){return s.groupOrder!==r.groupOrder?s.groupOrder-r.groupOrder:s.renderOrder!==r.renderOrder?s.renderOrder-r.renderOrder:s.z!==r.z?r.z-s.z:s.id-r.id}function t_(){const s=[];let r=0;const i=[],d=[],T=[];function D(){r=0,i.length=0,d.length=0,T.length=0}function U(f,h,b,w,c,l){let o=s[r];return o===void 0?(o={id:f.id,object:f,geometry:h,material:b,groupOrder:w,renderOrder:f.renderOrder,z:c,group:l},s[r]=o):(o.id=f.id,o.object=f,o.geometry=h,o.material=b,o.groupOrder=w,o.renderOrder=f.renderOrder,o.z=c,o.group=l),r++,o}function t(f,h,b,w,c,l){const o=U(f,h,b,w,c,l);b.transmission>0?d.push(o):b.transparent===!0?T.push(o):i.push(o)}function R(f,h,b,w,c,l){const o=U(f,h,b,w,c,l);b.transmission>0?d.unshift(o):b.transparent===!0?T.unshift(o):i.unshift(o)}function M(f,h){i.length>1&&i.sort(f||Nj),d.length>1&&d.sort(h||e_),T.length>1&&T.sort(h||e_)}function p(){for(let f=r,h=s.length;f<h;f++){const b=s[f];if(b.id===null)break;b.id=null,b.object=null,b.geometry=null,b.material=null,b.group=null}}return{opaque:i,transmissive:d,transparent:T,init:D,push:t,unshift:R,finish:p,sort:M}}function Ij(){let s=new WeakMap;function r(d,T){const D=s.get(d);let U;return D===void 0?(U=new t_,s.set(d,[U])):T>=D.length?(U=new t_,D.push(U)):U=D[T],U}function i(){s=new WeakMap}return{get:r,dispose:i}}function kj(){const s={};return{get:function(r){if(s[r.id]!==void 0)return s[r.id];let i;switch(r.type){case"DirectionalLight":i={direction:new pt,color:new Nr};break;case"SpotLight":i={position:new pt,direction:new pt,color:new Nr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new pt,color:new Nr,distance:0,decay:0};break;case"HemisphereLight":i={direction:new pt,skyColor:new Nr,groundColor:new Nr};break;case"RectAreaLight":i={color:new Nr,position:new pt,halfWidth:new pt,halfHeight:new pt};break}return s[r.id]=i,i}}}function Fj(){const s={};return{get:function(r){if(s[r.id]!==void 0)return s[r.id];let i;switch(r.type){case"DirectionalLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zr};break;case"SpotLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zr};break;case"PointLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zr,shadowCameraNear:1,shadowCameraFar:1e3};break}return s[r.id]=i,i}}}let Bj=0;function zj(s,r){return(r.castShadow?2:0)-(s.castShadow?2:0)+(r.map?1:0)-(s.map?1:0)}function Vj(s){const r=new kj,i=Fj(),d={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let M=0;M<9;M++)d.probe.push(new pt);const T=new pt,D=new yn,U=new yn;function t(M){let p=0,f=0,h=0;for(let j=0;j<9;j++)d.probe[j].set(0,0,0);let b=0,w=0,c=0,l=0,o=0,u=0,m=0,g=0,_=0,v=0,x=0;M.sort(zj);for(let j=0,O=M.length;j<O;j++){const P=M[j],L=P.color,z=P.intensity,N=P.distance,V=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)p+=L.r*z,f+=L.g*z,h+=L.b*z;else if(P.isLightProbe){for(let k=0;k<9;k++)d.probe[k].addScaledVector(P.sh.coefficients[k],z);x++}else if(P.isDirectionalLight){const k=r.get(P);if(k.color.copy(P.color).multiplyScalar(P.intensity),P.castShadow){const H=P.shadow,G=i.get(P);G.shadowIntensity=H.intensity,G.shadowBias=H.bias,G.shadowNormalBias=H.normalBias,G.shadowRadius=H.radius,G.shadowMapSize=H.mapSize,d.directionalShadow[b]=G,d.directionalShadowMap[b]=V,d.directionalShadowMatrix[b]=P.shadow.matrix,u++}d.directional[b]=k,b++}else if(P.isSpotLight){const k=r.get(P);k.position.setFromMatrixPosition(P.matrixWorld),k.color.copy(L).multiplyScalar(z),k.distance=N,k.coneCos=Math.cos(P.angle),k.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),k.decay=P.decay,d.spot[c]=k;const H=P.shadow;if(P.map&&(d.spotLightMap[_]=P.map,_++,H.updateMatrices(P),P.castShadow&&v++),d.spotLightMatrix[c]=H.matrix,P.castShadow){const G=i.get(P);G.shadowIntensity=H.intensity,G.shadowBias=H.bias,G.shadowNormalBias=H.normalBias,G.shadowRadius=H.radius,G.shadowMapSize=H.mapSize,d.spotShadow[c]=G,d.spotShadowMap[c]=V,g++}c++}else if(P.isRectAreaLight){const k=r.get(P);k.color.copy(L).multiplyScalar(z),k.halfWidth.set(P.width*.5,0,0),k.halfHeight.set(0,P.height*.5,0),d.rectArea[l]=k,l++}else if(P.isPointLight){const k=r.get(P);if(k.color.copy(P.color).multiplyScalar(P.intensity),k.distance=P.distance,k.decay=P.decay,P.castShadow){const H=P.shadow,G=i.get(P);G.shadowIntensity=H.intensity,G.shadowBias=H.bias,G.shadowNormalBias=H.normalBias,G.shadowRadius=H.radius,G.shadowMapSize=H.mapSize,G.shadowCameraNear=H.camera.near,G.shadowCameraFar=H.camera.far,d.pointShadow[w]=G,d.pointShadowMap[w]=V,d.pointShadowMatrix[w]=P.shadow.matrix,m++}d.point[w]=k,w++}else if(P.isHemisphereLight){const k=r.get(P);k.skyColor.copy(P.color).multiplyScalar(z),k.groundColor.copy(P.groundColor).multiplyScalar(z),d.hemi[o]=k,o++}}l>0&&(s.has("OES_texture_float_linear")===!0?(d.rectAreaLTC1=Rt.LTC_FLOAT_1,d.rectAreaLTC2=Rt.LTC_FLOAT_2):(d.rectAreaLTC1=Rt.LTC_HALF_1,d.rectAreaLTC2=Rt.LTC_HALF_2)),d.ambient[0]=p,d.ambient[1]=f,d.ambient[2]=h;const E=d.hash;(E.directionalLength!==b||E.pointLength!==w||E.spotLength!==c||E.rectAreaLength!==l||E.hemiLength!==o||E.numDirectionalShadows!==u||E.numPointShadows!==m||E.numSpotShadows!==g||E.numSpotMaps!==_||E.numLightProbes!==x)&&(d.directional.length=b,d.spot.length=c,d.rectArea.length=l,d.point.length=w,d.hemi.length=o,d.directionalShadow.length=u,d.directionalShadowMap.length=u,d.pointShadow.length=m,d.pointShadowMap.length=m,d.spotShadow.length=g,d.spotShadowMap.length=g,d.directionalShadowMatrix.length=u,d.pointShadowMatrix.length=m,d.spotLightMatrix.length=g+_-v,d.spotLightMap.length=_,d.numSpotLightShadowsWithMaps=v,d.numLightProbes=x,E.directionalLength=b,E.pointLength=w,E.spotLength=c,E.rectAreaLength=l,E.hemiLength=o,E.numDirectionalShadows=u,E.numPointShadows=m,E.numSpotShadows=g,E.numSpotMaps=_,E.numLightProbes=x,d.version=Bj++)}function R(M,p){let f=0,h=0,b=0,w=0,c=0;const l=p.matrixWorldInverse;for(let o=0,u=M.length;o<u;o++){const m=M[o];if(m.isDirectionalLight){const g=d.directional[f];g.direction.setFromMatrixPosition(m.matrixWorld),T.setFromMatrixPosition(m.target.matrixWorld),g.direction.sub(T),g.direction.transformDirection(l),f++}else if(m.isSpotLight){const g=d.spot[b];g.position.setFromMatrixPosition(m.matrixWorld),g.position.applyMatrix4(l),g.direction.setFromMatrixPosition(m.matrixWorld),T.setFromMatrixPosition(m.target.matrixWorld),g.direction.sub(T),g.direction.transformDirection(l),b++}else if(m.isRectAreaLight){const g=d.rectArea[w];g.position.setFromMatrixPosition(m.matrixWorld),g.position.applyMatrix4(l),U.identity(),D.copy(m.matrixWorld),D.premultiply(l),U.extractRotation(D),g.halfWidth.set(m.width*.5,0,0),g.halfHeight.set(0,m.height*.5,0),g.halfWidth.applyMatrix4(U),g.halfHeight.applyMatrix4(U),w++}else if(m.isPointLight){const g=d.point[h];g.position.setFromMatrixPosition(m.matrixWorld),g.position.applyMatrix4(l),h++}else if(m.isHemisphereLight){const g=d.hemi[c];g.direction.setFromMatrixPosition(m.matrixWorld),g.direction.transformDirection(l),c++}}}return{setup:t,setupView:R,state:d}}function r_(s){const r=new Vj(s),i=[],d=[];function T(p){M.camera=p,i.length=0,d.length=0}function D(p){i.push(p)}function U(p){d.push(p)}function t(){r.setup(i)}function R(p){r.setupView(i,p)}const M={lightsArray:i,shadowsArray:d,camera:null,lights:r,transmissionRenderTarget:{}};return{init:T,state:M,setupLights:t,setupLightsView:R,pushLight:D,pushShadow:U}}function Gj(s){let r=new WeakMap;function i(T,D=0){const U=r.get(T);let t;return U===void 0?(t=new r_(s),r.set(T,[t])):D>=U.length?(t=new r_(s),U.push(t)):t=U[D],t}function d(){r=new WeakMap}return{get:i,dispose:d}}const Hj=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Wj=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Xj(s,r,i){let d=new B1;const T=new zr,D=new zr,U=new fn,t=new vM({depthPacking:jw}),R=new bM,M={},p=i.maxTextureSize,f={[ba]:Qn,[Qn]:ba,[Rs]:Rs},h=new Us({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new zr},radius:{value:4}},vertexShader:Hj,fragmentShader:Wj}),b=h.clone();b.defines.HORIZONTAL_PASS=1;const w=new lo;w.setAttribute("position",new rs(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const c=new ts(w,h),l=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=v1;let o=this.type;this.render=function(v,x,E){if(l.enabled===!1||l.autoUpdate===!1&&l.needsUpdate===!1||v.length===0)return;const j=s.getRenderTarget(),O=s.getActiveCubeFace(),P=s.getActiveMipmapLevel(),L=s.state;L.setBlending(ga),L.buffers.color.setClear(1,1,1,1),L.buffers.depth.setTest(!0),L.setScissorTest(!1);const z=o!==js&&this.type===js,N=o===js&&this.type!==js;for(let V=0,k=v.length;V<k;V++){const H=v[V],G=H.shadow;if(G===void 0){console.warn("THREE.WebGLShadowMap:",H,"has no shadow.");continue}if(G.autoUpdate===!1&&G.needsUpdate===!1)continue;T.copy(G.mapSize);const F=G.getFrameExtents();if(T.multiply(F),D.copy(G.mapSize),(T.x>p||T.y>p)&&(T.x>p&&(D.x=Math.floor(p/F.x),T.x=D.x*F.x,G.mapSize.x=D.x),T.y>p&&(D.y=Math.floor(p/F.y),T.y=D.y*F.y,G.mapSize.y=D.y)),G.map===null||z===!0||N===!0){const Q=this.type!==js?{minFilter:ji,magFilter:ji}:{};G.map!==null&&G.map.dispose(),G.map=new oo(T.x,T.y,Q),G.map.texture.name=H.name+".shadowMap",G.camera.updateProjectionMatrix()}s.setRenderTarget(G.map),s.clear();const W=G.getViewportCount();for(let Q=0;Q<W;Q++){const J=G.getViewport(Q);U.set(D.x*J.x,D.y*J.y,D.x*J.z,D.y*J.w),L.viewport(U),G.updateMatrices(H,Q),d=G.getFrustum(),g(x,E,G.camera,H,this.type)}G.isPointLightShadow!==!0&&this.type===js&&u(G,E),G.needsUpdate=!1}o=this.type,l.needsUpdate=!1,s.setRenderTarget(j,O,P)};function u(v,x){const E=r.update(c);h.defines.VSM_SAMPLES!==v.blurSamples&&(h.defines.VSM_SAMPLES=v.blurSamples,b.defines.VSM_SAMPLES=v.blurSamples,h.needsUpdate=!0,b.needsUpdate=!0),v.mapPass===null&&(v.mapPass=new oo(T.x,T.y)),h.uniforms.shadow_pass.value=v.map.texture,h.uniforms.resolution.value=v.mapSize,h.uniforms.radius.value=v.radius,s.setRenderTarget(v.mapPass),s.clear(),s.renderBufferDirect(x,null,E,h,c,null),b.uniforms.shadow_pass.value=v.mapPass.texture,b.uniforms.resolution.value=v.mapSize,b.uniforms.radius.value=v.radius,s.setRenderTarget(v.map),s.clear(),s.renderBufferDirect(x,null,E,b,c,null)}function m(v,x,E,j){let O=null;const P=E.isPointLight===!0?v.customDistanceMaterial:v.customDepthMaterial;if(P!==void 0)O=P;else if(O=E.isPointLight===!0?R:t,s.localClippingEnabled&&x.clipShadows===!0&&Array.isArray(x.clippingPlanes)&&x.clippingPlanes.length!==0||x.displacementMap&&x.displacementScale!==0||x.alphaMap&&x.alphaTest>0||x.map&&x.alphaTest>0||x.alphaToCoverage===!0){const L=O.uuid,z=x.uuid;let N=M[L];N===void 0&&(N={},M[L]=N);let V=N[z];V===void 0&&(V=O.clone(),N[z]=V,x.addEventListener("dispose",_)),O=V}if(O.visible=x.visible,O.wireframe=x.wireframe,j===js?O.side=x.shadowSide!==null?x.shadowSide:x.side:O.side=x.shadowSide!==null?x.shadowSide:f[x.side],O.alphaMap=x.alphaMap,O.alphaTest=x.alphaToCoverage===!0?.5:x.alphaTest,O.map=x.map,O.clipShadows=x.clipShadows,O.clippingPlanes=x.clippingPlanes,O.clipIntersection=x.clipIntersection,O.displacementMap=x.displacementMap,O.displacementScale=x.displacementScale,O.displacementBias=x.displacementBias,O.wireframeLinewidth=x.wireframeLinewidth,O.linewidth=x.linewidth,E.isPointLight===!0&&O.isMeshDistanceMaterial===!0){const L=s.properties.get(O);L.light=E}return O}function g(v,x,E,j,O){if(v.visible===!1)return;if(v.layers.test(x.layers)&&(v.isMesh||v.isLine||v.isPoints)&&(v.castShadow||v.receiveShadow&&O===js)&&(!v.frustumCulled||d.intersectsObject(v))){v.modelViewMatrix.multiplyMatrices(E.matrixWorldInverse,v.matrixWorld);const z=r.update(v),N=v.material;if(Array.isArray(N)){const V=z.groups;for(let k=0,H=V.length;k<H;k++){const G=V[k],F=N[G.materialIndex];if(F&&F.visible){const W=m(v,F,j,O);v.onBeforeShadow(s,v,x,E,z,W,G),s.renderBufferDirect(E,null,z,W,v,G),v.onAfterShadow(s,v,x,E,z,W,G)}}}else if(N.visible){const V=m(v,N,j,O);v.onBeforeShadow(s,v,x,E,z,V,null),s.renderBufferDirect(E,null,z,V,v,null),v.onAfterShadow(s,v,x,E,z,V,null)}}const L=v.children;for(let z=0,N=L.length;z<N;z++)g(L[z],x,E,j,O)}function _(v){v.target.removeEventListener("dispose",_);for(const E in M){const j=M[E],O=v.target.uuid;O in j&&(j[O].dispose(),delete j[O])}}}const qj={[um]:cm,[fm]:pm,[dm]:mm,[yl]:hm,[cm]:um,[pm]:fm,[mm]:dm,[hm]:yl};function Yj(s,r){function i(){let he=!1;const ke=new fn;let We=null;const $e=new fn(0,0,0,0);return{setMask:function(Ee){We!==Ee&&!he&&(s.colorMask(Ee,Ee,Ee,Ee),We=Ee)},setLocked:function(Ee){he=Ee},setClear:function(Ee,Ge,ht,wt,Lt){Lt===!0&&(Ee*=wt,Ge*=wt,ht*=wt),ke.set(Ee,Ge,ht,wt),$e.equals(ke)===!1&&(s.clearColor(Ee,Ge,ht,wt),$e.copy(ke))},reset:function(){he=!1,We=null,$e.set(-1,0,0,0)}}}function d(){let he=!1,ke=!1,We=null,$e=null,Ee=null;return{setReversed:function(Ge){if(ke!==Ge){const ht=r.get("EXT_clip_control");Ge?ht.clipControlEXT(ht.LOWER_LEFT_EXT,ht.ZERO_TO_ONE_EXT):ht.clipControlEXT(ht.LOWER_LEFT_EXT,ht.NEGATIVE_ONE_TO_ONE_EXT),ke=Ge;const wt=Ee;Ee=null,this.setClear(wt)}},getReversed:function(){return ke},setTest:function(Ge){Ge?q(s.DEPTH_TEST):Z(s.DEPTH_TEST)},setMask:function(Ge){We!==Ge&&!he&&(s.depthMask(Ge),We=Ge)},setFunc:function(Ge){if(ke&&(Ge=qj[Ge]),$e!==Ge){switch(Ge){case um:s.depthFunc(s.NEVER);break;case cm:s.depthFunc(s.ALWAYS);break;case fm:s.depthFunc(s.LESS);break;case yl:s.depthFunc(s.LEQUAL);break;case dm:s.depthFunc(s.EQUAL);break;case hm:s.depthFunc(s.GEQUAL);break;case pm:s.depthFunc(s.GREATER);break;case mm:s.depthFunc(s.NOTEQUAL);break;default:s.depthFunc(s.LEQUAL)}$e=Ge}},setLocked:function(Ge){he=Ge},setClear:function(Ge){Ee!==Ge&&(ke&&(Ge=1-Ge),s.clearDepth(Ge),Ee=Ge)},reset:function(){he=!1,We=null,$e=null,Ee=null,ke=!1}}}function T(){let he=!1,ke=null,We=null,$e=null,Ee=null,Ge=null,ht=null,wt=null,Lt=null;return{setTest:function(Ct){he||(Ct?q(s.STENCIL_TEST):Z(s.STENCIL_TEST))},setMask:function(Ct){ke!==Ct&&!he&&(s.stencilMask(Ct),ke=Ct)},setFunc:function(Ct,Ft,Nt){(We!==Ct||$e!==Ft||Ee!==Nt)&&(s.stencilFunc(Ct,Ft,Nt),We=Ct,$e=Ft,Ee=Nt)},setOp:function(Ct,Ft,Nt){(Ge!==Ct||ht!==Ft||wt!==Nt)&&(s.stencilOp(Ct,Ft,Nt),Ge=Ct,ht=Ft,wt=Nt)},setLocked:function(Ct){he=Ct},setClear:function(Ct){Lt!==Ct&&(s.clearStencil(Ct),Lt=Ct)},reset:function(){he=!1,ke=null,We=null,$e=null,Ee=null,Ge=null,ht=null,wt=null,Lt=null}}}const D=new i,U=new d,t=new T,R=new WeakMap,M=new WeakMap;let p={},f={},h=new WeakMap,b=[],w=null,c=!1,l=null,o=null,u=null,m=null,g=null,_=null,v=null,x=new Nr(0,0,0),E=0,j=!1,O=null,P=null,L=null,z=null,N=null;const V=s.getParameter(s.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let k=!1,H=0;const G=s.getParameter(s.VERSION);G.indexOf("WebGL")!==-1?(H=parseFloat(/^WebGL (\d)/.exec(G)[1]),k=H>=1):G.indexOf("OpenGL ES")!==-1&&(H=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),k=H>=2);let F=null,W={};const Q=s.getParameter(s.SCISSOR_BOX),J=s.getParameter(s.VIEWPORT),ee=new fn().fromArray(Q),te=new fn().fromArray(J);function se(he,ke,We,$e){const Ee=new Uint8Array(4),Ge=s.createTexture();s.bindTexture(he,Ge),s.texParameteri(he,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(he,s.TEXTURE_MAG_FILTER,s.NEAREST);for(let ht=0;ht<We;ht++)he===s.TEXTURE_3D||he===s.TEXTURE_2D_ARRAY?s.texImage3D(ke,0,s.RGBA,1,1,$e,0,s.RGBA,s.UNSIGNED_BYTE,Ee):s.texImage2D(ke+ht,0,s.RGBA,1,1,0,s.RGBA,s.UNSIGNED_BYTE,Ee);return Ge}const ce={};ce[s.TEXTURE_2D]=se(s.TEXTURE_2D,s.TEXTURE_2D,1),ce[s.TEXTURE_CUBE_MAP]=se(s.TEXTURE_CUBE_MAP,s.TEXTURE_CUBE_MAP_POSITIVE_X,6),ce[s.TEXTURE_2D_ARRAY]=se(s.TEXTURE_2D_ARRAY,s.TEXTURE_2D_ARRAY,1,1),ce[s.TEXTURE_3D]=se(s.TEXTURE_3D,s.TEXTURE_3D,1,1),D.setClear(0,0,0,1),U.setClear(1),t.setClear(0),q(s.DEPTH_TEST),U.setFunc(yl),Ce(!1),Me(lb),q(s.CULL_FACE),re(ga);function q(he){p[he]!==!0&&(s.enable(he),p[he]=!0)}function Z(he){p[he]!==!1&&(s.disable(he),p[he]=!1)}function ie(he,ke){return f[he]!==ke?(s.bindFramebuffer(he,ke),f[he]=ke,he===s.DRAW_FRAMEBUFFER&&(f[s.FRAMEBUFFER]=ke),he===s.FRAMEBUFFER&&(f[s.DRAW_FRAMEBUFFER]=ke),!0):!1}function pe(he,ke){let We=b,$e=!1;if(he){We=h.get(ke),We===void 0&&(We=[],h.set(ke,We));const Ee=he.textures;if(We.length!==Ee.length||We[0]!==s.COLOR_ATTACHMENT0){for(let Ge=0,ht=Ee.length;Ge<ht;Ge++)We[Ge]=s.COLOR_ATTACHMENT0+Ge;We.length=Ee.length,$e=!0}}else We[0]!==s.BACK&&(We[0]=s.BACK,$e=!0);$e&&s.drawBuffers(We)}function ge(he){return w!==he?(s.useProgram(he),w=he,!0):!1}const be={[Qa]:s.FUNC_ADD,[ew]:s.FUNC_SUBTRACT,[tw]:s.FUNC_REVERSE_SUBTRACT};be[rw]=s.MIN,be[nw]=s.MAX;const le={[iw]:s.ZERO,[sw]:s.ONE,[aw]:s.SRC_COLOR,[om]:s.SRC_ALPHA,[dw]:s.SRC_ALPHA_SATURATE,[cw]:s.DST_COLOR,[lw]:s.DST_ALPHA,[ow]:s.ONE_MINUS_SRC_COLOR,[lm]:s.ONE_MINUS_SRC_ALPHA,[fw]:s.ONE_MINUS_DST_COLOR,[uw]:s.ONE_MINUS_DST_ALPHA,[hw]:s.CONSTANT_COLOR,[pw]:s.ONE_MINUS_CONSTANT_COLOR,[mw]:s.CONSTANT_ALPHA,[yw]:s.ONE_MINUS_CONSTANT_ALPHA};function re(he,ke,We,$e,Ee,Ge,ht,wt,Lt,Ct){if(he===ga){c===!0&&(Z(s.BLEND),c=!1);return}if(c===!1&&(q(s.BLEND),c=!0),he!==$2){if(he!==l||Ct!==j){if((o!==Qa||g!==Qa)&&(s.blendEquation(s.FUNC_ADD),o=Qa,g=Qa),Ct)switch(he){case hl:s.blendFuncSeparate(s.ONE,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case ub:s.blendFunc(s.ONE,s.ONE);break;case cb:s.blendFuncSeparate(s.ZERO,s.ONE_MINUS_SRC_COLOR,s.ZERO,s.ONE);break;case fb:s.blendFuncSeparate(s.ZERO,s.SRC_COLOR,s.ZERO,s.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}else switch(he){case hl:s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case ub:s.blendFunc(s.SRC_ALPHA,s.ONE);break;case cb:s.blendFuncSeparate(s.ZERO,s.ONE_MINUS_SRC_COLOR,s.ZERO,s.ONE);break;case fb:s.blendFunc(s.ZERO,s.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}u=null,m=null,_=null,v=null,x.set(0,0,0),E=0,l=he,j=Ct}return}Ee=Ee||ke,Ge=Ge||We,ht=ht||$e,(ke!==o||Ee!==g)&&(s.blendEquationSeparate(be[ke],be[Ee]),o=ke,g=Ee),(We!==u||$e!==m||Ge!==_||ht!==v)&&(s.blendFuncSeparate(le[We],le[$e],le[Ge],le[ht]),u=We,m=$e,_=Ge,v=ht),(wt.equals(x)===!1||Lt!==E)&&(s.blendColor(wt.r,wt.g,wt.b,Lt),x.copy(wt),E=Lt),l=he,j=!1}function Te(he,ke){he.side===Rs?Z(s.CULL_FACE):q(s.CULL_FACE);let We=he.side===Qn;ke&&(We=!We),Ce(We),he.blending===hl&&he.transparent===!1?re(ga):re(he.blending,he.blendEquation,he.blendSrc,he.blendDst,he.blendEquationAlpha,he.blendSrcAlpha,he.blendDstAlpha,he.blendColor,he.blendAlpha,he.premultipliedAlpha),U.setFunc(he.depthFunc),U.setTest(he.depthTest),U.setMask(he.depthWrite),D.setMask(he.colorWrite);const $e=he.stencilWrite;t.setTest($e),$e&&(t.setMask(he.stencilWriteMask),t.setFunc(he.stencilFunc,he.stencilRef,he.stencilFuncMask),t.setOp(he.stencilFail,he.stencilZFail,he.stencilZPass)),Ue(he.polygonOffset,he.polygonOffsetFactor,he.polygonOffsetUnits),he.alphaToCoverage===!0?q(s.SAMPLE_ALPHA_TO_COVERAGE):Z(s.SAMPLE_ALPHA_TO_COVERAGE)}function Ce(he){O!==he&&(he?s.frontFace(s.CW):s.frontFace(s.CCW),O=he)}function Me(he){he!==K2?(q(s.CULL_FACE),he!==P&&(he===lb?s.cullFace(s.BACK):he===Q2?s.cullFace(s.FRONT):s.cullFace(s.FRONT_AND_BACK))):Z(s.CULL_FACE),P=he}function Se(he){he!==L&&(k&&s.lineWidth(he),L=he)}function Ue(he,ke,We){he?(q(s.POLYGON_OFFSET_FILL),(z!==ke||N!==We)&&(s.polygonOffset(ke,We),z=ke,N=We)):Z(s.POLYGON_OFFSET_FILL)}function Fe(he){he?q(s.SCISSOR_TEST):Z(s.SCISSOR_TEST)}function Be(he){he===void 0&&(he=s.TEXTURE0+V-1),F!==he&&(s.activeTexture(he),F=he)}function st(he,ke,We){We===void 0&&(F===null?We=s.TEXTURE0+V-1:We=F);let $e=W[We];$e===void 0&&($e={type:void 0,texture:void 0},W[We]=$e),($e.type!==he||$e.texture!==ke)&&(F!==We&&(s.activeTexture(We),F=We),s.bindTexture(he,ke||ce[he]),$e.type=he,$e.texture=ke)}function ve(){const he=W[F];he!==void 0&&he.type!==void 0&&(s.bindTexture(he.type,null),he.type=void 0,he.texture=void 0)}function ue(){try{s.compressedTexImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function ze(){try{s.compressedTexImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function He(){try{s.texSubImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function me(){try{s.texSubImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function je(){try{s.compressedTexSubImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Ie(){try{s.compressedTexSubImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Ye(){try{s.texStorage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function it(){try{s.texStorage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function yt(){try{s.texImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Ze(){try{s.texImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function at(he){ee.equals(he)===!1&&(s.scissor(he.x,he.y,he.z,he.w),ee.copy(he))}function fe(he){te.equals(he)===!1&&(s.viewport(he.x,he.y,he.z,he.w),te.copy(he))}function ae(he,ke){let We=M.get(ke);We===void 0&&(We=new WeakMap,M.set(ke,We));let $e=We.get(he);$e===void 0&&($e=s.getUniformBlockIndex(ke,he.name),We.set(he,$e))}function oe(he,ke){const $e=M.get(ke).get(he);R.get(ke)!==$e&&(s.uniformBlockBinding(ke,$e,he.__bindingPointIndex),R.set(ke,$e))}function _e(){s.disable(s.BLEND),s.disable(s.CULL_FACE),s.disable(s.DEPTH_TEST),s.disable(s.POLYGON_OFFSET_FILL),s.disable(s.SCISSOR_TEST),s.disable(s.STENCIL_TEST),s.disable(s.SAMPLE_ALPHA_TO_COVERAGE),s.blendEquation(s.FUNC_ADD),s.blendFunc(s.ONE,s.ZERO),s.blendFuncSeparate(s.ONE,s.ZERO,s.ONE,s.ZERO),s.blendColor(0,0,0,0),s.colorMask(!0,!0,!0,!0),s.clearColor(0,0,0,0),s.depthMask(!0),s.depthFunc(s.LESS),U.setReversed(!1),s.clearDepth(1),s.stencilMask(4294967295),s.stencilFunc(s.ALWAYS,0,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.KEEP),s.clearStencil(0),s.cullFace(s.BACK),s.frontFace(s.CCW),s.polygonOffset(0,0),s.activeTexture(s.TEXTURE0),s.bindFramebuffer(s.FRAMEBUFFER,null),s.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),s.bindFramebuffer(s.READ_FRAMEBUFFER,null),s.useProgram(null),s.lineWidth(1),s.scissor(0,0,s.canvas.width,s.canvas.height),s.viewport(0,0,s.canvas.width,s.canvas.height),p={},F=null,W={},f={},h=new WeakMap,b=[],w=null,c=!1,l=null,o=null,u=null,m=null,g=null,_=null,v=null,x=new Nr(0,0,0),E=0,j=!1,O=null,P=null,L=null,z=null,N=null,ee.set(0,0,s.canvas.width,s.canvas.height),te.set(0,0,s.canvas.width,s.canvas.height),D.reset(),U.reset(),t.reset()}return{buffers:{color:D,depth:U,stencil:t},enable:q,disable:Z,bindFramebuffer:ie,drawBuffers:pe,useProgram:ge,setBlending:re,setMaterial:Te,setFlipSided:Ce,setCullFace:Me,setLineWidth:Se,setPolygonOffset:Ue,setScissorTest:Fe,activeTexture:Be,bindTexture:st,unbindTexture:ve,compressedTexImage2D:ue,compressedTexImage3D:ze,texImage2D:yt,texImage3D:Ze,updateUBOMapping:ae,uniformBlockBinding:oe,texStorage2D:Ye,texStorage3D:it,texSubImage2D:He,texSubImage3D:me,compressedTexSubImage2D:je,compressedTexSubImage3D:Ie,scissor:at,viewport:fe,reset:_e}}function Zj(s,r,i,d,T,D,U){const t=r.has("WEBGL_multisampled_render_to_texture")?r.get("WEBGL_multisampled_render_to_texture"):null,R=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),M=new zr,p=new WeakMap;let f;const h=new WeakMap;let b=!1;try{b=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function w(ve,ue){return b?new OffscreenCanvas(ve,ue):ld("canvas")}function c(ve,ue,ze){let He=1;const me=st(ve);if((me.width>ze||me.height>ze)&&(He=ze/Math.max(me.width,me.height)),He<1)if(typeof HTMLImageElement<"u"&&ve instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ve instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ve instanceof ImageBitmap||typeof VideoFrame<"u"&&ve instanceof VideoFrame){const je=Math.floor(He*me.width),Ie=Math.floor(He*me.height);f===void 0&&(f=w(je,Ie));const Ye=ue?w(je,Ie):f;return Ye.width=je,Ye.height=Ie,Ye.getContext("2d").drawImage(ve,0,0,je,Ie),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+me.width+"x"+me.height+") to ("+je+"x"+Ie+")."),Ye}else return"data"in ve&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+me.width+"x"+me.height+")."),ve;return ve}function l(ve){return ve.generateMipmaps}function o(ve){s.generateMipmap(ve)}function u(ve){return ve.isWebGLCubeRenderTarget?s.TEXTURE_CUBE_MAP:ve.isWebGL3DRenderTarget?s.TEXTURE_3D:ve.isWebGLArrayRenderTarget||ve.isCompressedArrayTexture?s.TEXTURE_2D_ARRAY:s.TEXTURE_2D}function m(ve,ue,ze,He,me=!1){if(ve!==null){if(s[ve]!==void 0)return s[ve];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ve+"'")}let je=ue;if(ue===s.RED&&(ze===s.FLOAT&&(je=s.R32F),ze===s.HALF_FLOAT&&(je=s.R16F),ze===s.UNSIGNED_BYTE&&(je=s.R8)),ue===s.RED_INTEGER&&(ze===s.UNSIGNED_BYTE&&(je=s.R8UI),ze===s.UNSIGNED_SHORT&&(je=s.R16UI),ze===s.UNSIGNED_INT&&(je=s.R32UI),ze===s.BYTE&&(je=s.R8I),ze===s.SHORT&&(je=s.R16I),ze===s.INT&&(je=s.R32I)),ue===s.RG&&(ze===s.FLOAT&&(je=s.RG32F),ze===s.HALF_FLOAT&&(je=s.RG16F),ze===s.UNSIGNED_BYTE&&(je=s.RG8)),ue===s.RG_INTEGER&&(ze===s.UNSIGNED_BYTE&&(je=s.RG8UI),ze===s.UNSIGNED_SHORT&&(je=s.RG16UI),ze===s.UNSIGNED_INT&&(je=s.RG32UI),ze===s.BYTE&&(je=s.RG8I),ze===s.SHORT&&(je=s.RG16I),ze===s.INT&&(je=s.RG32I)),ue===s.RGB_INTEGER&&(ze===s.UNSIGNED_BYTE&&(je=s.RGB8UI),ze===s.UNSIGNED_SHORT&&(je=s.RGB16UI),ze===s.UNSIGNED_INT&&(je=s.RGB32UI),ze===s.BYTE&&(je=s.RGB8I),ze===s.SHORT&&(je=s.RGB16I),ze===s.INT&&(je=s.RGB32I)),ue===s.RGBA_INTEGER&&(ze===s.UNSIGNED_BYTE&&(je=s.RGBA8UI),ze===s.UNSIGNED_SHORT&&(je=s.RGBA16UI),ze===s.UNSIGNED_INT&&(je=s.RGBA32UI),ze===s.BYTE&&(je=s.RGBA8I),ze===s.SHORT&&(je=s.RGBA16I),ze===s.INT&&(je=s.RGBA32I)),ue===s.RGB&&ze===s.UNSIGNED_INT_5_9_9_9_REV&&(je=s.RGB9_E5),ue===s.RGBA){const Ie=me?ad:xr.getTransfer(He);ze===s.FLOAT&&(je=s.RGBA32F),ze===s.HALF_FLOAT&&(je=s.RGBA16F),ze===s.UNSIGNED_BYTE&&(je=Ie===Ur?s.SRGB8_ALPHA8:s.RGBA8),ze===s.UNSIGNED_SHORT_4_4_4_4&&(je=s.RGBA4),ze===s.UNSIGNED_SHORT_5_5_5_1&&(je=s.RGB5_A1)}return(je===s.R16F||je===s.R32F||je===s.RG16F||je===s.RG32F||je===s.RGBA16F||je===s.RGBA32F)&&r.get("EXT_color_buffer_float"),je}function g(ve,ue){let ze;return ve?ue===null||ue===ao||ue===Iu?ze=s.DEPTH24_STENCIL8:ue===Cs?ze=s.DEPTH32F_STENCIL8:ue===Nu&&(ze=s.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):ue===null||ue===ao||ue===Iu?ze=s.DEPTH_COMPONENT24:ue===Cs?ze=s.DEPTH_COMPONENT32F:ue===Nu&&(ze=s.DEPTH_COMPONENT16),ze}function _(ve,ue){return l(ve)===!0||ve.isFramebufferTexture&&ve.minFilter!==ji&&ve.minFilter!==es?Math.log2(Math.max(ue.width,ue.height))+1:ve.mipmaps!==void 0&&ve.mipmaps.length>0?ve.mipmaps.length:ve.isCompressedTexture&&Array.isArray(ve.image)?ue.mipmaps.length:1}function v(ve){const ue=ve.target;ue.removeEventListener("dispose",v),E(ue),ue.isVideoTexture&&p.delete(ue)}function x(ve){const ue=ve.target;ue.removeEventListener("dispose",x),O(ue)}function E(ve){const ue=d.get(ve);if(ue.__webglInit===void 0)return;const ze=ve.source,He=h.get(ze);if(He){const me=He[ue.__cacheKey];me.usedTimes--,me.usedTimes===0&&j(ve),Object.keys(He).length===0&&h.delete(ze)}d.remove(ve)}function j(ve){const ue=d.get(ve);s.deleteTexture(ue.__webglTexture);const ze=ve.source,He=h.get(ze);delete He[ue.__cacheKey],U.memory.textures--}function O(ve){const ue=d.get(ve);if(ve.depthTexture&&(ve.depthTexture.dispose(),d.remove(ve.depthTexture)),ve.isWebGLCubeRenderTarget)for(let He=0;He<6;He++){if(Array.isArray(ue.__webglFramebuffer[He]))for(let me=0;me<ue.__webglFramebuffer[He].length;me++)s.deleteFramebuffer(ue.__webglFramebuffer[He][me]);else s.deleteFramebuffer(ue.__webglFramebuffer[He]);ue.__webglDepthbuffer&&s.deleteRenderbuffer(ue.__webglDepthbuffer[He])}else{if(Array.isArray(ue.__webglFramebuffer))for(let He=0;He<ue.__webglFramebuffer.length;He++)s.deleteFramebuffer(ue.__webglFramebuffer[He]);else s.deleteFramebuffer(ue.__webglFramebuffer);if(ue.__webglDepthbuffer&&s.deleteRenderbuffer(ue.__webglDepthbuffer),ue.__webglMultisampledFramebuffer&&s.deleteFramebuffer(ue.__webglMultisampledFramebuffer),ue.__webglColorRenderbuffer)for(let He=0;He<ue.__webglColorRenderbuffer.length;He++)ue.__webglColorRenderbuffer[He]&&s.deleteRenderbuffer(ue.__webglColorRenderbuffer[He]);ue.__webglDepthRenderbuffer&&s.deleteRenderbuffer(ue.__webglDepthRenderbuffer)}const ze=ve.textures;for(let He=0,me=ze.length;He<me;He++){const je=d.get(ze[He]);je.__webglTexture&&(s.deleteTexture(je.__webglTexture),U.memory.textures--),d.remove(ze[He])}d.remove(ve)}let P=0;function L(){P=0}function z(){const ve=P;return ve>=T.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ve+" texture units while this GPU supports only "+T.maxTextures),P+=1,ve}function N(ve){const ue=[];return ue.push(ve.wrapS),ue.push(ve.wrapT),ue.push(ve.wrapR||0),ue.push(ve.magFilter),ue.push(ve.minFilter),ue.push(ve.anisotropy),ue.push(ve.internalFormat),ue.push(ve.format),ue.push(ve.type),ue.push(ve.generateMipmaps),ue.push(ve.premultiplyAlpha),ue.push(ve.flipY),ue.push(ve.unpackAlignment),ue.push(ve.colorSpace),ue.join()}function V(ve,ue){const ze=d.get(ve);if(ve.isVideoTexture&&Fe(ve),ve.isRenderTargetTexture===!1&&ve.version>0&&ze.__version!==ve.version){const He=ve.image;if(He===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(He.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ce(ze,ve,ue);return}}i.bindTexture(s.TEXTURE_2D,ze.__webglTexture,s.TEXTURE0+ue)}function k(ve,ue){const ze=d.get(ve);if(ve.version>0&&ze.__version!==ve.version){ce(ze,ve,ue);return}i.bindTexture(s.TEXTURE_2D_ARRAY,ze.__webglTexture,s.TEXTURE0+ue)}function H(ve,ue){const ze=d.get(ve);if(ve.version>0&&ze.__version!==ve.version){ce(ze,ve,ue);return}i.bindTexture(s.TEXTURE_3D,ze.__webglTexture,s.TEXTURE0+ue)}function G(ve,ue){const ze=d.get(ve);if(ve.version>0&&ze.__version!==ve.version){q(ze,ve,ue);return}i.bindTexture(s.TEXTURE_CUBE_MAP,ze.__webglTexture,s.TEXTURE0+ue)}const F={[vm]:s.REPEAT,[$a]:s.CLAMP_TO_EDGE,[bm]:s.MIRRORED_REPEAT},W={[ji]:s.NEAREST,[Tw]:s.NEAREST_MIPMAP_NEAREST,[wf]:s.NEAREST_MIPMAP_LINEAR,[es]:s.LINEAR,[gp]:s.LINEAR_MIPMAP_NEAREST,[eo]:s.LINEAR_MIPMAP_LINEAR},Q={[Dw]:s.NEVER,[Iw]:s.ALWAYS,[Lw]:s.LESS,[R1]:s.LEQUAL,[Ow]:s.EQUAL,[Nw]:s.GEQUAL,[Pw]:s.GREATER,[Uw]:s.NOTEQUAL};function J(ve,ue){if(ue.type===Cs&&r.has("OES_texture_float_linear")===!1&&(ue.magFilter===es||ue.magFilter===gp||ue.magFilter===wf||ue.magFilter===eo||ue.minFilter===es||ue.minFilter===gp||ue.minFilter===wf||ue.minFilter===eo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),s.texParameteri(ve,s.TEXTURE_WRAP_S,F[ue.wrapS]),s.texParameteri(ve,s.TEXTURE_WRAP_T,F[ue.wrapT]),(ve===s.TEXTURE_3D||ve===s.TEXTURE_2D_ARRAY)&&s.texParameteri(ve,s.TEXTURE_WRAP_R,F[ue.wrapR]),s.texParameteri(ve,s.TEXTURE_MAG_FILTER,W[ue.magFilter]),s.texParameteri(ve,s.TEXTURE_MIN_FILTER,W[ue.minFilter]),ue.compareFunction&&(s.texParameteri(ve,s.TEXTURE_COMPARE_MODE,s.COMPARE_REF_TO_TEXTURE),s.texParameteri(ve,s.TEXTURE_COMPARE_FUNC,Q[ue.compareFunction])),r.has("EXT_texture_filter_anisotropic")===!0){if(ue.magFilter===ji||ue.minFilter!==wf&&ue.minFilter!==eo||ue.type===Cs&&r.has("OES_texture_float_linear")===!1)return;if(ue.anisotropy>1||d.get(ue).__currentAnisotropy){const ze=r.get("EXT_texture_filter_anisotropic");s.texParameterf(ve,ze.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ue.anisotropy,T.getMaxAnisotropy())),d.get(ue).__currentAnisotropy=ue.anisotropy}}}function ee(ve,ue){let ze=!1;ve.__webglInit===void 0&&(ve.__webglInit=!0,ue.addEventListener("dispose",v));const He=ue.source;let me=h.get(He);me===void 0&&(me={},h.set(He,me));const je=N(ue);if(je!==ve.__cacheKey){me[je]===void 0&&(me[je]={texture:s.createTexture(),usedTimes:0},U.memory.textures++,ze=!0),me[je].usedTimes++;const Ie=me[ve.__cacheKey];Ie!==void 0&&(me[ve.__cacheKey].usedTimes--,Ie.usedTimes===0&&j(ue)),ve.__cacheKey=je,ve.__webglTexture=me[je].texture}return ze}function te(ve,ue,ze){return Math.floor(Math.floor(ve/ze)/ue)}function se(ve,ue,ze,He){const je=ve.updateRanges;if(je.length===0)i.texSubImage2D(s.TEXTURE_2D,0,0,0,ue.width,ue.height,ze,He,ue.data);else{je.sort((Ze,at)=>Ze.start-at.start);let Ie=0;for(let Ze=1;Ze<je.length;Ze++){const at=je[Ie],fe=je[Ze],ae=at.start+at.count,oe=te(fe.start,ue.width,4),_e=te(at.start,ue.width,4);fe.start<=ae+1&&oe===_e&&te(fe.start+fe.count-1,ue.width,4)===oe?at.count=Math.max(at.count,fe.start+fe.count-at.start):(++Ie,je[Ie]=fe)}je.length=Ie+1;const Ye=s.getParameter(s.UNPACK_ROW_LENGTH),it=s.getParameter(s.UNPACK_SKIP_PIXELS),yt=s.getParameter(s.UNPACK_SKIP_ROWS);s.pixelStorei(s.UNPACK_ROW_LENGTH,ue.width);for(let Ze=0,at=je.length;Ze<at;Ze++){const fe=je[Ze],ae=Math.floor(fe.start/4),oe=Math.ceil(fe.count/4),_e=ae%ue.width,he=Math.floor(ae/ue.width),ke=oe,We=1;s.pixelStorei(s.UNPACK_SKIP_PIXELS,_e),s.pixelStorei(s.UNPACK_SKIP_ROWS,he),i.texSubImage2D(s.TEXTURE_2D,0,_e,he,ke,We,ze,He,ue.data)}ve.clearUpdateRanges(),s.pixelStorei(s.UNPACK_ROW_LENGTH,Ye),s.pixelStorei(s.UNPACK_SKIP_PIXELS,it),s.pixelStorei(s.UNPACK_SKIP_ROWS,yt)}}function ce(ve,ue,ze){let He=s.TEXTURE_2D;(ue.isDataArrayTexture||ue.isCompressedArrayTexture)&&(He=s.TEXTURE_2D_ARRAY),ue.isData3DTexture&&(He=s.TEXTURE_3D);const me=ee(ve,ue),je=ue.source;i.bindTexture(He,ve.__webglTexture,s.TEXTURE0+ze);const Ie=d.get(je);if(je.version!==Ie.__version||me===!0){i.activeTexture(s.TEXTURE0+ze);const Ye=xr.getPrimaries(xr.workingColorSpace),it=ue.colorSpace===ya?null:xr.getPrimaries(ue.colorSpace),yt=ue.colorSpace===ya||Ye===it?s.NONE:s.BROWSER_DEFAULT_WEBGL;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,ue.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,ue.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,yt);let Ze=c(ue.image,!1,T.maxTextureSize);Ze=Be(ue,Ze);const at=D.convert(ue.format,ue.colorSpace),fe=D.convert(ue.type);let ae=m(ue.internalFormat,at,fe,ue.colorSpace,ue.isVideoTexture);J(He,ue);let oe;const _e=ue.mipmaps,he=ue.isVideoTexture!==!0,ke=Ie.__version===void 0||me===!0,We=je.dataReady,$e=_(ue,Ze);if(ue.isDepthTexture)ae=g(ue.format===Fu,ue.type),ke&&(he?i.texStorage2D(s.TEXTURE_2D,1,ae,Ze.width,Ze.height):i.texImage2D(s.TEXTURE_2D,0,ae,Ze.width,Ze.height,0,at,fe,null));else if(ue.isDataTexture)if(_e.length>0){he&&ke&&i.texStorage2D(s.TEXTURE_2D,$e,ae,_e[0].width,_e[0].height);for(let Ee=0,Ge=_e.length;Ee<Ge;Ee++)oe=_e[Ee],he?We&&i.texSubImage2D(s.TEXTURE_2D,Ee,0,0,oe.width,oe.height,at,fe,oe.data):i.texImage2D(s.TEXTURE_2D,Ee,ae,oe.width,oe.height,0,at,fe,oe.data);ue.generateMipmaps=!1}else he?(ke&&i.texStorage2D(s.TEXTURE_2D,$e,ae,Ze.width,Ze.height),We&&se(ue,Ze,at,fe)):i.texImage2D(s.TEXTURE_2D,0,ae,Ze.width,Ze.height,0,at,fe,Ze.data);else if(ue.isCompressedTexture)if(ue.isCompressedArrayTexture){he&&ke&&i.texStorage3D(s.TEXTURE_2D_ARRAY,$e,ae,_e[0].width,_e[0].height,Ze.depth);for(let Ee=0,Ge=_e.length;Ee<Ge;Ee++)if(oe=_e[Ee],ue.format!==Vi)if(at!==null)if(he){if(We)if(ue.layerUpdates.size>0){const ht=Lb(oe.width,oe.height,ue.format,ue.type);for(const wt of ue.layerUpdates){const Lt=oe.data.subarray(wt*ht/oe.data.BYTES_PER_ELEMENT,(wt+1)*ht/oe.data.BYTES_PER_ELEMENT);i.compressedTexSubImage3D(s.TEXTURE_2D_ARRAY,Ee,0,0,wt,oe.width,oe.height,1,at,Lt)}ue.clearLayerUpdates()}else i.compressedTexSubImage3D(s.TEXTURE_2D_ARRAY,Ee,0,0,0,oe.width,oe.height,Ze.depth,at,oe.data)}else i.compressedTexImage3D(s.TEXTURE_2D_ARRAY,Ee,ae,oe.width,oe.height,Ze.depth,0,oe.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else he?We&&i.texSubImage3D(s.TEXTURE_2D_ARRAY,Ee,0,0,0,oe.width,oe.height,Ze.depth,at,fe,oe.data):i.texImage3D(s.TEXTURE_2D_ARRAY,Ee,ae,oe.width,oe.height,Ze.depth,0,at,fe,oe.data)}else{he&&ke&&i.texStorage2D(s.TEXTURE_2D,$e,ae,_e[0].width,_e[0].height);for(let Ee=0,Ge=_e.length;Ee<Ge;Ee++)oe=_e[Ee],ue.format!==Vi?at!==null?he?We&&i.compressedTexSubImage2D(s.TEXTURE_2D,Ee,0,0,oe.width,oe.height,at,oe.data):i.compressedTexImage2D(s.TEXTURE_2D,Ee,ae,oe.width,oe.height,0,oe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):he?We&&i.texSubImage2D(s.TEXTURE_2D,Ee,0,0,oe.width,oe.height,at,fe,oe.data):i.texImage2D(s.TEXTURE_2D,Ee,ae,oe.width,oe.height,0,at,fe,oe.data)}else if(ue.isDataArrayTexture)if(he){if(ke&&i.texStorage3D(s.TEXTURE_2D_ARRAY,$e,ae,Ze.width,Ze.height,Ze.depth),We)if(ue.layerUpdates.size>0){const Ee=Lb(Ze.width,Ze.height,ue.format,ue.type);for(const Ge of ue.layerUpdates){const ht=Ze.data.subarray(Ge*Ee/Ze.data.BYTES_PER_ELEMENT,(Ge+1)*Ee/Ze.data.BYTES_PER_ELEMENT);i.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,Ge,Ze.width,Ze.height,1,at,fe,ht)}ue.clearLayerUpdates()}else i.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,0,Ze.width,Ze.height,Ze.depth,at,fe,Ze.data)}else i.texImage3D(s.TEXTURE_2D_ARRAY,0,ae,Ze.width,Ze.height,Ze.depth,0,at,fe,Ze.data);else if(ue.isData3DTexture)he?(ke&&i.texStorage3D(s.TEXTURE_3D,$e,ae,Ze.width,Ze.height,Ze.depth),We&&i.texSubImage3D(s.TEXTURE_3D,0,0,0,0,Ze.width,Ze.height,Ze.depth,at,fe,Ze.data)):i.texImage3D(s.TEXTURE_3D,0,ae,Ze.width,Ze.height,Ze.depth,0,at,fe,Ze.data);else if(ue.isFramebufferTexture){if(ke)if(he)i.texStorage2D(s.TEXTURE_2D,$e,ae,Ze.width,Ze.height);else{let Ee=Ze.width,Ge=Ze.height;for(let ht=0;ht<$e;ht++)i.texImage2D(s.TEXTURE_2D,ht,ae,Ee,Ge,0,at,fe,null),Ee>>=1,Ge>>=1}}else if(_e.length>0){if(he&&ke){const Ee=st(_e[0]);i.texStorage2D(s.TEXTURE_2D,$e,ae,Ee.width,Ee.height)}for(let Ee=0,Ge=_e.length;Ee<Ge;Ee++)oe=_e[Ee],he?We&&i.texSubImage2D(s.TEXTURE_2D,Ee,0,0,at,fe,oe):i.texImage2D(s.TEXTURE_2D,Ee,ae,at,fe,oe);ue.generateMipmaps=!1}else if(he){if(ke){const Ee=st(Ze);i.texStorage2D(s.TEXTURE_2D,$e,ae,Ee.width,Ee.height)}We&&i.texSubImage2D(s.TEXTURE_2D,0,0,0,at,fe,Ze)}else i.texImage2D(s.TEXTURE_2D,0,ae,at,fe,Ze);l(ue)&&o(He),Ie.__version=je.version,ue.onUpdate&&ue.onUpdate(ue)}ve.__version=ue.version}function q(ve,ue,ze){if(ue.image.length!==6)return;const He=ee(ve,ue),me=ue.source;i.bindTexture(s.TEXTURE_CUBE_MAP,ve.__webglTexture,s.TEXTURE0+ze);const je=d.get(me);if(me.version!==je.__version||He===!0){i.activeTexture(s.TEXTURE0+ze);const Ie=xr.getPrimaries(xr.workingColorSpace),Ye=ue.colorSpace===ya?null:xr.getPrimaries(ue.colorSpace),it=ue.colorSpace===ya||Ie===Ye?s.NONE:s.BROWSER_DEFAULT_WEBGL;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,ue.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,ue.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,it);const yt=ue.isCompressedTexture||ue.image[0].isCompressedTexture,Ze=ue.image[0]&&ue.image[0].isDataTexture,at=[];for(let Ge=0;Ge<6;Ge++)!yt&&!Ze?at[Ge]=c(ue.image[Ge],!0,T.maxCubemapSize):at[Ge]=Ze?ue.image[Ge].image:ue.image[Ge],at[Ge]=Be(ue,at[Ge]);const fe=at[0],ae=D.convert(ue.format,ue.colorSpace),oe=D.convert(ue.type),_e=m(ue.internalFormat,ae,oe,ue.colorSpace),he=ue.isVideoTexture!==!0,ke=je.__version===void 0||He===!0,We=me.dataReady;let $e=_(ue,fe);J(s.TEXTURE_CUBE_MAP,ue);let Ee;if(yt){he&&ke&&i.texStorage2D(s.TEXTURE_CUBE_MAP,$e,_e,fe.width,fe.height);for(let Ge=0;Ge<6;Ge++){Ee=at[Ge].mipmaps;for(let ht=0;ht<Ee.length;ht++){const wt=Ee[ht];ue.format!==Vi?ae!==null?he?We&&i.compressedTexSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,ht,0,0,wt.width,wt.height,ae,wt.data):i.compressedTexImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,ht,_e,wt.width,wt.height,0,wt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):he?We&&i.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,ht,0,0,wt.width,wt.height,ae,oe,wt.data):i.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,ht,_e,wt.width,wt.height,0,ae,oe,wt.data)}}}else{if(Ee=ue.mipmaps,he&&ke){Ee.length>0&&$e++;const Ge=st(at[0]);i.texStorage2D(s.TEXTURE_CUBE_MAP,$e,_e,Ge.width,Ge.height)}for(let Ge=0;Ge<6;Ge++)if(Ze){he?We&&i.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,0,0,at[Ge].width,at[Ge].height,ae,oe,at[Ge].data):i.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,_e,at[Ge].width,at[Ge].height,0,ae,oe,at[Ge].data);for(let ht=0;ht<Ee.length;ht++){const Lt=Ee[ht].image[Ge].image;he?We&&i.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,ht+1,0,0,Lt.width,Lt.height,ae,oe,Lt.data):i.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,ht+1,_e,Lt.width,Lt.height,0,ae,oe,Lt.data)}}else{he?We&&i.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,0,0,ae,oe,at[Ge]):i.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,_e,ae,oe,at[Ge]);for(let ht=0;ht<Ee.length;ht++){const wt=Ee[ht];he?We&&i.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,ht+1,0,0,ae,oe,wt.image[Ge]):i.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,ht+1,_e,ae,oe,wt.image[Ge])}}}l(ue)&&o(s.TEXTURE_CUBE_MAP),je.__version=me.version,ue.onUpdate&&ue.onUpdate(ue)}ve.__version=ue.version}function Z(ve,ue,ze,He,me,je){const Ie=D.convert(ze.format,ze.colorSpace),Ye=D.convert(ze.type),it=m(ze.internalFormat,Ie,Ye,ze.colorSpace),yt=d.get(ue),Ze=d.get(ze);if(Ze.__renderTarget=ue,!yt.__hasExternalTextures){const at=Math.max(1,ue.width>>je),fe=Math.max(1,ue.height>>je);me===s.TEXTURE_3D||me===s.TEXTURE_2D_ARRAY?i.texImage3D(me,je,it,at,fe,ue.depth,0,Ie,Ye,null):i.texImage2D(me,je,it,at,fe,0,Ie,Ye,null)}i.bindFramebuffer(s.FRAMEBUFFER,ve),Ue(ue)?t.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,He,me,Ze.__webglTexture,0,Se(ue)):(me===s.TEXTURE_2D||me>=s.TEXTURE_CUBE_MAP_POSITIVE_X&&me<=s.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&s.framebufferTexture2D(s.FRAMEBUFFER,He,me,Ze.__webglTexture,je),i.bindFramebuffer(s.FRAMEBUFFER,null)}function ie(ve,ue,ze){if(s.bindRenderbuffer(s.RENDERBUFFER,ve),ue.depthBuffer){const He=ue.depthTexture,me=He&&He.isDepthTexture?He.type:null,je=g(ue.stencilBuffer,me),Ie=ue.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,Ye=Se(ue);Ue(ue)?t.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,Ye,je,ue.width,ue.height):ze?s.renderbufferStorageMultisample(s.RENDERBUFFER,Ye,je,ue.width,ue.height):s.renderbufferStorage(s.RENDERBUFFER,je,ue.width,ue.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,Ie,s.RENDERBUFFER,ve)}else{const He=ue.textures;for(let me=0;me<He.length;me++){const je=He[me],Ie=D.convert(je.format,je.colorSpace),Ye=D.convert(je.type),it=m(je.internalFormat,Ie,Ye,je.colorSpace),yt=Se(ue);ze&&Ue(ue)===!1?s.renderbufferStorageMultisample(s.RENDERBUFFER,yt,it,ue.width,ue.height):Ue(ue)?t.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,yt,it,ue.width,ue.height):s.renderbufferStorage(s.RENDERBUFFER,it,ue.width,ue.height)}}s.bindRenderbuffer(s.RENDERBUFFER,null)}function pe(ve,ue){if(ue&&ue.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(s.FRAMEBUFFER,ve),!(ue.depthTexture&&ue.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const He=d.get(ue.depthTexture);He.__renderTarget=ue,(!He.__webglTexture||ue.depthTexture.image.width!==ue.width||ue.depthTexture.image.height!==ue.height)&&(ue.depthTexture.image.width=ue.width,ue.depthTexture.image.height=ue.height,ue.depthTexture.needsUpdate=!0),V(ue.depthTexture,0);const me=He.__webglTexture,je=Se(ue);if(ue.depthTexture.format===ku)Ue(ue)?t.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,me,0,je):s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,me,0);else if(ue.depthTexture.format===Fu)Ue(ue)?t.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,me,0,je):s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,me,0);else throw new Error("Unknown depthTexture format")}function ge(ve){const ue=d.get(ve),ze=ve.isWebGLCubeRenderTarget===!0;if(ue.__boundDepthTexture!==ve.depthTexture){const He=ve.depthTexture;if(ue.__depthDisposeCallback&&ue.__depthDisposeCallback(),He){const me=()=>{delete ue.__boundDepthTexture,delete ue.__depthDisposeCallback,He.removeEventListener("dispose",me)};He.addEventListener("dispose",me),ue.__depthDisposeCallback=me}ue.__boundDepthTexture=He}if(ve.depthTexture&&!ue.__autoAllocateDepthBuffer){if(ze)throw new Error("target.depthTexture not supported in Cube render targets");const He=ve.texture.mipmaps;He&&He.length>0?pe(ue.__webglFramebuffer[0],ve):pe(ue.__webglFramebuffer,ve)}else if(ze){ue.__webglDepthbuffer=[];for(let He=0;He<6;He++)if(i.bindFramebuffer(s.FRAMEBUFFER,ue.__webglFramebuffer[He]),ue.__webglDepthbuffer[He]===void 0)ue.__webglDepthbuffer[He]=s.createRenderbuffer(),ie(ue.__webglDepthbuffer[He],ve,!1);else{const me=ve.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,je=ue.__webglDepthbuffer[He];s.bindRenderbuffer(s.RENDERBUFFER,je),s.framebufferRenderbuffer(s.FRAMEBUFFER,me,s.RENDERBUFFER,je)}}else{const He=ve.texture.mipmaps;if(He&&He.length>0?i.bindFramebuffer(s.FRAMEBUFFER,ue.__webglFramebuffer[0]):i.bindFramebuffer(s.FRAMEBUFFER,ue.__webglFramebuffer),ue.__webglDepthbuffer===void 0)ue.__webglDepthbuffer=s.createRenderbuffer(),ie(ue.__webglDepthbuffer,ve,!1);else{const me=ve.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,je=ue.__webglDepthbuffer;s.bindRenderbuffer(s.RENDERBUFFER,je),s.framebufferRenderbuffer(s.FRAMEBUFFER,me,s.RENDERBUFFER,je)}}i.bindFramebuffer(s.FRAMEBUFFER,null)}function be(ve,ue,ze){const He=d.get(ve);ue!==void 0&&Z(He.__webglFramebuffer,ve,ve.texture,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,0),ze!==void 0&&ge(ve)}function le(ve){const ue=ve.texture,ze=d.get(ve),He=d.get(ue);ve.addEventListener("dispose",x);const me=ve.textures,je=ve.isWebGLCubeRenderTarget===!0,Ie=me.length>1;if(Ie||(He.__webglTexture===void 0&&(He.__webglTexture=s.createTexture()),He.__version=ue.version,U.memory.textures++),je){ze.__webglFramebuffer=[];for(let Ye=0;Ye<6;Ye++)if(ue.mipmaps&&ue.mipmaps.length>0){ze.__webglFramebuffer[Ye]=[];for(let it=0;it<ue.mipmaps.length;it++)ze.__webglFramebuffer[Ye][it]=s.createFramebuffer()}else ze.__webglFramebuffer[Ye]=s.createFramebuffer()}else{if(ue.mipmaps&&ue.mipmaps.length>0){ze.__webglFramebuffer=[];for(let Ye=0;Ye<ue.mipmaps.length;Ye++)ze.__webglFramebuffer[Ye]=s.createFramebuffer()}else ze.__webglFramebuffer=s.createFramebuffer();if(Ie)for(let Ye=0,it=me.length;Ye<it;Ye++){const yt=d.get(me[Ye]);yt.__webglTexture===void 0&&(yt.__webglTexture=s.createTexture(),U.memory.textures++)}if(ve.samples>0&&Ue(ve)===!1){ze.__webglMultisampledFramebuffer=s.createFramebuffer(),ze.__webglColorRenderbuffer=[],i.bindFramebuffer(s.FRAMEBUFFER,ze.__webglMultisampledFramebuffer);for(let Ye=0;Ye<me.length;Ye++){const it=me[Ye];ze.__webglColorRenderbuffer[Ye]=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,ze.__webglColorRenderbuffer[Ye]);const yt=D.convert(it.format,it.colorSpace),Ze=D.convert(it.type),at=m(it.internalFormat,yt,Ze,it.colorSpace,ve.isXRRenderTarget===!0),fe=Se(ve);s.renderbufferStorageMultisample(s.RENDERBUFFER,fe,at,ve.width,ve.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+Ye,s.RENDERBUFFER,ze.__webglColorRenderbuffer[Ye])}s.bindRenderbuffer(s.RENDERBUFFER,null),ve.depthBuffer&&(ze.__webglDepthRenderbuffer=s.createRenderbuffer(),ie(ze.__webglDepthRenderbuffer,ve,!0)),i.bindFramebuffer(s.FRAMEBUFFER,null)}}if(je){i.bindTexture(s.TEXTURE_CUBE_MAP,He.__webglTexture),J(s.TEXTURE_CUBE_MAP,ue);for(let Ye=0;Ye<6;Ye++)if(ue.mipmaps&&ue.mipmaps.length>0)for(let it=0;it<ue.mipmaps.length;it++)Z(ze.__webglFramebuffer[Ye][it],ve,ue,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,it);else Z(ze.__webglFramebuffer[Ye],ve,ue,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0);l(ue)&&o(s.TEXTURE_CUBE_MAP),i.unbindTexture()}else if(Ie){for(let Ye=0,it=me.length;Ye<it;Ye++){const yt=me[Ye],Ze=d.get(yt);i.bindTexture(s.TEXTURE_2D,Ze.__webglTexture),J(s.TEXTURE_2D,yt),Z(ze.__webglFramebuffer,ve,yt,s.COLOR_ATTACHMENT0+Ye,s.TEXTURE_2D,0),l(yt)&&o(s.TEXTURE_2D)}i.unbindTexture()}else{let Ye=s.TEXTURE_2D;if((ve.isWebGL3DRenderTarget||ve.isWebGLArrayRenderTarget)&&(Ye=ve.isWebGL3DRenderTarget?s.TEXTURE_3D:s.TEXTURE_2D_ARRAY),i.bindTexture(Ye,He.__webglTexture),J(Ye,ue),ue.mipmaps&&ue.mipmaps.length>0)for(let it=0;it<ue.mipmaps.length;it++)Z(ze.__webglFramebuffer[it],ve,ue,s.COLOR_ATTACHMENT0,Ye,it);else Z(ze.__webglFramebuffer,ve,ue,s.COLOR_ATTACHMENT0,Ye,0);l(ue)&&o(Ye),i.unbindTexture()}ve.depthBuffer&&ge(ve)}function re(ve){const ue=ve.textures;for(let ze=0,He=ue.length;ze<He;ze++){const me=ue[ze];if(l(me)){const je=u(ve),Ie=d.get(me).__webglTexture;i.bindTexture(je,Ie),o(je),i.unbindTexture()}}}const Te=[],Ce=[];function Me(ve){if(ve.samples>0){if(Ue(ve)===!1){const ue=ve.textures,ze=ve.width,He=ve.height;let me=s.COLOR_BUFFER_BIT;const je=ve.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,Ie=d.get(ve),Ye=ue.length>1;if(Ye)for(let yt=0;yt<ue.length;yt++)i.bindFramebuffer(s.FRAMEBUFFER,Ie.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+yt,s.RENDERBUFFER,null),i.bindFramebuffer(s.FRAMEBUFFER,Ie.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+yt,s.TEXTURE_2D,null,0);i.bindFramebuffer(s.READ_FRAMEBUFFER,Ie.__webglMultisampledFramebuffer);const it=ve.texture.mipmaps;it&&it.length>0?i.bindFramebuffer(s.DRAW_FRAMEBUFFER,Ie.__webglFramebuffer[0]):i.bindFramebuffer(s.DRAW_FRAMEBUFFER,Ie.__webglFramebuffer);for(let yt=0;yt<ue.length;yt++){if(ve.resolveDepthBuffer&&(ve.depthBuffer&&(me|=s.DEPTH_BUFFER_BIT),ve.stencilBuffer&&ve.resolveStencilBuffer&&(me|=s.STENCIL_BUFFER_BIT)),Ye){s.framebufferRenderbuffer(s.READ_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,Ie.__webglColorRenderbuffer[yt]);const Ze=d.get(ue[yt]).__webglTexture;s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,Ze,0)}s.blitFramebuffer(0,0,ze,He,0,0,ze,He,me,s.NEAREST),R===!0&&(Te.length=0,Ce.length=0,Te.push(s.COLOR_ATTACHMENT0+yt),ve.depthBuffer&&ve.resolveDepthBuffer===!1&&(Te.push(je),Ce.push(je),s.invalidateFramebuffer(s.DRAW_FRAMEBUFFER,Ce)),s.invalidateFramebuffer(s.READ_FRAMEBUFFER,Te))}if(i.bindFramebuffer(s.READ_FRAMEBUFFER,null),i.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),Ye)for(let yt=0;yt<ue.length;yt++){i.bindFramebuffer(s.FRAMEBUFFER,Ie.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+yt,s.RENDERBUFFER,Ie.__webglColorRenderbuffer[yt]);const Ze=d.get(ue[yt]).__webglTexture;i.bindFramebuffer(s.FRAMEBUFFER,Ie.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+yt,s.TEXTURE_2D,Ze,0)}i.bindFramebuffer(s.DRAW_FRAMEBUFFER,Ie.__webglMultisampledFramebuffer)}else if(ve.depthBuffer&&ve.resolveDepthBuffer===!1&&R){const ue=ve.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT;s.invalidateFramebuffer(s.DRAW_FRAMEBUFFER,[ue])}}}function Se(ve){return Math.min(T.maxSamples,ve.samples)}function Ue(ve){const ue=d.get(ve);return ve.samples>0&&r.has("WEBGL_multisampled_render_to_texture")===!0&&ue.__useRenderToTexture!==!1}function Fe(ve){const ue=U.render.frame;p.get(ve)!==ue&&(p.set(ve,ue),ve.update())}function Be(ve,ue){const ze=ve.colorSpace,He=ve.format,me=ve.type;return ve.isCompressedTexture===!0||ve.isVideoTexture===!0||ze!==bl&&ze!==ya&&(xr.getTransfer(ze)===Ur?(He!==Vi||me!==Os)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ze)),ue}function st(ve){return typeof HTMLImageElement<"u"&&ve instanceof HTMLImageElement?(M.width=ve.naturalWidth||ve.width,M.height=ve.naturalHeight||ve.height):typeof VideoFrame<"u"&&ve instanceof VideoFrame?(M.width=ve.displayWidth,M.height=ve.displayHeight):(M.width=ve.width,M.height=ve.height),M}this.allocateTextureUnit=z,this.resetTextureUnits=L,this.setTexture2D=V,this.setTexture2DArray=k,this.setTexture3D=H,this.setTextureCube=G,this.rebindTextures=be,this.setupRenderTarget=le,this.updateRenderTargetMipmap=re,this.updateMultisampleRenderTarget=Me,this.setupDepthRenderbuffer=ge,this.setupFrameBufferTexture=Z,this.useMultisampledRTT=Ue}function Kj(s,r){function i(d,T=ya){let D;const U=xr.getTransfer(T);if(d===Os)return s.UNSIGNED_BYTE;if(d===yy)return s.UNSIGNED_SHORT_4_4_4_4;if(d===gy)return s.UNSIGNED_SHORT_5_5_5_1;if(d===w1)return s.UNSIGNED_INT_5_9_9_9_REV;if(d===x1)return s.BYTE;if(d===S1)return s.SHORT;if(d===Nu)return s.UNSIGNED_SHORT;if(d===my)return s.INT;if(d===ao)return s.UNSIGNED_INT;if(d===Cs)return s.FLOAT;if(d===qu)return s.HALF_FLOAT;if(d===M1)return s.ALPHA;if(d===E1)return s.RGB;if(d===Vi)return s.RGBA;if(d===ku)return s.DEPTH_COMPONENT;if(d===Fu)return s.DEPTH_STENCIL;if(d===T1)return s.RED;if(d===vy)return s.RED_INTEGER;if(d===A1)return s.RG;if(d===by)return s.RG_INTEGER;if(d===_y)return s.RGBA_INTEGER;if(d===Zf||d===Kf||d===Qf||d===Jf)if(U===Ur)if(D=r.get("WEBGL_compressed_texture_s3tc_srgb"),D!==null){if(d===Zf)return D.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(d===Kf)return D.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(d===Qf)return D.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(d===Jf)return D.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(D=r.get("WEBGL_compressed_texture_s3tc"),D!==null){if(d===Zf)return D.COMPRESSED_RGB_S3TC_DXT1_EXT;if(d===Kf)return D.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(d===Qf)return D.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(d===Jf)return D.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(d===_m||d===xm||d===Sm||d===wm)if(D=r.get("WEBGL_compressed_texture_pvrtc"),D!==null){if(d===_m)return D.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(d===xm)return D.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(d===Sm)return D.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(d===wm)return D.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(d===Mm||d===Em||d===Tm)if(D=r.get("WEBGL_compressed_texture_etc"),D!==null){if(d===Mm||d===Em)return U===Ur?D.COMPRESSED_SRGB8_ETC2:D.COMPRESSED_RGB8_ETC2;if(d===Tm)return U===Ur?D.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:D.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(d===Am||d===jm||d===Rm||d===Cm||d===Dm||d===Lm||d===Om||d===Pm||d===Um||d===Nm||d===Im||d===km||d===Fm||d===Bm)if(D=r.get("WEBGL_compressed_texture_astc"),D!==null){if(d===Am)return U===Ur?D.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:D.COMPRESSED_RGBA_ASTC_4x4_KHR;if(d===jm)return U===Ur?D.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:D.COMPRESSED_RGBA_ASTC_5x4_KHR;if(d===Rm)return U===Ur?D.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:D.COMPRESSED_RGBA_ASTC_5x5_KHR;if(d===Cm)return U===Ur?D.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:D.COMPRESSED_RGBA_ASTC_6x5_KHR;if(d===Dm)return U===Ur?D.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:D.COMPRESSED_RGBA_ASTC_6x6_KHR;if(d===Lm)return U===Ur?D.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:D.COMPRESSED_RGBA_ASTC_8x5_KHR;if(d===Om)return U===Ur?D.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:D.COMPRESSED_RGBA_ASTC_8x6_KHR;if(d===Pm)return U===Ur?D.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:D.COMPRESSED_RGBA_ASTC_8x8_KHR;if(d===Um)return U===Ur?D.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:D.COMPRESSED_RGBA_ASTC_10x5_KHR;if(d===Nm)return U===Ur?D.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:D.COMPRESSED_RGBA_ASTC_10x6_KHR;if(d===Im)return U===Ur?D.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:D.COMPRESSED_RGBA_ASTC_10x8_KHR;if(d===km)return U===Ur?D.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:D.COMPRESSED_RGBA_ASTC_10x10_KHR;if(d===Fm)return U===Ur?D.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:D.COMPRESSED_RGBA_ASTC_12x10_KHR;if(d===Bm)return U===Ur?D.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:D.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(d===$f||d===zm||d===Vm)if(D=r.get("EXT_texture_compression_bptc"),D!==null){if(d===$f)return U===Ur?D.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:D.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(d===zm)return D.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(d===Vm)return D.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(d===j1||d===Gm||d===Hm||d===Wm)if(D=r.get("EXT_texture_compression_rgtc"),D!==null){if(d===$f)return D.COMPRESSED_RED_RGTC1_EXT;if(d===Gm)return D.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(d===Hm)return D.COMPRESSED_RED_GREEN_RGTC2_EXT;if(d===Wm)return D.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return d===Iu?s.UNSIGNED_INT_24_8:s[d]!==void 0?s[d]:null}return{convert:i}}const Qj=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Jj=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class $j{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(r,i,d){if(this.texture===null){const T=new Vn,D=r.properties.get(T);D.__webglTexture=i.texture,(i.depthNear!==d.depthNear||i.depthFar!==d.depthFar)&&(this.depthNear=i.depthNear,this.depthFar=i.depthFar),this.texture=T}}getMesh(r){if(this.texture!==null&&this.mesh===null){const i=r.cameras[0].viewport,d=new Us({vertexShader:Qj,fragmentShader:Jj,uniforms:{depthColor:{value:this.texture},depthWidth:{value:i.z},depthHeight:{value:i.w}}});this.mesh=new ts(new Ju(20,20),d)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class eR extends wl{constructor(r,i){super();const d=this;let T=null,D=1,U=null,t="local-floor",R=1,M=null,p=null,f=null,h=null,b=null,w=null;const c=new $j,l=i.getContextAttributes();let o=null,u=null;const m=[],g=[],_=new zr;let v=null;const x=new Ai;x.viewport=new fn;const E=new Ai;E.viewport=new fn;const j=[x,E],O=new xM;let P=null,L=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(te){let se=m[te];return se===void 0&&(se=new Bp,m[te]=se),se.getTargetRaySpace()},this.getControllerGrip=function(te){let se=m[te];return se===void 0&&(se=new Bp,m[te]=se),se.getGripSpace()},this.getHand=function(te){let se=m[te];return se===void 0&&(se=new Bp,m[te]=se),se.getHandSpace()};function z(te){const se=g.indexOf(te.inputSource);if(se===-1)return;const ce=m[se];ce!==void 0&&(ce.update(te.inputSource,te.frame,M||U),ce.dispatchEvent({type:te.type,data:te.inputSource}))}function N(){T.removeEventListener("select",z),T.removeEventListener("selectstart",z),T.removeEventListener("selectend",z),T.removeEventListener("squeeze",z),T.removeEventListener("squeezestart",z),T.removeEventListener("squeezeend",z),T.removeEventListener("end",N),T.removeEventListener("inputsourceschange",V);for(let te=0;te<m.length;te++){const se=g[te];se!==null&&(g[te]=null,m[te].disconnect(se))}P=null,L=null,c.reset(),r.setRenderTarget(o),b=null,h=null,f=null,T=null,u=null,ee.stop(),d.isPresenting=!1,r.setPixelRatio(v),r.setSize(_.width,_.height,!1),d.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(te){D=te,d.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(te){t=te,d.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return M||U},this.setReferenceSpace=function(te){M=te},this.getBaseLayer=function(){return h!==null?h:b},this.getBinding=function(){return f},this.getFrame=function(){return w},this.getSession=function(){return T},this.setSession=async function(te){if(T=te,T!==null){if(o=r.getRenderTarget(),T.addEventListener("select",z),T.addEventListener("selectstart",z),T.addEventListener("selectend",z),T.addEventListener("squeeze",z),T.addEventListener("squeezestart",z),T.addEventListener("squeezeend",z),T.addEventListener("end",N),T.addEventListener("inputsourceschange",V),l.xrCompatible!==!0&&await i.makeXRCompatible(),v=r.getPixelRatio(),r.getSize(_),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let ce=null,q=null,Z=null;l.depth&&(Z=l.stencil?i.DEPTH24_STENCIL8:i.DEPTH_COMPONENT24,ce=l.stencil?Fu:ku,q=l.stencil?Iu:ao);const ie={colorFormat:i.RGBA8,depthFormat:Z,scaleFactor:D};f=new XRWebGLBinding(T,i),h=f.createProjectionLayer(ie),T.updateRenderState({layers:[h]}),r.setPixelRatio(1),r.setSize(h.textureWidth,h.textureHeight,!1),u=new oo(h.textureWidth,h.textureHeight,{format:Vi,type:Os,depthTexture:new z1(h.textureWidth,h.textureHeight,q,void 0,void 0,void 0,void 0,void 0,void 0,ce),stencilBuffer:l.stencil,colorSpace:r.outputColorSpace,samples:l.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1,resolveStencilBuffer:h.ignoreDepthValues===!1})}else{const ce={antialias:l.antialias,alpha:!0,depth:l.depth,stencil:l.stencil,framebufferScaleFactor:D};b=new XRWebGLLayer(T,i,ce),T.updateRenderState({baseLayer:b}),r.setPixelRatio(1),r.setSize(b.framebufferWidth,b.framebufferHeight,!1),u=new oo(b.framebufferWidth,b.framebufferHeight,{format:Vi,type:Os,colorSpace:r.outputColorSpace,stencilBuffer:l.stencil,resolveDepthBuffer:b.ignoreDepthValues===!1,resolveStencilBuffer:b.ignoreDepthValues===!1})}u.isXRRenderTarget=!0,this.setFoveation(R),M=null,U=await T.requestReferenceSpace(t),ee.setContext(T),ee.start(),d.isPresenting=!0,d.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(T!==null)return T.environmentBlendMode},this.getDepthTexture=function(){return c.getDepthTexture()};function V(te){for(let se=0;se<te.removed.length;se++){const ce=te.removed[se],q=g.indexOf(ce);q>=0&&(g[q]=null,m[q].disconnect(ce))}for(let se=0;se<te.added.length;se++){const ce=te.added[se];let q=g.indexOf(ce);if(q===-1){for(let ie=0;ie<m.length;ie++)if(ie>=g.length){g.push(ce),q=ie;break}else if(g[ie]===null){g[ie]=ce,q=ie;break}if(q===-1)break}const Z=m[q];Z&&Z.connect(ce)}}const k=new pt,H=new pt;function G(te,se,ce){k.setFromMatrixPosition(se.matrixWorld),H.setFromMatrixPosition(ce.matrixWorld);const q=k.distanceTo(H),Z=se.projectionMatrix.elements,ie=ce.projectionMatrix.elements,pe=Z[14]/(Z[10]-1),ge=Z[14]/(Z[10]+1),be=(Z[9]+1)/Z[5],le=(Z[9]-1)/Z[5],re=(Z[8]-1)/Z[0],Te=(ie[8]+1)/ie[0],Ce=pe*re,Me=pe*Te,Se=q/(-re+Te),Ue=Se*-re;if(se.matrixWorld.decompose(te.position,te.quaternion,te.scale),te.translateX(Ue),te.translateZ(Se),te.matrixWorld.compose(te.position,te.quaternion,te.scale),te.matrixWorldInverse.copy(te.matrixWorld).invert(),Z[10]===-1)te.projectionMatrix.copy(se.projectionMatrix),te.projectionMatrixInverse.copy(se.projectionMatrixInverse);else{const Fe=pe+Se,Be=ge+Se,st=Ce-Ue,ve=Me+(q-Ue),ue=be*ge/Be*Fe,ze=le*ge/Be*Fe;te.projectionMatrix.makePerspective(st,ve,ue,ze,Fe,Be),te.projectionMatrixInverse.copy(te.projectionMatrix).invert()}}function F(te,se){se===null?te.matrixWorld.copy(te.matrix):te.matrixWorld.multiplyMatrices(se.matrixWorld,te.matrix),te.matrixWorldInverse.copy(te.matrixWorld).invert()}this.updateCamera=function(te){if(T===null)return;let se=te.near,ce=te.far;c.texture!==null&&(c.depthNear>0&&(se=c.depthNear),c.depthFar>0&&(ce=c.depthFar)),O.near=E.near=x.near=se,O.far=E.far=x.far=ce,(P!==O.near||L!==O.far)&&(T.updateRenderState({depthNear:O.near,depthFar:O.far}),P=O.near,L=O.far),x.layers.mask=te.layers.mask|2,E.layers.mask=te.layers.mask|4,O.layers.mask=x.layers.mask|E.layers.mask;const q=te.parent,Z=O.cameras;F(O,q);for(let ie=0;ie<Z.length;ie++)F(Z[ie],q);Z.length===2?G(O,x,E):O.projectionMatrix.copy(x.projectionMatrix),W(te,O,q)};function W(te,se,ce){ce===null?te.matrix.copy(se.matrixWorld):(te.matrix.copy(ce.matrixWorld),te.matrix.invert(),te.matrix.multiply(se.matrixWorld)),te.matrix.decompose(te.position,te.quaternion,te.scale),te.updateMatrixWorld(!0),te.projectionMatrix.copy(se.projectionMatrix),te.projectionMatrixInverse.copy(se.projectionMatrixInverse),te.isPerspectiveCamera&&(te.fov=Xm*2*Math.atan(1/te.projectionMatrix.elements[5]),te.zoom=1)}this.getCamera=function(){return O},this.getFoveation=function(){if(!(h===null&&b===null))return R},this.setFoveation=function(te){R=te,h!==null&&(h.fixedFoveation=te),b!==null&&b.fixedFoveation!==void 0&&(b.fixedFoveation=te)},this.hasDepthSensing=function(){return c.texture!==null},this.getDepthSensingMesh=function(){return c.getMesh(O)};let Q=null;function J(te,se){if(p=se.getViewerPose(M||U),w=se,p!==null){const ce=p.views;b!==null&&(r.setRenderTargetFramebuffer(u,b.framebuffer),r.setRenderTarget(u));let q=!1;ce.length!==O.cameras.length&&(O.cameras.length=0,q=!0);for(let pe=0;pe<ce.length;pe++){const ge=ce[pe];let be=null;if(b!==null)be=b.getViewport(ge);else{const re=f.getViewSubImage(h,ge);be=re.viewport,pe===0&&(r.setRenderTargetTextures(u,re.colorTexture,re.depthStencilTexture),r.setRenderTarget(u))}let le=j[pe];le===void 0&&(le=new Ai,le.layers.enable(pe),le.viewport=new fn,j[pe]=le),le.matrix.fromArray(ge.transform.matrix),le.matrix.decompose(le.position,le.quaternion,le.scale),le.projectionMatrix.fromArray(ge.projectionMatrix),le.projectionMatrixInverse.copy(le.projectionMatrix).invert(),le.viewport.set(be.x,be.y,be.width,be.height),pe===0&&(O.matrix.copy(le.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale)),q===!0&&O.cameras.push(le)}const Z=T.enabledFeatures;if(Z&&Z.includes("depth-sensing")&&T.depthUsage=="gpu-optimized"&&f){const pe=f.getDepthInformation(ce[0]);pe&&pe.isValid&&pe.texture&&c.init(r,pe,T.renderState)}}for(let ce=0;ce<m.length;ce++){const q=g[ce],Z=m[ce];q!==null&&Z!==void 0&&Z.update(q,se,M||U)}Q&&Q(te,se),se.detectedPlanes&&d.dispatchEvent({type:"planesdetected",data:se}),w=null}const ee=new V1;ee.setAnimationLoop(J),this.setAnimationLoop=function(te){Q=te},this.dispose=function(){}}}const Xa=new Ps,tR=new yn;function rR(s,r){function i(l,o){l.matrixAutoUpdate===!0&&l.updateMatrix(),o.value.copy(l.matrix)}function d(l,o){o.color.getRGB(l.fogColor.value,I1(s)),o.isFog?(l.fogNear.value=o.near,l.fogFar.value=o.far):o.isFogExp2&&(l.fogDensity.value=o.density)}function T(l,o,u,m,g){o.isMeshBasicMaterial||o.isMeshLambertMaterial?D(l,o):o.isMeshToonMaterial?(D(l,o),f(l,o)):o.isMeshPhongMaterial?(D(l,o),p(l,o)):o.isMeshStandardMaterial?(D(l,o),h(l,o),o.isMeshPhysicalMaterial&&b(l,o,g)):o.isMeshMatcapMaterial?(D(l,o),w(l,o)):o.isMeshDepthMaterial?D(l,o):o.isMeshDistanceMaterial?(D(l,o),c(l,o)):o.isMeshNormalMaterial?D(l,o):o.isLineBasicMaterial?(U(l,o),o.isLineDashedMaterial&&t(l,o)):o.isPointsMaterial?R(l,o,u,m):o.isSpriteMaterial?M(l,o):o.isShadowMaterial?(l.color.value.copy(o.color),l.opacity.value=o.opacity):o.isShaderMaterial&&(o.uniformsNeedUpdate=!1)}function D(l,o){l.opacity.value=o.opacity,o.color&&l.diffuse.value.copy(o.color),o.emissive&&l.emissive.value.copy(o.emissive).multiplyScalar(o.emissiveIntensity),o.map&&(l.map.value=o.map,i(o.map,l.mapTransform)),o.alphaMap&&(l.alphaMap.value=o.alphaMap,i(o.alphaMap,l.alphaMapTransform)),o.bumpMap&&(l.bumpMap.value=o.bumpMap,i(o.bumpMap,l.bumpMapTransform),l.bumpScale.value=o.bumpScale,o.side===Qn&&(l.bumpScale.value*=-1)),o.normalMap&&(l.normalMap.value=o.normalMap,i(o.normalMap,l.normalMapTransform),l.normalScale.value.copy(o.normalScale),o.side===Qn&&l.normalScale.value.negate()),o.displacementMap&&(l.displacementMap.value=o.displacementMap,i(o.displacementMap,l.displacementMapTransform),l.displacementScale.value=o.displacementScale,l.displacementBias.value=o.displacementBias),o.emissiveMap&&(l.emissiveMap.value=o.emissiveMap,i(o.emissiveMap,l.emissiveMapTransform)),o.specularMap&&(l.specularMap.value=o.specularMap,i(o.specularMap,l.specularMapTransform)),o.alphaTest>0&&(l.alphaTest.value=o.alphaTest);const u=r.get(o),m=u.envMap,g=u.envMapRotation;m&&(l.envMap.value=m,Xa.copy(g),Xa.x*=-1,Xa.y*=-1,Xa.z*=-1,m.isCubeTexture&&m.isRenderTargetTexture===!1&&(Xa.y*=-1,Xa.z*=-1),l.envMapRotation.value.setFromMatrix4(tR.makeRotationFromEuler(Xa)),l.flipEnvMap.value=m.isCubeTexture&&m.isRenderTargetTexture===!1?-1:1,l.reflectivity.value=o.reflectivity,l.ior.value=o.ior,l.refractionRatio.value=o.refractionRatio),o.lightMap&&(l.lightMap.value=o.lightMap,l.lightMapIntensity.value=o.lightMapIntensity,i(o.lightMap,l.lightMapTransform)),o.aoMap&&(l.aoMap.value=o.aoMap,l.aoMapIntensity.value=o.aoMapIntensity,i(o.aoMap,l.aoMapTransform))}function U(l,o){l.diffuse.value.copy(o.color),l.opacity.value=o.opacity,o.map&&(l.map.value=o.map,i(o.map,l.mapTransform))}function t(l,o){l.dashSize.value=o.dashSize,l.totalSize.value=o.dashSize+o.gapSize,l.scale.value=o.scale}function R(l,o,u,m){l.diffuse.value.copy(o.color),l.opacity.value=o.opacity,l.size.value=o.size*u,l.scale.value=m*.5,o.map&&(l.map.value=o.map,i(o.map,l.uvTransform)),o.alphaMap&&(l.alphaMap.value=o.alphaMap,i(o.alphaMap,l.alphaMapTransform)),o.alphaTest>0&&(l.alphaTest.value=o.alphaTest)}function M(l,o){l.diffuse.value.copy(o.color),l.opacity.value=o.opacity,l.rotation.value=o.rotation,o.map&&(l.map.value=o.map,i(o.map,l.mapTransform)),o.alphaMap&&(l.alphaMap.value=o.alphaMap,i(o.alphaMap,l.alphaMapTransform)),o.alphaTest>0&&(l.alphaTest.value=o.alphaTest)}function p(l,o){l.specular.value.copy(o.specular),l.shininess.value=Math.max(o.shininess,1e-4)}function f(l,o){o.gradientMap&&(l.gradientMap.value=o.gradientMap)}function h(l,o){l.metalness.value=o.metalness,o.metalnessMap&&(l.metalnessMap.value=o.metalnessMap,i(o.metalnessMap,l.metalnessMapTransform)),l.roughness.value=o.roughness,o.roughnessMap&&(l.roughnessMap.value=o.roughnessMap,i(o.roughnessMap,l.roughnessMapTransform)),o.envMap&&(l.envMapIntensity.value=o.envMapIntensity)}function b(l,o,u){l.ior.value=o.ior,o.sheen>0&&(l.sheenColor.value.copy(o.sheenColor).multiplyScalar(o.sheen),l.sheenRoughness.value=o.sheenRoughness,o.sheenColorMap&&(l.sheenColorMap.value=o.sheenColorMap,i(o.sheenColorMap,l.sheenColorMapTransform)),o.sheenRoughnessMap&&(l.sheenRoughnessMap.value=o.sheenRoughnessMap,i(o.sheenRoughnessMap,l.sheenRoughnessMapTransform))),o.clearcoat>0&&(l.clearcoat.value=o.clearcoat,l.clearcoatRoughness.value=o.clearcoatRoughness,o.clearcoatMap&&(l.clearcoatMap.value=o.clearcoatMap,i(o.clearcoatMap,l.clearcoatMapTransform)),o.clearcoatRoughnessMap&&(l.clearcoatRoughnessMap.value=o.clearcoatRoughnessMap,i(o.clearcoatRoughnessMap,l.clearcoatRoughnessMapTransform)),o.clearcoatNormalMap&&(l.clearcoatNormalMap.value=o.clearcoatNormalMap,i(o.clearcoatNormalMap,l.clearcoatNormalMapTransform),l.clearcoatNormalScale.value.copy(o.clearcoatNormalScale),o.side===Qn&&l.clearcoatNormalScale.value.negate())),o.dispersion>0&&(l.dispersion.value=o.dispersion),o.iridescence>0&&(l.iridescence.value=o.iridescence,l.iridescenceIOR.value=o.iridescenceIOR,l.iridescenceThicknessMinimum.value=o.iridescenceThicknessRange[0],l.iridescenceThicknessMaximum.value=o.iridescenceThicknessRange[1],o.iridescenceMap&&(l.iridescenceMap.value=o.iridescenceMap,i(o.iridescenceMap,l.iridescenceMapTransform)),o.iridescenceThicknessMap&&(l.iridescenceThicknessMap.value=o.iridescenceThicknessMap,i(o.iridescenceThicknessMap,l.iridescenceThicknessMapTransform))),o.transmission>0&&(l.transmission.value=o.transmission,l.transmissionSamplerMap.value=u.texture,l.transmissionSamplerSize.value.set(u.width,u.height),o.transmissionMap&&(l.transmissionMap.value=o.transmissionMap,i(o.transmissionMap,l.transmissionMapTransform)),l.thickness.value=o.thickness,o.thicknessMap&&(l.thicknessMap.value=o.thicknessMap,i(o.thicknessMap,l.thicknessMapTransform)),l.attenuationDistance.value=o.attenuationDistance,l.attenuationColor.value.copy(o.attenuationColor)),o.anisotropy>0&&(l.anisotropyVector.value.set(o.anisotropy*Math.cos(o.anisotropyRotation),o.anisotropy*Math.sin(o.anisotropyRotation)),o.anisotropyMap&&(l.anisotropyMap.value=o.anisotropyMap,i(o.anisotropyMap,l.anisotropyMapTransform))),l.specularIntensity.value=o.specularIntensity,l.specularColor.value.copy(o.specularColor),o.specularColorMap&&(l.specularColorMap.value=o.specularColorMap,i(o.specularColorMap,l.specularColorMapTransform)),o.specularIntensityMap&&(l.specularIntensityMap.value=o.specularIntensityMap,i(o.specularIntensityMap,l.specularIntensityMapTransform))}function w(l,o){o.matcap&&(l.matcap.value=o.matcap)}function c(l,o){const u=r.get(o).light;l.referencePosition.value.setFromMatrixPosition(u.matrixWorld),l.nearDistance.value=u.shadow.camera.near,l.farDistance.value=u.shadow.camera.far}return{refreshFogUniforms:d,refreshMaterialUniforms:T}}function nR(s,r,i,d){let T={},D={},U=[];const t=s.getParameter(s.MAX_UNIFORM_BUFFER_BINDINGS);function R(u,m){const g=m.program;d.uniformBlockBinding(u,g)}function M(u,m){let g=T[u.id];g===void 0&&(w(u),g=p(u),T[u.id]=g,u.addEventListener("dispose",l));const _=m.program;d.updateUBOMapping(u,_);const v=r.render.frame;D[u.id]!==v&&(h(u),D[u.id]=v)}function p(u){const m=f();u.__bindingPointIndex=m;const g=s.createBuffer(),_=u.__size,v=u.usage;return s.bindBuffer(s.UNIFORM_BUFFER,g),s.bufferData(s.UNIFORM_BUFFER,_,v),s.bindBuffer(s.UNIFORM_BUFFER,null),s.bindBufferBase(s.UNIFORM_BUFFER,m,g),g}function f(){for(let u=0;u<t;u++)if(U.indexOf(u)===-1)return U.push(u),u;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(u){const m=T[u.id],g=u.uniforms,_=u.__cache;s.bindBuffer(s.UNIFORM_BUFFER,m);for(let v=0,x=g.length;v<x;v++){const E=Array.isArray(g[v])?g[v]:[g[v]];for(let j=0,O=E.length;j<O;j++){const P=E[j];if(b(P,v,j,_)===!0){const L=P.__offset,z=Array.isArray(P.value)?P.value:[P.value];let N=0;for(let V=0;V<z.length;V++){const k=z[V],H=c(k);typeof k=="number"||typeof k=="boolean"?(P.__data[0]=k,s.bufferSubData(s.UNIFORM_BUFFER,L+N,P.__data)):k.isMatrix3?(P.__data[0]=k.elements[0],P.__data[1]=k.elements[1],P.__data[2]=k.elements[2],P.__data[3]=0,P.__data[4]=k.elements[3],P.__data[5]=k.elements[4],P.__data[6]=k.elements[5],P.__data[7]=0,P.__data[8]=k.elements[6],P.__data[9]=k.elements[7],P.__data[10]=k.elements[8],P.__data[11]=0):(k.toArray(P.__data,N),N+=H.storage/Float32Array.BYTES_PER_ELEMENT)}s.bufferSubData(s.UNIFORM_BUFFER,L,P.__data)}}}s.bindBuffer(s.UNIFORM_BUFFER,null)}function b(u,m,g,_){const v=u.value,x=m+"_"+g;if(_[x]===void 0)return typeof v=="number"||typeof v=="boolean"?_[x]=v:_[x]=v.clone(),!0;{const E=_[x];if(typeof v=="number"||typeof v=="boolean"){if(E!==v)return _[x]=v,!0}else if(E.equals(v)===!1)return E.copy(v),!0}return!1}function w(u){const m=u.uniforms;let g=0;const _=16;for(let x=0,E=m.length;x<E;x++){const j=Array.isArray(m[x])?m[x]:[m[x]];for(let O=0,P=j.length;O<P;O++){const L=j[O],z=Array.isArray(L.value)?L.value:[L.value];for(let N=0,V=z.length;N<V;N++){const k=z[N],H=c(k),G=g%_,F=G%H.boundary,W=G+F;g+=F,W!==0&&_-W<H.storage&&(g+=_-W),L.__data=new Float32Array(H.storage/Float32Array.BYTES_PER_ELEMENT),L.__offset=g,g+=H.storage}}}const v=g%_;return v>0&&(g+=_-v),u.__size=g,u.__cache={},this}function c(u){const m={boundary:0,storage:0};return typeof u=="number"||typeof u=="boolean"?(m.boundary=4,m.storage=4):u.isVector2?(m.boundary=8,m.storage=8):u.isVector3||u.isColor?(m.boundary=16,m.storage=12):u.isVector4?(m.boundary=16,m.storage=16):u.isMatrix3?(m.boundary=48,m.storage=48):u.isMatrix4?(m.boundary=64,m.storage=64):u.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",u),m}function l(u){const m=u.target;m.removeEventListener("dispose",l);const g=U.indexOf(m.__bindingPointIndex);U.splice(g,1),s.deleteBuffer(T[m.id]),delete T[m.id],delete D[m.id]}function o(){for(const u in T)s.deleteBuffer(T[u]);U=[],T={},D={}}return{bind:R,update:M,dispose:o}}class iR{constructor(r={}){const{canvas:i=Fw(),context:d=null,depth:T=!0,stencil:D=!1,alpha:U=!1,antialias:t=!1,premultipliedAlpha:R=!0,preserveDrawingBuffer:M=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:h=!1}=r;this.isWebGLRenderer=!0;let b;if(d!==null){if(typeof WebGLRenderingContext<"u"&&d instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");b=d.getContextAttributes().alpha}else b=U;const w=new Uint32Array(4),c=new Int32Array(4);let l=null,o=null;const u=[],m=[];this.domElement=i,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=va,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const g=this;let _=!1;this._outputColorSpace=Ti;let v=0,x=0,E=null,j=-1,O=null;const P=new fn,L=new fn;let z=null;const N=new Nr(0);let V=0,k=i.width,H=i.height,G=1,F=null,W=null;const Q=new fn(0,0,k,H),J=new fn(0,0,k,H);let ee=!1;const te=new B1;let se=!1,ce=!1;const q=new yn,Z=new yn,ie=new pt,pe=new fn,ge={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let be=!1;function le(){return E===null?G:1}let re=d;function Te(ye,Re){return i.getContext(ye,Re)}try{const ye={alpha:!0,depth:T,stencil:D,antialias:t,premultipliedAlpha:R,preserveDrawingBuffer:M,powerPreference:p,failIfMajorPerformanceCaveat:f};if("setAttribute"in i&&i.setAttribute("data-engine",`three.js r${py}`),i.addEventListener("webglcontextlost",$e,!1),i.addEventListener("webglcontextrestored",Ee,!1),i.addEventListener("webglcontextcreationerror",Ge,!1),re===null){const Re="webgl2";if(re=Te(Re,ye),re===null)throw Te(Re)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ye){throw console.error("THREE.WebGLRenderer: "+ye.message),ye}let Ce,Me,Se,Ue,Fe,Be,st,ve,ue,ze,He,me,je,Ie,Ye,it,yt,Ze,at,fe,ae,oe,_e,he;function ke(){Ce=new pA(re),Ce.init(),oe=new Kj(re,Ce),Me=new oA(re,Ce,r,oe),Se=new Yj(re,Ce),Me.reverseDepthBuffer&&h&&Se.buffers.depth.setReversed(!0),Ue=new gA(re),Fe=new Uj,Be=new Zj(re,Ce,Se,Fe,Me,oe,Ue),st=new uA(g),ve=new hA(g),ue=new wM(re),_e=new sA(re,ue),ze=new mA(re,ue,Ue,_e),He=new bA(re,ze,ue,Ue),at=new vA(re,Me,Be),it=new lA(Fe),me=new Pj(g,st,ve,Ce,Me,_e,it),je=new rR(g,Fe),Ie=new Ij,Ye=new Gj(Ce),Ze=new iA(g,st,ve,Se,He,b,R),yt=new Xj(g,He,Me),he=new nR(re,Ue,Me,Se),fe=new aA(re,Ce,Ue),ae=new yA(re,Ce,Ue),Ue.programs=me.programs,g.capabilities=Me,g.extensions=Ce,g.properties=Fe,g.renderLists=Ie,g.shadowMap=yt,g.state=Se,g.info=Ue}ke();const We=new eR(g,re);this.xr=We,this.getContext=function(){return re},this.getContextAttributes=function(){return re.getContextAttributes()},this.forceContextLoss=function(){const ye=Ce.get("WEBGL_lose_context");ye&&ye.loseContext()},this.forceContextRestore=function(){const ye=Ce.get("WEBGL_lose_context");ye&&ye.restoreContext()},this.getPixelRatio=function(){return G},this.setPixelRatio=function(ye){ye!==void 0&&(G=ye,this.setSize(k,H,!1))},this.getSize=function(ye){return ye.set(k,H)},this.setSize=function(ye,Re,Ke=!0){if(We.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}k=ye,H=Re,i.width=Math.floor(ye*G),i.height=Math.floor(Re*G),Ke===!0&&(i.style.width=ye+"px",i.style.height=Re+"px"),this.setViewport(0,0,ye,Re)},this.getDrawingBufferSize=function(ye){return ye.set(k*G,H*G).floor()},this.setDrawingBufferSize=function(ye,Re,Ke){k=ye,H=Re,G=Ke,i.width=Math.floor(ye*Ke),i.height=Math.floor(Re*Ke),this.setViewport(0,0,ye,Re)},this.getCurrentViewport=function(ye){return ye.copy(P)},this.getViewport=function(ye){return ye.copy(Q)},this.setViewport=function(ye,Re,Ke,Oe){ye.isVector4?Q.set(ye.x,ye.y,ye.z,ye.w):Q.set(ye,Re,Ke,Oe),Se.viewport(P.copy(Q).multiplyScalar(G).round())},this.getScissor=function(ye){return ye.copy(J)},this.setScissor=function(ye,Re,Ke,Oe){ye.isVector4?J.set(ye.x,ye.y,ye.z,ye.w):J.set(ye,Re,Ke,Oe),Se.scissor(L.copy(J).multiplyScalar(G).round())},this.getScissorTest=function(){return ee},this.setScissorTest=function(ye){Se.setScissorTest(ee=ye)},this.setOpaqueSort=function(ye){F=ye},this.setTransparentSort=function(ye){W=ye},this.getClearColor=function(ye){return ye.copy(Ze.getClearColor())},this.setClearColor=function(){Ze.setClearColor(...arguments)},this.getClearAlpha=function(){return Ze.getClearAlpha()},this.setClearAlpha=function(){Ze.setClearAlpha(...arguments)},this.clear=function(ye=!0,Re=!0,Ke=!0){let Oe=0;if(ye){let Xe=!1;if(E!==null){const rt=E.texture.format;Xe=rt===_y||rt===by||rt===vy}if(Xe){const rt=E.texture.type,vt=rt===Os||rt===ao||rt===Nu||rt===Iu||rt===yy||rt===gy,dt=Ze.getClearColor(),Mt=Ze.getClearAlpha(),Dt=dt.r,Ot=dt.g,Tt=dt.b;vt?(w[0]=Dt,w[1]=Ot,w[2]=Tt,w[3]=Mt,re.clearBufferuiv(re.COLOR,0,w)):(c[0]=Dt,c[1]=Ot,c[2]=Tt,c[3]=Mt,re.clearBufferiv(re.COLOR,0,c))}else Oe|=re.COLOR_BUFFER_BIT}Re&&(Oe|=re.DEPTH_BUFFER_BIT),Ke&&(Oe|=re.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),re.clear(Oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",$e,!1),i.removeEventListener("webglcontextrestored",Ee,!1),i.removeEventListener("webglcontextcreationerror",Ge,!1),Ze.dispose(),Ie.dispose(),Ye.dispose(),Fe.dispose(),st.dispose(),ve.dispose(),He.dispose(),_e.dispose(),he.dispose(),me.dispose(),We.dispose(),We.removeEventListener("sessionstart",Gt),We.removeEventListener("sessionend",Kt),vr.stop()};function $e(ye){ye.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function Ee(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;const ye=Ue.autoReset,Re=yt.enabled,Ke=yt.autoUpdate,Oe=yt.needsUpdate,Xe=yt.type;ke(),Ue.autoReset=ye,yt.enabled=Re,yt.autoUpdate=Ke,yt.needsUpdate=Oe,yt.type=Xe}function Ge(ye){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ye.statusMessage)}function ht(ye){const Re=ye.target;Re.removeEventListener("dispose",ht),wt(Re)}function wt(ye){Lt(ye),Fe.remove(ye)}function Lt(ye){const Re=Fe.get(ye).programs;Re!==void 0&&(Re.forEach(function(Ke){me.releaseProgram(Ke)}),ye.isShaderMaterial&&me.releaseShaderCache(ye))}this.renderBufferDirect=function(ye,Re,Ke,Oe,Xe,rt){Re===null&&(Re=ge);const vt=Xe.isMesh&&Xe.matrixWorld.determinant()<0,dt=ci(ye,Re,Ke,Oe,Xe);Se.setMaterial(Oe,vt);let Mt=Ke.index,Dt=1;if(Oe.wireframe===!0){if(Mt=ze.getWireframeAttribute(Ke),Mt===void 0)return;Dt=2}const Ot=Ke.drawRange,Tt=Ke.attributes.position;let It=Ot.start*Dt,Xt=(Ot.start+Ot.count)*Dt;rt!==null&&(It=Math.max(It,rt.start*Dt),Xt=Math.min(Xt,(rt.start+rt.count)*Dt)),Mt!==null?(It=Math.max(It,0),Xt=Math.min(Xt,Mt.count)):Tt!=null&&(It=Math.max(It,0),Xt=Math.min(Xt,Tt.count));const Qt=Xt-It;if(Qt<0||Qt===1/0)return;_e.setup(Xe,Oe,dt,Ke,Mt);let Vt,ur=fe;if(Mt!==null&&(Vt=ue.get(Mt),ur=ae,ur.setIndex(Vt)),Xe.isMesh)Oe.wireframe===!0?(Se.setLineWidth(Oe.wireframeLinewidth*le()),ur.setMode(re.LINES)):ur.setMode(re.TRIANGLES);else if(Xe.isLine){let zt=Oe.linewidth;zt===void 0&&(zt=1),Se.setLineWidth(zt*le()),Xe.isLineSegments?ur.setMode(re.LINES):Xe.isLineLoop?ur.setMode(re.LINE_LOOP):ur.setMode(re.LINE_STRIP)}else Xe.isPoints?ur.setMode(re.POINTS):Xe.isSprite&&ur.setMode(re.TRIANGLES);if(Xe.isBatchedMesh)if(Xe._multiDrawInstances!==null)pl("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),ur.renderMultiDrawInstances(Xe._multiDrawStarts,Xe._multiDrawCounts,Xe._multiDrawCount,Xe._multiDrawInstances);else if(Ce.get("WEBGL_multi_draw"))ur.renderMultiDraw(Xe._multiDrawStarts,Xe._multiDrawCounts,Xe._multiDrawCount);else{const zt=Xe._multiDrawStarts,Xr=Xe._multiDrawCounts,hr=Xe._multiDrawCount,wn=Mt?ue.get(Mt).bytesPerElement:1,Gi=Fe.get(Oe).currentProgram.getUniforms();for(let jr=0;jr<hr;jr++)Gi.setValue(re,"_gl_DrawID",jr),ur.render(zt[jr]/wn,Xr[jr])}else if(Xe.isInstancedMesh)ur.renderInstances(It,Qt,Xe.count);else if(Ke.isInstancedBufferGeometry){const zt=Ke._maxInstanceCount!==void 0?Ke._maxInstanceCount:1/0,Xr=Math.min(Ke.instanceCount,zt);ur.renderInstances(It,Qt,Xr)}else ur.render(It,Qt)};function Ct(ye,Re,Ke){ye.transparent===!0&&ye.side===Rs&&ye.forceSinglePass===!1?(ye.side=Qn,ye.needsUpdate=!0,kr(ye,Re,Ke),ye.side=ba,ye.needsUpdate=!0,kr(ye,Re,Ke),ye.side=Rs):kr(ye,Re,Ke)}this.compile=function(ye,Re,Ke=null){Ke===null&&(Ke=ye),o=Ye.get(Ke),o.init(Re),m.push(o),Ke.traverseVisible(function(Xe){Xe.isLight&&Xe.layers.test(Re.layers)&&(o.pushLight(Xe),Xe.castShadow&&o.pushShadow(Xe))}),ye!==Ke&&ye.traverseVisible(function(Xe){Xe.isLight&&Xe.layers.test(Re.layers)&&(o.pushLight(Xe),Xe.castShadow&&o.pushShadow(Xe))}),o.setupLights();const Oe=new Set;return ye.traverse(function(Xe){if(!(Xe.isMesh||Xe.isPoints||Xe.isLine||Xe.isSprite))return;const rt=Xe.material;if(rt)if(Array.isArray(rt))for(let vt=0;vt<rt.length;vt++){const dt=rt[vt];Ct(dt,Ke,Xe),Oe.add(dt)}else Ct(rt,Ke,Xe),Oe.add(rt)}),o=m.pop(),Oe},this.compileAsync=function(ye,Re,Ke=null){const Oe=this.compile(ye,Re,Ke);return new Promise(Xe=>{function rt(){if(Oe.forEach(function(vt){Fe.get(vt).currentProgram.isReady()&&Oe.delete(vt)}),Oe.size===0){Xe(ye);return}setTimeout(rt,10)}Ce.get("KHR_parallel_shader_compile")!==null?rt():setTimeout(rt,10)})};let Ft=null;function Nt(ye){Ft&&Ft(ye)}function Gt(){vr.stop()}function Kt(){vr.start()}const vr=new V1;vr.setAnimationLoop(Nt),typeof self<"u"&&vr.setContext(self),this.setAnimationLoop=function(ye){Ft=ye,We.setAnimationLoop(ye),ye===null?vr.stop():vr.start()},We.addEventListener("sessionstart",Gt),We.addEventListener("sessionend",Kt),this.render=function(ye,Re){if(Re!==void 0&&Re.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(_===!0)return;if(ye.matrixWorldAutoUpdate===!0&&ye.updateMatrixWorld(),Re.parent===null&&Re.matrixWorldAutoUpdate===!0&&Re.updateMatrixWorld(),We.enabled===!0&&We.isPresenting===!0&&(We.cameraAutoUpdate===!0&&We.updateCamera(Re),Re=We.getCamera()),ye.isScene===!0&&ye.onBeforeRender(g,ye,Re,E),o=Ye.get(ye,m.length),o.init(Re),m.push(o),Z.multiplyMatrices(Re.projectionMatrix,Re.matrixWorldInverse),te.setFromProjectionMatrix(Z),ce=this.localClippingEnabled,se=it.init(this.clippingPlanes,ce),l=Ie.get(ye,u.length),l.init(),u.push(l),We.enabled===!0&&We.isPresenting===!0){const rt=g.xr.getDepthSensingMesh();rt!==null&&lr(rt,Re,-1/0,g.sortObjects)}lr(ye,Re,0,g.sortObjects),l.finish(),g.sortObjects===!0&&l.sort(F,W),be=We.enabled===!1||We.isPresenting===!1||We.hasDepthSensing()===!1,be&&Ze.addToRenderList(l,ye),this.info.render.frame++,se===!0&&it.beginShadows();const Ke=o.state.shadowsArray;yt.render(Ke,ye,Re),se===!0&&it.endShadows(),this.info.autoReset===!0&&this.info.reset();const Oe=l.opaque,Xe=l.transmissive;if(o.setupLights(),Re.isArrayCamera){const rt=Re.cameras;if(Xe.length>0)for(let vt=0,dt=rt.length;vt<dt;vt++){const Mt=rt[vt];$r(Oe,Xe,ye,Mt)}be&&Ze.render(ye);for(let vt=0,dt=rt.length;vt<dt;vt++){const Mt=rt[vt];Ir(l,ye,Mt,Mt.viewport)}}else Xe.length>0&&$r(Oe,Xe,ye,Re),be&&Ze.render(ye),Ir(l,ye,Re);E!==null&&x===0&&(Be.updateMultisampleRenderTarget(E),Be.updateRenderTargetMipmap(E)),ye.isScene===!0&&ye.onAfterRender(g,ye,Re),_e.resetDefaultState(),j=-1,O=null,m.pop(),m.length>0?(o=m[m.length-1],se===!0&&it.setGlobalState(g.clippingPlanes,o.state.camera)):o=null,u.pop(),u.length>0?l=u[u.length-1]:l=null};function lr(ye,Re,Ke,Oe){if(ye.visible===!1)return;if(ye.layers.test(Re.layers)){if(ye.isGroup)Ke=ye.renderOrder;else if(ye.isLOD)ye.autoUpdate===!0&&ye.update(Re);else if(ye.isLight)o.pushLight(ye),ye.castShadow&&o.pushShadow(ye);else if(ye.isSprite){if(!ye.frustumCulled||te.intersectsSprite(ye)){Oe&&pe.setFromMatrixPosition(ye.matrixWorld).applyMatrix4(Z);const vt=He.update(ye),dt=ye.material;dt.visible&&l.push(ye,vt,dt,Ke,pe.z,null)}}else if((ye.isMesh||ye.isLine||ye.isPoints)&&(!ye.frustumCulled||te.intersectsObject(ye))){const vt=He.update(ye),dt=ye.material;if(Oe&&(ye.boundingSphere!==void 0?(ye.boundingSphere===null&&ye.computeBoundingSphere(),pe.copy(ye.boundingSphere.center)):(vt.boundingSphere===null&&vt.computeBoundingSphere(),pe.copy(vt.boundingSphere.center)),pe.applyMatrix4(ye.matrixWorld).applyMatrix4(Z)),Array.isArray(dt)){const Mt=vt.groups;for(let Dt=0,Ot=Mt.length;Dt<Ot;Dt++){const Tt=Mt[Dt],It=dt[Tt.materialIndex];It&&It.visible&&l.push(ye,vt,It,Ke,pe.z,Tt)}}else dt.visible&&l.push(ye,vt,dt,Ke,pe.z,null)}}const rt=ye.children;for(let vt=0,dt=rt.length;vt<dt;vt++)lr(rt[vt],Re,Ke,Oe)}function Ir(ye,Re,Ke,Oe){const Xe=ye.opaque,rt=ye.transmissive,vt=ye.transparent;o.setupLightsView(Ke),se===!0&&it.setGlobalState(g.clippingPlanes,Ke),Oe&&Se.viewport(P.copy(Oe)),Xe.length>0&&er(Xe,Re,Ke),rt.length>0&&er(rt,Re,Ke),vt.length>0&&er(vt,Re,Ke),Se.buffers.depth.setTest(!0),Se.buffers.depth.setMask(!0),Se.buffers.color.setMask(!0),Se.setPolygonOffset(!1)}function $r(ye,Re,Ke,Oe){if((Ke.isScene===!0?Ke.overrideMaterial:null)!==null)return;o.state.transmissionRenderTarget[Oe.id]===void 0&&(o.state.transmissionRenderTarget[Oe.id]=new oo(1,1,{generateMipmaps:!0,type:Ce.has("EXT_color_buffer_half_float")||Ce.has("EXT_color_buffer_float")?qu:Os,minFilter:eo,samples:4,stencilBuffer:D,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:xr.workingColorSpace}));const rt=o.state.transmissionRenderTarget[Oe.id],vt=Oe.viewport||P;rt.setSize(vt.z*g.transmissionResolutionScale,vt.w*g.transmissionResolutionScale);const dt=g.getRenderTarget();g.setRenderTarget(rt),g.getClearColor(N),V=g.getClearAlpha(),V<1&&g.setClearColor(16777215,.5),g.clear(),be&&Ze.render(Ke);const Mt=g.toneMapping;g.toneMapping=va;const Dt=Oe.viewport;if(Oe.viewport!==void 0&&(Oe.viewport=void 0),o.setupLightsView(Oe),se===!0&&it.setGlobalState(g.clippingPlanes,Oe),er(ye,Ke,Oe),Be.updateMultisampleRenderTarget(rt),Be.updateRenderTargetMipmap(rt),Ce.has("WEBGL_multisampled_render_to_texture")===!1){let Ot=!1;for(let Tt=0,It=Re.length;Tt<It;Tt++){const Xt=Re[Tt],Qt=Xt.object,Vt=Xt.geometry,ur=Xt.material,zt=Xt.group;if(ur.side===Rs&&Qt.layers.test(Oe.layers)){const Xr=ur.side;ur.side=Qn,ur.needsUpdate=!0,Vr(Qt,Ke,Oe,Vt,ur,zt),ur.side=Xr,ur.needsUpdate=!0,Ot=!0}}Ot===!0&&(Be.updateMultisampleRenderTarget(rt),Be.updateRenderTargetMipmap(rt))}g.setRenderTarget(dt),g.setClearColor(N,V),Dt!==void 0&&(Oe.viewport=Dt),g.toneMapping=Mt}function er(ye,Re,Ke){const Oe=Re.isScene===!0?Re.overrideMaterial:null;for(let Xe=0,rt=ye.length;Xe<rt;Xe++){const vt=ye[Xe],dt=vt.object,Mt=vt.geometry,Dt=vt.group;let Ot=vt.material;Ot.allowOverride===!0&&Oe!==null&&(Ot=Oe),dt.layers.test(Ke.layers)&&Vr(dt,Re,Ke,Mt,Ot,Dt)}}function Vr(ye,Re,Ke,Oe,Xe,rt){ye.onBeforeRender(g,Re,Ke,Oe,Xe,rt),ye.modelViewMatrix.multiplyMatrices(Ke.matrixWorldInverse,ye.matrixWorld),ye.normalMatrix.getNormalMatrix(ye.modelViewMatrix),Xe.onBeforeRender(g,Re,Ke,Oe,ye,rt),Xe.transparent===!0&&Xe.side===Rs&&Xe.forceSinglePass===!1?(Xe.side=Qn,Xe.needsUpdate=!0,g.renderBufferDirect(Ke,Re,Oe,Xe,ye,rt),Xe.side=ba,Xe.needsUpdate=!0,g.renderBufferDirect(Ke,Re,Oe,Xe,ye,rt),Xe.side=Rs):g.renderBufferDirect(Ke,Re,Oe,Xe,ye,rt),ye.onAfterRender(g,Re,Ke,Oe,Xe,rt)}function kr(ye,Re,Ke){Re.isScene!==!0&&(Re=ge);const Oe=Fe.get(ye),Xe=o.state.lights,rt=o.state.shadowsArray,vt=Xe.state.version,dt=me.getParameters(ye,Xe.state,rt,Re,Ke),Mt=me.getProgramCacheKey(dt);let Dt=Oe.programs;Oe.environment=ye.isMeshStandardMaterial?Re.environment:null,Oe.fog=Re.fog,Oe.envMap=(ye.isMeshStandardMaterial?ve:st).get(ye.envMap||Oe.environment),Oe.envMapRotation=Oe.environment!==null&&ye.envMap===null?Re.environmentRotation:ye.envMapRotation,Dt===void 0&&(ye.addEventListener("dispose",ht),Dt=new Map,Oe.programs=Dt);let Ot=Dt.get(Mt);if(Ot!==void 0){if(Oe.currentProgram===Ot&&Oe.lightsStateVersion===vt)return Gn(ye,dt),Ot}else dt.uniforms=me.getUniforms(ye),ye.onBeforeCompile(dt,g),Ot=me.acquireProgram(dt,Mt),Dt.set(Mt,Ot),Oe.uniforms=dt.uniforms;const Tt=Oe.uniforms;return(!ye.isShaderMaterial&&!ye.isRawShaderMaterial||ye.clipping===!0)&&(Tt.clippingPlanes=it.uniform),Gn(ye,dt),Oe.needsLights=Hr(ye),Oe.lightsStateVersion=vt,Oe.needsLights&&(Tt.ambientLightColor.value=Xe.state.ambient,Tt.lightProbe.value=Xe.state.probe,Tt.directionalLights.value=Xe.state.directional,Tt.directionalLightShadows.value=Xe.state.directionalShadow,Tt.spotLights.value=Xe.state.spot,Tt.spotLightShadows.value=Xe.state.spotShadow,Tt.rectAreaLights.value=Xe.state.rectArea,Tt.ltc_1.value=Xe.state.rectAreaLTC1,Tt.ltc_2.value=Xe.state.rectAreaLTC2,Tt.pointLights.value=Xe.state.point,Tt.pointLightShadows.value=Xe.state.pointShadow,Tt.hemisphereLights.value=Xe.state.hemi,Tt.directionalShadowMap.value=Xe.state.directionalShadowMap,Tt.directionalShadowMatrix.value=Xe.state.directionalShadowMatrix,Tt.spotShadowMap.value=Xe.state.spotShadowMap,Tt.spotLightMatrix.value=Xe.state.spotLightMatrix,Tt.spotLightMap.value=Xe.state.spotLightMap,Tt.pointShadowMap.value=Xe.state.pointShadowMap,Tt.pointShadowMatrix.value=Xe.state.pointShadowMatrix),Oe.currentProgram=Ot,Oe.uniformsList=null,Ot}function ar(ye){if(ye.uniformsList===null){const Re=ye.currentProgram.getUniforms();ye.uniformsList=ed.seqWithValue(Re.seq,ye.uniforms)}return ye.uniformsList}function Gn(ye,Re){const Ke=Fe.get(ye);Ke.outputColorSpace=Re.outputColorSpace,Ke.batching=Re.batching,Ke.batchingColor=Re.batchingColor,Ke.instancing=Re.instancing,Ke.instancingColor=Re.instancingColor,Ke.instancingMorph=Re.instancingMorph,Ke.skinning=Re.skinning,Ke.morphTargets=Re.morphTargets,Ke.morphNormals=Re.morphNormals,Ke.morphColors=Re.morphColors,Ke.morphTargetsCount=Re.morphTargetsCount,Ke.numClippingPlanes=Re.numClippingPlanes,Ke.numIntersection=Re.numClipIntersection,Ke.vertexAlphas=Re.vertexAlphas,Ke.vertexTangents=Re.vertexTangents,Ke.toneMapping=Re.toneMapping}function ci(ye,Re,Ke,Oe,Xe){Re.isScene!==!0&&(Re=ge),Be.resetTextureUnits();const rt=Re.fog,vt=Oe.isMeshStandardMaterial?Re.environment:null,dt=E===null?g.outputColorSpace:E.isXRRenderTarget===!0?E.texture.colorSpace:bl,Mt=(Oe.isMeshStandardMaterial?ve:st).get(Oe.envMap||vt),Dt=Oe.vertexColors===!0&&!!Ke.attributes.color&&Ke.attributes.color.itemSize===4,Ot=!!Ke.attributes.tangent&&(!!Oe.normalMap||Oe.anisotropy>0),Tt=!!Ke.morphAttributes.position,It=!!Ke.morphAttributes.normal,Xt=!!Ke.morphAttributes.color;let Qt=va;Oe.toneMapped&&(E===null||E.isXRRenderTarget===!0)&&(Qt=g.toneMapping);const Vt=Ke.morphAttributes.position||Ke.morphAttributes.normal||Ke.morphAttributes.color,ur=Vt!==void 0?Vt.length:0,zt=Fe.get(Oe),Xr=o.state.lights;if(se===!0&&(ce===!0||ye!==O)){const dn=ye===O&&Oe.id===j;it.setState(Oe,ye,dn)}let hr=!1;Oe.version===zt.__version?(zt.needsLights&&zt.lightsStateVersion!==Xr.state.version||zt.outputColorSpace!==dt||Xe.isBatchedMesh&&zt.batching===!1||!Xe.isBatchedMesh&&zt.batching===!0||Xe.isBatchedMesh&&zt.batchingColor===!0&&Xe.colorTexture===null||Xe.isBatchedMesh&&zt.batchingColor===!1&&Xe.colorTexture!==null||Xe.isInstancedMesh&&zt.instancing===!1||!Xe.isInstancedMesh&&zt.instancing===!0||Xe.isSkinnedMesh&&zt.skinning===!1||!Xe.isSkinnedMesh&&zt.skinning===!0||Xe.isInstancedMesh&&zt.instancingColor===!0&&Xe.instanceColor===null||Xe.isInstancedMesh&&zt.instancingColor===!1&&Xe.instanceColor!==null||Xe.isInstancedMesh&&zt.instancingMorph===!0&&Xe.morphTexture===null||Xe.isInstancedMesh&&zt.instancingMorph===!1&&Xe.morphTexture!==null||zt.envMap!==Mt||Oe.fog===!0&&zt.fog!==rt||zt.numClippingPlanes!==void 0&&(zt.numClippingPlanes!==it.numPlanes||zt.numIntersection!==it.numIntersection)||zt.vertexAlphas!==Dt||zt.vertexTangents!==Ot||zt.morphTargets!==Tt||zt.morphNormals!==It||zt.morphColors!==Xt||zt.toneMapping!==Qt||zt.morphTargetsCount!==ur)&&(hr=!0):(hr=!0,zt.__version=Oe.version);let wn=zt.currentProgram;hr===!0&&(wn=kr(Oe,Re,Xe));let Gi=!1,jr=!1,nn=!1;const mr=wn.getUniforms(),sn=zt.uniforms;if(Se.useProgram(wn.program)&&(Gi=!0,jr=!0,nn=!0),Oe.id!==j&&(j=Oe.id,jr=!0),Gi||O!==ye){Se.buffers.depth.getReversed()?(q.copy(ye.projectionMatrix),zw(q),Vw(q),mr.setValue(re,"projectionMatrix",q)):mr.setValue(re,"projectionMatrix",ye.projectionMatrix),mr.setValue(re,"viewMatrix",ye.matrixWorldInverse);const gn=mr.map.cameraPosition;gn!==void 0&&gn.setValue(re,ie.setFromMatrixPosition(ye.matrixWorld)),Me.logarithmicDepthBuffer&&mr.setValue(re,"logDepthBufFC",2/(Math.log(ye.far+1)/Math.LN2)),(Oe.isMeshPhongMaterial||Oe.isMeshToonMaterial||Oe.isMeshLambertMaterial||Oe.isMeshBasicMaterial||Oe.isMeshStandardMaterial||Oe.isShaderMaterial)&&mr.setValue(re,"isOrthographic",ye.isOrthographicCamera===!0),O!==ye&&(O=ye,jr=!0,nn=!0)}if(Xe.isSkinnedMesh){mr.setOptional(re,Xe,"bindMatrix"),mr.setOptional(re,Xe,"bindMatrixInverse");const dn=Xe.skeleton;dn&&(dn.boneTexture===null&&dn.computeBoneTexture(),mr.setValue(re,"boneTexture",dn.boneTexture,Be))}Xe.isBatchedMesh&&(mr.setOptional(re,Xe,"batchingTexture"),mr.setValue(re,"batchingTexture",Xe._matricesTexture,Be),mr.setOptional(re,Xe,"batchingIdTexture"),mr.setValue(re,"batchingIdTexture",Xe._indirectTexture,Be),mr.setOptional(re,Xe,"batchingColorTexture"),Xe._colorsTexture!==null&&mr.setValue(re,"batchingColorTexture",Xe._colorsTexture,Be));const an=Ke.morphAttributes;if((an.position!==void 0||an.normal!==void 0||an.color!==void 0)&&at.update(Xe,Ke,wn),(jr||zt.receiveShadow!==Xe.receiveShadow)&&(zt.receiveShadow=Xe.receiveShadow,mr.setValue(re,"receiveShadow",Xe.receiveShadow)),Oe.isMeshGouraudMaterial&&Oe.envMap!==null&&(sn.envMap.value=Mt,sn.flipEnvMap.value=Mt.isCubeTexture&&Mt.isRenderTargetTexture===!1?-1:1),Oe.isMeshStandardMaterial&&Oe.envMap===null&&Re.environment!==null&&(sn.envMapIntensity.value=Re.environmentIntensity),jr&&(mr.setValue(re,"toneMappingExposure",g.toneMappingExposure),zt.needsLights&&Jn(sn,nn),rt&&Oe.fog===!0&&je.refreshFogUniforms(sn,rt),je.refreshMaterialUniforms(sn,Oe,G,H,o.state.transmissionRenderTarget[ye.id]),ed.upload(re,ar(zt),sn,Be)),Oe.isShaderMaterial&&Oe.uniformsNeedUpdate===!0&&(ed.upload(re,ar(zt),sn,Be),Oe.uniformsNeedUpdate=!1),Oe.isSpriteMaterial&&mr.setValue(re,"center",Xe.center),mr.setValue(re,"modelViewMatrix",Xe.modelViewMatrix),mr.setValue(re,"normalMatrix",Xe.normalMatrix),mr.setValue(re,"modelMatrix",Xe.matrixWorld),Oe.isShaderMaterial||Oe.isRawShaderMaterial){const dn=Oe.uniformsGroups;for(let gn=0,fi=dn.length;gn<fi;gn++){const di=dn[gn];he.update(di,wn),he.bind(di,wn)}}return wn}function Jn(ye,Re){ye.ambientLightColor.needsUpdate=Re,ye.lightProbe.needsUpdate=Re,ye.directionalLights.needsUpdate=Re,ye.directionalLightShadows.needsUpdate=Re,ye.pointLights.needsUpdate=Re,ye.pointLightShadows.needsUpdate=Re,ye.spotLights.needsUpdate=Re,ye.spotLightShadows.needsUpdate=Re,ye.rectAreaLights.needsUpdate=Re,ye.hemisphereLights.needsUpdate=Re}function Hr(ye){return ye.isMeshLambertMaterial||ye.isMeshToonMaterial||ye.isMeshPhongMaterial||ye.isMeshStandardMaterial||ye.isShadowMaterial||ye.isShaderMaterial&&ye.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(ye,Re,Ke){const Oe=Fe.get(ye);Oe.__autoAllocateDepthBuffer=ye.resolveDepthBuffer===!1,Oe.__autoAllocateDepthBuffer===!1&&(Oe.__useRenderToTexture=!1),Fe.get(ye.texture).__webglTexture=Re,Fe.get(ye.depthTexture).__webglTexture=Oe.__autoAllocateDepthBuffer?void 0:Ke,Oe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(ye,Re){const Ke=Fe.get(ye);Ke.__webglFramebuffer=Re,Ke.__useDefaultFramebuffer=Re===void 0};const as=re.createFramebuffer();this.setRenderTarget=function(ye,Re=0,Ke=0){E=ye,v=Re,x=Ke;let Oe=!0,Xe=null,rt=!1,vt=!1;if(ye){const Mt=Fe.get(ye);if(Mt.__useDefaultFramebuffer!==void 0)Se.bindFramebuffer(re.FRAMEBUFFER,null),Oe=!1;else if(Mt.__webglFramebuffer===void 0)Be.setupRenderTarget(ye);else if(Mt.__hasExternalTextures)Be.rebindTextures(ye,Fe.get(ye.texture).__webglTexture,Fe.get(ye.depthTexture).__webglTexture);else if(ye.depthBuffer){const Tt=ye.depthTexture;if(Mt.__boundDepthTexture!==Tt){if(Tt!==null&&Fe.has(Tt)&&(ye.width!==Tt.image.width||ye.height!==Tt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Be.setupDepthRenderbuffer(ye)}}const Dt=ye.texture;(Dt.isData3DTexture||Dt.isDataArrayTexture||Dt.isCompressedArrayTexture)&&(vt=!0);const Ot=Fe.get(ye).__webglFramebuffer;ye.isWebGLCubeRenderTarget?(Array.isArray(Ot[Re])?Xe=Ot[Re][Ke]:Xe=Ot[Re],rt=!0):ye.samples>0&&Be.useMultisampledRTT(ye)===!1?Xe=Fe.get(ye).__webglMultisampledFramebuffer:Array.isArray(Ot)?Xe=Ot[Ke]:Xe=Ot,P.copy(ye.viewport),L.copy(ye.scissor),z=ye.scissorTest}else P.copy(Q).multiplyScalar(G).floor(),L.copy(J).multiplyScalar(G).floor(),z=ee;if(Ke!==0&&(Xe=as),Se.bindFramebuffer(re.FRAMEBUFFER,Xe)&&Oe&&Se.drawBuffers(ye,Xe),Se.viewport(P),Se.scissor(L),Se.setScissorTest(z),rt){const Mt=Fe.get(ye.texture);re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_CUBE_MAP_POSITIVE_X+Re,Mt.__webglTexture,Ke)}else if(vt){const Mt=Fe.get(ye.texture),Dt=Re;re.framebufferTextureLayer(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,Mt.__webglTexture,Ke,Dt)}else if(ye!==null&&Ke!==0){const Mt=Fe.get(ye.texture);re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_2D,Mt.__webglTexture,Ke)}j=-1},this.readRenderTargetPixels=function(ye,Re,Ke,Oe,Xe,rt,vt,dt=0){if(!(ye&&ye.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Mt=Fe.get(ye).__webglFramebuffer;if(ye.isWebGLCubeRenderTarget&&vt!==void 0&&(Mt=Mt[vt]),Mt){Se.bindFramebuffer(re.FRAMEBUFFER,Mt);try{const Dt=ye.textures[dt],Ot=Dt.format,Tt=Dt.type;if(!Me.textureFormatReadable(Ot)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Me.textureTypeReadable(Tt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Re>=0&&Re<=ye.width-Oe&&Ke>=0&&Ke<=ye.height-Xe&&(ye.textures.length>1&&re.readBuffer(re.COLOR_ATTACHMENT0+dt),re.readPixels(Re,Ke,Oe,Xe,oe.convert(Ot),oe.convert(Tt),rt))}finally{const Dt=E!==null?Fe.get(E).__webglFramebuffer:null;Se.bindFramebuffer(re.FRAMEBUFFER,Dt)}}},this.readRenderTargetPixelsAsync=async function(ye,Re,Ke,Oe,Xe,rt,vt,dt=0){if(!(ye&&ye.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Mt=Fe.get(ye).__webglFramebuffer;if(ye.isWebGLCubeRenderTarget&&vt!==void 0&&(Mt=Mt[vt]),Mt)if(Re>=0&&Re<=ye.width-Oe&&Ke>=0&&Ke<=ye.height-Xe){Se.bindFramebuffer(re.FRAMEBUFFER,Mt);const Dt=ye.textures[dt],Ot=Dt.format,Tt=Dt.type;if(!Me.textureFormatReadable(Ot))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Me.textureTypeReadable(Tt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const It=re.createBuffer();re.bindBuffer(re.PIXEL_PACK_BUFFER,It),re.bufferData(re.PIXEL_PACK_BUFFER,rt.byteLength,re.STREAM_READ),ye.textures.length>1&&re.readBuffer(re.COLOR_ATTACHMENT0+dt),re.readPixels(Re,Ke,Oe,Xe,oe.convert(Ot),oe.convert(Tt),0);const Xt=E!==null?Fe.get(E).__webglFramebuffer:null;Se.bindFramebuffer(re.FRAMEBUFFER,Xt);const Qt=re.fenceSync(re.SYNC_GPU_COMMANDS_COMPLETE,0);return re.flush(),await Bw(re,Qt,4),re.bindBuffer(re.PIXEL_PACK_BUFFER,It),re.getBufferSubData(re.PIXEL_PACK_BUFFER,0,rt),re.deleteBuffer(It),re.deleteSync(Qt),rt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(ye,Re=null,Ke=0){const Oe=Math.pow(2,-Ke),Xe=Math.floor(ye.image.width*Oe),rt=Math.floor(ye.image.height*Oe),vt=Re!==null?Re.x:0,dt=Re!==null?Re.y:0;Be.setTexture2D(ye,0),re.copyTexSubImage2D(re.TEXTURE_2D,Ke,0,0,vt,dt,Xe,rt),Se.unbindTexture()};const Le=re.createFramebuffer(),xt=re.createFramebuffer();this.copyTextureToTexture=function(ye,Re,Ke=null,Oe=null,Xe=0,rt=null){rt===null&&(Xe!==0?(pl("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),rt=Xe,Xe=0):rt=0);let vt,dt,Mt,Dt,Ot,Tt,It,Xt,Qt;const Vt=ye.isCompressedTexture?ye.mipmaps[rt]:ye.image;if(Ke!==null)vt=Ke.max.x-Ke.min.x,dt=Ke.max.y-Ke.min.y,Mt=Ke.isBox3?Ke.max.z-Ke.min.z:1,Dt=Ke.min.x,Ot=Ke.min.y,Tt=Ke.isBox3?Ke.min.z:0;else{const an=Math.pow(2,-Xe);vt=Math.floor(Vt.width*an),dt=Math.floor(Vt.height*an),ye.isDataArrayTexture?Mt=Vt.depth:ye.isData3DTexture?Mt=Math.floor(Vt.depth*an):Mt=1,Dt=0,Ot=0,Tt=0}Oe!==null?(It=Oe.x,Xt=Oe.y,Qt=Oe.z):(It=0,Xt=0,Qt=0);const ur=oe.convert(Re.format),zt=oe.convert(Re.type);let Xr;Re.isData3DTexture?(Be.setTexture3D(Re,0),Xr=re.TEXTURE_3D):Re.isDataArrayTexture||Re.isCompressedArrayTexture?(Be.setTexture2DArray(Re,0),Xr=re.TEXTURE_2D_ARRAY):(Be.setTexture2D(Re,0),Xr=re.TEXTURE_2D),re.pixelStorei(re.UNPACK_FLIP_Y_WEBGL,Re.flipY),re.pixelStorei(re.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Re.premultiplyAlpha),re.pixelStorei(re.UNPACK_ALIGNMENT,Re.unpackAlignment);const hr=re.getParameter(re.UNPACK_ROW_LENGTH),wn=re.getParameter(re.UNPACK_IMAGE_HEIGHT),Gi=re.getParameter(re.UNPACK_SKIP_PIXELS),jr=re.getParameter(re.UNPACK_SKIP_ROWS),nn=re.getParameter(re.UNPACK_SKIP_IMAGES);re.pixelStorei(re.UNPACK_ROW_LENGTH,Vt.width),re.pixelStorei(re.UNPACK_IMAGE_HEIGHT,Vt.height),re.pixelStorei(re.UNPACK_SKIP_PIXELS,Dt),re.pixelStorei(re.UNPACK_SKIP_ROWS,Ot),re.pixelStorei(re.UNPACK_SKIP_IMAGES,Tt);const mr=ye.isDataArrayTexture||ye.isData3DTexture,sn=Re.isDataArrayTexture||Re.isData3DTexture;if(ye.isDepthTexture){const an=Fe.get(ye),dn=Fe.get(Re),gn=Fe.get(an.__renderTarget),fi=Fe.get(dn.__renderTarget);Se.bindFramebuffer(re.READ_FRAMEBUFFER,gn.__webglFramebuffer),Se.bindFramebuffer(re.DRAW_FRAMEBUFFER,fi.__webglFramebuffer);for(let di=0;di<Mt;di++)mr&&(re.framebufferTextureLayer(re.READ_FRAMEBUFFER,re.COLOR_ATTACHMENT0,Fe.get(ye).__webglTexture,Xe,Tt+di),re.framebufferTextureLayer(re.DRAW_FRAMEBUFFER,re.COLOR_ATTACHMENT0,Fe.get(Re).__webglTexture,rt,Qt+di)),re.blitFramebuffer(Dt,Ot,vt,dt,It,Xt,vt,dt,re.DEPTH_BUFFER_BIT,re.NEAREST);Se.bindFramebuffer(re.READ_FRAMEBUFFER,null),Se.bindFramebuffer(re.DRAW_FRAMEBUFFER,null)}else if(Xe!==0||ye.isRenderTargetTexture||Fe.has(ye)){const an=Fe.get(ye),dn=Fe.get(Re);Se.bindFramebuffer(re.READ_FRAMEBUFFER,Le),Se.bindFramebuffer(re.DRAW_FRAMEBUFFER,xt);for(let gn=0;gn<Mt;gn++)mr?re.framebufferTextureLayer(re.READ_FRAMEBUFFER,re.COLOR_ATTACHMENT0,an.__webglTexture,Xe,Tt+gn):re.framebufferTexture2D(re.READ_FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_2D,an.__webglTexture,Xe),sn?re.framebufferTextureLayer(re.DRAW_FRAMEBUFFER,re.COLOR_ATTACHMENT0,dn.__webglTexture,rt,Qt+gn):re.framebufferTexture2D(re.DRAW_FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_2D,dn.__webglTexture,rt),Xe!==0?re.blitFramebuffer(Dt,Ot,vt,dt,It,Xt,vt,dt,re.COLOR_BUFFER_BIT,re.NEAREST):sn?re.copyTexSubImage3D(Xr,rt,It,Xt,Qt+gn,Dt,Ot,vt,dt):re.copyTexSubImage2D(Xr,rt,It,Xt,Dt,Ot,vt,dt);Se.bindFramebuffer(re.READ_FRAMEBUFFER,null),Se.bindFramebuffer(re.DRAW_FRAMEBUFFER,null)}else sn?ye.isDataTexture||ye.isData3DTexture?re.texSubImage3D(Xr,rt,It,Xt,Qt,vt,dt,Mt,ur,zt,Vt.data):Re.isCompressedArrayTexture?re.compressedTexSubImage3D(Xr,rt,It,Xt,Qt,vt,dt,Mt,ur,Vt.data):re.texSubImage3D(Xr,rt,It,Xt,Qt,vt,dt,Mt,ur,zt,Vt):ye.isDataTexture?re.texSubImage2D(re.TEXTURE_2D,rt,It,Xt,vt,dt,ur,zt,Vt.data):ye.isCompressedTexture?re.compressedTexSubImage2D(re.TEXTURE_2D,rt,It,Xt,Vt.width,Vt.height,ur,Vt.data):re.texSubImage2D(re.TEXTURE_2D,rt,It,Xt,vt,dt,ur,zt,Vt);re.pixelStorei(re.UNPACK_ROW_LENGTH,hr),re.pixelStorei(re.UNPACK_IMAGE_HEIGHT,wn),re.pixelStorei(re.UNPACK_SKIP_PIXELS,Gi),re.pixelStorei(re.UNPACK_SKIP_ROWS,jr),re.pixelStorei(re.UNPACK_SKIP_IMAGES,nn),rt===0&&Re.generateMipmaps&&re.generateMipmap(Xr),Se.unbindTexture()},this.copyTextureToTexture3D=function(ye,Re,Ke=null,Oe=null,Xe=0){return pl('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(ye,Re,Ke,Oe,Xe)},this.initRenderTarget=function(ye){Fe.get(ye).__webglFramebuffer===void 0&&Be.setupRenderTarget(ye)},this.initTexture=function(ye){ye.isCubeTexture?Be.setTextureCube(ye,0):ye.isData3DTexture?Be.setTexture3D(ye,0):ye.isDataArrayTexture||ye.isCompressedArrayTexture?Be.setTexture2DArray(ye,0):Be.setTexture2D(ye,0),Se.unbindTexture()},this.resetState=function(){v=0,x=0,E=null,Se.reset(),_e.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ds}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(r){this._outputColorSpace=r;const i=this.getContext();i.drawingBufferColorSpace=xr._getDrawingBufferColorSpace(r),i.unpackColorSpace=xr._getUnpackColorSpace()}}const sR=`
varying vec2 vUv;
uniform float uTime;
uniform float mouse;
uniform float uEnableWaves;
uniform float uWaveIntensity;
uniform float uWaveSpeed;

void main() {
    vUv = uv;
    float time = uTime * uWaveSpeed;

    float waveFactor = uEnableWaves * uWaveIntensity;

    vec3 transformed = position;

    transformed.x += sin(time + position.y) * 0.5 * waveFactor;
    transformed.y += cos(time + position.z) * 0.15 * waveFactor;
    transformed.z += sin(time + position.x) * waveFactor;

    gl_Position = projectionMatrix * modelViewMatrix * vec4(transformed, 1.0);
}
`,aR=`
varying vec2 vUv;
uniform float mouse;
uniform float uTime;
uniform sampler2D uTexture;

void main() {
    float time = uTime;
    vec2 pos = vUv;
    
    float move = sin(time + mouse) * 0.01;
    float r = texture2D(uTexture, pos + cos(time * 2. - time + pos.x) * .01).r;
    float g = texture2D(uTexture, pos + tan(time * .5 + pos.x - time) * .01).g;
    float b = texture2D(uTexture, pos - cos(time * 2. + time + pos.y) * .01).b;
    float a = texture2D(uTexture, pos).a;
    gl_FragColor = vec4(r, g, b, a);
}
`;Math.map=function(s,r,i,d,T){return(s-r)/(i-r)*(T-d)+d};const n_=typeof window<"u"?window.devicePixelRatio:1;class oR{constructor(r,{fontSize:i,fontFamily:d,charset:T,invert:D}={}){this.renderer=r,this.domElement=document.createElement("div"),this.domElement.style.position="absolute",this.domElement.style.top="0",this.domElement.style.left="0",this.domElement.style.width="100%",this.domElement.style.height="100%",this.pre=document.createElement("pre"),this.domElement.appendChild(this.pre),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.domElement.appendChild(this.canvas),this.deg=0,this.invert=D??!0,this.fontSize=i??12,this.fontFamily=d??"'Courier New', monospace",this.charset=T??" .'`^\",:;Il!i~+_-?][}{1)(|/tfjrxnuvczXYUJCLQ0OZmwqpdbkhao*#MW&8%B@$",this.context.webkitImageSmoothingEnabled=!1,this.context.mozImageSmoothingEnabled=!1,this.context.msImageSmoothingEnabled=!1,this.context.imageSmoothingEnabled=!1,this.onMouseMove=this.onMouseMove.bind(this),document.addEventListener("mousemove",this.onMouseMove)}setSize(r,i){this.width=r,this.height=i,this.renderer.setSize(r,i),this.reset(),this.center={x:r/2,y:i/2},this.mouse={x:this.center.x,y:this.center.y}}reset(){this.context.font=`${this.fontSize}px ${this.fontFamily}`;const r=this.context.measureText("A").width;this.cols=Math.floor(this.width/(this.fontSize*(r/this.fontSize))),this.rows=Math.floor(this.height/this.fontSize),this.canvas.width=this.cols,this.canvas.height=this.rows,this.pre.style.fontFamily=this.fontFamily,this.pre.style.fontSize=`${this.fontSize}px`,this.pre.style.margin="0",this.pre.style.padding="0",this.pre.style.lineHeight="1em",this.pre.style.position="absolute",this.pre.style.left="50%",this.pre.style.top="50%",this.pre.style.transform="translate(-50%, -50%)",this.pre.style.zIndex="9",this.pre.style.backgroundAttachment="fixed",this.pre.style.mixBlendMode="difference"}render(r,i){this.renderer.render(r,i);const d=this.canvas.width,T=this.canvas.height;this.context.clearRect(0,0,d,T),this.context&&d&&T&&this.context.drawImage(this.renderer.domElement,0,0,d,T),this.asciify(this.context,d,T),this.hue()}onMouseMove(r){this.mouse={x:r.clientX*n_,y:r.clientY*n_}}get dx(){return this.mouse.x-this.center.x}get dy(){return this.mouse.y-this.center.y}hue(){const r=Math.atan2(this.dy,this.dx)*180/Math.PI;this.deg+=(r-this.deg)*.075,this.domElement.style.filter=`hue-rotate(${this.deg.toFixed(1)}deg)`}asciify(r,i,d){if(i&&d){const T=r.getImageData(0,0,i,d).data;let D="";for(let U=0;U<d;U++){for(let t=0;t<i;t++){const R=t*4+U*4*i,[M,p,f,h]=[T[R],T[R+1],T[R+2],T[R+3]];if(h===0){D+=" ";continue}let b=(.3*M+.6*p+.1*f)/255,w=Math.floor((1-b)*(this.charset.length-1));this.invert&&(w=this.charset.length-w-1),D+=this.charset[w]}D+=`
`}this.pre.innerHTML=D}}dispose(){document.removeEventListener("mousemove",this.onMouseMove)}}class lR{constructor(r,{fontSize:i=200,fontFamily:d="Arial",color:T="#fdf9f3"}={}){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.txt=r,this.fontSize=i,this.fontFamily=d,this.color=T,this.font=`600 ${this.fontSize}px ${this.fontFamily}`}resize(){this.context.font=this.font;const r=this.context.measureText(this.txt),i=Math.ceil(r.width)+20,d=Math.ceil(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)+20;this.canvas.width=i,this.canvas.height=d}render(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.fillStyle=this.color,this.context.font=this.font;const i=10+this.context.measureText(this.txt).actualBoundingBoxAscent;this.context.fillText(this.txt,10,i)}get width(){return this.canvas.width}get height(){return this.canvas.height}get texture(){return this.canvas}}class uR{constructor({text:r,asciiFontSize:i,textFontSize:d,textColor:T,planeBaseHeight:D,enableWaves:U,waveIntensity:t,waveSpeed:R},M,p,f){this.textString=r,this.asciiFontSize=i,this.textFontSize=d,this.textColor=T,this.planeBaseHeight=D,this.container=M,this.width=p,this.height=f,this.enableWaves=U,this.waveIntensity=t,this.waveSpeed=R,this.camera=new Ai(45,this.width/this.height,1,1e3),this.camera.position.z=30,this.scene=new pM,this.mouse={x:0,y:0},this.onMouseMove=this.onMouseMove.bind(this),this.setMesh(),this.setRenderer()}setMesh(){this.textCanvas=new lR(this.textString,{fontSize:this.textFontSize,fontFamily:"IBM Plex Mono",color:this.textColor}),this.textCanvas.resize(),this.textCanvas.render(),this.texture=new gM(this.textCanvas.texture),this.texture.minFilter=ji;const r=this.textCanvas.width/this.textCanvas.height,i=this.planeBaseHeight,d=i*r,T=i;this.geometry=new Ju(d,T,36,36),this.material=new Us({vertexShader:sR,fragmentShader:aR,transparent:!0,uniforms:{uTime:{value:0},mouse:{value:1},uTexture:{value:this.texture},uEnableWaves:{value:this.enableWaves?1:0},uWaveIntensity:{value:this.waveIntensity},uWaveSpeed:{value:this.waveSpeed}}}),this.mesh=new ts(this.geometry,this.material),this.scene.add(this.mesh)}setRenderer(){this.renderer=new iR({antialias:!1,alpha:!0}),this.renderer.setPixelRatio(1),this.renderer.setClearColor(0,0),this.filter=new oR(this.renderer,{fontFamily:"IBM Plex Mono",fontSize:this.asciiFontSize,invert:!0}),this.container.appendChild(this.filter.domElement),this.setSize(this.width,this.height),this.container.addEventListener("mousemove",this.onMouseMove),this.container.addEventListener("touchmove",this.onMouseMove)}setSize(r,i){this.width=r,this.height=i,this.camera.aspect=r/i,this.camera.updateProjectionMatrix(),this.filter.setSize(r,i),this.center={x:r/2,y:i/2}}load(){this.animate()}onMouseMove(r){const i=r.touches?r.touches[0]:r,d=this.container.getBoundingClientRect(),T=i.clientX-d.left,D=i.clientY-d.top;this.mouse={x:T,y:D}}animate(){const r=()=>{this.animationFrameId=requestAnimationFrame(r),this.render()};r()}render(){const r=new Date().getTime()*.001;this.textCanvas.render(),this.texture.needsUpdate=!0,this.mesh.material.uniforms.uTime.value=Math.sin(r),this.updateRotation(),this.filter.render(this.scene,this.camera)}updateRotation(){const r=Math.map(this.mouse.y,0,this.height,.5,-.5),i=Math.map(this.mouse.x,0,this.width,-.5,.5);this.mesh.rotation.x+=(r-this.mesh.rotation.x)*.05,this.mesh.rotation.y+=(i-this.mesh.rotation.y)*.05}clear(){this.scene.traverse(r=>{r.isMesh&&typeof r.material=="object"&&r.material!==null&&(Object.keys(r.material).forEach(i=>{const d=r.material[i];d!==null&&typeof d=="object"&&typeof d.dispose=="function"&&d.dispose()}),r.material.dispose(),r.geometry.dispose())}),this.scene.clear()}dispose(){cancelAnimationFrame(this.animationFrameId),this.filter.dispose(),this.container.removeChild(this.filter.domElement),this.container.removeEventListener("mousemove",this.onMouseMove),this.container.removeEventListener("touchmove",this.onMouseMove),this.clear(),this.renderer.dispose()}}function Yp({text:s="Fab!",asciiFontSize:r=8,textFontSize:i=200,textColor:d="#fdf9f3",planeBaseHeight:T=8,enableWaves:D=!0,waveIntensity:U=1,waveSpeed:t=5}){const R=kt.useRef(null),M=kt.useRef(null);return kt.useEffect(()=>{if(!R.current)return;const{width:p,height:f}=R.current.getBoundingClientRect();M.current=new uR({text:s,asciiFontSize:r,textFontSize:i,textColor:d,planeBaseHeight:T,enableWaves:D,waveIntensity:U,waveSpeed:t},R.current,p,f),M.current.load();const h=new ResizeObserver(b=>{if(!b[0])return;const{width:w,height:c}=b[0].contentRect;M.current.setSize(w,c)});return h.observe(R.current),()=>{h.disconnect(),M.current&&M.current.dispose()}},[s,r,i,d,T,D,U,t]),$t.jsx("div",{ref:R,style:{position:"absolute",width:"100%",height:"100%"},children:$t.jsx("style",{children:`
        @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@500&display=swap');

        body {
          margin: 0;
          padding: 0;
        }

        canvas {
          position: absolute;
          left: 0;
          top: 0;
          width: 100%;
          height: 100%;
          image-rendering: optimizeSpeed;
          image-rendering: -moz-crisp-edges;
          image-rendering: -o-crisp-edges;
          image-rendering: -webkit-optimize-contrast;
          image-rendering: optimize-contrast;
          image-rendering: crisp-edges;
          image-rendering: pixelated;
        }

        pre {
          margin: 0;
          user-select: none;
          padding: 0;
          line-height: 1em;
          text-align: left;
          position: absolute;
          left: 0;
          top: 0;
          background-image: radial-gradient(circle, #ff6188 0%, #fc9867 50%, #ffd866 100%);
          background-attachment: fixed;
          -webkit-text-fill-color: transparent;
          -webkit-background-clip: text;
          z-index: 9;
          mix-blend-mode: difference;
        }
      `})})}var td={exports:{}},cR=td.exports,i_;function fR(){return i_||(i_=1,function(s,r){(function(i,d){s.exports=d(pd())})(cR,function(i){return function(d){var T={};function D(U){if(T[U])return T[U].exports;var t=T[U]={i:U,l:!1,exports:{}};return d[U].call(t.exports,t,t.exports,D),t.l=!0,t.exports}return D.m=d,D.c=T,D.d=function(U,t,R){D.o(U,t)||Object.defineProperty(U,t,{enumerable:!0,get:R})},D.r=function(U){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(U,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(U,"__esModule",{value:!0})},D.t=function(U,t){if(1&t&&(U=D(U)),8&t||4&t&&typeof U=="object"&&U&&U.__esModule)return U;var R=Object.create(null);if(D.r(R),Object.defineProperty(R,"default",{enumerable:!0,value:U}),2&t&&typeof U!="string")for(var M in U)D.d(R,M,(function(p){return U[p]}).bind(null,M));return R},D.n=function(U){var t=U&&U.__esModule?function(){return U.default}:function(){return U};return D.d(t,"a",t),t},D.o=function(U,t){return Object.prototype.hasOwnProperty.call(U,t)},D.p="",D(D.s=2)}([function(d,T){d.exports=i},function(d,T,D){(function(U){(function(t){d.exports=t()})(function(){return function t(R,M,p){function f(w,c){if(!M[w]){if(!R[w]){var l=!1;if(!c&&l)return(void 0)(w,!0);if(h)return h(w,!0);throw(c=new Error("Cannot find module '"+w+"'")).code="MODULE_NOT_FOUND",c}l=M[w]={exports:{}},R[w][0].call(l.exports,function(o){return f(R[w][1][o]||o)},l,l.exports,t,R,M,p)}return M[w].exports}for(var h=!1,b=0;b<p.length;b++)f(p[b]);return f}({1:[function(t,R,M){M.byteLength=function(o){return 3*((o=l(o))[0]+(o=o[1]))/4-o},M.toByteArray=function(o){var u,m,g=(_=l(o))[0],_=_[1],v=new h(function(j,O){return 3*(j+O)/4-O}(g,_)),x=0,E=0<_?g-4:g;for(m=0;m<E;m+=4)u=f[o.charCodeAt(m)]<<18|f[o.charCodeAt(m+1)]<<12|f[o.charCodeAt(m+2)]<<6|f[o.charCodeAt(m+3)],v[x++]=u>>16&255,v[x++]=u>>8&255,v[x++]=255&u;return _===2&&(u=f[o.charCodeAt(m)]<<2|f[o.charCodeAt(m+1)]>>4,v[x++]=255&u),_===1&&(u=f[o.charCodeAt(m)]<<10|f[o.charCodeAt(m+1)]<<4|f[o.charCodeAt(m+2)]>>2,v[x++]=u>>8&255,v[x++]=255&u),v},M.fromByteArray=function(o){for(var u,m=o.length,g=m%3,_=[],v=0,x=m-g;v<x;v+=16383)_.push(function(E,j,O){for(var P,L=[],z=j;z<O;z+=3)P=(E[z]<<16&16711680)+(E[z+1]<<8&65280)+(255&E[z+2]),L.push(function(N){return p[N>>18&63]+p[N>>12&63]+p[N>>6&63]+p[63&N]}(P));return L.join("")}(o,v,x<v+16383?x:v+16383));return g==1?(u=o[m-1],_.push(p[u>>2]+p[u<<4&63]+"==")):g==2&&(u=(o[m-2]<<8)+o[m-1],_.push(p[u>>10]+p[u>>4&63]+p[u<<2&63]+"=")),_.join("")};for(var p=[],f=[],h=typeof Uint8Array<"u"?Uint8Array:Array,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0,c=b.length;w<c;++w)p[w]=b[w],f[b.charCodeAt(w)]=w;function l(o){var u=o.length;if(0<u%4)throw new Error("Invalid string. Length must be a multiple of 4");return u=(o=(o=o.indexOf("="))===-1?u:o)===u?0:4-o%4,[o,u]}f[45]=62,f[95]=63},{}],2:[function(t,R,M){},{}],3:[function(t,R,M){arguments[4][2][0].apply(M,arguments)},{dup:2}],4:[function(t,R,M){(function(l){var f=t("base64-js"),h=t("ieee754"),b=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,w=(M.Buffer=l,M.SlowBuffer=function(q){return+q!=q&&(q=0),l.alloc(+q)},M.INSPECT_MAX_BYTES=50,2147483647);function c(q){if(w<q)throw new RangeError('The value "'+q+'" is invalid for option "size"');return q=new Uint8Array(q),Object.setPrototypeOf(q,l.prototype),q}function l(q,Z,ie){if(typeof q!="number")return o(q,Z,ie);if(typeof Z=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(q)}function o(q,Z,ie){if(typeof q=="string"){var pe=q,ge=Z;if(l.isEncoding(ge=typeof ge=="string"&&ge!==""?ge:"utf8"))return(pe=(le=c(be=0|v(pe,ge))).write(pe,ge))!==be?le.slice(0,pe):le;throw new TypeError("Unknown encoding: "+ge)}if(ArrayBuffer.isView(q))return g(q);if(q!=null){if(te(q,ArrayBuffer)||q&&te(q.buffer,ArrayBuffer)){var be=q,le=ie;if((pe=Z)<0||be.byteLength<pe)throw new RangeError('"offset" is outside of buffer bounds');if(be.byteLength<pe+(le||0))throw new RangeError('"length" is outside of buffer bounds');return be=pe===void 0&&le===void 0?new Uint8Array(be):le===void 0?new Uint8Array(be,pe):new Uint8Array(be,pe,le),Object.setPrototypeOf(be,l.prototype),be}if(typeof q=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if((ge=q.valueOf&&q.valueOf())!=null&&ge!==q)return l.from(ge,Z,ie);var re=function(Te){var Ce,Me;return l.isBuffer(Te)?((Me=c(Ce=0|_(Te.length))).length!==0&&Te.copy(Me,0,0,Ce),Me):Te.length!==void 0?typeof Te.length!="number"||se(Te.length)?c(0):g(Te):Te.type==="Buffer"&&Array.isArray(Te.data)?g(Te.data):void 0}(q);if(re)return re;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof q[Symbol.toPrimitive]=="function")return l.from(q[Symbol.toPrimitive]("string"),Z,ie)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q)}function u(q){if(typeof q!="number")throw new TypeError('"size" argument must be of type number');if(q<0)throw new RangeError('The value "'+q+'" is invalid for option "size"')}function m(q){return u(q),c(q<0?0:0|_(q))}function g(q){for(var Z=q.length<0?0:0|_(q.length),ie=c(Z),pe=0;pe<Z;pe+=1)ie[pe]=255&q[pe];return ie}function _(q){if(w<=q)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return 0|q}function v(q,Z){if(l.isBuffer(q))return q.length;if(ArrayBuffer.isView(q)||te(q,ArrayBuffer))return q.byteLength;if(typeof q!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof q);var ie=q.length,pe=2<arguments.length&&arguments[2]===!0;if(!pe&&ie===0)return 0;for(var ge=!1;;)switch(Z){case"ascii":case"latin1":case"binary":return ie;case"utf8":case"utf-8":return Q(q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ie;case"hex":return ie>>>1;case"base64":return J(q).length;default:if(ge)return pe?-1:Q(q).length;Z=(""+Z).toLowerCase(),ge=!0}}function x(q,Z,ie){var pe,ge=!1;if((Z=Z===void 0||Z<0?0:Z)>this.length||(ie=ie===void 0||ie>this.length?this.length:ie)<=0||(ie>>>=0)<=(Z>>>=0))return"";for(q=q||"utf8";;)switch(q){case"hex":var be=Z,le=ie,re=this.length;(!le||le<0||re<le)&&(le=re);for(var Te="",Ce=be=!be||be<0?0:be;Ce<le;++Ce)Te+=ce[this[Ce]];return Te;case"utf8":case"utf-8":return z(this,Z,ie);case"ascii":re=Z;var Me=ie,Se="";Me=Math.min(this.length,Me);for(var Ue=re;Ue<Me;++Ue)Se+=String.fromCharCode(127&this[Ue]);return Se;case"latin1":case"binary":be=Z;var Fe=ie,Be="";Fe=Math.min(this.length,Fe);for(var st=be;st<Fe;++st)Be+=String.fromCharCode(this[st]);return Be;case"base64":return ve=this,pe=ie,(ue=Z)===0&&pe===ve.length?f.fromByteArray(ve):f.fromByteArray(ve.slice(ue,pe));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var ve=Z,ue=ie,ze=this.slice(ve,ue),He="",me=0;me<ze.length;me+=2)He+=String.fromCharCode(ze[me]+256*ze[me+1]);return He;default:if(ge)throw new TypeError("Unknown encoding: "+q);q=(q+"").toLowerCase(),ge=!0}}function E(q,Z,ie){var pe=q[Z];q[Z]=q[ie],q[ie]=pe}function j(q,Z,ie,pe,ge){if(q.length===0)return-1;if(typeof ie=="string"?(pe=ie,ie=0):2147483647<ie?ie=2147483647:ie<-2147483648&&(ie=-2147483648),(ie=(ie=se(ie=+ie)?ge?0:q.length-1:ie)<0?q.length+ie:ie)>=q.length){if(ge)return-1;ie=q.length-1}else if(ie<0){if(!ge)return-1;ie=0}if(typeof Z=="string"&&(Z=l.from(Z,pe)),l.isBuffer(Z))return Z.length===0?-1:O(q,Z,ie,pe,ge);if(typeof Z=="number")return Z&=255,typeof Uint8Array.prototype.indexOf=="function"?(ge?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(q,Z,ie):O(q,[Z],ie,pe,ge);throw new TypeError("val must be string, number or Buffer")}function O(q,Z,ie,pe,ge){var be=1,le=q.length,re=Z.length;if(pe!==void 0&&((pe=String(pe).toLowerCase())==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(q.length<2||Z.length<2)return-1;le/=be=2,re/=2,ie/=2}function Te(Fe,Be){return be===1?Fe[Be]:Fe.readUInt16BE(Be*be)}if(ge)for(var Ce=-1,Me=ie;Me<le;Me++)if(Te(q,Me)===Te(Z,Ce===-1?0:Me-Ce)){if(Me-(Ce=Ce===-1?Me:Ce)+1===re)return Ce*be}else Ce!==-1&&(Me-=Me-Ce),Ce=-1;else for(Me=ie=le<ie+re?le-re:ie;0<=Me;Me--){for(var Se=!0,Ue=0;Ue<re;Ue++)if(Te(q,Me+Ue)!==Te(Z,Ue)){Se=!1;break}if(Se)return Me}return-1}function P(q,Z,ie,pe){return ee(function(ge){for(var be=[],le=0;le<ge.length;++le)be.push(255&ge.charCodeAt(le));return be}(Z),q,ie,pe)}function L(q,Z,ie,pe){return ee(function(ge,be){for(var le,re,Te=[],Ce=0;Ce<ge.length&&!((be-=2)<0);++Ce)le=(re=ge.charCodeAt(Ce))>>8,re%=256,Te.push(re),Te.push(le);return Te}(Z,q.length-ie),q,ie,pe)}function z(q,Z,ie){ie=Math.min(q.length,ie);for(var pe=[],ge=Z;ge<ie;){var be,le,re,Te,Ce=q[ge],Me=null,Se=239<Ce?4:223<Ce?3:191<Ce?2:1;if(ge+Se<=ie)switch(Se){case 1:Ce<128&&(Me=Ce);break;case 2:(192&(be=q[ge+1]))==128&&127<(Te=(31&Ce)<<6|63&be)&&(Me=Te);break;case 3:be=q[ge+1],le=q[ge+2],(192&be)==128&&(192&le)==128&&2047<(Te=(15&Ce)<<12|(63&be)<<6|63&le)&&(Te<55296||57343<Te)&&(Me=Te);break;case 4:be=q[ge+1],le=q[ge+2],re=q[ge+3],(192&be)==128&&(192&le)==128&&(192&re)==128&&65535<(Te=(15&Ce)<<18|(63&be)<<12|(63&le)<<6|63&re)&&Te<1114112&&(Me=Te)}Me===null?(Me=65533,Se=1):65535<Me&&(Me-=65536,pe.push(Me>>>10&1023|55296),Me=56320|1023&Me),pe.push(Me),ge+=Se}var Ue=pe,Fe=Ue.length;if(Fe<=N)return String.fromCharCode.apply(String,Ue);for(var Be="",st=0;st<Fe;)Be+=String.fromCharCode.apply(String,Ue.slice(st,st+=N));return Be}M.kMaxLength=w,(l.TYPED_ARRAY_SUPPORT=function(){try{var q=new Uint8Array(1),Z={foo:function(){return 42}};return Object.setPrototypeOf(Z,Uint8Array.prototype),Object.setPrototypeOf(q,Z),q.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),l.poolSize=8192,l.from=o,Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(q,Z,ie){return Z=Z,ie=ie,u(q=q),q<=0||Z===void 0?c(q):typeof ie=="string"?c(q).fill(Z,ie):c(q).fill(Z)},l.allocUnsafe=m,l.allocUnsafeSlow=m,l.isBuffer=function(q){return q!=null&&q._isBuffer===!0&&q!==l.prototype},l.compare=function(q,Z){if(te(q,Uint8Array)&&(q=l.from(q,q.offset,q.byteLength)),te(Z,Uint8Array)&&(Z=l.from(Z,Z.offset,Z.byteLength)),!l.isBuffer(q)||!l.isBuffer(Z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(q===Z)return 0;for(var ie=q.length,pe=Z.length,ge=0,be=Math.min(ie,pe);ge<be;++ge)if(q[ge]!==Z[ge]){ie=q[ge],pe=Z[ge];break}return ie<pe?-1:pe<ie?1:0},l.isEncoding=function(q){switch(String(q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(q,Z){if(!Array.isArray(q))throw new TypeError('"list" argument must be an Array of Buffers');if(q.length===0)return l.alloc(0);if(Z===void 0)for(ge=Z=0;ge<q.length;++ge)Z+=q[ge].length;for(var ie=l.allocUnsafe(Z),pe=0,ge=0;ge<q.length;++ge){var be=q[ge];if(te(be,Uint8Array)&&(be=l.from(be)),!l.isBuffer(be))throw new TypeError('"list" argument must be an Array of Buffers');be.copy(ie,pe),pe+=be.length}return ie},l.byteLength=v,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var q=this.length;if(q%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Z=0;Z<q;Z+=2)E(this,Z,Z+1);return this},l.prototype.swap32=function(){var q=this.length;if(q%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Z=0;Z<q;Z+=4)E(this,Z,Z+3),E(this,Z+1,Z+2);return this},l.prototype.swap64=function(){var q=this.length;if(q%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Z=0;Z<q;Z+=8)E(this,Z,Z+7),E(this,Z+1,Z+6),E(this,Z+2,Z+5),E(this,Z+3,Z+4);return this},l.prototype.toLocaleString=l.prototype.toString=function(){var q=this.length;return q===0?"":arguments.length===0?z(this,0,q):x.apply(this,arguments)},l.prototype.equals=function(q){if(l.isBuffer(q))return this===q||l.compare(this,q)===0;throw new TypeError("Argument must be a Buffer")},l.prototype.inspect=function(){var q="",Z=M.INSPECT_MAX_BYTES;return q=this.toString("hex",0,Z).replace(/(.{2})/g,"$1 ").trim(),this.length>Z&&(q+=" ... "),"<Buffer "+q+">"},b&&(l.prototype[b]=l.prototype.inspect),l.prototype.compare=function(q,Z,ie,pe,ge){if(te(q,Uint8Array)&&(q=l.from(q,q.offset,q.byteLength)),!l.isBuffer(q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof q);if(ie===void 0&&(ie=q?q.length:0),pe===void 0&&(pe=0),ge===void 0&&(ge=this.length),(Z=Z===void 0?0:Z)<0||ie>q.length||pe<0||ge>this.length)throw new RangeError("out of range index");if(ge<=pe&&ie<=Z)return 0;if(ge<=pe)return-1;if(ie<=Z)return 1;if(this===q)return 0;for(var be=(ge>>>=0)-(pe>>>=0),le=(ie>>>=0)-(Z>>>=0),re=Math.min(be,le),Te=this.slice(pe,ge),Ce=q.slice(Z,ie),Me=0;Me<re;++Me)if(Te[Me]!==Ce[Me]){be=Te[Me],le=Ce[Me];break}return be<le?-1:le<be?1:0},l.prototype.includes=function(q,Z,ie){return this.indexOf(q,Z,ie)!==-1},l.prototype.indexOf=function(q,Z,ie){return j(this,q,Z,ie,!0)},l.prototype.lastIndexOf=function(q,Z,ie){return j(this,q,Z,ie,!1)},l.prototype.write=function(q,Z,ie,pe){if(Z===void 0)pe="utf8",ie=this.length,Z=0;else if(ie===void 0&&typeof Z=="string")pe=Z,ie=this.length,Z=0;else{if(!isFinite(Z))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Z>>>=0,isFinite(ie)?(ie>>>=0,pe===void 0&&(pe="utf8")):(pe=ie,ie=void 0)}var ge=this.length-Z;if((ie===void 0||ge<ie)&&(ie=ge),0<q.length&&(ie<0||Z<0)||Z>this.length)throw new RangeError("Attempt to write outside buffer bounds");pe=pe||"utf8";for(var be,le,re,Te=!1;;)switch(pe){case"hex":var Ce=q,Me=Z,Se=ie,Ue=(Me=Number(Me)||0,this.length-Me);(!Se||Ue<(Se=Number(Se)))&&(Se=Ue),(Ue=Ce.length)/2<Se&&(Se=Ue/2);for(var Fe=0;Fe<Se;++Fe){var Be=parseInt(Ce.substr(2*Fe,2),16);if(se(Be))return Fe;this[Me+Fe]=Be}return Fe;case"utf8":case"utf-8":return Ue=Z,re=ie,ee(Q(q,(le=this).length-Ue),le,Ue,re);case"ascii":return P(this,q,Z,ie);case"latin1":case"binary":return P(this,q,Z,ie);case"base64":return le=this,re=Z,be=ie,ee(J(q),le,re,be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,q,Z,ie);default:if(Te)throw new TypeError("Unknown encoding: "+pe);pe=(""+pe).toLowerCase(),Te=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var N=4096;function V(q,Z,ie){if(q%1!=0||q<0)throw new RangeError("offset is not uint");if(ie<q+Z)throw new RangeError("Trying to access beyond buffer length")}function k(q,Z,ie,pe,ge,be){if(!l.isBuffer(q))throw new TypeError('"buffer" argument must be a Buffer instance');if(ge<Z||Z<be)throw new RangeError('"value" argument is out of bounds');if(ie+pe>q.length)throw new RangeError("Index out of range")}function H(q,Z,ie,pe){if(ie+pe>q.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("Index out of range")}function G(q,Z,ie,pe,ge){return Z=+Z,ie>>>=0,ge||H(q,0,ie,4),h.write(q,Z,ie,pe,23,4),ie+4}function F(q,Z,ie,pe,ge){return Z=+Z,ie>>>=0,ge||H(q,0,ie,8),h.write(q,Z,ie,pe,52,8),ie+8}l.prototype.slice=function(q,Z){var ie=this.length;return(q=~~q)<0?(q+=ie)<0&&(q=0):ie<q&&(q=ie),(Z=Z===void 0?ie:~~Z)<0?(Z+=ie)<0&&(Z=0):ie<Z&&(Z=ie),Z<q&&(Z=q),ie=this.subarray(q,Z),Object.setPrototypeOf(ie,l.prototype),ie},l.prototype.readUIntLE=function(q,Z,ie){q>>>=0,Z>>>=0,ie||V(q,Z,this.length);for(var pe=this[q],ge=1,be=0;++be<Z&&(ge*=256);)pe+=this[q+be]*ge;return pe},l.prototype.readUIntBE=function(q,Z,ie){q>>>=0,Z>>>=0,ie||V(q,Z,this.length);for(var pe=this[q+--Z],ge=1;0<Z&&(ge*=256);)pe+=this[q+--Z]*ge;return pe},l.prototype.readUInt8=function(q,Z){return q>>>=0,Z||V(q,1,this.length),this[q]},l.prototype.readUInt16LE=function(q,Z){return q>>>=0,Z||V(q,2,this.length),this[q]|this[q+1]<<8},l.prototype.readUInt16BE=function(q,Z){return q>>>=0,Z||V(q,2,this.length),this[q]<<8|this[q+1]},l.prototype.readUInt32LE=function(q,Z){return q>>>=0,Z||V(q,4,this.length),(this[q]|this[q+1]<<8|this[q+2]<<16)+16777216*this[q+3]},l.prototype.readUInt32BE=function(q,Z){return q>>>=0,Z||V(q,4,this.length),16777216*this[q]+(this[q+1]<<16|this[q+2]<<8|this[q+3])},l.prototype.readIntLE=function(q,Z,ie){q>>>=0,Z>>>=0,ie||V(q,Z,this.length);for(var pe=this[q],ge=1,be=0;++be<Z&&(ge*=256);)pe+=this[q+be]*ge;return(ge*=128)<=pe&&(pe-=Math.pow(2,8*Z)),pe},l.prototype.readIntBE=function(q,Z,ie){q>>>=0,Z>>>=0,ie||V(q,Z,this.length);for(var pe=Z,ge=1,be=this[q+--pe];0<pe&&(ge*=256);)be+=this[q+--pe]*ge;return(ge*=128)<=be&&(be-=Math.pow(2,8*Z)),be},l.prototype.readInt8=function(q,Z){return q>>>=0,Z||V(q,1,this.length),128&this[q]?-1*(255-this[q]+1):this[q]},l.prototype.readInt16LE=function(q,Z){return q>>>=0,Z||V(q,2,this.length),32768&(Z=this[q]|this[q+1]<<8)?4294901760|Z:Z},l.prototype.readInt16BE=function(q,Z){return q>>>=0,Z||V(q,2,this.length),32768&(Z=this[q+1]|this[q]<<8)?4294901760|Z:Z},l.prototype.readInt32LE=function(q,Z){return q>>>=0,Z||V(q,4,this.length),this[q]|this[q+1]<<8|this[q+2]<<16|this[q+3]<<24},l.prototype.readInt32BE=function(q,Z){return q>>>=0,Z||V(q,4,this.length),this[q]<<24|this[q+1]<<16|this[q+2]<<8|this[q+3]},l.prototype.readFloatLE=function(q,Z){return q>>>=0,Z||V(q,4,this.length),h.read(this,q,!0,23,4)},l.prototype.readFloatBE=function(q,Z){return q>>>=0,Z||V(q,4,this.length),h.read(this,q,!1,23,4)},l.prototype.readDoubleLE=function(q,Z){return q>>>=0,Z||V(q,8,this.length),h.read(this,q,!0,52,8)},l.prototype.readDoubleBE=function(q,Z){return q>>>=0,Z||V(q,8,this.length),h.read(this,q,!1,52,8)},l.prototype.writeUIntLE=function(q,Z,ie,pe){q=+q,Z>>>=0,ie>>>=0,pe||k(this,q,Z,ie,Math.pow(2,8*ie)-1,0);var ge=1,be=0;for(this[Z]=255&q;++be<ie&&(ge*=256);)this[Z+be]=q/ge&255;return Z+ie},l.prototype.writeUIntBE=function(q,Z,ie,pe){q=+q,Z>>>=0,ie>>>=0,pe||k(this,q,Z,ie,Math.pow(2,8*ie)-1,0);var ge=ie-1,be=1;for(this[Z+ge]=255&q;0<=--ge&&(be*=256);)this[Z+ge]=q/be&255;return Z+ie},l.prototype.writeUInt8=function(q,Z,ie){return q=+q,Z>>>=0,ie||k(this,q,Z,1,255,0),this[Z]=255&q,Z+1},l.prototype.writeUInt16LE=function(q,Z,ie){return q=+q,Z>>>=0,ie||k(this,q,Z,2,65535,0),this[Z]=255&q,this[Z+1]=q>>>8,Z+2},l.prototype.writeUInt16BE=function(q,Z,ie){return q=+q,Z>>>=0,ie||k(this,q,Z,2,65535,0),this[Z]=q>>>8,this[Z+1]=255&q,Z+2},l.prototype.writeUInt32LE=function(q,Z,ie){return q=+q,Z>>>=0,ie||k(this,q,Z,4,4294967295,0),this[Z+3]=q>>>24,this[Z+2]=q>>>16,this[Z+1]=q>>>8,this[Z]=255&q,Z+4},l.prototype.writeUInt32BE=function(q,Z,ie){return q=+q,Z>>>=0,ie||k(this,q,Z,4,4294967295,0),this[Z]=q>>>24,this[Z+1]=q>>>16,this[Z+2]=q>>>8,this[Z+3]=255&q,Z+4},l.prototype.writeIntLE=function(q,Z,ie,pe){q=+q,Z>>>=0,pe||k(this,q,Z,ie,(pe=Math.pow(2,8*ie-1))-1,-pe);var ge=0,be=1,le=0;for(this[Z]=255&q;++ge<ie&&(be*=256);)q<0&&le===0&&this[Z+ge-1]!==0&&(le=1),this[Z+ge]=(q/be>>0)-le&255;return Z+ie},l.prototype.writeIntBE=function(q,Z,ie,pe){q=+q,Z>>>=0,pe||k(this,q,Z,ie,(pe=Math.pow(2,8*ie-1))-1,-pe);var ge=ie-1,be=1,le=0;for(this[Z+ge]=255&q;0<=--ge&&(be*=256);)q<0&&le===0&&this[Z+ge+1]!==0&&(le=1),this[Z+ge]=(q/be>>0)-le&255;return Z+ie},l.prototype.writeInt8=function(q,Z,ie){return q=+q,Z>>>=0,ie||k(this,q,Z,1,127,-128),this[Z]=255&(q=q<0?255+q+1:q),Z+1},l.prototype.writeInt16LE=function(q,Z,ie){return q=+q,Z>>>=0,ie||k(this,q,Z,2,32767,-32768),this[Z]=255&q,this[Z+1]=q>>>8,Z+2},l.prototype.writeInt16BE=function(q,Z,ie){return q=+q,Z>>>=0,ie||k(this,q,Z,2,32767,-32768),this[Z]=q>>>8,this[Z+1]=255&q,Z+2},l.prototype.writeInt32LE=function(q,Z,ie){return q=+q,Z>>>=0,ie||k(this,q,Z,4,2147483647,-2147483648),this[Z]=255&q,this[Z+1]=q>>>8,this[Z+2]=q>>>16,this[Z+3]=q>>>24,Z+4},l.prototype.writeInt32BE=function(q,Z,ie){return q=+q,Z>>>=0,ie||k(this,q,Z,4,2147483647,-2147483648),this[Z]=(q=q<0?4294967295+q+1:q)>>>24,this[Z+1]=q>>>16,this[Z+2]=q>>>8,this[Z+3]=255&q,Z+4},l.prototype.writeFloatLE=function(q,Z,ie){return G(this,q,Z,!0,ie)},l.prototype.writeFloatBE=function(q,Z,ie){return G(this,q,Z,!1,ie)},l.prototype.writeDoubleLE=function(q,Z,ie){return F(this,q,Z,!0,ie)},l.prototype.writeDoubleBE=function(q,Z,ie){return F(this,q,Z,!1,ie)},l.prototype.copy=function(q,Z,ie,pe){if(!l.isBuffer(q))throw new TypeError("argument should be a Buffer");if(ie=ie||0,pe||pe===0||(pe=this.length),Z>=q.length&&(Z=q.length),(pe=0<pe&&pe<ie?ie:pe)===ie||q.length===0||this.length===0)return 0;if((Z=Z||0)<0)throw new RangeError("targetStart out of bounds");if(ie<0||ie>=this.length)throw new RangeError("Index out of range");if(pe<0)throw new RangeError("sourceEnd out of bounds");pe>this.length&&(pe=this.length);var ge=(pe=q.length-Z<pe-ie?q.length-Z+ie:pe)-ie;if(this===q&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(Z,ie,pe);else if(this===q&&ie<Z&&Z<pe)for(var be=ge-1;0<=be;--be)q[be+Z]=this[be+ie];else Uint8Array.prototype.set.call(q,this.subarray(ie,pe),Z);return ge},l.prototype.fill=function(q,Z,ie,pe){if(typeof q=="string"){if(typeof Z=="string"?(pe=Z,Z=0,ie=this.length):typeof ie=="string"&&(pe=ie,ie=this.length),pe!==void 0&&typeof pe!="string")throw new TypeError("encoding must be a string");if(typeof pe=="string"&&!l.isEncoding(pe))throw new TypeError("Unknown encoding: "+pe);var ge;q.length===1&&(ge=q.charCodeAt(0),(pe==="utf8"&&ge<128||pe==="latin1")&&(q=ge))}else typeof q=="number"?q&=255:typeof q=="boolean"&&(q=Number(q));if(Z<0||this.length<Z||this.length<ie)throw new RangeError("Out of range index");var be;if(!(ie<=Z))if(Z>>>=0,ie=ie===void 0?this.length:ie>>>0,typeof(q=q||0)=="number")for(be=Z;be<ie;++be)this[be]=q;else{var le=l.isBuffer(q)?q:l.from(q,pe),re=le.length;if(re===0)throw new TypeError('The value "'+q+'" is invalid for argument "value"');for(be=0;be<ie-Z;++be)this[be+Z]=le[be%re]}return this};var W=/[^+/0-9A-Za-z-_]/g;function Q(q,Z){Z=Z||1/0;for(var ie,pe=q.length,ge=null,be=[],le=0;le<pe;++le){if(55295<(ie=q.charCodeAt(le))&&ie<57344){if(!ge){if(56319<ie){-1<(Z-=3)&&be.push(239,191,189);continue}if(le+1===pe){-1<(Z-=3)&&be.push(239,191,189);continue}ge=ie;continue}if(ie<56320){-1<(Z-=3)&&be.push(239,191,189),ge=ie;continue}ie=65536+(ge-55296<<10|ie-56320)}else ge&&-1<(Z-=3)&&be.push(239,191,189);if(ge=null,ie<128){if(--Z<0)break;be.push(ie)}else if(ie<2048){if((Z-=2)<0)break;be.push(ie>>6|192,63&ie|128)}else if(ie<65536){if((Z-=3)<0)break;be.push(ie>>12|224,ie>>6&63|128,63&ie|128)}else{if(!(ie<1114112))throw new Error("Invalid code point");if((Z-=4)<0)break;be.push(ie>>18|240,ie>>12&63|128,ie>>6&63|128,63&ie|128)}}return be}function J(q){return f.toByteArray(function(Z){if((Z=(Z=Z.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;Z.length%4!=0;)Z+="=";return Z}(q))}function ee(q,Z,ie,pe){for(var ge=0;ge<pe&&!(ge+ie>=Z.length||ge>=q.length);++ge)Z[ge+ie]=q[ge];return ge}function te(q,Z){return q instanceof Z||q!=null&&q.constructor!=null&&q.constructor.name!=null&&q.constructor.name===Z.name}function se(q){return q!=q}var ce=function(){for(var q="0123456789abcdef",Z=new Array(256),ie=0;ie<16;++ie)for(var pe=16*ie,ge=0;ge<16;++ge)Z[pe+ge]=q[ie]+q[ge];return Z}()}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:244}],5:[function(t,R,M){R.exports=function(p){if(typeof p!="function")throw TypeError(String(p)+" is not a function");return p}},{}],6:[function(t,R,M){var p=t("../internals/is-object");R.exports=function(f){if(p(f)||f===null)return f;throw TypeError("Can't set "+String(f)+" as a prototype")}},{"../internals/is-object":74}],7:[function(t,R,M){var p=t("../internals/well-known-symbol"),f=t("../internals/object-create"),h=(t=t("../internals/object-define-property"),p("unscopables")),b=Array.prototype;b[h]==null&&t.f(b,h,{configurable:!0,value:f(null)}),R.exports=function(w){b[h][w]=!0}},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],8:[function(t,R,M){var p=t("../internals/string-multibyte").charAt;R.exports=function(f,h,b){return h+(b?p(f,h).length:1)}},{"../internals/string-multibyte":123}],9:[function(t,R,M){R.exports=function(p,f,h){if(p instanceof f)return p;throw TypeError("Incorrect "+(h?h+" ":"")+"invocation")}},{}],10:[function(t,R,M){var p=t("../internals/is-object");R.exports=function(f){if(p(f))return f;throw TypeError(String(f)+" is not an object")}},{"../internals/is-object":74}],11:[function(t,R,M){R.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(t,R,M){function p(G){return c(G)&&l(H,o(G))}var f,h=t("../internals/array-buffer-native"),b=t("../internals/descriptors"),w=t("../internals/global"),c=t("../internals/is-object"),l=t("../internals/has"),o=t("../internals/classof"),u=t("../internals/create-non-enumerable-property"),m=t("../internals/redefine"),g=t("../internals/object-define-property").f,_=t("../internals/object-get-prototype-of"),v=t("../internals/object-set-prototype-of"),x=t("../internals/well-known-symbol"),E=(t=t("../internals/uid"),w.Int8Array),j=E&&E.prototype,O=(O=w.Uint8ClampedArray)&&O.prototype,P=E&&_(E),L=j&&_(j),z=Object.prototype,N=z.isPrototypeOf,V=(x=x("toStringTag"),t("TYPED_ARRAY_TAG")),k=h&&!!v&&o(w.opera)!=="Opera",H=(t=!1,{Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8});for(f in H)w[f]||(k=!1);if((!k||typeof P!="function"||P===Function.prototype)&&(P=function(){throw TypeError("Incorrect invocation")},k))for(f in H)w[f]&&v(w[f],P);if((!k||!L||L===z)&&(L=P.prototype,k))for(f in H)w[f]&&v(w[f].prototype,L);if(k&&_(O)!==L&&v(O,L),b&&!l(L,x))for(f in t=!0,g(L,x,{get:function(){return c(this)?this[V]:void 0}}),H)w[f]&&u(w[f],V,f);R.exports={NATIVE_ARRAY_BUFFER_VIEWS:k,TYPED_ARRAY_TAG:t&&V,aTypedArray:function(G){if(p(G))return G;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(G){if(v){if(N.call(P,G))return G}else for(var F in H)if(l(H,f)&&(F=w[F])&&(G===F||N.call(F,G)))return G;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(G,F,W){if(b){if(W)for(var Q in H)(Q=w[Q])&&l(Q.prototype,G)&&delete Q.prototype[G];L[G]&&!W||m(L,G,!W&&k&&j[G]||F)}},exportTypedArrayStaticMethod:function(G,F,W){var Q,J;if(b){if(v){if(W)for(Q in H)(J=w[Q])&&l(J,G)&&delete J[G];if(P[G]&&!W)return;try{return m(P,G,!W&&k&&E[G]||F)}catch{}}for(Q in H)!(J=w[Q])||J[G]&&!W||m(J,G,F)}},isView:function(G){return(G=o(G))==="DataView"||l(H,G)},isTypedArray:p,TypedArray:P,TypedArrayPrototype:L}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":145,"../internals/well-known-symbol":148}],13:[function(t,R,M){function p(Me){return[255&Me]}function f(Me){return[255&Me,Me>>8&255]}function h(Me){return[255&Me,Me>>8&255,Me>>16&255,Me>>24&255]}function b(Me){return Me[3]<<24|Me[2]<<16|Me[1]<<8|Me[0]}function w(Me){return ge(Me,23,4)}function c(Me){return ge(Me,52,8)}function l(Me,Se){H(Me[te],Se,{get:function(){return W(this)[Se]}})}function o(Me,Se,Ue,Fe){if((Ue=L(Ue))+Se>(Me=W(Me)).byteLength)throw pe(se);var Be=W(Me.buffer).bytes;return Ue+=Me.byteOffset,Me=Be.slice(Ue,Ue+Se),Fe?Me:Me.reverse()}function u(Me,Se,Ue,Fe,Be,st){if((Ue=L(Ue))+Se>(Me=W(Me)).byteLength)throw pe(se);for(var ve=W(Me.buffer).bytes,ue=Ue+Me.byteOffset,ze=Fe(+Be),He=0;He<Se;He++)ve[ue+He]=ze[st?He:Se-He-1]}var m=t("../internals/global"),g=t("../internals/descriptors"),_=t("../internals/array-buffer-native"),v=t("../internals/create-non-enumerable-property"),x=t("../internals/redefine-all"),E=t("../internals/fails"),j=t("../internals/an-instance"),O=t("../internals/to-integer"),P=t("../internals/to-length"),L=t("../internals/to-index"),z=t("../internals/ieee754"),N=t("../internals/object-get-prototype-of"),V=t("../internals/object-set-prototype-of"),k=t("../internals/object-get-own-property-names").f,H=t("../internals/object-define-property").f,G=t("../internals/array-fill"),F=t("../internals/set-to-string-tag"),W=(t=t("../internals/internal-state")).get,Q=t.set,J="ArrayBuffer",ee="DataView",te="prototype",se="Wrong index",ce=m[J],q=ce,Z=m[ee],ie=(t=Z&&Z[te],Object.prototype),pe=m.RangeError,ge=z.pack,be=z.unpack;if(_){if(!E(function(){ce(1)})||!E(function(){new ce(-1)})||E(function(){return new ce,new ce(1.5),new ce(NaN),ce.name!=J})){m=(q=function(Me){return j(this,q),new ce(L(Me))})[te]=ce[te];for(var le,re=k(ce),Te=0;re.length>Te;)(le=re[Te++])in q||v(q,le,ce[le]);m.constructor=q}V&&N(t)!==ie&&V(t,ie),z=new Z(new q(2));var Ce=t.setInt8;z.setInt8(0,2147483648),z.setInt8(1,2147483649),!z.getInt8(0)&&z.getInt8(1)||x(t,{setInt8:function(Me,Se){Ce.call(this,Me,Se<<24>>24)},setUint8:function(Me,Se){Ce.call(this,Me,Se<<24>>24)}},{unsafe:!0})}else q=function(Me){j(this,q,J),Me=L(Me),Q(this,{bytes:G.call(new Array(Me),0),byteLength:Me}),g||(this.byteLength=Me)},Z=function(Me,Se,Ue){j(this,Z,ee),j(Me,q,ee);var Fe=W(Me).byteLength;if((Se=O(Se))<0||Fe<Se)throw pe("Wrong offset");if(Fe<Se+(Ue=Ue===void 0?Fe-Se:P(Ue)))throw pe("Wrong length");Q(this,{buffer:Me,byteLength:Ue,byteOffset:Se}),g||(this.buffer=Me,this.byteLength=Ue,this.byteOffset=Se)},g&&(l(q,"byteLength"),l(Z,"buffer"),l(Z,"byteLength"),l(Z,"byteOffset")),x(Z[te],{getInt8:function(Me){return o(this,1,Me)[0]<<24>>24},getUint8:function(Me){return o(this,1,Me)[0]},getInt16:function(Me){return((Me=o(this,2,Me,1<arguments.length?arguments[1]:void 0))[1]<<8|Me[0])<<16>>16},getUint16:function(Me){return(Me=o(this,2,Me,1<arguments.length?arguments[1]:void 0))[1]<<8|Me[0]},getInt32:function(Me){return b(o(this,4,Me,1<arguments.length?arguments[1]:void 0))},getUint32:function(Me){return b(o(this,4,Me,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(Me){return be(o(this,4,Me,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(Me){return be(o(this,8,Me,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(Me,Se){u(this,1,Me,p,Se)},setUint8:function(Me,Se){u(this,1,Me,p,Se)},setInt16:function(Me,Se){u(this,2,Me,f,Se,2<arguments.length?arguments[2]:void 0)},setUint16:function(Me,Se){u(this,2,Me,f,Se,2<arguments.length?arguments[2]:void 0)},setInt32:function(Me,Se){u(this,4,Me,h,Se,2<arguments.length?arguments[2]:void 0)},setUint32:function(Me,Se){u(this,4,Me,h,Se,2<arguments.length?arguments[2]:void 0)},setFloat32:function(Me,Se){u(this,4,Me,w,Se,2<arguments.length?arguments[2]:void 0)},setFloat64:function(Me,Se){u(this,8,Me,c,Se,2<arguments.length?arguments[2]:void 0)}});F(q,J),F(Z,ee),R.exports={ArrayBuffer:q,DataView:Z}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":133,"../internals/to-integer":135,"../internals/to-length":136}],14:[function(t,R,M){var p=t("../internals/to-object"),f=t("../internals/to-absolute-index"),h=t("../internals/to-length"),b=Math.min;R.exports=[].copyWithin||function(w,c){var l=p(this),o=h(l.length),u=f(w,o),m=f(c,o),g=b(((w=2<arguments.length?arguments[2]:void 0)===void 0?o:f(w,o))-m,o-u),_=1;for(m<u&&u<m+g&&(_=-1,m+=g-1,u+=g-1);0<g--;)m in l?l[u]=l[m]:delete l[u],u+=_,m+=_;return l}},{"../internals/to-absolute-index":132,"../internals/to-length":136,"../internals/to-object":137}],15:[function(t,R,M){var p=t("../internals/to-object"),f=t("../internals/to-absolute-index"),h=t("../internals/to-length");R.exports=function(b){for(var w,c=p(this),l=h(c.length),o=f(1<(w=arguments.length)?arguments[1]:void 0,l),u=(w=2<w?arguments[2]:void 0)===void 0?l:f(w,l);o<u;)c[o++]=b;return c}},{"../internals/to-absolute-index":132,"../internals/to-length":136,"../internals/to-object":137}],16:[function(t,R,M){var p=t("../internals/array-iteration").forEach,f=t("../internals/array-method-is-strict");t=t("../internals/array-method-uses-to-length"),f=f("forEach"),t=t("forEach"),R.exports=f&&t?[].forEach:function(h){return p(this,h,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(t,R,M){var p=t("../internals/function-bind-context"),f=t("../internals/to-object"),h=t("../internals/call-with-safe-iteration-closing"),b=t("../internals/is-array-iterator-method"),w=t("../internals/to-length"),c=t("../internals/create-property"),l=t("../internals/get-iterator-method");R.exports=function(o){var u,m,g,_,v,x,E=f(o),j=(o=typeof this=="function"?this:Array,arguments.length),O=1<j?arguments[1]:void 0,P=O!==void 0,L=l(E),z=0;if(P&&(O=p(O,2<j?arguments[2]:void 0,2)),L==null||o==Array&&b(L))for(m=new o(u=w(E.length));z<u;z++)x=P?O(E[z],z):E[z],c(m,z,x);else for(v=(_=L.call(E)).next,m=new o;!(g=v.call(_)).done;z++)x=P?h(_,O,[g.value,z],!0):g.value,c(m,z,x);return m.length=z,m}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136,"../internals/to-object":137}],18:[function(t,R,M){function p(w){return function(c,l,o){var u,m=f(c),g=h(m.length),_=b(o,g);if(w&&l!=l){for(;_<g;)if((u=m[_++])!=u)return!0}else for(;_<g;_++)if((w||_ in m)&&m[_]===l)return w||_||0;return!w&&-1}}var f=t("../internals/to-indexed-object"),h=t("../internals/to-length"),b=t("../internals/to-absolute-index");R.exports={includes:p(!0),indexOf:p(!1)}},{"../internals/to-absolute-index":132,"../internals/to-indexed-object":134,"../internals/to-length":136}],19:[function(t,R,M){function p(o){var u=o==1,m=o==2,g=o==3,_=o==4,v=o==6,x=o==5||v;return function(E,j,O,P){for(var L,z,N=b(E),V=h(N),k=f(j,O,3),H=w(V.length),G=0,F=(j=P||c,u?j(E,H):m?j(E,0):void 0);G<H;G++)if((x||G in V)&&(z=k(L=V[G],G,N),o)){if(u)F[G]=z;else if(z)switch(o){case 3:return!0;case 5:return L;case 6:return G;case 2:l.call(F,L)}else if(_)return!1}return v?-1:g||_?_:F}}var f=t("../internals/function-bind-context"),h=t("../internals/indexed-object"),b=t("../internals/to-object"),w=t("../internals/to-length"),c=t("../internals/array-species-create"),l=[].push;R.exports={forEach:p(0),map:p(1),filter:p(2),some:p(3),every:p(4),find:p(5),findIndex:p(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":136,"../internals/to-object":137}],20:[function(t,R,M){var p=t("../internals/to-indexed-object"),f=t("../internals/to-integer"),h=t("../internals/to-length"),b=t("../internals/array-method-is-strict"),w=(t=t("../internals/array-method-uses-to-length"),Math.min),c=[].lastIndexOf,l=!!c&&1/[1].lastIndexOf(1,-0)<0;b=b("lastIndexOf"),t=t("indexOf",{ACCESSORS:!0,1:0}),R.exports=!l&&b&&t?c:function(o){if(l)return c.apply(this,arguments)||0;var u=p(this),m=h(u.length),g=m-1;for((g=1<arguments.length?w(g,f(arguments[1])):g)<0&&(g=m+g);0<=g;g--)if(g in u&&u[g]===o)return g||0;return-1}},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":134,"../internals/to-integer":135,"../internals/to-length":136}],21:[function(t,R,M){var p=t("../internals/fails"),f=t("../internals/well-known-symbol"),h=t("../internals/engine-v8-version"),b=f("species");R.exports=function(w){return 51<=h||!p(function(){var c=[];return(c.constructor={})[b]=function(){return{foo:1}},c[w](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":148}],22:[function(t,R,M){var p=t("../internals/fails");R.exports=function(f,h){var b=[][f];return!!b&&p(function(){b.call(null,h||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(t,R,M){function p(l){throw l}var f=t("../internals/descriptors"),h=t("../internals/fails"),b=t("../internals/has"),w=Object.defineProperty,c={};R.exports=function(l,o){var u,m,g,_;return b(c,l)?c[l]:(u=[][l],m=!!b(o=o||{},"ACCESSORS")&&o.ACCESSORS,g=b(o,0)?o[0]:p,_=b(o,1)?o[1]:void 0,c[l]=!!u&&!h(function(){if(m&&!f)return!0;var v={length:-1};m?w(v,1,{enumerable:!0,get:p}):v[1]=1,u.call(v,g,_)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":60}],24:[function(t,R,M){function p(c){return function(l,o,u,m){f(o);var g=h(l),_=b(g),v=w(g.length),x=c?v-1:0,E=c?-1:1;if(u<2)for(;;){if(x in _){m=_[x],x+=E;break}if(x+=E,c?x<0:v<=x)throw TypeError("Reduce of empty array with no initial value")}for(;c?0<=x:x<v;x+=E)x in _&&(m=o(m,_[x],x,g));return m}}var f=t("../internals/a-function"),h=t("../internals/to-object"),b=t("../internals/indexed-object"),w=t("../internals/to-length");R.exports={left:p(!1),right:p(!0)}},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":136,"../internals/to-object":137}],25:[function(t,R,M){var p=t("../internals/is-object"),f=t("../internals/is-array"),h=t("../internals/well-known-symbol")("species");R.exports=function(b,w){var c;return new((c=f(b)&&(typeof(c=b.constructor)=="function"&&(c===Array||f(c.prototype))||p(c)&&(c=c[h])===null)?void 0:c)===void 0?Array:c)(w===0?0:w)}},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":148}],26:[function(t,R,M){var p=t("../internals/an-object");R.exports=function(f,h,b,w){try{return w?h(p(b)[0],b[1]):h(b)}catch(c){throw(w=f.return)!==void 0&&p(w.call(f)),c}}},{"../internals/an-object":10}],27:[function(t,R,M){var p=t("../internals/well-known-symbol")("iterator"),f=!1;try{var h=0,b={next:function(){return{done:!!h++}},return:function(){f=!0}};b[p]=function(){return this},Array.from(b,function(){throw 2})}catch{}R.exports=function(w,c){if(!c&&!f)return!1;var l=!1;try{var o={};o[p]=function(){return{next:function(){return{done:l=!0}}}},w(o)}catch{}return l}},{"../internals/well-known-symbol":148}],28:[function(t,R,M){var p={}.toString;R.exports=function(f){return p.call(f).slice(8,-1)}},{}],29:[function(t,R,M){var p=t("../internals/to-string-tag-support"),f=t("../internals/classof-raw"),h=t("../internals/well-known-symbol")("toStringTag"),b=f(function(){return arguments}())=="Arguments";R.exports=p?f:function(w){var c;return w===void 0?"Undefined":w===null?"Null":typeof(c=function(l,o){try{return l[o]}catch{}}(w=Object(w),h))=="string"?c:b?f(w):(c=f(w))=="Object"&&typeof w.callee=="function"?"Arguments":c}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":141,"../internals/well-known-symbol":148}],30:[function(t,R,M){var p=t("../internals/object-define-property").f,f=t("../internals/object-create"),h=t("../internals/redefine-all"),b=t("../internals/function-bind-context"),w=t("../internals/an-instance"),c=t("../internals/iterate"),l=t("../internals/define-iterator"),o=t("../internals/set-species"),u=t("../internals/descriptors"),m=t("../internals/internal-metadata").fastKey,g=(t=t("../internals/internal-state")).set,_=t.getterFor;R.exports={getConstructor:function(v,x,E,j){function O(N,V,k){var H,G=z(N),F=P(N,V);return F?F.value=k:(G.last=F={index:H=m(V,!0),key:V,value:k,previous:V=G.last,next:void 0,removed:!1},G.first||(G.first=F),V&&(V.next=F),u?G.size++:N.size++,H!=="F"&&(G.index[H]=F)),N}function P(N,V){N=z(N);var k,H=m(V);if(H!=="F")return N.index[H];for(k=N.first;k;k=k.next)if(k.key==V)return k}var L=v(function(N,V){w(N,L,x),g(N,{type:x,index:f(null),first:void 0,last:void 0,size:0}),u||(N.size=0),V!=null&&c(V,N[j],N,E)}),z=_(x);return h(L.prototype,{clear:function(){for(var N=z(this),V=N.index,k=N.first;k;)k.removed=!0,k.previous&&(k.previous=k.previous.next=void 0),delete V[k.index],k=k.next;N.first=N.last=void 0,u?N.size=0:this.size=0},delete:function(N){var V,k,H=z(this);return(N=P(this,N))&&(V=N.next,k=N.previous,delete H.index[N.index],N.removed=!0,k&&(k.next=V),V&&(V.previous=k),H.first==N&&(H.first=V),H.last==N&&(H.last=k),u?H.size--:this.size--),!!N},forEach:function(N){for(var V,k=z(this),H=b(N,1<arguments.length?arguments[1]:void 0,3);V=V?V.next:k.first;)for(H(V.value,V.key,this);V&&V.removed;)V=V.previous},has:function(N){return!!P(this,N)}}),h(L.prototype,E?{get:function(N){return(N=P(this,N))&&N.value},set:function(N,V){return O(this,N===0?0:N,V)}}:{add:function(N){return O(this,N=N===0?0:N,N)}}),u&&p(L.prototype,"size",{get:function(){return z(this).size}}),L},setStrong:function(v,x,E){var j=x+" Iterator",O=_(x),P=_(j);l(v,x,function(L,z){g(this,{type:j,target:L,state:O(L),kind:z,last:void 0})},function(){for(var L=P(this),z=L.kind,N=L.last;N&&N.removed;)N=N.previous;return L.target&&(L.last=N=N?N.next:L.state.first)?z=="keys"?{value:N.key,done:!1}:z=="values"?{value:N.value,done:!1}:{value:[N.key,N.value],done:!1}:{value:L.target=void 0,done:!0}},E?"entries":"values",!E,!0),o(x)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(t,R,M){function p(O){return O.frozen||(O.frozen=new f)}function f(){this.entries=[]}function h(O,P){return x(O.entries,function(L){return L[0]===P})}var b=t("../internals/redefine-all"),w=t("../internals/internal-metadata").getWeakData,c=t("../internals/an-object"),l=t("../internals/is-object"),o=t("../internals/an-instance"),u=t("../internals/iterate"),m=t("../internals/array-iteration"),g=t("../internals/has"),_=(t=t("../internals/internal-state")).set,v=t.getterFor,x=m.find,E=m.findIndex,j=0;f.prototype={get:function(O){if(O=h(this,O))return O[1]},has:function(O){return!!h(this,O)},set:function(O,P){var L=h(this,O);L?L[1]=P:this.entries.push([O,P])},delete:function(O){var P=E(this.entries,function(L){return L[0]===O});return~P&&this.entries.splice(P,1),!!~P}},R.exports={getConstructor:function(O,P,L,z){function N(H,G,F){var W=k(H),Q=w(c(G),!0);return Q===!0?p(W).set(G,F):Q[W.id]=F,H}var V=O(function(H,G){o(H,V,P),_(H,{type:P,id:j++,frozen:void 0}),G!=null&&u(G,H[z],H,L)}),k=v(P);return b(V.prototype,{delete:function(H){var G,F=k(this);return!!l(H)&&((G=w(H))===!0?p(F).delete(H):G&&g(G,F.id)&&delete G[F.id])},has:function(H){var G,F=k(this);return!!l(H)&&((G=w(H))===!0?p(F).has(H):G&&g(G,F.id))}}),b(V.prototype,L?{get:function(H){var G,F=k(this);if(l(H))return(G=w(H))===!0?p(F).get(H):G?G[F.id]:void 0},set:function(H,G){return N(this,H,G)}}:{add:function(H){return N(this,H,!0)}}),V}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":60,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine-all":107}],32:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/global"),h=t("../internals/is-forced"),b=t("../internals/redefine"),w=t("../internals/internal-metadata"),c=t("../internals/iterate"),l=t("../internals/an-instance"),o=t("../internals/is-object"),u=t("../internals/fails"),m=t("../internals/check-correctness-of-iteration"),g=t("../internals/set-to-string-tag"),_=t("../internals/inherit-if-required");R.exports=function(v,x,E){function j(J){var ee=F[J];b(F,J,J=="add"?function(te){return ee.call(this,te===0?0:te),this}:J=="delete"?function(te){return!(k&&!o(te))&&ee.call(this,te===0?0:te)}:J=="get"?function(te){return k&&!o(te)?void 0:ee.call(this,te===0?0:te)}:J=="has"?function(te){return!(k&&!o(te))&&ee.call(this,te===0?0:te)}:function(te,se){return ee.call(this,te===0?0:te,se),this})}var O,P,L,z,N,V=v.indexOf("Map")!==-1,k=v.indexOf("Weak")!==-1,H=V?"set":"add",G=f[v],F=G&&G.prototype,W=G,Q={};return h(v,typeof G!="function"||!(k||F.forEach&&!u(function(){new G().entries().next()})))?(W=E.getConstructor(x,v,V,H),w.REQUIRED=!0):h(v,!0)&&(P=(O=new W)[H](k?{}:-0,1)!=O,L=u(function(){O.has(1)}),z=m(function(J){new G(J)}),N=!k&&u(function(){for(var J=new G,ee=5;ee--;)J[H](ee,ee);return!J.has(-0)}),z||(((W=x(function(J,ee){return l(J,W,v),J=_(new G,J,W),ee!=null&&c(ee,J[H],J,V),J})).prototype=F).constructor=W),(L||N)&&(j("delete"),j("has"),V&&j("get")),(N||P)&&j(H),k&&F.clear&&delete F.clear),Q[v]=W,p({global:!0,forced:W!=G},Q),g(W,v),k||E.setStrong(W,v,V),W}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],33:[function(t,R,M){var p=t("../internals/has"),f=t("../internals/own-keys"),h=t("../internals/object-get-own-property-descriptor"),b=t("../internals/object-define-property");R.exports=function(w,c){for(var l=f(c),o=b.f,u=h.f,m=0;m<l.length;m++){var g=l[m];p(w,g)||o(w,g,u(c,g))}}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],34:[function(t,R,M){var p=t("../internals/well-known-symbol")("match");R.exports=function(f){var h=/./;try{"/./"[f](h)}catch{try{return h[p]=!1,"/./"[f](h)}catch{}}return!1}},{"../internals/well-known-symbol":148}],35:[function(t,R,M){t=t("../internals/fails"),R.exports=!t(function(){function p(){}return p.prototype.constructor=null,Object.getPrototypeOf(new p)!==p.prototype})},{"../internals/fails":51}],36:[function(t,R,M){var p=t("../internals/require-object-coercible"),f=/"/g;R.exports=function(h,b,w,c){h=String(p(h));var l="<"+b;return w!==""&&(l+=" "+w+'="'+String(c).replace(f,"&quot;")+'"'),l+">"+h+"</"+b+">"}},{"../internals/require-object-coercible":113}],37:[function(t,R,M){function p(){return this}var f=t("../internals/iterators-core").IteratorPrototype,h=t("../internals/object-create"),b=t("../internals/create-property-descriptor"),w=t("../internals/set-to-string-tag"),c=t("../internals/iterators");R.exports=function(l,o,u){return o+=" Iterator",l.prototype=h(f,{next:b(1,u)}),w(l,o,!1,!0),c[o]=p,l}},{"../internals/create-property-descriptor":39,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],38:[function(t,R,M){var p=t("../internals/descriptors"),f=t("../internals/object-define-property"),h=t("../internals/create-property-descriptor");R.exports=p?function(b,w,c){return f.f(b,w,h(1,c))}:function(b,w,c){return b[w]=c,b}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":92}],39:[function(t,R,M){R.exports=function(p,f){return{enumerable:!(1&p),configurable:!(2&p),writable:!(4&p),value:f}}},{}],40:[function(t,R,M){var p=t("../internals/to-primitive"),f=t("../internals/object-define-property"),h=t("../internals/create-property-descriptor");R.exports=function(b,w,c){(w=p(w))in b?f.f(b,w,h(0,c)):b[w]=c}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":92,"../internals/to-primitive":140}],41:[function(t,R,M){function p(){return this}var f=t("../internals/export"),h=t("../internals/create-iterator-constructor"),b=t("../internals/object-get-prototype-of"),w=t("../internals/object-set-prototype-of"),c=t("../internals/set-to-string-tag"),l=t("../internals/create-non-enumerable-property"),o=t("../internals/redefine"),u=t("../internals/well-known-symbol"),m=t("../internals/is-pure"),g=t("../internals/iterators"),_=(t=t("../internals/iterators-core")).IteratorPrototype,v=t.BUGGY_SAFARI_ITERATORS,x=u("iterator"),E="values",j="entries";R.exports=function(O,P,L,z,N,V,k){function H(se){if(se===N&&ee)return ee;if(!v&&se in Q)return Q[se];switch(se){case"keys":case E:case j:return function(){return new L(this,se)}}return function(){return new L(this)}}h(L,P,z),z=P+" Iterator";var G,F,W=!1,Q=O.prototype,J=Q[x]||Q["@@iterator"]||N&&Q[N],ee=!v&&J||H(N),te=P=="Array"&&Q.entries||J;if(te&&(te=b(te.call(new O)),_!==Object.prototype&&te.next&&(m||b(te)===_||(w?w(te,_):typeof te[x]!="function"&&l(te,x,p)),c(te,z,!0,!0),m&&(g[z]=p))),N==E&&J&&J.name!==E&&(W=!0,ee=function(){return J.call(this)}),m&&!k||Q[x]===ee||l(Q,x,ee),g[P]=ee,N)if(G={values:H(E),keys:V?ee:H("keys"),entries:H(j)},k)for(F in G)!v&&!W&&F in Q||o(Q,F,G[F]);else f({target:P,proto:!0,forced:v||W},G);return G}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":148}],42:[function(t,R,M){var p=t("../internals/path"),f=t("../internals/has"),h=t("../internals/well-known-symbol-wrapped"),b=t("../internals/object-define-property").f;R.exports=function(w){var c=p.Symbol||(p.Symbol={});f(c,w)||b(c,w,{value:h.f(w)})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":147}],43:[function(t,R,M){t=t("../internals/fails"),R.exports=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(t,R,M){var p=t("../internals/global"),f=(t=t("../internals/is-object"),p.document),h=t(f)&&t(f.createElement);R.exports=function(b){return h?f.createElement(b):{}}},{"../internals/global":59,"../internals/is-object":74}],45:[function(t,R,M){R.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(t,R,M){t=t("../internals/engine-user-agent"),R.exports=/(iphone|ipod|ipad).*applewebkit/i.test(t)},{"../internals/engine-user-agent":47}],47:[function(t,R,M){t=t("../internals/get-built-in"),R.exports=t("navigator","userAgent")||""},{"../internals/get-built-in":56}],48:[function(t,R,M){var p,f,h=t("../internals/global");t=t("../internals/engine-user-agent"),(h=(h=(h=h.process)&&h.versions)&&h.v8)?f=(p=h.split("."))[0]+p[1]:t&&(!(p=t.match(/Edge\/(\d+)/))||74<=p[1])&&(p=t.match(/Chrome\/(\d+)/))&&(f=p[1]),R.exports=f&&+f},{"../internals/engine-user-agent":47,"../internals/global":59}],49:[function(t,R,M){R.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(t,R,M){var p=t("../internals/global"),f=t("../internals/object-get-own-property-descriptor").f,h=t("../internals/create-non-enumerable-property"),b=t("../internals/redefine"),w=t("../internals/set-global"),c=t("../internals/copy-constructor-properties"),l=t("../internals/is-forced");R.exports=function(o,u){var m,g,_,v=o.target,x=o.global,E=o.stat,j=x?p:E?p[v]||w(v,{}):(p[v]||{}).prototype;if(j)for(m in u){if(g=u[m],_=o.noTargetGet?(_=f(j,m))&&_.value:j[m],!l(x?m:v+(E?".":"#")+m,o.forced)&&_!==void 0){if(typeof g==typeof _)continue;c(g,_)}(o.sham||_&&_.sham)&&h(g,"sham",!0),b(j,m,g,o)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],51:[function(t,R,M){R.exports=function(p){try{return!!p()}catch{return!0}}},{}],52:[function(t,R,M){t("../modules/es.regexp.exec");var p=t("../internals/redefine"),f=t("../internals/fails"),h=t("../internals/well-known-symbol"),b=t("../internals/regexp-exec"),w=t("../internals/create-non-enumerable-property"),c=h("species"),l=!f(function(){var g=/./;return g.exec=function(){var _=[];return _.groups={a:"7"},_},"".replace(g,"$<a>")!=="7"}),o="a".replace(/./,"$0")==="$0",u=!!/./[t=h("replace")]&&/./[t]("a","$0")==="",m=!f(function(){var g,_=(g=/(?:)/).exec;return(g=(g.exec=function(){return _.apply(this,arguments)},"ab".split(g))).length!==2||g[0]!=="a"||g[1]!=="b"});R.exports=function(g,_,v,x){var E,j,O=h(g),P=!f(function(){var z={};return z[O]=function(){return 7},""[g](z)!=7}),L=P&&!f(function(){var z=!1,N=/a/;return g==="split"&&((N={constructor:{}}).constructor[c]=function(){return N},N.flags="",N[O]=/./[O]),N.exec=function(){return z=!0,null},N[O](""),!z});P&&L&&(g!=="replace"||l&&o&&!u)&&(g!=="split"||m)||(E=/./[O],v=(L=v(O,""[g],function(z,N,V,k,H){return N.exec===b?P&&!H?{done:!0,value:E.call(N,V,k)}:{done:!0,value:z.call(V,N,k)}:{done:!1}},{REPLACE_KEEPS_$0:o,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:u}))[0],j=L[1],p(String.prototype,g,v),p(RegExp.prototype,O,_==2?function(z,N){return j.call(z,this,N)}:function(z){return j.call(z,this)})),x&&w(RegExp.prototype[O],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":148,"../modules/es.regexp.exec":185}],53:[function(t,R,M){t=t("../internals/fails"),R.exports=!t(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],54:[function(t,R,M){var p=t("../internals/a-function");R.exports=function(f,h,b){if(p(f),h===void 0)return f;switch(b){case 0:return function(){return f.call(h)};case 1:return function(w){return f.call(h,w)};case 2:return function(w,c){return f.call(h,w,c)};case 3:return function(w,c,l){return f.call(h,w,c,l)}}return function(){return f.apply(h,arguments)}}},{"../internals/a-function":5}],55:[function(t,R,M){var p=t("../internals/a-function"),f=t("../internals/is-object"),h=[].slice,b={};R.exports=Function.bind||function(w){var c=p(this),l=h.call(arguments,1),o=function(){var u=l.concat(h.call(arguments));if(this instanceof o){var m=c,g=u.length,_=u;if(!(g in b)){for(var v=[],x=0;x<g;x++)v[x]="a["+x+"]";b[g]=Function("C,a","return new C("+v.join(",")+")")}return b[g](m,_)}return c.apply(w,u)};return f(c.prototype)&&(o.prototype=c.prototype),o}},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(t,R,M){function p(b){return typeof b=="function"?b:void 0}var f=t("../internals/path"),h=t("../internals/global");R.exports=function(b,w){return arguments.length<2?p(f[b])||p(h[b]):f[b]&&f[b][w]||h[b]&&h[b][w]}},{"../internals/global":59,"../internals/path":104}],57:[function(t,R,M){var p=t("../internals/classof"),f=t("../internals/iterators"),h=t("../internals/well-known-symbol")("iterator");R.exports=function(b){if(b!=null)return b[h]||b["@@iterator"]||f[p(b)]}},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":148}],58:[function(t,R,M){var p=t("../internals/an-object"),f=t("../internals/get-iterator-method");R.exports=function(h){var b=f(h);if(typeof b!="function")throw TypeError(String(h)+" is not iterable");return p(b.call(h))}},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(t,R,M){(function(p){function f(h){return h&&h.Math==Math&&h}R.exports=f(typeof globalThis=="object"&&globalThis)||f(typeof window=="object"&&window)||f(typeof self=="object"&&self)||f(typeof p=="object"&&p)||Function("return this")()}).call(this,U!==void 0?U:typeof self<"u"?self:typeof window<"u"?window:{})},{}],60:[function(t,R,M){var p={}.hasOwnProperty;R.exports=function(f,h){return p.call(f,h)}},{}],61:[function(t,R,M){R.exports={}},{}],62:[function(t,R,M){var p=t("../internals/global");R.exports=function(f,h){var b=p.console;b&&b.error&&(arguments.length===1?b.error(f):b.error(f,h))}},{"../internals/global":59}],63:[function(t,R,M){t=t("../internals/get-built-in"),R.exports=t("document","documentElement")},{"../internals/get-built-in":56}],64:[function(t,R,M){var p=t("../internals/descriptors"),f=t("../internals/fails"),h=t("../internals/document-create-element");R.exports=!p&&!f(function(){return Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],65:[function(t,R,M){var p=Math.abs,f=Math.pow,h=Math.floor,b=Math.log,w=Math.LN2;R.exports={pack:function(c,l,o){var u,m,g,_=new Array(o),v=8*o-l-1,x=(o=(1<<v)-1)>>1,E=l===23?f(2,-24)-f(2,-77):0,j=c<0||c===0&&1/c<0?1:0,O=0;for((c=p(c))!=c||c===1/0?(m=c!=c?1:0,u=o):(u=h(b(c)/w),c*(g=f(2,-u))<1&&(u--,g*=2),2<=(c+=1<=u+x?E/g:E*f(2,1-x))*g&&(u++,g/=2),o<=u+x?(m=0,u=o):1<=u+x?(m=(c*g-1)*f(2,l),u+=x):(m=c*f(2,x-1)*f(2,l),u=0));8<=l;_[O++]=255&m,m/=256,l-=8);for(u=u<<l|m,v+=l;0<v;_[O++]=255&u,u/=256,v-=8);return _[--O]|=128*j,_},unpack:function(c,l){var o,u,m=c.length,g=(1<<(u=8*m-l-1))-1,_=g>>1,v=u-7,x=m-1,E=127&(u=c[x--]);for(u>>=7;0<v;E=256*E+c[x],x--,v-=8);for(o=E&(1<<-v)-1,E>>=-v,v+=l;0<v;o=256*o+c[x],x--,v-=8);if(E===0)E=1-_;else{if(E===g)return o?NaN:u?-1/0:1/0;o+=f(2,l),E-=_}return(u?-1:1)*o*f(2,E-l)}}},{}],66:[function(t,R,M){var p=t("../internals/fails"),f=t("../internals/classof-raw"),h="".split;R.exports=p(function(){return!Object("z").propertyIsEnumerable(0)})?function(b){return f(b)=="String"?h.call(b,""):Object(b)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],67:[function(t,R,M){var p=t("../internals/is-object"),f=t("../internals/object-set-prototype-of");R.exports=function(h,b,w){return f&&typeof(b=b.constructor)=="function"&&b!==w&&p(b=b.prototype)&&b!==w.prototype&&f(h,b),h}},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(t,R,M){t=t("../internals/shared-store");var p=Function.toString;typeof t.inspectSource!="function"&&(t.inspectSource=function(f){return p.call(f)}),R.exports=t.inspectSource},{"../internals/shared-store":119}],69:[function(t,R,M){function p(_){w(_,o,{value:{objectID:"O"+ ++u,weakData:{}}})}var f=t("../internals/hidden-keys"),h=t("../internals/is-object"),b=t("../internals/has"),w=t("../internals/object-define-property").f,c=t("../internals/uid"),l=t("../internals/freezing"),o=c("meta"),u=0,m=Object.isExtensible||function(){return!0},g=R.exports={REQUIRED:!1,fastKey:function(_,v){if(!h(_))return typeof _=="symbol"?_:(typeof _=="string"?"S":"P")+_;if(!b(_,o)){if(!m(_))return"F";if(!v)return"E";p(_)}return _[o].objectID},getWeakData:function(_,v){if(!b(_,o)){if(!m(_))return!0;if(!v)return!1;p(_)}return _[o].weakData},onFreeze:function(_){return l&&g.REQUIRED&&m(_)&&!b(_,o)&&p(_),_}};f[o]=!0},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":145}],70:[function(t,R,M){var p,f,h,b,w,c,l,o,u=t("../internals/native-weak-map"),m=t("../internals/global"),g=t("../internals/is-object"),_=t("../internals/create-non-enumerable-property"),v=t("../internals/has"),x=t("../internals/shared-key");t=t("../internals/hidden-keys"),m=m.WeakMap,l=u?(p=new m,f=p.get,h=p.has,b=p.set,w=function(E,j){return b.call(p,E,j),j},c=function(E){return f.call(p,E)||{}},function(E){return h.call(p,E)}):(t[o=x("state")]=!0,w=function(E,j){return _(E,o,j),j},c=function(E){return v(E,o)?E[o]:{}},function(E){return v(E,o)}),R.exports={set:w,get:c,has:l,enforce:function(E){return l(E)?c(E):w(E,{})},getterFor:function(E){return function(j){if(g(j)&&(j=c(j)).type===E)return j;throw TypeError("Incompatible receiver, "+E+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(t,R,M){var p=t("../internals/well-known-symbol"),f=t("../internals/iterators"),h=p("iterator"),b=Array.prototype;R.exports=function(w){return w!==void 0&&(f.Array===w||b[h]===w)}},{"../internals/iterators":79,"../internals/well-known-symbol":148}],72:[function(t,R,M){var p=t("../internals/classof-raw");R.exports=Array.isArray||function(f){return p(f)=="Array"}},{"../internals/classof-raw":28}],73:[function(t,R,M){function p(o,u){return(o=w[b(o)])==l||o!=c&&(typeof u=="function"?f(u):!!u)}var f=t("../internals/fails"),h=/#|\.prototype\./,b=p.normalize=function(o){return String(o).replace(h,".").toLowerCase()},w=p.data={},c=p.NATIVE="N",l=p.POLYFILL="P";R.exports=p},{"../internals/fails":51}],74:[function(t,R,M){R.exports=function(p){return typeof p=="object"?p!==null:typeof p=="function"}},{}],75:[function(t,R,M){R.exports=!1},{}],76:[function(t,R,M){var p=t("../internals/is-object"),f=t("../internals/classof-raw"),h=t("../internals/well-known-symbol")("match");R.exports=function(b){var w;return p(b)&&((w=b[h])!==void 0?!!w:f(b)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":148}],77:[function(t,R,M){function p(o,u){this.stopped=o,this.result=u}var f=t("../internals/an-object"),h=t("../internals/is-array-iterator-method"),b=t("../internals/to-length"),w=t("../internals/function-bind-context"),c=t("../internals/get-iterator-method"),l=t("../internals/call-with-safe-iteration-closing");(R.exports=function(o,u,m,g,_){var v,x,E,j,O,P,L=w(u,m,g?2:1);if(_)v=o;else{if(typeof(u=c(o))!="function")throw TypeError("Target is not iterable");if(h(u)){for(x=0,E=b(o.length);x<E;x++)if((j=g?L(f(P=o[x])[0],P[1]):L(o[x]))&&j instanceof p)return j;return new p(!1)}v=u.call(o)}for(O=v.next;!(P=O.call(v)).done;)if(typeof(j=l(v,L,P.value,g))=="object"&&j&&j instanceof p)return j;return new p(!1)}).stop=function(o){return new p(!0,o)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136}],78:[function(t,R,M){var p,f,h=t("../internals/object-get-prototype-of"),b=t("../internals/create-non-enumerable-property"),w=t("../internals/has"),c=t("../internals/well-known-symbol"),l=(t=t("../internals/is-pure"),c=c("iterator"),!1);[].keys&&("next"in(f=[].keys())?(h=h(h(f)))!==Object.prototype&&(p=h):l=!0),p==null&&(p={}),t||w(p,c)||b(p,c,function(){return this}),R.exports={IteratorPrototype:p,BUGGY_SAFARI_ITERATORS:l}},{"../internals/create-non-enumerable-property":38,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":148}],79:[function(t,R,M){R.exports={}},{}],80:[function(t,R,M){R.exports=Math.sign||function(p){return(p=+p)==0||p!=p?p:p<0?-1:1}},{}],81:[function(t,R,M){var p,f,h,b,w,c,l,o,u=t("../internals/global"),m=t("../internals/object-get-own-property-descriptor").f,g=t("../internals/classof-raw"),_=t("../internals/task").set,v=(t=t("../internals/engine-is-ios"),u.MutationObserver||u.WebKitMutationObserver),x=u.process,E=u.Promise,j=g(x)=="process";g=m(u,"queueMicrotask"),(m=g&&g.value)||(p=function(){var O,P;for(j&&(O=x.domain)&&O.exit();f;){P=f.fn,f=f.next;try{P()}catch(L){throw f?b():h=void 0,L}}h=void 0,O&&O.enter()},b=j?function(){x.nextTick(p)}:v&&!t?(w=!0,c=document.createTextNode(""),new v(p).observe(c,{characterData:!0}),function(){c.data=w=!w}):E&&E.resolve?(l=E.resolve(void 0),o=l.then,function(){o.call(l,p)}):function(){_.call(u,p)}),R.exports=m||function(O){O={fn:O,next:void 0},h&&(h.next=O),f||(f=O,b()),h=O}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":130}],82:[function(t,R,M){t=t("../internals/global"),R.exports=t.Promise},{"../internals/global":59}],83:[function(t,R,M){t=t("../internals/fails"),R.exports=!!Object.getOwnPropertySymbols&&!t(function(){return!String(Symbol())})},{"../internals/fails":51}],84:[function(t,R,M){var p=t("../internals/fails"),f=t("../internals/well-known-symbol"),h=t("../internals/is-pure"),b=f("iterator");R.exports=!p(function(){var w=new URL("b?a=1&b=2&c=3","http://a"),c=w.searchParams,l="";return w.pathname="c%20d",c.forEach(function(o,u){c.delete("b"),l+=u+o}),h&&!w.toJSON||!c.sort||w.href!=="http://a/c%20d?a=1&c=3"||c.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!c[b]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://тест").host!=="xn--e1aybc"||new URL("http://a#б").hash!=="#%D0%B1"||l!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":75,"../internals/well-known-symbol":148}],85:[function(t,R,M){var p=t("../internals/global");t=t("../internals/inspect-source"),p=p.WeakMap,R.exports=typeof p=="function"&&/native code/.test(t(p))},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(t,R,M){function p(h){var b,w;this.promise=new h(function(c,l){if(b!==void 0||w!==void 0)throw TypeError("Bad Promise constructor");b=c,w=l}),this.resolve=f(b),this.reject=f(w)}var f=t("../internals/a-function");R.exports.f=function(h){return new p(h)}},{"../internals/a-function":5}],87:[function(t,R,M){var p=t("../internals/is-regexp");R.exports=function(f){if(p(f))throw TypeError("The method doesn't accept regular expressions");return f}},{"../internals/is-regexp":76}],88:[function(t,R,M){var p=t("../internals/global").isFinite;R.exports=Number.isFinite||function(f){return typeof f=="number"&&p(f)}},{"../internals/global":59}],89:[function(t,R,M){var p=t("../internals/descriptors"),f=t("../internals/fails"),h=t("../internals/object-keys"),b=t("../internals/object-get-own-property-symbols"),w=t("../internals/object-property-is-enumerable"),c=t("../internals/to-object"),l=t("../internals/indexed-object"),o=Object.assign,u=Object.defineProperty;R.exports=!o||f(function(){var m,g,_,v;return!(!p||o({b:1},o(u({},"a",{enumerable:!0,get:function(){u(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(g={},v="abcdefghijklmnopqrst",(m={})[_=Symbol()]=7,v.split("").forEach(function(x){g[x]=x}),o({},m)[_]!=7||h(o({},g)).join("")!=v)})?function(m,g){for(var _=c(m),v=arguments.length,x=1,E=b.f,j=w.f;x<v;)for(var O,P=l(arguments[x++]),L=E?h(P).concat(E(P)):h(P),z=L.length,N=0;N<z;)O=L[N++],p&&!j.call(P,O)||(_[O]=P[O]);return _}:o},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":137}],90:[function(t,R,M){function p(){}var f,h=t("../internals/an-object"),b=t("../internals/object-define-properties"),w=t("../internals/enum-bug-keys"),c=t("../internals/hidden-keys"),l=t("../internals/html"),o=t("../internals/document-create-element"),u=(t=t("../internals/shared-key"),"prototype"),m="script",g=t("IE_PROTO"),_=function(x){return"<script>"+x+"</"+m+">"},v=function(){try{f=document.domain&&new ActiveXObject("htmlfile")}catch{}v=f?((x=f).write(_("")),x.close(),E=x.parentWindow.Object,x=null,E):(E="javascript:",(x=o("iframe")).style.display="none",l.appendChild(x),x.src=String(E),(E=x.contentWindow.document).open(),E.write(_("document.F=Object")),E.close(),E.F);for(var x,E,j=w.length;j--;)delete v[u][w[j]];return v()};c[g]=!0,R.exports=Object.create||function(x,E){var j;return x!==null?(p[u]=h(x),j=new p,p[u]=null,j[g]=x):j=v(),E===void 0?j:b(j,E)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(t,R,M){var p=t("../internals/descriptors"),f=t("../internals/object-define-property"),h=t("../internals/an-object"),b=t("../internals/object-keys");R.exports=p?Object.defineProperties:function(w,c){h(w);for(var l,o=b(c),u=o.length,m=0;m<u;)f.f(w,l=o[m++],c[l]);return w}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(t,R,M){var p=t("../internals/descriptors"),f=t("../internals/ie8-dom-define"),h=t("../internals/an-object"),b=t("../internals/to-primitive"),w=Object.defineProperty;M.f=p?w:function(c,l,o){if(h(c),l=b(l,!0),h(o),f)try{return w(c,l,o)}catch{}if("get"in o||"set"in o)throw TypeError("Accessors not supported");return"value"in o&&(c[l]=o.value),c}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":64,"../internals/to-primitive":140}],93:[function(t,R,M){var p=t("../internals/descriptors"),f=t("../internals/object-property-is-enumerable"),h=t("../internals/create-property-descriptor"),b=t("../internals/to-indexed-object"),w=t("../internals/to-primitive"),c=t("../internals/has"),l=t("../internals/ie8-dom-define"),o=Object.getOwnPropertyDescriptor;M.f=p?o:function(u,m){if(u=b(u),m=w(m,!0),l)try{return o(u,m)}catch{}if(c(u,m))return h(!f.f.call(u,m),u[m])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":134,"../internals/to-primitive":140}],94:[function(t,R,M){var p=t("../internals/to-indexed-object"),f=t("../internals/object-get-own-property-names").f,h={}.toString,b=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];R.exports.f=function(w){if(!b||h.call(w)!="[object Window]")return f(p(w));try{return f(w)}catch{return b.slice()}}},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":134}],95:[function(t,R,M){var p=t("../internals/object-keys-internal"),f=t("../internals/enum-bug-keys").concat("length","prototype");M.f=Object.getOwnPropertyNames||function(h){return p(h,f)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],96:[function(t,R,M){M.f=Object.getOwnPropertySymbols},{}],97:[function(t,R,M){var p=t("../internals/has"),f=t("../internals/to-object"),h=t("../internals/shared-key"),b=(t=t("../internals/correct-prototype-getter"),h("IE_PROTO")),w=Object.prototype;R.exports=t?Object.getPrototypeOf:function(c){return c=f(c),p(c,b)?c[b]:typeof c.constructor=="function"&&c instanceof c.constructor?c.constructor.prototype:c instanceof Object?w:null}},{"../internals/correct-prototype-getter":35,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":137}],98:[function(t,R,M){var p=t("../internals/has"),f=t("../internals/to-indexed-object"),h=t("../internals/array-includes").indexOf,b=t("../internals/hidden-keys");R.exports=function(w,c){var l,o=f(w),u=0,m=[];for(l in o)!p(b,l)&&p(o,l)&&m.push(l);for(;c.length>u;)!p(o,l=c[u++])||~h(m,l)||m.push(l);return m}},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":134}],99:[function(t,R,M){var p=t("../internals/object-keys-internal"),f=t("../internals/enum-bug-keys");R.exports=Object.keys||function(h){return p(h,f)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],100:[function(t,R,M){var p={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,h=f&&!p.call({1:2},1);M.f=h?function(b){return!!(b=f(this,b))&&b.enumerable}:p},{}],101:[function(t,R,M){var p=t("../internals/an-object"),f=t("../internals/a-possible-prototype");R.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var h,b=!1,w={};try{(h=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(w,[]),b=w instanceof Array}catch{}return function(c,l){return p(c),f(l),b?h.call(c,l):c.__proto__=l,c}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(t,R,M){var p=t("../internals/to-string-tag-support"),f=t("../internals/classof");R.exports=p?{}.toString:function(){return"[object "+f(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":141}],103:[function(t,R,M){var p=t("../internals/get-built-in"),f=t("../internals/object-get-own-property-names"),h=t("../internals/object-get-own-property-symbols"),b=t("../internals/an-object");R.exports=p("Reflect","ownKeys")||function(w){var c=f.f(b(w)),l=h.f;return l?c.concat(l(w)):c}},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(t,R,M){t=t("../internals/global"),R.exports=t},{"../internals/global":59}],105:[function(t,R,M){R.exports=function(p){try{return{error:!1,value:p()}}catch(f){return{error:!0,value:f}}}},{}],106:[function(t,R,M){var p=t("../internals/an-object"),f=t("../internals/is-object"),h=t("../internals/new-promise-capability");R.exports=function(b,w){return p(b),f(w)&&w.constructor===b?w:((0,(b=h.f(b)).resolve)(w),b.promise)}},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(t,R,M){var p=t("../internals/redefine");R.exports=function(f,h,b){for(var w in h)p(f,w,h[w],b);return f}},{"../internals/redefine":108}],108:[function(t,R,M){var p=t("../internals/global"),f=t("../internals/create-non-enumerable-property"),h=t("../internals/has"),b=t("../internals/set-global"),w=t("../internals/inspect-source"),c=(t=t("../internals/internal-state")).get,l=t.enforce,o=String(String).split("String");(R.exports=function(u,m,g,_){var v=!!_&&!!_.unsafe,x=!!_&&!!_.enumerable;_=!!_&&!!_.noTargetGet,typeof g=="function"&&(typeof m!="string"||h(g,"name")||f(g,"name",m),l(g).source=o.join(typeof m=="string"?m:"")),u===p?x?u[m]=g:b(m,g):(v?!_&&u[m]&&(x=!0):delete u[m],x?u[m]=g:f(u,m,g))})(Function.prototype,"toString",function(){return typeof this=="function"&&c(this).source||w(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(t,R,M){var p=t("./classof-raw"),f=t("./regexp-exec");R.exports=function(h,b){var w=h.exec;if(typeof w=="function"){if(typeof(w=w.call(h,b))!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return w}if(p(h)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return f.call(h,b)}},{"./classof-raw":28,"./regexp-exec":110}],110:[function(t,R,M){var p,f,h=t("./regexp-flags"),b=(t=t("./regexp-sticky-helpers"),RegExp.prototype.exec),w=String.prototype.replace,c=b,l=(p=/a/,f=/b*/g,b.call(p,"a"),b.call(f,"a"),p.lastIndex!==0||f.lastIndex!==0),o=t.UNSUPPORTED_Y||t.BROKEN_CARET,u=/()??/.exec("")[1]!==void 0;R.exports=c=l||u||o?function(m){var g,_,v,x,E=this,j=o&&E.sticky,O=h.call(E),P=E.source,L=0,z=m;return j&&((O=O.replace("y","")).indexOf("g")===-1&&(O+="g"),z=String(m).slice(E.lastIndex),0<E.lastIndex&&(!E.multiline||E.multiline&&m[E.lastIndex-1]!==`
`)&&(P="(?: "+P+")",z=" "+z,L++),_=new RegExp("^(?:"+P+")",O)),u&&(_=new RegExp("^"+P+"$(?!\\s)",O)),l&&(g=E.lastIndex),v=b.call(j?_:E,z),j?v?(v.input=v.input.slice(L),v[0]=v[0].slice(L),v.index=E.lastIndex,E.lastIndex+=v[0].length):E.lastIndex=0:l&&v&&(E.lastIndex=E.global?v.index+v[0].length:g),u&&v&&1<v.length&&w.call(v[0],_,function(){for(x=1;x<arguments.length-2;x++)arguments[x]===void 0&&(v[x]=void 0)}),v}:c},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(t,R,M){var p=t("../internals/an-object");R.exports=function(){var f=p(this),h="";return f.global&&(h+="g"),f.ignoreCase&&(h+="i"),f.multiline&&(h+="m"),f.dotAll&&(h+="s"),f.unicode&&(h+="u"),f.sticky&&(h+="y"),h}},{"../internals/an-object":10}],112:[function(t,R,M){function p(f,h){return RegExp(f,h)}t=t("./fails"),M.UNSUPPORTED_Y=t(function(){var f=p("a","y");return f.lastIndex=2,f.exec("abcd")!=null}),M.BROKEN_CARET=t(function(){var f=p("^r","gy");return f.lastIndex=2,f.exec("str")!=null})},{"./fails":51}],113:[function(t,R,M){R.exports=function(p){if(p==null)throw TypeError("Can't call method on "+p);return p}},{}],114:[function(t,R,M){R.exports=Object.is||function(p,f){return p===f?p!==0||1/p==1/f:p!=p&&f!=f}},{}],115:[function(t,R,M){var p=t("../internals/global"),f=t("../internals/create-non-enumerable-property");R.exports=function(h,b){try{f(p,h,b)}catch{p[h]=b}return b}},{"../internals/create-non-enumerable-property":38,"../internals/global":59}],116:[function(t,R,M){var p=t("../internals/get-built-in"),f=t("../internals/object-define-property"),h=t("../internals/well-known-symbol"),b=t("../internals/descriptors"),w=h("species");R.exports=function(c){c=p(c);var l=f.f;b&&c&&!c[w]&&l(c,w,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],117:[function(t,R,M){var p=t("../internals/object-define-property").f,f=t("../internals/has"),h=t("../internals/well-known-symbol")("toStringTag");R.exports=function(b,w,c){b&&!f(b=c?b:b.prototype,h)&&p(b,h,{configurable:!0,value:w})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],118:[function(t,R,M){var p=t("../internals/shared"),f=t("../internals/uid"),h=p("keys");R.exports=function(b){return h[b]||(h[b]=f(b))}},{"../internals/shared":120,"../internals/uid":145}],119:[function(t,R,M){var p=t("../internals/global"),f=(t=t("../internals/set-global"),"__core-js_shared__");p=p[f]||t(f,{}),R.exports=p},{"../internals/global":59,"../internals/set-global":115}],120:[function(t,R,M){var p=t("../internals/is-pure"),f=t("../internals/shared-store");(R.exports=function(h,b){return f[h]||(f[h]=b!==void 0?b:{})})("versions",[]).push({version:"3.6.5",mode:p?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(t,R,M){var p=t("../internals/an-object"),f=t("../internals/a-function"),h=t("../internals/well-known-symbol")("species");R.exports=function(b,w){return(b=p(b).constructor)===void 0||(b=p(b)[h])==null?w:f(b)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":148}],122:[function(t,R,M){var p=t("../internals/fails");R.exports=function(f){return p(function(){var h=""[f]('"');return h!==h.toLowerCase()||3<h.split('"').length})}},{"../internals/fails":51}],123:[function(t,R,M){function p(b){return function(w,c){w=String(h(w)),c=f(c);var l,o=w.length;return c<0||o<=c?b?"":void 0:(l=w.charCodeAt(c))<55296||56319<l||c+1===o||(o=w.charCodeAt(c+1))<56320||57343<o?b?w.charAt(c):l:b?w.slice(c,c+2):o-56320+(l-55296<<10)+65536}}var f=t("../internals/to-integer"),h=t("../internals/require-object-coercible");R.exports={codeAt:p(!1),charAt:p(!0)}},{"../internals/require-object-coercible":113,"../internals/to-integer":135}],124:[function(t,R,M){t=t("../internals/engine-user-agent"),R.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(t)},{"../internals/engine-user-agent":47}],125:[function(t,R,M){function p(c){return function(l,o,u){var m=(l=String(b(l))).length;return u=u===void 0?" ":String(u),(o=f(o))<=m||u==""?l:((m=h.call(u,w((o-=m)/u.length))).length>o&&(m=m.slice(0,o)),c?l+m:m+l)}}var f=t("../internals/to-length"),h=t("../internals/string-repeat"),b=t("../internals/require-object-coercible"),w=Math.ceil;R.exports={start:p(!1),end:p(!0)}},{"../internals/require-object-coercible":113,"../internals/string-repeat":127,"../internals/to-length":136}],126:[function(t,R,M){function p(x){return x+22+75*(x<26)}function f(x){var E,j=[],O=(x=function(te){for(var se=[],ce=0,q=te.length;ce<q;){var Z,ie=te.charCodeAt(ce++);55296<=ie&&ie<=56319&&ce<q?(64512&(Z=te.charCodeAt(ce++)))==56320?se.push(((1023&ie)<<10)+(1023&Z)+65536):(se.push(ie),ce--):se.push(ie)}return se}(x)).length,P=128,L=0,z=72;for(H=0;H<x.length;H++)(E=x[H])<128&&j.push(v(E));var N=j.length,V=N;for(N&&j.push("-");V<O;){for(var k=h,H=0;H<x.length;H++)P<=(E=x[H])&&E<k&&(k=E);var G=V+1;if(k-P>_((h-L)/G))throw RangeError(m);for(L+=(k-P)*G,P=k,H=0;H<x.length;H++){if((E=x[H])<P&&++L>h)throw RangeError(m);if(E==P){for(var F=L,W=b;;W+=b){var Q=W<=z?1:z+w<=W?w:W-z;if(F<Q)break;var J=F-Q,ee=b-Q;j.push(v(p(Q+J%ee))),F=_(J/ee)}j.push(v(p(F))),z=function(te,se,ce){var q=0;for(te=ce?_(te/l):te>>1,te+=_(te/se);g*w>>1<te;q+=b)te=_(te/g);return _(q+(g+1)*te/(te+c))}(L,G,V==N),L=0,++V}}++L,++P}return j.join("")}var h=2147483647,b=36,w=26,c=38,l=700,o=/[^\0-\u007E]/,u=/[.\u3002\uFF0E\uFF61]/g,m="Overflow: input needs wider integers to process",g=b-1,_=Math.floor,v=String.fromCharCode;R.exports=function(x){for(var E,j=[],O=x.toLowerCase().replace(u,".").split("."),P=0;P<O.length;P++)E=O[P],j.push(o.test(E)?"xn--"+f(E):E);return j.join(".")}},{}],127:[function(t,R,M){var p=t("../internals/to-integer"),f=t("../internals/require-object-coercible");R.exports="".repeat||function(h){var b=String(f(this)),w="",c=p(h);if(c<0||c==1/0)throw RangeError("Wrong number of repetitions");for(;0<c;(c>>>=1)&&(b+=b))1&c&&(w+=b);return w}},{"../internals/require-object-coercible":113,"../internals/to-integer":135}],128:[function(t,R,M){var p=t("../internals/fails"),f=t("../internals/whitespaces");R.exports=function(h){return p(function(){return!!f[h]()||"​᠎"[h]()!="​᠎"||f[h].name!==h})}},{"../internals/fails":51,"../internals/whitespaces":149}],129:[function(t,R,M){function p(w){return function(c){return c=String(f(c)),1&w&&(c=c.replace(h,"")),2&w?c.replace(b,""):c}}var f=t("../internals/require-object-coercible"),h=(t="["+t("../internals/whitespaces")+"]",RegExp("^"+t+t+"*")),b=RegExp(t+t+"*$");R.exports={start:p(1),end:p(2),trim:p(3)}},{"../internals/require-object-coercible":113,"../internals/whitespaces":149}],130:[function(t,R,M){function p(N){return function(){z(N)}}function f(N){z(N.data)}function h(N){w.postMessage(N+"",g.protocol+"//"+g.host)}var b,w=t("../internals/global"),c=t("../internals/fails"),l=t("../internals/classof-raw"),o=t("../internals/function-bind-context"),u=t("../internals/html"),m=t("../internals/document-create-element"),g=(t=t("../internals/engine-is-ios"),w.location),_=w.setImmediate,v=w.clearImmediate,x=w.process,E=w.MessageChannel,j=w.Dispatch,O=0,P={},L="onreadystatechange",z=function(N){var V;P.hasOwnProperty(N)&&(V=P[N],delete P[N],V())};_&&v||(_=function(N){for(var V=[],k=1;k<arguments.length;)V.push(arguments[k++]);return P[++O]=function(){(typeof N=="function"?N:Function(N)).apply(void 0,V)},b(O),O},v=function(N){delete P[N]},l(x)=="process"?b=function(N){x.nextTick(p(N))}:j&&j.now?b=function(N){j.now(p(N))}:E&&!t?(t=(l=new E).port2,l.port1.onmessage=f,b=o(t.postMessage,t,1)):!w.addEventListener||typeof postMessage!="function"||w.importScripts||c(h)||g.protocol==="file:"?b=L in m("script")?function(N){u.appendChild(m("script"))[L]=function(){u.removeChild(this),z(N)}}:function(N){setTimeout(p(N),0)}:(b=h,w.addEventListener("message",f,!1))),R.exports={set:_,clear:v}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],131:[function(t,R,M){var p=t("../internals/classof-raw");R.exports=function(f){if(typeof f!="number"&&p(f)!="Number")throw TypeError("Incorrect invocation");return+f}},{"../internals/classof-raw":28}],132:[function(t,R,M){var p=t("../internals/to-integer"),f=Math.max,h=Math.min;R.exports=function(b,w){return(b=p(b))<0?f(b+w,0):h(b,w)}},{"../internals/to-integer":135}],133:[function(t,R,M){var p=t("../internals/to-integer"),f=t("../internals/to-length");R.exports=function(h){if(h===void 0)return 0;h=p(h);var b=f(h);if(h!==b)throw RangeError("Wrong length or index");return b}},{"../internals/to-integer":135,"../internals/to-length":136}],134:[function(t,R,M){var p=t("../internals/indexed-object"),f=t("../internals/require-object-coercible");R.exports=function(h){return p(f(h))}},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],135:[function(t,R,M){var p=Math.ceil,f=Math.floor;R.exports=function(h){return isNaN(h=+h)?0:(0<h?f:p)(h)}},{}],136:[function(t,R,M){var p=t("../internals/to-integer"),f=Math.min;R.exports=function(h){return 0<h?f(p(h),9007199254740991):0}},{"../internals/to-integer":135}],137:[function(t,R,M){var p=t("../internals/require-object-coercible");R.exports=function(f){return Object(p(f))}},{"../internals/require-object-coercible":113}],138:[function(t,R,M){var p=t("../internals/to-positive-integer");R.exports=function(f,h){if((f=p(f))%h)throw RangeError("Wrong offset");return f}},{"../internals/to-positive-integer":139}],139:[function(t,R,M){var p=t("../internals/to-integer");R.exports=function(f){if((f=p(f))<0)throw RangeError("The argument can't be less than 0");return f}},{"../internals/to-integer":135}],140:[function(t,R,M){var p=t("../internals/is-object");R.exports=function(f,h){if(!p(f))return f;var b,w;if(h&&typeof(b=f.toString)=="function"&&!p(w=b.call(f))||typeof(b=f.valueOf)=="function"&&!p(w=b.call(f))||!h&&typeof(b=f.toString)=="function"&&!p(w=b.call(f)))return w;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":74}],141:[function(t,R,M){var p={};p[t("../internals/well-known-symbol")("toStringTag")]="z",R.exports=String(p)==="[object z]"},{"../internals/well-known-symbol":148}],142:[function(t,R,M){function p(st,ve){for(var ue=0,ze=ve.length,He=new(Se(st))(ze);ue<ze;)He[ue]=ve[ue++];return He}function f(st,ve){Z(st,ve,{get:function(){return ce(this)[ve]}})}function h(st){return st instanceof be||(st=N(st))=="ArrayBuffer"||st=="SharedArrayBuffer"}function b(st,ve){return Ue(st)&&typeof ve!="symbol"&&ve in st&&String(+ve)==String(ve)}function w(st,ve){return b(st,ve=L(ve,!0))?x(2,st[ve]):ie(st,ve)}function c(st,ve,ue){return!(b(st,ve=L(ve,!0))&&V(ue)&&z(ue,"value"))||z(ue,"get")||z(ue,"set")||ue.configurable||z(ue,"writable")&&!ue.writable||z(ue,"enumerable")&&!ue.enumerable?Z(st,ve,ue):(st[ve]=ue.value,st)}var l=t("../internals/export"),o=t("../internals/global"),u=t("../internals/descriptors"),m=t("../internals/typed-array-constructors-require-wrappers"),g=t("../internals/array-buffer-view-core"),_=t("../internals/array-buffer"),v=t("../internals/an-instance"),x=t("../internals/create-property-descriptor"),E=t("../internals/create-non-enumerable-property"),j=t("../internals/to-length"),O=t("../internals/to-index"),P=t("../internals/to-offset"),L=t("../internals/to-primitive"),z=t("../internals/has"),N=t("../internals/classof"),V=t("../internals/is-object"),k=t("../internals/object-create"),H=t("../internals/object-set-prototype-of"),G=t("../internals/object-get-own-property-names").f,F=t("../internals/typed-array-from"),W=t("../internals/array-iteration").forEach,Q=t("../internals/set-species"),J=t("../internals/object-define-property"),ee=t("../internals/object-get-own-property-descriptor"),te=t("../internals/internal-state"),se=t("../internals/inherit-if-required"),ce=te.get,q=te.set,Z=J.f,ie=ee.f,pe=Math.round,ge=o.RangeError,be=_.ArrayBuffer,le=_.DataView,re=g.NATIVE_ARRAY_BUFFER_VIEWS,Te=g.TYPED_ARRAY_TAG,Ce=g.TypedArray,Me=g.TypedArrayPrototype,Se=g.aTypedArrayConstructor,Ue=g.isTypedArray,Fe="BYTES_PER_ELEMENT",Be="Wrong length";u?(re||(ee.f=w,J.f=c,f(Me,"buffer"),f(Me,"byteOffset"),f(Me,"byteLength"),f(Me,"length")),l({target:"Object",stat:!0,forced:!re},{getOwnPropertyDescriptor:w,defineProperty:c}),R.exports=function(st,ve,ue){function ze(Ze,at){Z(Ze,at,{get:function(){var fe=this,ae=at;return(fe=ce(fe)).view[je](ae*He+fe.byteOffset,!0)},set:function(fe){var ae=this,oe=at;ae=ce(ae),ue&&(fe=(fe=pe(fe))<0?0:255<fe?255:255&fe),ae.view[Ie](oe*He+ae.byteOffset,fe,!0)},enumerable:!0})}var He=st.match(/\d+$/)[0]/8,me=st+(ue?"Clamped":"")+"Array",je="get"+st,Ie="set"+st,Ye=o[me],it=Ye,yt=(st=it&&it.prototype,{});re?m&&(it=ve(function(Ze,at,fe,ae){return v(Ze,it,me),se(V(at)?h(at)?ae!==void 0?new Ye(at,P(fe,He),ae):fe!==void 0?new Ye(at,P(fe,He)):new Ye(at):Ue(at)?p(it,at):F.call(it,at):new Ye(O(at)),Ze,it)}),H&&H(it,Ce),W(G(Ye),function(Ze){Ze in it||E(it,Ze,Ye[Ze])}),it.prototype=st):(it=ve(function(Ze,at,fe,ae){v(Ze,it,me);var oe,_e,he=0,ke=0;if(V(at)){if(!h(at))return Ue(at)?p(it,at):F.call(it,at);var We=at;if(ke=P(fe,He),fe=at.byteLength,ae===void 0){if(fe%He||(oe=fe-ke)<0)throw ge(Be)}else if(fe<(oe=j(ae)*He)+ke)throw ge(Be);_e=oe/He}else _e=O(at),We=new be(oe=_e*He);for(q(Ze,{buffer:We,byteOffset:ke,byteLength:oe,length:_e,view:new le(We)});he<_e;)ze(Ze,he++)}),H&&H(it,Ce),st=it.prototype=k(Me)),st.constructor!==it&&E(st,"constructor",it),Te&&E(st,Te,me),yt[me]=it,l({global:!0,forced:it!=Ye,sham:!re},yt),Fe in it||E(it,Fe,He),Fe in st||E(st,Fe,He),Q(me)}):R.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":133,"../internals/to-length":136,"../internals/to-offset":138,"../internals/to-primitive":140,"../internals/typed-array-constructors-require-wrappers":143,"../internals/typed-array-from":144}],143:[function(t,R,M){var p=t("../internals/global"),f=t("../internals/fails"),h=t("../internals/check-correctness-of-iteration"),b=(t=t("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,p.ArrayBuffer),w=p.Int8Array;R.exports=!t||!f(function(){w(1)})||!f(function(){new w(-1)})||!h(function(c){new w,new w(null),new w(1.5),new w(c)},!0)||f(function(){return new w(new b(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":59}],144:[function(t,R,M){var p=t("../internals/to-object"),f=t("../internals/to-length"),h=t("../internals/get-iterator-method"),b=t("../internals/is-array-iterator-method"),w=t("../internals/function-bind-context"),c=t("../internals/array-buffer-view-core").aTypedArrayConstructor;R.exports=function(l){var o,u,m,g,_,v,x=p(l),E=arguments.length,j=1<E?arguments[1]:void 0,O=j!==void 0,P=h(x);if(P!=null&&!b(P))for(v=(_=P.call(x)).next,x=[];!(g=v.call(_)).done;)x.push(g.value);for(O&&2<E&&(j=w(j,arguments[2],2)),u=f(x.length),m=new(c(this))(u),o=0;o<u;o++)m[o]=O?j(x[o],o):x[o];return m}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136,"../internals/to-object":137}],145:[function(t,R,M){var p=0,f=Math.random();R.exports=function(h){return"Symbol("+String(h===void 0?"":h)+")_"+(++p+f).toString(36)}},{}],146:[function(t,R,M){t=t("../internals/native-symbol"),R.exports=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":83}],147:[function(t,R,M){t=t("../internals/well-known-symbol"),M.f=t},{"../internals/well-known-symbol":148}],148:[function(t,R,M){var p=t("../internals/global"),f=t("../internals/shared"),h=t("../internals/has"),b=t("../internals/uid"),w=t("../internals/native-symbol"),c=(t=t("../internals/use-symbol-as-uid"),f("wks")),l=p.Symbol,o=t?l:l&&l.withoutSetter||b;R.exports=function(u){return h(c,u)||(w&&h(l,u)?c[u]=l[u]:c[u]=o("Symbol."+u)),c[u]}},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":145,"../internals/use-symbol-as-uid":146}],149:[function(t,R,M){R.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},{}],150:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/global"),h=t("../internals/array-buffer"),b=(t=t("../internals/set-species"),"ArrayBuffer");h=h[b],p({global:!0,forced:f[b]!==h},{ArrayBuffer:h}),t(b)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":59,"../internals/set-species":116}],151:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/fails"),h=t("../internals/is-array"),b=t("../internals/is-object"),w=t("../internals/to-object"),c=t("../internals/to-length"),l=t("../internals/create-property"),o=t("../internals/array-species-create"),u=t("../internals/array-method-has-species-support"),m=t("../internals/well-known-symbol"),g=(t=t("../internals/engine-v8-version"),m("isConcatSpreadable")),_=9007199254740991,v="Maximum allowed index exceeded";m=51<=t||!f(function(){var x=[];return x[g]=!1,x.concat()[0]!==x}),t=u("concat"),p({target:"Array",proto:!0,forced:!m||!t},{concat:function(x){for(var E,j,O,P,L,z=w(this),N=o(z,0),V=0,k=-1,H=arguments.length;k<H;k++)if(L=void 0,b(P=O=k===-1?z:arguments[k])&&((L=P[g])!==void 0?L:h(P))){if(j=c(O.length),_<V+j)throw TypeError(v);for(E=0;E<j;E++,V++)E in O&&l(N,V,O[E])}else{if(_<=V)throw TypeError(v);l(N,V++,O)}return N.length=V,N}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":136,"../internals/to-object":137,"../internals/well-known-symbol":148}],152:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/array-copy-within");t=t("../internals/add-to-unscopables"),p({target:"Array",proto:!0},{copyWithin:f}),t("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],153:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/array-iteration").every,h=t("../internals/array-method-is-strict");t=t("../internals/array-method-uses-to-length"),h=h("every"),t=t("every"),p({target:"Array",proto:!0,forced:!h||!t},{every:function(b){return f(this,b,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],154:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/array-fill");t=t("../internals/add-to-unscopables"),p({target:"Array",proto:!0},{fill:f}),t("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],155:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/array-iteration").filter,h=t("../internals/array-method-has-species-support");t=t("../internals/array-method-uses-to-length"),h=h("filter"),t=t("filter"),p({target:"Array",proto:!0,forced:!h||!t},{filter:function(b){return f(this,b,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(t,R,M){var p=t("../internals/export");t=t("../internals/array-for-each"),p({target:"Array",proto:!0,forced:[].forEach!=t},{forEach:t})},{"../internals/array-for-each":16,"../internals/export":50}],157:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/array-from");p({target:"Array",stat:!0,forced:!t("../internals/check-correctness-of-iteration")(function(h){Array.from(h)})},{from:f})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],158:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/array-includes").includes,h=t("../internals/add-to-unscopables");p({target:"Array",proto:!0,forced:!t("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(b){return f(this,b,1<arguments.length?arguments[1]:void 0)}}),h("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],159:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/array-includes").indexOf,h=t("../internals/array-method-is-strict"),b=(t=t("../internals/array-method-uses-to-length"),[].indexOf),w=!!b&&1/[1].indexOf(1,-0)<0;h=h("indexOf"),t=t("indexOf",{ACCESSORS:!0,1:0}),p({target:"Array",proto:!0,forced:w||!h||!t},{indexOf:function(c){return w?b.apply(this,arguments)||0:f(this,c,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],160:[function(t,R,M){var p=t("../internals/to-indexed-object"),f=t("../internals/add-to-unscopables"),h=t("../internals/iterators"),b=t("../internals/internal-state"),w=(t=t("../internals/define-iterator"),"Array Iterator"),c=b.set,l=b.getterFor(w);R.exports=t(Array,"Array",function(o,u){c(this,{type:w,target:p(o),index:0,kind:u})},function(){var o=l(this),u=o.target,m=o.kind,g=o.index++;return!u||g>=u.length?{value:o.target=void 0,done:!0}:m=="keys"?{value:g,done:!1}:m=="values"?{value:u[g],done:!1}:{value:[g,u[g]],done:!1}},"values"),h.Arguments=h.Array,f("keys"),f("values"),f("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":134}],161:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/indexed-object"),h=t("../internals/to-indexed-object"),b=(t=t("../internals/array-method-is-strict"),[].join);f=f!=Object,t=t("join",","),p({target:"Array",proto:!0,forced:f||!t},{join:function(w){return b.call(h(this),w===void 0?",":w)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":66,"../internals/to-indexed-object":134}],162:[function(t,R,M){t("../internals/export")({target:"Array",proto:!0,forced:(t=t("../internals/array-last-index-of"))!==[].lastIndexOf},{lastIndexOf:t})},{"../internals/array-last-index-of":20,"../internals/export":50}],163:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/array-iteration").map,h=t("../internals/array-method-has-species-support");t=t("../internals/array-method-uses-to-length"),h=h("map"),t=t("map"),p({target:"Array",proto:!0,forced:!h||!t},{map:function(b){return f(this,b,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/is-object"),h=t("../internals/is-array"),b=t("../internals/to-absolute-index"),w=t("../internals/to-length"),c=t("../internals/to-indexed-object"),l=t("../internals/create-property"),o=t("../internals/well-known-symbol"),u=t("../internals/array-method-has-species-support"),m=(t=t("../internals/array-method-uses-to-length"),u=u("slice"),t=t("slice",{ACCESSORS:!0,0:0,1:2}),o("species")),g=[].slice,_=Math.max;p({target:"Array",proto:!0,forced:!u||!t},{slice:function(v,x){var E,j,O,P=c(this),L=w(P.length),z=b(v,L),N=b(x===void 0?L:x,L);if(h(P)&&((E=typeof(E=P.constructor)=="function"&&(E===Array||h(E.prototype))||f(E)&&(E=E[m])===null?void 0:E)===Array||E===void 0))return g.call(P,z,N);for(j=new(E===void 0?Array:E)(_(N-z,0)),O=0;z<N;z++,O++)z in P&&l(j,O,P[z]);return j.length=O,j}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":132,"../internals/to-indexed-object":134,"../internals/to-length":136,"../internals/well-known-symbol":148}],165:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/array-iteration").some,h=t("../internals/array-method-is-strict");t=t("../internals/array-method-uses-to-length"),h=h("some"),t=t("some"),p({target:"Array",proto:!0,forced:!h||!t},{some:function(b){return f(this,b,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],166:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/to-absolute-index"),h=t("../internals/to-integer"),b=t("../internals/to-length"),w=t("../internals/to-object"),c=t("../internals/array-species-create"),l=t("../internals/create-property"),o=t("../internals/array-method-has-species-support"),u=(t=t("../internals/array-method-uses-to-length"),o=o("splice"),t=t("splice",{ACCESSORS:!0,0:0,1:2}),Math.max),m=Math.min;p({target:"Array",proto:!0,forced:!o||!t},{splice:function(g,_){var v,x,E,j,O,P,L=w(this),z=b(L.length),N=f(g,z);if((g=arguments.length)===0?v=x=0:x=g===1?(v=0,z-N):(v=g-2,m(u(h(_),0),z-N)),9007199254740991<z+v-x)throw TypeError("Maximum allowed length exceeded");for(E=c(L,x),j=0;j<x;j++)(O=N+j)in L&&l(E,j,L[O]);if(v<(E.length=x)){for(j=N;j<z-x;j++)P=j+v,(O=j+x)in L?L[P]=L[O]:delete L[P];for(j=z;z-x+v<j;j--)delete L[j-1]}else if(x<v)for(j=z-x;N<j;j--)P=j+v-1,(O=j+x-1)in L?L[P]=L[O]:delete L[P];for(j=0;j<v;j++)L[j+N]=arguments[j+2];return L.length=z-x+v,E}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":132,"../internals/to-integer":135,"../internals/to-length":136,"../internals/to-object":137}],167:[function(t,R,M){var p=t("../internals/descriptors"),f=(t=t("../internals/object-define-property").f,Function.prototype),h=f.toString,b=/^\s*function ([^ (]*)/;!p||"name"in f||t(f,"name",{configurable:!0,get:function(){try{return h.call(this).match(b)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":92}],168:[function(t,R,M){var p=t("../internals/collection");t=t("../internals/collection-strong"),R.exports=p("Map",function(f){return function(){return f(this,arguments.length?arguments[0]:void 0)}},t)},{"../internals/collection":32,"../internals/collection-strong":30}],169:[function(t,R,M){t=t("../internals/export");var p=Math.hypot,f=Math.abs,h=Math.sqrt;t({target:"Math",stat:!0,forced:!!p&&p(1/0,NaN)!==1/0},{hypot:function(b,w){for(var c,l,o=0,u=0,m=arguments.length,g=0;u<m;)g<(c=f(arguments[u++]))?(o=o*(l=g/c)*l+1,g=c):o+=0<c?(l=c/g)*l:c;return g===1/0?1/0:g*h(o)}})},{"../internals/export":50}],170:[function(t,R,M){t("../internals/export")({target:"Math",stat:!0},{sign:t("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":80}],171:[function(t,R,M){function p(H){var G,F,W,Q,J,ee,te,se=u(H,!1);if(typeof se=="string"&&2<se.length){if((H=(se=E(se)).charCodeAt(0))===43||H===45){if((G=se.charCodeAt(2))===88||G===120)return NaN}else if(H===48){switch(se.charCodeAt(1)){case 66:case 98:F=2,W=49;break;case 79:case 111:F=8,W=55;break;default:return+se}for(J=(Q=se.slice(2)).length,ee=0;ee<J;ee++)if((te=Q.charCodeAt(ee))<48||W<te)return NaN;return parseInt(Q,F)}}return+se}var f=t("../internals/descriptors"),h=t("../internals/global"),b=t("../internals/is-forced"),w=t("../internals/redefine"),c=t("../internals/has"),l=t("../internals/classof-raw"),o=t("../internals/inherit-if-required"),u=t("../internals/to-primitive"),m=t("../internals/fails"),g=t("../internals/object-create"),_=t("../internals/object-get-own-property-names").f,v=t("../internals/object-get-own-property-descriptor").f,x=t("../internals/object-define-property").f,E=t("../internals/string-trim").trim,j="Number",O=h[j],P=O.prototype,L=l(g(P))==j;if(b(j,!O(" 0o1")||!O("0b1")||O("+0x1"))){for(var z,N=function(H){H=arguments.length<1?0:H;var G=this;return G instanceof N&&(L?m(function(){P.valueOf.call(G)}):l(G)!=j)?o(new O(p(H)),G,N):p(H)},V=f?_(O):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;V.length>k;k++)c(O,z=V[k])&&!c(N,z)&&x(N,z,v(O,z));(N.prototype=P).constructor=N,w(h,j,N)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":129,"../internals/to-primitive":140}],172:[function(t,R,M){t("../internals/export")({target:"Number",stat:!0},{isFinite:t("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":88}],173:[function(t,R,M){function p(o,u,m){return u===0?m:u%2==1?p(o,u-1,m*o):p(o*o,u/2,m)}var f=t("../internals/export"),h=t("../internals/to-integer"),b=t("../internals/this-number-value"),w=t("../internals/string-repeat"),c=(t=t("../internals/fails"),1 .toFixed),l=Math.floor;f({target:"Number",proto:!0,forced:c&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!t(function(){c.call({})})},{toFixed:function(o){function u(P,L){for(var z=-1,N=L;++z<6;)N+=P*E[z],E[z]=N%1e7,N=l(N/1e7)}function m(P){for(var L=6,z=0;0<=--L;)z+=E[L],E[L]=l(z/P),z=z%P*1e7}function g(){for(var P,L=6,z="";0<=--L;)z===""&&L!==0&&E[L]===0||(P=String(E[L]),z=z===""?P:z+w.call("0",7-P.length)+P);return z}var _,v,x=b(this),E=(o=h(o),[0,0,0,0,0,0]),j="",O="0";if(o<0||20<o)throw RangeError("Incorrect fraction digits");if(x!=x)return"NaN";if(x<=-1e21||1e21<=x)return String(x);if(x<0&&(j="-",x=-x),1e-21<x)if(x=(_=function(P){for(var L=0,z=P;4096<=z;)L+=12,z/=4096;for(;2<=z;)L+=1,z/=2;return L}(x*p(2,69,1))-69)<0?x*p(2,-_,1):x/p(2,_,1),x*=4503599627370496,0<(_=52-_)){for(u(0,x),v=o;7<=v;)u(1e7,0),v-=7;for(u(p(10,v,1),0),v=_-1;23<=v;)m(1<<23),v-=23;m(1<<v),u(1,1),m(2),O=g()}else u(0,x),u(1<<-_,0),O=g()+w.call("0",o);return 0<o?j+((x=O.length)<=o?"0."+w.call("0",o-x)+O:O.slice(0,x-o)+"."+O.slice(x-o)):j+O}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":127,"../internals/this-number-value":131,"../internals/to-integer":135}],174:[function(t,R,M){var p=t("../internals/export");t=t("../internals/object-assign"),p({target:"Object",stat:!0,forced:Object.assign!==t},{assign:t})},{"../internals/export":50,"../internals/object-assign":89}],175:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/iterate"),h=t("../internals/create-property");p({target:"Object",stat:!0},{fromEntries:function(b){var w={};return f(b,function(c,l){h(w,c,l)},void 0,!0),w}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":77}],176:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/fails"),h=t("../internals/to-indexed-object"),b=t("../internals/object-get-own-property-descriptor").f;t=t("../internals/descriptors"),f=f(function(){b(1)}),p({target:"Object",stat:!0,forced:!t||f,sham:!t},{getOwnPropertyDescriptor:function(w,c){return b(h(w),c)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":93,"../internals/to-indexed-object":134}],177:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/fails");t=t("../internals/object-get-own-property-names-external").f,p({target:"Object",stat:!0,forced:f(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:t})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":94}],178:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/fails"),h=t("../internals/to-object"),b=t("../internals/object-get-prototype-of");t=t("../internals/correct-prototype-getter"),p({target:"Object",stat:!0,forced:f(function(){b(1)}),sham:!t},{getPrototypeOf:function(w){return b(h(w))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":97,"../internals/to-object":137}],179:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/to-object"),h=t("../internals/object-keys");p({target:"Object",stat:!0,forced:t("../internals/fails")(function(){h(1)})},{keys:function(b){return h(f(b))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":99,"../internals/to-object":137}],180:[function(t,R,M){var p=t("../internals/to-string-tag-support"),f=t("../internals/redefine");t=t("../internals/object-to-string"),p||f(Object.prototype,"toString",t,{unsafe:!0})},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":141}],181:[function(t,R,M){var p,f,h,b,w=t("../internals/export"),c=t("../internals/is-pure"),l=t("../internals/global"),o=t("../internals/get-built-in"),u=t("../internals/native-promise-constructor"),m=t("../internals/redefine"),g=t("../internals/redefine-all"),_=t("../internals/set-to-string-tag"),v=t("../internals/set-species"),x=t("../internals/is-object"),E=t("../internals/a-function"),j=t("../internals/an-instance"),O=t("../internals/classof-raw"),P=t("../internals/inspect-source"),L=t("../internals/iterate"),z=t("../internals/check-correctness-of-iteration"),N=t("../internals/species-constructor"),V=t("../internals/task").set,k=t("../internals/microtask"),H=t("../internals/promise-resolve"),G=t("../internals/host-report-errors"),F=t("../internals/new-promise-capability"),W=t("../internals/perform"),Q=t("../internals/internal-state"),J=t("../internals/is-forced"),ee=t("../internals/well-known-symbol"),te=t("../internals/engine-v8-version"),se=ee("species"),ce="Promise",q=Q.get,Z=Q.set,ie=Q.getterFor(ce),pe=u,ge=l.TypeError,be=l.document,le=l.process,re=o("fetch"),Te=F.f,Ce=Te,Me=O(le)=="process",Se=!!(be&&be.createEvent&&l.dispatchEvent),Ue="unhandledrejection",Fe=(ee=(t=J(ce,function(){var me,je;return P(pe)===String(pe)&&(te===66||!Me&&typeof PromiseRejectionEvent!="function")?!0:!((!c||pe.prototype.finally)&&(51<=te&&/native code/.test(pe)||(je=function(Ie){Ie(function(){},function(){})},((me=pe.resolve(1)).constructor={})[se]=je,me.then(function(){})instanceof je)))}))||!z(function(me){pe.all(me).catch(function(){})}),function(me){var je;return!(!x(me)||typeof(je=me.then)!="function")&&je}),Be=function(me,je,Ie){var Ye;je.notified||(je.notified=!0,Ye=je.reactions,k(function(){for(var it,yt,Ze=je.value,at=je.state==1,fe=0;Ye.length>fe;){var ae,oe,_e,he=Ye[fe++],ke=at?he.ok:he.fail,We=he.resolve,$e=he.reject,Ee=he.domain;try{ke?(at||(je.rejection===2&&function(Ge,ht){V.call(l,function(){Me?le.emit("rejectionHandled",Ge):st("rejectionhandled",Ge,ht.value)})}(me,je),je.rejection=1),ke===!0?ae=Ze:(Ee&&Ee.enter(),ae=ke(Ze),Ee&&(Ee.exit(),_e=!0)),ae===he.promise?$e(ge("Promise-chain cycle")):(oe=Fe(ae))?oe.call(ae,We,$e):We(ae)):$e(Ze)}catch(Ge){Ee&&!_e&&Ee.exit(),$e(Ge)}}je.reactions=[],je.notified=!1,Ie&&!je.rejection&&(it=me,yt=je,V.call(l,function(){var Ge=yt.value,ht=ve(yt);if(ht&&(ht=W(function(){Me?le.emit("unhandledRejection",Ge,it):st(Ue,it,Ge)}),yt.rejection=Me||ve(yt)?2:1,ht.error))throw ht.value}))}))},st=function(me,je,Ie){var Ye;Se?((Ye=be.createEvent("Event")).promise=je,Ye.reason=Ie,Ye.initEvent(me,!1,!0),l.dispatchEvent(Ye)):Ye={promise:je,reason:Ie},(je=l["on"+me])?je(Ye):me===Ue&&G("Unhandled promise rejection",Ie)},ve=function(me){return me.rejection!==1&&!me.parent},ue=function(me,je,Ie,Ye){return function(it){me(je,Ie,it,Ye)}},ze=function(me,je,Ie,Ye){je.done||(je.done=!0,(je=Ye||je).value=Ie,je.state=2,Be(me,je,!0))},He=function(me,je,Ie,Ye){if(!je.done){je.done=!0,Ye&&(je=Ye);try{if(me===Ie)throw ge("Promise can't be resolved itself");var it=Fe(Ie);it?k(function(){var yt={done:!1};try{it.call(Ie,ue(He,me,yt,je),ue(ze,me,yt,je))}catch(Ze){ze(me,yt,Ze,je)}}):(je.value=Ie,je.state=1,Be(me,je,!1))}catch(yt){ze(me,{done:!1},yt,je)}}};t&&(pe=function(me){j(this,pe,ce),E(me),p.call(this);var je=q(this);try{me(ue(He,this,je),ue(ze,this,je))}catch(Ie){ze(this,je,Ie)}},(p=function(me){Z(this,{type:ce,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=g(pe.prototype,{then:function(me,je){var Ie=ie(this),Ye=Te(N(this,pe));return Ye.ok=typeof me!="function"||me,Ye.fail=typeof je=="function"&&je,Ye.domain=Me?le.domain:void 0,Ie.parent=!0,Ie.reactions.push(Ye),Ie.state!=0&&Be(this,Ie,!1),Ye.promise},catch:function(me){return this.then(void 0,me)}}),f=function(){var me=new p,je=q(me);this.promise=me,this.resolve=ue(He,me,je),this.reject=ue(ze,me,je)},F.f=Te=function(me){return me===pe||me===h?new f:Ce(me)},c||typeof u!="function"||(b=u.prototype.then,m(u.prototype,"then",function(me,je){var Ie=this;return new pe(function(Ye,it){b.call(Ie,Ye,it)}).then(me,je)},{unsafe:!0}),typeof re=="function"&&w({global:!0,enumerable:!0,forced:!0},{fetch:function(me){return H(pe,re.apply(l,arguments))}}))),w({global:!0,wrap:!0,forced:t},{Promise:pe}),_(pe,ce,!1,!0),v(ce),h=o(ce),w({target:ce,stat:!0,forced:t},{reject:function(me){var je=Te(this);return je.reject.call(void 0,me),je.promise}}),w({target:ce,stat:!0,forced:c||t},{resolve:function(me){return H(c&&this===h?pe:this,me)}}),w({target:ce,stat:!0,forced:ee},{all:function(me){var je=this,Ie=Te(je),Ye=Ie.resolve,it=Ie.reject,yt=W(function(){var Ze=E(je.resolve),at=[],fe=0,ae=1;L(me,function(oe){var _e=fe++,he=!1;at.push(void 0),ae++,Ze.call(je,oe).then(function(ke){he||(he=!0,at[_e]=ke,--ae||Ye(at))},it)}),--ae||Ye(at)});return yt.error&&it(yt.value),Ie.promise},race:function(me){var je=this,Ie=Te(je),Ye=Ie.reject,it=W(function(){var yt=E(je.resolve);L(me,function(Ze){yt.call(je,Ze).then(Ie.resolve,Ye)})});return it.error&&Ye(it.value),Ie.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":130,"../internals/well-known-symbol":148}],182:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/get-built-in"),h=t("../internals/a-function"),b=t("../internals/an-object"),w=t("../internals/is-object"),c=t("../internals/object-create"),l=t("../internals/function-bind"),o=(t=t("../internals/fails"),f("Reflect","construct")),u=t(function(){function g(){}return!(o(function(){},[],g)instanceof g)}),m=!t(function(){o(function(){})});p({target:"Reflect",stat:!0,forced:f=u||m,sham:f},{construct:function(g,_){h(g),b(_);var v=arguments.length<3?g:h(arguments[2]);if(m&&!u)return o(g,_,v);if(g==v){switch(_.length){case 0:return new g;case 1:return new g(_[0]);case 2:return new g(_[0],_[1]);case 3:return new g(_[0],_[1],_[2]);case 4:return new g(_[0],_[1],_[2],_[3])}var x=[null];return x.push.apply(x,_),new(l.apply(g,x))}return x=v.prototype,v=c(w(x)?x:Object.prototype),x=Function.apply.call(g,v,_),w(x)?x:v}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],183:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/is-object"),h=t("../internals/an-object"),b=t("../internals/has"),w=t("../internals/object-get-own-property-descriptor"),c=t("../internals/object-get-prototype-of");p({target:"Reflect",stat:!0},{get:function l(o,u){var m,g=arguments.length<3?o:arguments[2];return h(o)===g?o[u]:(m=w.f(o,u))?b(m,"value")?m.value:m.get===void 0?void 0:m.get.call(g):f(m=c(o))?l(m,u,g):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":60,"../internals/is-object":74,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-prototype-of":97}],184:[function(t,R,M){var p=t("../internals/descriptors"),f=t("../internals/global"),h=t("../internals/is-forced"),b=t("../internals/inherit-if-required"),w=t("../internals/object-define-property").f,c=t("../internals/object-get-own-property-names").f,l=t("../internals/is-regexp"),o=t("../internals/regexp-flags"),u=t("../internals/regexp-sticky-helpers"),m=t("../internals/redefine"),g=t("../internals/fails"),_=t("../internals/internal-state").set,v=t("../internals/set-species"),x=t("../internals/well-known-symbol")("match"),E=f.RegExp,j=E.prototype,O=/a/g,P=/a/g,L=new E(O)!==O,z=u.UNSUPPORTED_Y;if(p&&h("RegExp",!L||z||g(function(){return P[x]=!1,E(O)!=O||E(P)==P||E(O,"i")!="/a/i"}))){for(var N=function(H,G){var F,W=this instanceof N,Q=l(H),J=G===void 0;return!W&&Q&&H.constructor===N&&J?H:(L?Q&&!J&&(H=H.source):H instanceof N&&(J&&(G=o.call(H)),H=H.source),z&&(F=!!G&&-1<G.indexOf("y"))&&(G=G.replace(/y/g,"")),Q=b(L?new E(H,G):E(H,G),W?this:j,N),z&&F&&_(Q,{sticky:F}),Q)},V=c(E),k=0;V.length>k;)(function(H){H in N||w(N,H,{configurable:!0,get:function(){return E[H]},set:function(G){E[H]=G}})})(V[k++]);(j.constructor=N).prototype=j,m(f,"RegExp",N)}v("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":148}],185:[function(t,R,M){var p=t("../internals/export");t=t("../internals/regexp-exec"),p({target:"RegExp",proto:!0,forced:/./.exec!==t},{exec:t})},{"../internals/export":50,"../internals/regexp-exec":110}],186:[function(t,R,M){var p=t("../internals/redefine"),f=t("../internals/an-object"),h=t("../internals/fails"),b=t("../internals/regexp-flags"),w=(t="toString",RegExp.prototype),c=w[t],l=(h=h(function(){return c.call({source:"a",flags:"b"})!="/a/b"}),c.name!=t);(h||l)&&p(RegExp.prototype,t,function(){var o=f(this),u=String(o.source),m=o.flags;return"/"+u+"/"+String(m===void 0&&o instanceof RegExp&&!("flags"in w)?b.call(o):m)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-flags":111}],187:[function(t,R,M){var p=t("../internals/collection");t=t("../internals/collection-strong"),R.exports=p("Set",function(f){return function(){return f(this,arguments.length?arguments[0]:void 0)}},t)},{"../internals/collection":32,"../internals/collection-strong":30}],188:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/object-get-own-property-descriptor").f,h=t("../internals/to-length"),b=t("../internals/not-a-regexp"),w=t("../internals/require-object-coercible"),c=t("../internals/correct-is-regexp-logic"),l=(t=t("../internals/is-pure"),"".endsWith),o=Math.min;c=c("endsWith"),p({target:"String",proto:!0,forced:!(!t&&!c&&(p=f(String.prototype,"endsWith"))&&!p.writable||c)},{endsWith:function(u){var m=String(w(this)),g=(b(u),1<arguments.length?arguments[1]:void 0),_=h(m.length);return g=g===void 0?_:o(h(g),_),_=String(u),l?l.call(m,_,g):m.slice(g-_.length,g)===_}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":136}],189:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/not-a-regexp"),h=t("../internals/require-object-coercible");p({target:"String",proto:!0,forced:!t("../internals/correct-is-regexp-logic")("includes")},{includes:function(b){return!!~String(h(this)).indexOf(f(b),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],190:[function(t,R,M){var p=t("../internals/string-multibyte").charAt,f=t("../internals/internal-state"),h=(t=t("../internals/define-iterator"),"String Iterator"),b=f.set,w=f.getterFor(h);t(String,"String",function(c){b(this,{type:h,string:String(c),index:0})},function(){var c=w(this),l=c.string,o=c.index;return o>=l.length?{value:void 0,done:!0}:(l=p(l,o),c.index+=l.length,{value:l,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/string-multibyte":123}],191:[function(t,R,M){var p=t("../internals/fix-regexp-well-known-symbol-logic"),f=t("../internals/an-object"),h=t("../internals/to-length"),b=t("../internals/require-object-coercible"),w=t("../internals/advance-string-index"),c=t("../internals/regexp-exec-abstract");p("match",1,function(l,o,u){return[function(m){var g=b(this),_=m==null?void 0:m[l];return _!==void 0?_.call(m,g):new RegExp(m)[l](String(g))},function(m){var g=u(o,m,this);if(g.done)return g.value;var _=f(m),v=String(this);if(!_.global)return c(_,v);for(var x=_.unicode,E=[],j=_.lastIndex=0;(O=c(_,v))!==null;){var O=String(O[0]);(E[j]=O)===""&&(_.lastIndex=w(v,h(_.lastIndex),x)),j++}return j===0?null:E}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":136}],192:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/string-pad").start;p({target:"String",proto:!0,forced:t("../internals/string-pad-webkit-bug")},{padStart:function(h){return f(this,h,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":125,"../internals/string-pad-webkit-bug":124}],193:[function(t,R,M){t("../internals/export")({target:"String",proto:!0},{repeat:t("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":127}],194:[function(t,R,M){var p=t("../internals/fix-regexp-well-known-symbol-logic"),f=t("../internals/an-object"),h=t("../internals/to-object"),b=t("../internals/to-length"),w=t("../internals/to-integer"),c=t("../internals/require-object-coercible"),l=t("../internals/advance-string-index"),o=t("../internals/regexp-exec-abstract"),u=Math.max,m=Math.min,g=Math.floor,_=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g;p("replace",2,function(x,E,j,O){var P=O.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,L=O.REPLACE_KEEPS_$0,z=P?"$":"$0";return[function(N,V){var k=c(this),H=N==null?void 0:N[x];return H!==void 0?H.call(N,k,V):E.call(String(k),N,V)},function(N,V){if(!P&&L||typeof V=="string"&&V.indexOf(z)===-1){var k=j(E,N,this,V);if(k.done)return k.value}for(var H,G=f(N),F=String(this),W=typeof V=="function",Q=(W||(V=String(V)),G.global),J=(Q&&(H=G.unicode,G.lastIndex=0),[]);(q=o(G,F))!==null&&(J.push(q),Q);)String(q[0])===""&&(G.lastIndex=l(F,b(G.lastIndex),H));for(var ee,te="",se=0,ce=0;ce<J.length;ce++){for(var q=J[ce],Z=String(q[0]),ie=u(m(w(q.index),F.length),0),pe=[],ge=1;ge<q.length;ge++)pe.push((ee=q[ge])===void 0?ee:String(ee));var be=q.groups,le=W?(le=[Z].concat(pe,ie,F),be!==void 0&&le.push(be),String(V.apply(void 0,le))):function(re,Te,Ce,Me,Se,Ue){var Fe=Ce+re.length,Be=Me.length,st=v;return Se!==void 0&&(Se=h(Se),st=_),E.call(Ue,st,function(ve,ue){var ze;switch(ue.charAt(0)){case"$":return"$";case"&":return re;case"`":return Te.slice(0,Ce);case"'":return Te.slice(Fe);case"<":ze=Se[ue.slice(1,-1)];break;default:var He,me=+ue;if(me==0)return ve;if(Be<me)return(He=g(me/10))!==0&&He<=Be?Me[He-1]===void 0?ue.charAt(1):Me[He-1]+ue.charAt(1):ve;ze=Me[me-1]}return ze===void 0?"":ze})}(Z,F,ie,pe,be,V);se<=ie&&(te+=F.slice(se,ie)+le,se=ie+Z.length)}return te+F.slice(se)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":135,"../internals/to-length":136,"../internals/to-object":137}],195:[function(t,R,M){var p=t("../internals/fix-regexp-well-known-symbol-logic"),f=t("../internals/an-object"),h=t("../internals/require-object-coercible"),b=t("../internals/same-value"),w=t("../internals/regexp-exec-abstract");p("search",1,function(c,l,o){return[function(u){var m=h(this),g=u==null?void 0:u[c];return g!==void 0?g.call(u,m):new RegExp(u)[c](String(m))},function(u){var m,g=o(l,u,this);return g.done?g.value:(g=f(u),u=String(this),m=g.lastIndex,b(m,0)||(g.lastIndex=0),u=w(g,u),b(g.lastIndex,m)||(g.lastIndex=m),u===null?-1:u.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],196:[function(t,R,M){var p=t("../internals/fix-regexp-well-known-symbol-logic"),f=t("../internals/is-regexp"),h=t("../internals/an-object"),b=t("../internals/require-object-coercible"),w=t("../internals/species-constructor"),c=t("../internals/advance-string-index"),l=t("../internals/to-length"),o=t("../internals/regexp-exec-abstract"),u=t("../internals/regexp-exec"),m=(t=t("../internals/fails"),[].push),g=Math.min,_=4294967295,v=!t(function(){return!RegExp(_,"y")});p("split",2,function(x,E,j){var O="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(P,L){var z=String(b(this)),N=L===void 0?_:L>>>0;if(N==0)return[];if(P===void 0)return[z];if(!f(P))return E.call(z,P,N);for(var V,k,H,G=[],F=(L=(P.ignoreCase?"i":"")+(P.multiline?"m":"")+(P.unicode?"u":"")+(P.sticky?"y":""),0),W=new RegExp(P.source,L+"g");(V=u.call(W,z))&&!(F<(k=W.lastIndex)&&(G.push(z.slice(F,V.index)),1<V.length&&V.index<z.length&&m.apply(G,V.slice(1)),H=V[0].length,F=k,G.length>=N));)W.lastIndex===V.index&&W.lastIndex++;return F===z.length?!H&&W.test("")||G.push(""):G.push(z.slice(F)),G.length>N?G.slice(0,N):G}:"0".split(void 0,0).length?function(P,L){return P===void 0&&L===0?[]:E.call(this,P,L)}:E;return[function(P,L){var z=b(this),N=P==null?void 0:P[x];return N!==void 0?N.call(P,z,L):O.call(String(z),P,L)},function(P,L){if((z=j(O,P,this,L,O!==E)).done)return z.value;var z=h(P),N=String(this),V=(P=w(z,RegExp),z.unicode),k=(z.ignoreCase?"i":"")+(z.multiline?"m":"")+(z.unicode?"u":"")+(v?"y":"g"),H=new P(v?z:"^(?:"+z.source+")",k),G=L===void 0?_:L>>>0;if(G==0)return[];if(N.length===0)return o(H,N)===null?[N]:[];for(var F=0,W=0,Q=[];W<N.length;){H.lastIndex=v?W:0;var J,ee=o(H,v?N:N.slice(W));if(ee===null||(J=g(l(H.lastIndex+(v?0:W)),N.length))===F)W=c(N,W,V);else{if(Q.push(N.slice(F,W)),Q.length===G)return Q;for(var te=1;te<=ee.length-1;te++)if(Q.push(ee[te]),Q.length===G)return Q;W=F=J}}return Q.push(N.slice(F)),Q}]},!v)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":136}],197:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/object-get-own-property-descriptor").f,h=t("../internals/to-length"),b=t("../internals/not-a-regexp"),w=t("../internals/require-object-coercible"),c=t("../internals/correct-is-regexp-logic"),l=(t=t("../internals/is-pure"),"".startsWith),o=Math.min;c=c("startsWith"),p({target:"String",proto:!0,forced:!(!t&&!c&&(p=f(String.prototype,"startsWith"))&&!p.writable||c)},{startsWith:function(u){var m=String(w(this)),g=(b(u),h(o(1<arguments.length?arguments[1]:void 0,m.length)));return u=String(u),l?l.call(m,u,g):m.slice(g,g+u.length)===u}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":136}],198:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/create-html");p({target:"String",proto:!0,forced:t("../internals/string-html-forced")("sub")},{sub:function(){return f(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":122}],199:[function(t,R,M){var p=t("../internals/export"),f=t("../internals/string-trim").trim;p({target:"String",proto:!0,forced:t("../internals/string-trim-forced")("trim")},{trim:function(){return f(this)}})},{"../internals/export":50,"../internals/string-trim":129,"../internals/string-trim-forced":128}],200:[function(t,R,M){var p,f,h,b,w,c=t("../internals/export"),l=t("../internals/descriptors"),o=t("../internals/global"),u=t("../internals/has"),m=t("../internals/is-object"),g=t("../internals/object-define-property").f,_=(t=t("../internals/copy-constructor-properties"),o.Symbol);!l||typeof _!="function"||"description"in _.prototype&&_().description===void 0||(p={},t(f=function(){var v=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),x=this instanceof f?new _(v):v===void 0?_():_(v);return v===""&&(p[x]=!0),x},_),(o=f.prototype=_.prototype).constructor=f,h=o.toString,b=String(_("test"))=="Symbol(test)",w=/^Symbol\((.*)\)[^)]+$/,g(o,"description",{configurable:!0,get:function(){var v=m(this)?this.valueOf():this,x=h.call(v);return u(p,v)?"":(v=b?x.slice(7,-1):x.replace(w,"$1"))===""?void 0:v}}),c({global:!0,forced:!0},{Symbol:f}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],201:[function(t,R,M){t("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],202:[function(t,R,M){function p(ae,oe){var _e=He[ae]=N(Fe[Ce]);return Me(_e,{type:Te,tag:ae,description:oe}),u||(_e.description=oe),_e}function f(ae,oe){j(ae);var _e=P(oe);return oe=V(_e).concat(fe(_e)),le(oe,function(he){u&&!at.call(_e,he)||Ze(ae,he,_e[he])}),ae}function h(ae,oe){var _e;if(ae=P(ae),oe=L(oe,!0),ae!==Ue||!v(He,oe)||v(me,oe))return!(_e=st(ae,oe))||!v(He,oe)||v(ae,re)&&ae[re][oe]||(_e.enumerable=!0),_e}function b(ae){ae=ue(P(ae));var oe=[];return le(ae,function(_e){v(He,_e)||v(ce,_e)||oe.push(_e)}),oe}var w=t("../internals/export"),c=t("../internals/global"),l=t("../internals/get-built-in"),o=t("../internals/is-pure"),u=t("../internals/descriptors"),m=t("../internals/native-symbol"),g=t("../internals/use-symbol-as-uid"),_=t("../internals/fails"),v=t("../internals/has"),x=t("../internals/is-array"),E=t("../internals/is-object"),j=t("../internals/an-object"),O=t("../internals/to-object"),P=t("../internals/to-indexed-object"),L=t("../internals/to-primitive"),z=t("../internals/create-property-descriptor"),N=t("../internals/object-create"),V=t("../internals/object-keys"),k=t("../internals/object-get-own-property-names"),H=t("../internals/object-get-own-property-names-external"),G=t("../internals/object-get-own-property-symbols"),F=t("../internals/object-get-own-property-descriptor"),W=t("../internals/object-define-property"),Q=t("../internals/object-property-is-enumerable"),J=t("../internals/create-non-enumerable-property"),ee=t("../internals/redefine"),te=t("../internals/shared"),se=t("../internals/shared-key"),ce=t("../internals/hidden-keys"),q=t("../internals/uid"),Z=t("../internals/well-known-symbol"),ie=t("../internals/well-known-symbol-wrapped"),pe=t("../internals/define-well-known-symbol"),ge=t("../internals/set-to-string-tag"),be=t("../internals/internal-state"),le=t("../internals/array-iteration").forEach,re=se("hidden"),Te="Symbol",Ce="prototype",Me=(t=Z("toPrimitive"),be.set),Se=be.getterFor(Te),Ue=Object[Ce],Fe=c.Symbol,Be=l("JSON","stringify"),st=F.f,ve=W.f,ue=H.f,ze=Q.f,He=te("symbols"),me=te("op-symbols"),je=te("string-to-symbol-registry"),Ie=te("symbol-to-string-registry"),Ye=(se=te("wks"),!(be=c.QObject)||!be[Ce]||!be[Ce].findChild),it=u&&_(function(){return N(ve({},"a",{get:function(){return ve(this,"a",{value:7}).a}})).a!=7})?function(ae,oe,_e){var he=st(Ue,oe);he&&delete Ue[oe],ve(ae,oe,_e),he&&ae!==Ue&&ve(Ue,oe,he)}:ve,yt=g?function(ae){return typeof ae=="symbol"}:function(ae){return Object(ae)instanceof Fe},Ze=function(ae,oe,_e){return ae===Ue&&Ze(me,oe,_e),j(ae),oe=L(oe,!0),j(_e),(v(He,oe)?(_e.enumerable?(v(ae,re)&&ae[re][oe]&&(ae[re][oe]=!1),_e=N(_e,{enumerable:z(0,!1)})):(v(ae,re)||ve(ae,re,z(1,{})),ae[re][oe]=!0),it):ve)(ae,oe,_e)},at=function(ae){ae=L(ae,!0);var oe=ze.call(this,ae);return!(this===Ue&&v(He,ae)&&!v(me,ae))&&(!(oe||!v(this,ae)||!v(He,ae)||v(this,re)&&this[re][ae])||oe)},fe=function(ae){var oe=ae===Ue,_e=(ae=ue(oe?me:P(ae)),[]);return le(ae,function(he){!v(He,he)||oe&&!v(Ue,he)||_e.push(He[he])}),_e};m||(ee((Fe=function(){if(this instanceof Fe)throw TypeError("Symbol is not a constructor");var ae=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,oe=q(ae),_e=function(he){this===Ue&&_e.call(me,he),v(this,re)&&v(this[re],oe)&&(this[re][oe]=!1),it(this,oe,z(1,he))};return u&&Ye&&it(Ue,oe,{configurable:!0,set:_e}),p(oe,ae)})[Ce],"toString",function(){return Se(this).tag}),ee(Fe,"withoutSetter",function(ae){return p(q(ae),ae)}),Q.f=at,W.f=Ze,F.f=h,k.f=H.f=b,G.f=fe,ie.f=function(ae){return p(Z(ae),ae)},u&&(ve(Fe[Ce],"description",{configurable:!0,get:function(){return Se(this).description}}),o||ee(Ue,"propertyIsEnumerable",at,{unsafe:!0}))),w({global:!0,wrap:!0,forced:!m,sham:!m},{Symbol:Fe}),le(V(se),function(ae){pe(ae)}),w({target:Te,stat:!0,forced:!m},{for:function(ae){var oe;return ae=String(ae),v(je,ae)?je[ae]:(oe=Fe(ae),je[ae]=oe,Ie[oe]=ae,oe)},keyFor:function(ae){if(!yt(ae))throw TypeError(ae+" is not a symbol");if(v(Ie,ae))return Ie[ae]},useSetter:function(){Ye=!0},useSimple:function(){Ye=!1}}),w({target:"Object",stat:!0,forced:!m,sham:!u},{create:function(ae,oe){return oe===void 0?N(ae):f(N(ae),oe)},defineProperty:Ze,defineProperties:f,getOwnPropertyDescriptor:h}),w({target:"Object",stat:!0,forced:!m},{getOwnPropertyNames:b,getOwnPropertySymbols:fe}),w({target:"Object",stat:!0,forced:_(function(){G.f(1)})},{getOwnPropertySymbols:function(ae){return G.f(O(ae))}}),Be&&w({target:"JSON",stat:!0,forced:!m||_(function(){var ae=Fe();return Be([ae])!="[null]"||Be({a:ae})!="{}"||Be(Object(ae))!="{}"})},{stringify:function(ae,oe,_e){for(var he,ke=[ae],We=1;We<arguments.length;)ke.push(arguments[We++]);if((E(he=oe)||ae!==void 0)&&!yt(ae))return x(oe)||(oe=function($e,Ee){if(typeof he=="function"&&(Ee=he.call(this,$e,Ee)),!yt(Ee))return Ee}),ke[1]=oe,Be.apply(null,ke)}}),Fe[Ce][t]||J(Fe[Ce],t,Fe[Ce].valueOf),ge(Fe,Te),ce[re]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":134,"../internals/to-object":137,"../internals/to-primitive":140,"../internals/uid":145,"../internals/use-symbol-as-uid":146,"../internals/well-known-symbol":148,"../internals/well-known-symbol-wrapped":147}],203:[function(t,R,M){var p=t("../internals/array-buffer-view-core"),f=t("../internals/array-copy-within"),h=p.aTypedArray;(0,p.exportTypedArrayMethod)("copyWithin",function(b,w){return f.call(h(this),b,w,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],204:[function(t,R,M){var p=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").every,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("every",function(b){return f(h(this),b,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],205:[function(t,R,M){var p=t("../internals/array-buffer-view-core"),f=t("../internals/array-fill"),h=p.aTypedArray;(0,p.exportTypedArrayMethod)("fill",function(b){return f.apply(h(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],206:[function(t,R,M){var p=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").filter,h=t("../internals/species-constructor"),b=p.aTypedArray,w=p.aTypedArrayConstructor;(0,p.exportTypedArrayMethod)("filter",function(c){for(var l=f(b(this),c,1<arguments.length?arguments[1]:void 0),o=(c=h(this,this.constructor),0),u=l.length,m=new(w(c))(u);o<u;)m[o]=l[o++];return m})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],207:[function(t,R,M){var p=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").findIndex,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("findIndex",function(b){return f(h(this),b,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],208:[function(t,R,M){var p=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").find,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("find",function(b){return f(h(this),b,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],209:[function(t,R,M){t("../internals/typed-array-constructor")("Float32",function(p){return function(f,h,b){return p(this,f,h,b)}})},{"../internals/typed-array-constructor":142}],210:[function(t,R,M){t("../internals/typed-array-constructor")("Float64",function(p){return function(f,h,b){return p(this,f,h,b)}})},{"../internals/typed-array-constructor":142}],211:[function(t,R,M){var p=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").forEach,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("forEach",function(b){f(h(this),b,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],212:[function(t,R,M){var p=t("../internals/array-buffer-view-core"),f=t("../internals/array-includes").includes,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("includes",function(b){return f(h(this),b,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],213:[function(t,R,M){var p=t("../internals/array-buffer-view-core"),f=t("../internals/array-includes").indexOf,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("indexOf",function(b){return f(h(this),b,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],214:[function(t,R,M){t("../internals/typed-array-constructor")("Int16",function(p){return function(f,h,b){return p(this,f,h,b)}})},{"../internals/typed-array-constructor":142}],215:[function(t,R,M){t("../internals/typed-array-constructor")("Int32",function(p){return function(f,h,b){return p(this,f,h,b)}})},{"../internals/typed-array-constructor":142}],216:[function(t,R,M){function p(){return w.call(o(this))}var f=t("../internals/global"),h=t("../internals/array-buffer-view-core"),b=t("../modules/es.array.iterator"),w=(t=t("../internals/well-known-symbol")("iterator"),f=f.Uint8Array,b.values),c=b.keys,l=b.entries,o=h.aTypedArray;b=h.exportTypedArrayMethod,f=!!(h=f&&f.prototype[t])&&(h.name=="values"||h.name==null),b("entries",function(){return l.call(o(this))}),b("keys",function(){return c.call(o(this))}),b("values",p,!f),b(t,p,!f)},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":148,"../modules/es.array.iterator":160}],217:[function(t,R,M){var p=(t=t("../internals/array-buffer-view-core")).aTypedArray,f=(t=t.exportTypedArrayMethod,[].join);t("join",function(h){return f.apply(p(this),arguments)})},{"../internals/array-buffer-view-core":12}],218:[function(t,R,M){var p=t("../internals/array-buffer-view-core"),f=t("../internals/array-last-index-of"),h=p.aTypedArray;(0,p.exportTypedArrayMethod)("lastIndexOf",function(b){return f.apply(h(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],219:[function(t,R,M){var p=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").map,h=t("../internals/species-constructor"),b=p.aTypedArray,w=p.aTypedArrayConstructor;(0,p.exportTypedArrayMethod)("map",function(c){return f(b(this),c,1<arguments.length?arguments[1]:void 0,function(l,o){return new(w(h(l,l.constructor)))(o)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],220:[function(t,R,M){var p=t("../internals/array-buffer-view-core"),f=t("../internals/array-reduce").right,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("reduceRight",function(b){return f(h(this),b,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],221:[function(t,R,M){var p=t("../internals/array-buffer-view-core"),f=t("../internals/array-reduce").left,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("reduce",function(b){return f(h(this),b,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],222:[function(t,R,M){var p=(t=t("../internals/array-buffer-view-core")).aTypedArray,f=(t=t.exportTypedArrayMethod,Math.floor);t("reverse",function(){for(var h,b=p(this).length,w=f(b/2),c=0;c<w;)h=this[c],this[c++]=this[--b],this[b]=h;return this})},{"../internals/array-buffer-view-core":12}],223:[function(t,R,M){var p=t("../internals/array-buffer-view-core"),f=t("../internals/to-length"),h=t("../internals/to-offset"),b=t("../internals/to-object"),w=(t=t("../internals/fails"),p.aTypedArray);(0,p.exportTypedArrayMethod)("set",function(c){w(this);var l=h(1<arguments.length?arguments[1]:void 0,1),o=this.length,u=b(c),m=f(u.length),g=0;if(o<m+l)throw RangeError("Wrong length");for(;g<m;)this[l+g]=u[g++]},t(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":136,"../internals/to-object":137,"../internals/to-offset":138}],224:[function(t,R,M){var p=t("../internals/array-buffer-view-core"),f=t("../internals/species-constructor"),h=(t=t("../internals/fails"),p.aTypedArray),b=p.aTypedArrayConstructor,w=(p=p.exportTypedArrayMethod,[].slice);p("slice",function(c,l){for(var o=w.call(h(this),c,l),u=(c=f(this,this.constructor),0),m=o.length,g=new(b(c))(m);u<m;)g[u]=o[u++];return g},t(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":121}],225:[function(t,R,M){var p=t("../internals/array-buffer-view-core"),f=t("../internals/array-iteration").some,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("some",function(b){return f(h(this),b,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],226:[function(t,R,M){var p=(t=t("../internals/array-buffer-view-core")).aTypedArray,f=(t=t.exportTypedArrayMethod,[].sort);t("sort",function(h){return f.call(p(this),h)})},{"../internals/array-buffer-view-core":12}],227:[function(t,R,M){var p=t("../internals/array-buffer-view-core"),f=t("../internals/to-length"),h=t("../internals/to-absolute-index"),b=t("../internals/species-constructor"),w=p.aTypedArray;(0,p.exportTypedArrayMethod)("subarray",function(c,l){var o=w(this),u=o.length;return c=h(c,u),new(b(o,o.constructor))(o.buffer,o.byteOffset+c*o.BYTES_PER_ELEMENT,f((l===void 0?u:h(l,u))-c))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":132,"../internals/to-length":136}],228:[function(t,R,M){var p=t("../internals/global"),f=t("../internals/array-buffer-view-core"),h=(t=t("../internals/fails"),p.Int8Array),b=f.aTypedArray,w=(p=f.exportTypedArrayMethod,[].toLocaleString),c=[].slice,l=!!h&&t(function(){w.call(new h(1))});p("toLocaleString",function(){return w.apply(l?c.call(b(this)):b(this),arguments)},t(function(){return[1,2].toLocaleString()!=new h([1,2]).toLocaleString()})||!t(function(){h.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],229:[function(t,R,M){var p=t("../internals/array-buffer-view-core").exportTypedArrayMethod,f=t("../internals/fails"),h=(t=(t=t("../internals/global").Uint8Array)&&t.prototype||{},[].toString),b=[].join;f(function(){h.call({})})&&(h=function(){return b.call(this)}),f=t.toString!=h,p("toString",h,f)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],230:[function(t,R,M){t("../internals/typed-array-constructor")("Uint16",function(p){return function(f,h,b){return p(this,f,h,b)}})},{"../internals/typed-array-constructor":142}],231:[function(t,R,M){t("../internals/typed-array-constructor")("Uint32",function(p){return function(f,h,b){return p(this,f,h,b)}})},{"../internals/typed-array-constructor":142}],232:[function(t,R,M){t("../internals/typed-array-constructor")("Uint8",function(p){return function(f,h,b){return p(this,f,h,b)}})},{"../internals/typed-array-constructor":142}],233:[function(t,R,M){t("../internals/typed-array-constructor")("Uint8",function(p){return function(f,h,b){return p(this,f,h,b)}},!0)},{"../internals/typed-array-constructor":142}],234:[function(t,R,M){function p(E){return function(){return E(this,arguments.length?arguments[0]:void 0)}}var f,h,b,w,c,l=t("../internals/global"),o=t("../internals/redefine-all"),u=t("../internals/internal-metadata"),m=t("../internals/collection"),g=t("../internals/collection-weak"),_=t("../internals/is-object"),v=t("../internals/internal-state").enforce,x=(t=t("../internals/native-weak-map"),l=!l.ActiveXObject&&"ActiveXObject"in l,Object.isExtensible);R=R.exports=m("WeakMap",p,g),t&&l&&(f=g.getConstructor(p,"WeakMap",!0),u.REQUIRED=!0,m=R.prototype,h=m.delete,b=m.has,w=m.get,c=m.set,o(m,{delete:function(E){var j;return _(E)&&!x(E)?((j=v(this)).frozen||(j.frozen=new f),h.call(this,E)||j.frozen.delete(E)):h.call(this,E)},has:function(E){var j;return _(E)&&!x(E)?((j=v(this)).frozen||(j.frozen=new f),b.call(this,E)||j.frozen.has(E)):b.call(this,E)},get:function(E){var j;return!_(E)||x(E)||((j=v(this)).frozen||(j.frozen=new f),b.call(this,E))?w.call(this,E):j.frozen.get(E)},set:function(E,j){var O;return!_(E)||x(E)||((O=v(this)).frozen||(O.frozen=new f),b.call(this,E))?c.call(this,E,j):O.frozen.set(E,j),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":59,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/redefine-all":107}],235:[function(t,R,M){var p,f=t("../internals/global"),h=t("../internals/dom-iterables"),b=t("../internals/array-for-each"),w=t("../internals/create-non-enumerable-property");for(p in h){var c;if((c=(c=f[p])&&c.prototype)&&c.forEach!==b)try{w(c,"forEach",b)}catch{c.forEach=b}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59}],236:[function(t,R,M){var p,f=t("../internals/global"),h=t("../internals/dom-iterables"),b=t("../modules/es.array.iterator"),w=t("../internals/create-non-enumerable-property"),c=(t=t("../internals/well-known-symbol"))("iterator"),l=t("toStringTag"),o=b.values;for(p in h){var u=f[p],m=u&&u.prototype;if(m){if(m[c]!==o)try{w(m,c,o)}catch{m[c]=o}if(m[l]||w(m,l,p),h[p]){for(var g in b)if(m[g]!==b[g])try{w(m,g,b[g])}catch{m[g]=b[g]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59,"../internals/well-known-symbol":148,"../modules/es.array.iterator":160}],237:[function(t,R,M){function p(be){try{return decodeURIComponent(be)}catch{return be}}function f(be){return ie[be]}function h(be){return encodeURIComponent(be).replace(Z,f)}function b(be){this.entries.length=0,pe(this.entries,be)}function w(be,le){if(be<le)throw TypeError("Not enough arguments")}function c(){E(this,c,W);var be,le,re,Te,Ce,Me,Se,Ue,Fe=0<arguments.length?arguments[0]:void 0,Be=[];if(J(this,{type:W,entries:Be,updateURL:function(){},updateSearchParams:b}),Fe!==void 0)if(z(Fe))if(typeof(be=H(Fe))=="function")for(re=(le=be.call(Fe)).next;!(Te=re.call(le)).done;){if((Me=(Ce=(Te=k(L(Te.value))).next).call(Te)).done||(Se=Ce.call(Te)).done||!Ce.call(Te).done)throw TypeError("Expected sequence with length 2");Be.push({key:Me.value+"",value:Se.value+""})}else for(Ue in Fe)j(Fe,Ue)&&Be.push({key:Ue,value:Fe[Ue]+""});else pe(Be,typeof Fe=="string"?Fe.charAt(0)==="?"?Fe.slice(1):Fe:Fe+"")}t("../modules/es.array.iterator");var l=t("../internals/export"),o=t("../internals/get-built-in"),u=t("../internals/native-url"),m=t("../internals/redefine"),g=t("../internals/redefine-all"),_=t("../internals/set-to-string-tag"),v=t("../internals/create-iterator-constructor"),x=t("../internals/internal-state"),E=t("../internals/an-instance"),j=t("../internals/has"),O=t("../internals/function-bind-context"),P=t("../internals/classof"),L=t("../internals/an-object"),z=t("../internals/is-object"),N=t("../internals/object-create"),V=t("../internals/create-property-descriptor"),k=t("../internals/get-iterator"),H=t("../internals/get-iterator-method"),G=(t=t("../internals/well-known-symbol"),o("fetch")),F=o("Headers"),W=(o=t("iterator"),"URLSearchParams"),Q=W+"Iterator",J=x.set,ee=x.getterFor(W),te=x.getterFor(Q),se=/\+/g,ce=Array(4),q=function(be){var le,re=be.replace(se," "),Te=4;try{return decodeURIComponent(re)}catch{for(;Te;)re=re.replace((le=Te--,ce[le-1]||(ce[le-1]=RegExp("((?:%[\\da-f]{2}){"+le+"})","gi"))),p);return re}},Z=/[!'()~]|%20/g,ie={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},pe=function(be,le){if(le)for(var re,Te=le.split("&"),Ce=0;Ce<Te.length;)(re=Te[Ce++]).length&&(re=re.split("="),be.push({key:q(re.shift()),value:q(re.join("="))}))},ge=v(function(be,le){J(this,{type:Q,iterator:k(ee(be).entries),kind:le})},"Iterator",function(){var be,le=(be=te(this)).kind,re=(be=be.iterator.next()).value;return be.done||(be.value=le==="keys"?re.key:le==="values"?re.value:[re.key,re.value]),be});g(t=c.prototype,{append:function(be,le){w(arguments.length,2);var re=ee(this);re.entries.push({key:be+"",value:le+""}),re.updateURL()},delete:function(be){w(arguments.length,1);for(var le=ee(this),re=le.entries,Te=be+"",Ce=0;Ce<re.length;)re[Ce].key===Te?re.splice(Ce,1):Ce++;le.updateURL()},get:function(be){w(arguments.length,1);for(var le=ee(this).entries,re=be+"",Te=0;Te<le.length;Te++)if(le[Te].key===re)return le[Te].value;return null},getAll:function(be){w(arguments.length,1);for(var le=ee(this).entries,re=be+"",Te=[],Ce=0;Ce<le.length;Ce++)le[Ce].key===re&&Te.push(le[Ce].value);return Te},has:function(be){w(arguments.length,1);for(var le=ee(this).entries,re=be+"",Te=0;Te<le.length;)if(le[Te++].key===re)return!0;return!1},set:function(be,le){w(arguments.length,1);for(var re,Te=ee(this),Ce=Te.entries,Me=!1,Se=be+"",Ue=le+"",Fe=0;Fe<Ce.length;Fe++)(re=Ce[Fe]).key===Se&&(Me?Ce.splice(Fe--,1):(Me=!0,re.value=Ue));Me||Ce.push({key:Se,value:Ue}),Te.updateURL()},sort:function(){for(var be,le,re=ee(this),Te=re.entries,Ce=Te.slice(),Me=Te.length=0;Me<Ce.length;Me++){for(be=Ce[Me],le=0;le<Me;le++)if(Te[le].key>be.key){Te.splice(le,0,be);break}le===Me&&Te.push(be)}re.updateURL()},forEach:function(be){for(var le,re=ee(this).entries,Te=O(be,1<arguments.length?arguments[1]:void 0,3),Ce=0;Ce<re.length;)Te((le=re[Ce++]).value,le.key,this)},keys:function(){return new ge(this,"keys")},values:function(){return new ge(this,"values")},entries:function(){return new ge(this,"entries")}},{enumerable:!0}),m(t,o,t.entries),m(t,"toString",function(){for(var be,le=ee(this).entries,re=[],Te=0;Te<le.length;)be=le[Te++],re.push(h(be.key)+"="+h(be.value));return re.join("&")},{enumerable:!0}),_(c,W),l({global:!0,forced:!u},{URLSearchParams:c}),u||typeof G!="function"||typeof F!="function"||l({global:!0,enumerable:!0,forced:!0},{fetch:function(be){var le,re,Te;return be=[be],1<arguments.length&&(z(le=arguments[1])&&(re=le.body,P(re)===W&&((Te=le.headers?new F(le.headers):new F).has("content-type")||Te.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),le=N(le,{body:V(0,String(re)),headers:V(0,Te)}))),be.push(le)),G.apply(this,be)}}),R.exports={URLSearchParams:c,getState:ee}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":148,"../modules/es.array.iterator":160}],238:[function(t,R,M){function p(Le){var xt,ye,Re,Ke;if(typeof Le=="number"){for(xt=[],ye=0;ye<4;ye++)xt.unshift(Le%256),Le=Q(Le/256);return xt.join(".")}if(typeof Le!="object")return Le;for(xt="",Re=Ue(Le),ye=0;ye<8;ye++)Ke&&Le[ye]===0||(Ke=Ke&&!1,Re===ye?(xt+=ye?":":"::",Ke=!0):(xt+=Le[ye].toString(16),ye<7&&(xt+=":")));return"["+xt+"]"}function f(Le){return!Le.host||Le.cannotBeABaseURL||Le.scheme=="file"}function h(Le,xt,ye,Re){var Ke,Oe,Xe,rt=ye||Ze,vt=0,dt="",Mt=!1,Dt=!1,Ot=!1;for(ye||(Le.scheme="",Le.username="",Le.password="",Le.host=null,Le.port=null,Le.path=[],Le.query=null,Le.fragment=null,Le.cannotBeABaseURL=!1,xt=xt.replace(Ce,"")),xt=xt.replace(Me,""),Ke=P(xt);vt<=Ke.length;){switch(Oe=Ke[vt],rt){case Ze:if(!Oe||!q.test(Oe)){if(ye)return te;rt=fe;continue}dt+=Oe.toLowerCase(),rt=at;break;case at:if(Oe&&(Z.test(Oe)||Oe=="+"||Oe=="-"||Oe=="."))dt+=Oe.toLowerCase();else{if(Oe!=":"){if(ye)return te;dt="",rt=fe,vt=0;continue}if(ye&&(He(Le)!=j(ze,dt)||dt=="file"&&(me(Le)||Le.port!==null)||Le.scheme=="file"&&!Le.host))return;if(Le.scheme=dt,ye)return void(He(Le)&&ze[Le.scheme]==Le.port&&(Le.port=null));dt="",Le.scheme=="file"?rt=wt:He(Le)&&Re&&Re.scheme==Le.scheme?rt=ae:He(Le)?rt=ke:Ke[vt+1]=="/"?(rt=oe,vt++):(Le.cannotBeABaseURL=!0,Le.path.push(""),rt=Gt)}break;case fe:if(!Re||Re.cannotBeABaseURL&&Oe!="#")return te;if(Re.cannotBeABaseURL&&Oe=="#"){Le.scheme=Re.scheme,Le.path=Re.path.slice(),Le.query=Re.query,Le.fragment="",Le.cannotBeABaseURL=!0,rt=vr;break}rt=Re.scheme=="file"?wt:_e;continue;case ae:if(Oe!="/"||Ke[vt+1]!="/"){rt=_e;continue}rt=We,vt++;break;case oe:if(Oe=="/"){rt=$e;break}rt=Nt;continue;case _e:if(Le.scheme=Re.scheme,Oe==c)Le.username=Re.username,Le.password=Re.password,Le.host=Re.host,Le.port=Re.port,Le.path=Re.path.slice(),Le.query=Re.query;else if(Oe=="/"||Oe=="\\"&&He(Le))rt=he;else if(Oe=="?")Le.username=Re.username,Le.password=Re.password,Le.host=Re.host,Le.port=Re.port,Le.path=Re.path.slice(),Le.query="",rt=Kt;else{if(Oe!="#"){Le.username=Re.username,Le.password=Re.password,Le.host=Re.host,Le.port=Re.port,Le.path=Re.path.slice(),Le.path.pop(),rt=Nt;continue}Le.username=Re.username,Le.password=Re.password,Le.host=Re.host,Le.port=Re.port,Le.path=Re.path.slice(),Le.query=Re.query,Le.fragment="",rt=vr}break;case he:if(!He(Le)||Oe!="/"&&Oe!="\\"){if(Oe!="/"){Le.username=Re.username,Le.password=Re.password,Le.host=Re.host,Le.port=Re.port,rt=Nt;continue}rt=$e}else rt=We;break;case ke:if(rt=We,Oe!="/"||dt.charAt(vt+1)!="/")continue;vt++;break;case We:if(Oe=="/"||Oe=="\\")break;rt=$e;continue;case $e:if(Oe=="@"){Mt&&(dt="%40"+dt),Mt=!0;for(var Tt=P(dt),It=0;It<Tt.length;It++){var Xt=Tt[It];Xt!=":"||Ot?(Xt=ue(Xt,ve),Ot?Le.password+=Xt:Le.username+=Xt):Ot=!0}dt=""}else if(Oe==c||Oe=="/"||Oe=="?"||Oe=="#"||Oe=="\\"&&He(Le)){if(Mt&&dt=="")return ee;vt-=P(dt).length+1,dt="",rt=Ee}else dt+=Oe;break;case Ee:case Ge:if(ye&&Le.scheme=="file"){rt=Ct;continue}if(Oe!=":"||Dt){if(Oe==c||Oe=="/"||Oe=="?"||Oe=="#"||Oe=="\\"&&He(Le)){if(He(Le)&&dt=="")return se;if(ye&&dt==""&&(me(Le)||Le.port!==null))return;if(Xe=Se(Le,dt))return Xe;if(dt="",rt=Ft,ye)return;continue}Oe=="["?Dt=!0:Oe=="]"&&(Dt=!1),dt+=Oe}else{if(dt=="")return se;if(Xe=Se(Le,dt))return Xe;if(dt="",rt=ht,ye==Ge)return}break;case ht:if(!ie.test(Oe)){if(Oe==c||Oe=="/"||Oe=="?"||Oe=="#"||Oe=="\\"&&He(Le)||ye){if(dt!=""){var Qt=parseInt(dt,10);if(65535<Qt)return ce;Le.port=He(Le)&&Qt===ze[Le.scheme]?null:Qt,dt=""}if(ye)return;rt=Ft;continue}return ce}dt+=Oe;break;case wt:if(Le.scheme="file",Oe=="/"||Oe=="\\")rt=Lt;else{if(!Re||Re.scheme!="file"){rt=Nt;continue}if(Oe==c)Le.host=Re.host,Le.path=Re.path.slice(),Le.query=Re.query;else if(Oe=="?")Le.host=Re.host,Le.path=Re.path.slice(),Le.query="",rt=Kt;else{if(Oe!="#"){Ie(Ke.slice(vt).join(""))||(Le.host=Re.host,Le.path=Re.path.slice(),Ye(Le)),rt=Nt;continue}Le.host=Re.host,Le.path=Re.path.slice(),Le.query=Re.query,Le.fragment="",rt=vr}}break;case Lt:if(Oe=="/"||Oe=="\\"){rt=Ct;break}Re&&Re.scheme=="file"&&!Ie(Ke.slice(vt).join(""))&&(je(Re.path[0],!0)?Le.path.push(Re.path[0]):Le.host=Re.host),rt=Nt;continue;case Ct:if(Oe==c||Oe=="/"||Oe=="\\"||Oe=="?"||Oe=="#"){if(!ye&&je(dt))rt=Nt;else{if(dt==""){if(Le.host="",ye)return}else{if(Xe=Se(Le,dt))return Xe;if(Le.host=="localhost"&&(Le.host=""),ye)return;dt=""}rt=Ft}continue}dt+=Oe;break;case Ft:if(He(Le)){if(rt=Nt,Oe!="/"&&Oe!="\\")continue}else if(ye||Oe!="?")if(ye||Oe!="#"){if(Oe!=c&&(rt=Nt,Oe!="/"))continue}else Le.fragment="",rt=vr;else Le.query="",rt=Kt;break;case Nt:if(Oe==c||Oe=="/"||Oe=="\\"&&He(Le)||!ye&&(Oe=="?"||Oe=="#")){if(yt(dt)?(Ye(Le),Oe=="/"||Oe=="\\"&&He(Le)||Le.path.push("")):it(dt)?Oe=="/"||Oe=="\\"&&He(Le)||Le.path.push(""):(Le.scheme=="file"&&!Le.path.length&&je(dt)&&(Le.host&&(Le.host=""),dt=dt.charAt(0)+":"),Le.path.push(dt)),dt="",Le.scheme=="file"&&(Oe==c||Oe=="?"||Oe=="#"))for(;1<Le.path.length&&Le.path[0]==="";)Le.path.shift();Oe=="?"?(Le.query="",rt=Kt):Oe=="#"&&(Le.fragment="",rt=vr)}else dt+=ue(Oe,st);break;case Gt:Oe=="?"?(Le.query="",rt=Kt):Oe=="#"?(Le.fragment="",rt=vr):Oe!=c&&(Le.path[0]+=ue(Oe,Fe));break;case Kt:ye||Oe!="#"?Oe!=c&&(Oe=="'"&&He(Le)?Le.query+="%27":Le.query+=Oe=="#"?"%23":ue(Oe,Fe)):(Le.fragment="",rt=vr);break;case vr:Oe!=c&&(Le.fragment+=ue(Oe,Be))}vt++}}function b(Le){var xt,ye,Re=E(this,b,"URL"),Ke=1<arguments.length?arguments[1]:void 0,Oe=(Le=String(Le),F(Re,{type:"URL"}));if(Ke!==void 0){if(Ke instanceof b)xt=W(Ke);else if(ye=h(xt={},String(Ke)))throw TypeError(ye)}if(ye=h(Oe,Le,null,xt))throw TypeError(ye);var Xe=Oe.searchParams=new H;(Ke=G(Xe)).updateSearchParams(Oe.query),Ke.updateURL=function(){Oe.query=String(Xe)||null},m||(Re.href=lr.call(Re),Re.origin=Ir.call(Re),Re.protocol=$r.call(Re),Re.username=er.call(Re),Re.password=Vr.call(Re),Re.host=kr.call(Re),Re.hostname=ar.call(Re),Re.port=Gn.call(Re),Re.pathname=ci.call(Re),Re.search=Jn.call(Re),Re.searchParams=Hr.call(Re),Re.hash=as.call(Re))}function w(Le,xt){return{get:Le,set:xt,configurable:!0,enumerable:!0}}t("../modules/es.string.iterator");var c,l,o,u=t("../internals/export"),m=t("../internals/descriptors"),g=t("../internals/native-url"),_=t("../internals/global"),v=t("../internals/object-define-properties"),x=t("../internals/redefine"),E=t("../internals/an-instance"),j=t("../internals/has"),O=t("../internals/object-assign"),P=t("../internals/array-from"),L=t("../internals/string-multibyte").codeAt,z=t("../internals/string-punycode-to-ascii"),N=t("../internals/set-to-string-tag"),V=t("../modules/web.url-search-params"),k=(t=t("../internals/internal-state"),_.URL),H=V.URLSearchParams,G=V.getState,F=t.set,W=t.getterFor("URL"),Q=Math.floor,J=Math.pow,ee="Invalid authority",te="Invalid scheme",se="Invalid host",ce="Invalid port",q=/[A-Za-z]/,Z=/[\d+-.A-Za-z]/,ie=/\d/,pe=/^(0x|0X)/,ge=/^[0-7]+$/,be=/^\d+$/,le=/^[\dA-Fa-f]+$/,re=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,Te=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,Ce=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Me=/[\u0009\u000A\u000D]/g,Se=function(Le,xt){var ye,Re,Ke;if(xt.charAt(0)=="[")return xt.charAt(xt.length-1)=="]"&&(ye=function(Oe){var Xe,rt,vt,dt,Mt,Dt,Ot,Tt=[0,0,0,0,0,0,0,0],It=0,Xt=null,Qt=0,Vt=function(){return Oe.charAt(Qt)};if(Vt()==":"){if(Oe.charAt(1)!=":")return;Qt+=2,Xt=++It}for(;Vt();){if(It==8)return;if(Vt()!=":"){for(Xe=rt=0;rt<4&&le.test(Vt());)Xe=16*Xe+parseInt(Vt(),16),Qt++,rt++;if(Vt()=="."){if(rt==0||(Qt-=rt,It>6))return;for(vt=0;Vt();){if(dt=null,vt>0){if(!(Vt()=="."&&vt<4))return;Qt++}if(!ie.test(Vt()))return;for(;ie.test(Vt());){if(Mt=parseInt(Vt(),10),dt===null)dt=Mt;else{if(dt==0)return;dt=10*dt+Mt}if(dt>255)return;Qt++}Tt[It]=256*Tt[It]+dt,++vt!=2&&vt!=4||It++}if(vt!=4)return;break}if(Vt()==":"){if(Qt++,!Vt())return}else if(Vt())return;Tt[It++]=Xe}else{if(Xt!==null)return;Qt++,Xt=++It}}if(Xt!==null)for(Dt=It-Xt,It=7;It!=0&&Dt>0;)Ot=Tt[It],Tt[It--]=Tt[Xt+Dt-1],Tt[Xt+--Dt]=Ot;else if(It!=8)return;return Tt}(xt.slice(1,-1)))?void(Le.host=ye):se;if(He(Le))return xt=z(xt),re.test(xt)||(ye=function(Oe){var Xe,rt,vt,dt,Mt,Dt,Ot,Tt=Oe.split(".");if(Tt.length&&Tt[Tt.length-1]==""&&Tt.pop(),(Xe=Tt.length)>4)return Oe;for(rt=[],vt=0;vt<Xe;vt++){if((dt=Tt[vt])=="")return Oe;if(Mt=10,dt.length>1&&dt.charAt(0)=="0"&&(Mt=pe.test(dt)?16:8,dt=dt.slice(Mt==8?1:2)),dt==="")Dt=0;else{if(!(Mt==10?be:Mt==8?ge:le).test(dt))return Oe;Dt=parseInt(dt,Mt)}rt.push(Dt)}for(vt=0;vt<Xe;vt++)if(Dt=rt[vt],vt==Xe-1){if(Dt>=J(256,5-Xe))return null}else if(Dt>255)return null;for(Ot=rt.pop(),vt=0;vt<rt.length;vt++)Ot+=rt[vt]*J(256,3-vt);return Ot}(xt))===null?se:void(Le.host=ye);if(Te.test(xt))return se;for(ye="",Re=P(xt),Ke=0;Ke<Re.length;Ke++)ye+=ue(Re[Ke],Fe);Le.host=ye},Ue=function(Le){for(var xt=null,ye=1,Re=null,Ke=0,Oe=0;Oe<8;Oe++)Le[Oe]!==0?(ye<Ke&&(xt=Re,ye=Ke),Re=null,Ke=0):(Re===null&&(Re=Oe),++Ke);return ye<Ke&&(xt=Re,ye=Ke),xt},Fe={},Be=O({},Fe,{" ":1,'"':1,"<":1,">":1,"`":1}),st=O({},Be,{"#":1,"?":1,"{":1,"}":1}),ve=O({},st,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ue=function(Le,xt){var ye=L(Le,0);return 32<ye&&ye<127&&!j(xt,Le)?Le:encodeURIComponent(Le)},ze={ftp:21,file:null,http:80,https:443,ws:80,wss:443},He=function(Le){return j(ze,Le.scheme)},me=function(Le){return Le.username!=""||Le.password!=""},je=function(Le,xt){return Le.length==2&&q.test(Le.charAt(0))&&((Le=Le.charAt(1))==":"||!xt&&Le=="|")},Ie=function(Le){return 1<Le.length&&je(Le.slice(0,2))&&(Le.length==2||(Le=Le.charAt(2))==="/"||Le==="\\"||Le==="?"||Le==="#")},Ye=function(Le){var xt=Le.path,ye=xt.length;!ye||Le.scheme=="file"&&ye==1&&je(xt[0],!0)||xt.pop()},it=function(Le){return Le==="."||Le.toLowerCase()==="%2e"},yt=function(Le){return(Le=Le.toLowerCase())===".."||Le==="%2e."||Le===".%2e"||Le==="%2e%2e"},Ze={},at={},fe={},ae={},oe={},_e={},he={},ke={},We={},$e={},Ee={},Ge={},ht={},wt={},Lt={},Ct={},Ft={},Nt={},Gt={},Kt={},vr={},lr=(_=b.prototype,function(){var Le=W(this),xt=Le.scheme,ye=Le.username,Re=Le.password,Ke=Le.host,Oe=Le.port,Xe=Le.path,rt=Le.query,vt=Le.fragment,dt=xt+":";return Ke!==null?(dt+="//",me(Le)&&(dt+=ye+(Re?":"+Re:"")+"@"),dt+=p(Ke),Oe!==null&&(dt+=":"+Oe)):xt=="file"&&(dt+="//"),dt+=Le.cannotBeABaseURL?Xe[0]:Xe.length?"/"+Xe.join("/"):"",rt!==null&&(dt+="?"+rt),vt!==null&&(dt+="#"+vt),dt}),Ir=function(){var Le=W(this),xt=Le.scheme,ye=Le.port;if(xt=="blob")try{return new URL(xt.path[0]).origin}catch{return"null"}return xt!="file"&&He(Le)?xt+"://"+p(Le.host)+(ye!==null?":"+ye:""):"null"},$r=function(){return W(this).scheme+":"},er=function(){return W(this).username},Vr=function(){return W(this).password},kr=function(){var Le=(xt=W(this)).host,xt=xt.port;return Le===null?"":xt===null?p(Le):p(Le)+":"+xt},ar=function(){var Le=W(this).host;return Le===null?"":p(Le)},Gn=function(){var Le=W(this).port;return Le===null?"":String(Le)},ci=function(){var Le=W(this),xt=Le.path;return Le.cannotBeABaseURL?xt[0]:xt.length?"/"+xt.join("/"):""},Jn=function(){var Le=W(this).query;return Le?"?"+Le:""},Hr=function(){return W(this).searchParams},as=function(){var Le=W(this).fragment;return Le?"#"+Le:""};m&&v(_,{href:w(lr,function(Le){var xt=W(this);if(Le=h(xt,Le=String(Le)))throw TypeError(Le);G(xt.searchParams).updateSearchParams(xt.query)}),origin:w(Ir),protocol:w($r,function(Le){h(W(this),String(Le)+":",Ze)}),username:w(er,function(Le){var xt=W(this),ye=P(String(Le));if(!f(xt)){xt.username="";for(var Re=0;Re<ye.length;Re++)xt.username+=ue(ye[Re],ve)}}),password:w(Vr,function(Le){var xt=W(this),ye=P(String(Le));if(!f(xt)){xt.password="";for(var Re=0;Re<ye.length;Re++)xt.password+=ue(ye[Re],ve)}}),host:w(kr,function(Le){var xt=W(this);xt.cannotBeABaseURL||h(xt,String(Le),Ee)}),hostname:w(ar,function(Le){var xt=W(this);xt.cannotBeABaseURL||h(xt,String(Le),Ge)}),port:w(Gn,function(Le){var xt=W(this);f(xt)||((Le=String(Le))==""?xt.port=null:h(xt,Le,ht))}),pathname:w(ci,function(Le){var xt=W(this);xt.cannotBeABaseURL||(xt.path=[],h(xt,Le+"",Ft))}),search:w(Jn,function(Le){var xt=W(this);(Le=String(Le))==""?xt.query=null:(Le.charAt(0)=="?"&&(Le=Le.slice(1)),xt.query="",h(xt,Le,Kt)),G(xt.searchParams).updateSearchParams(xt.query)}),searchParams:w(Hr),hash:w(as,function(Le){var xt=W(this);(Le=String(Le))==""?xt.fragment=null:(Le.charAt(0)=="#"&&(Le=Le.slice(1)),xt.fragment="",h(xt,Le,vr))})}),x(_,"toJSON",function(){return lr.call(this)},{enumerable:!0}),x(_,"toString",function(){return lr.call(this)},{enumerable:!0}),k&&(l=k.createObjectURL,o=k.revokeObjectURL,l&&x(b,"createObjectURL",function(Le){return l.apply(k,arguments)}),o&&x(b,"revokeObjectURL",function(Le){return o.apply(k,arguments)})),N(b,"URL"),u({global:!0,forced:!g,sham:!m},{URL:b})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":126,"../modules/es.string.iterator":190,"../modules/web.url-search-params":237}],239:[function(t,R,M){R.exports=t("./").polyfill()},{"./":240}],240:[function(t,R,M){(function(p,f){var h;h=function(){function b(le){return typeof le=="function"}var w=Array.isArray||function(le){return Object.prototype.toString.call(le)==="[object Array]"},c=0,l=void 0,o=void 0,u=function(le,re){E[c]=le,E[c+1]=re,(c+=2)===2&&(o?o(j):z())},m=typeof window<"u"?window:void 0,g=(g=m||{}).MutationObserver||g.WebKitMutationObserver,_=typeof self>"u"&&p!==void 0&&{}.toString.call(p)==="[object process]",v=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function x(){var le=setTimeout;return function(){return le(j,1)}}var E=new Array(1e3);function j(){for(var le=0;le<c;le+=2)(0,E[le])(E[le+1]),E[le]=void 0,E[le+1]=void 0;c=0}var O,P,L,z=void 0;function N(le,re){var Te,Ce=this,Me=new this.constructor(H),Se=(Me[k]===void 0&&Z(Me),Ce._state);return Se?(Te=arguments[Se-1],u(function(){return ce(Se,Me,Te,Ce._result)})):te(Ce,Me,le,re),Me}function V(le){var re;return le&&typeof le=="object"&&le.constructor===this?le:(W(re=new this(H),le),re)}z=_?function(){return p.nextTick(j)}:g?(P=0,_=new g(j),L=document.createTextNode(""),_.observe(L,{characterData:!0}),function(){L.data=P=++P%2}):v?((O=new MessageChannel).port1.onmessage=j,function(){return O.port2.postMessage(0)}):(m===void 0&&typeof t=="function"?function(){try{var le=Function("return this")().require("vertx");return(l=le.runOnLoop||le.runOnContext)!==void 0?function(){l(j)}:x()}catch{return x()}}:x)();var k=Math.random().toString(36).substring(2);function H(){}var G=void 0;function F(le,re,Te){var Ce,Me;re.constructor===le.constructor&&Te===N&&re.constructor.resolve===V?(Ce=le,(Me=re)._state===1?J(Ce,Me._result):Me._state===2?ee(Ce,Me._result):te(Me,void 0,function(Se){return W(Ce,Se)},function(Se){return ee(Ce,Se)})):Te!==void 0&&b(Te)?function(Se,Ue,Fe){u(function(Be){var st=!1,ve=function(ue,ze,He,me){try{ue.call(ze,He,me)}catch(je){return je}}(Fe,Ue,function(ue){st||(st=!0,(Ue!==ue?W:J)(Be,ue))},function(ue){st||(st=!0,ee(Be,ue))},Be._label);!st&&ve&&(st=!0,ee(Be,ve))},Se)}(le,re,Te):J(le,re)}function W(le,re){if(le===re)ee(le,new TypeError("You cannot resolve a promise with itself"));else if(Te=typeof re,re===null||Te!="object"&&Te!="function")J(le,re);else{Te=void 0;try{Te=re.then}catch(Ce){return void ee(le,Ce)}F(le,re,Te)}var Te}function Q(le){le._onerror&&le._onerror(le._result),se(le)}function J(le,re){le._state===G&&(le._result=re,le._state=1,le._subscribers.length!==0&&u(se,le))}function ee(le,re){le._state===G&&(le._state=2,le._result=re,u(Q,le))}function te(le,re,Te,Ce){var Me=le._subscribers,Se=Me.length;le._onerror=null,Me[Se]=re,Me[Se+1]=Te,Me[Se+2]=Ce,Se===0&&le._state&&u(se,le)}function se(le){var re=le._subscribers,Te=le._state;if(re.length!==0){for(var Ce,Me=void 0,Se=le._result,Ue=0;Ue<re.length;Ue+=3)Ce=re[Ue],Me=re[Ue+Te],Ce?ce(Te,Ce,Me,Se):Me(Se);le._subscribers.length=0}}function ce(le,re,Te,Ce){var Me=b(Te),Se=void 0,Ue=void 0,Fe=!0;if(Me){try{Se=Te(Ce)}catch(Be){Fe=!1,Ue=Be}if(re===Se)return void ee(re,new TypeError("A promises callback cannot return that same promise."))}else Se=Ce;re._state===G&&(Me&&Fe?W(re,Se):Fe===!1?ee(re,Ue):le===1?J(re,Se):le===2&&ee(re,Se))}var q=0;function Z(le){le[k]=q++,le._state=void 0,le._result=void 0,le._subscribers=[]}pe.prototype._enumerate=function(le){for(var re=0;this._state===G&&re<le.length;re++)this._eachEntry(le[re],re)},pe.prototype._eachEntry=function(le,re){var Te=this._instanceConstructor,Ce=Te.resolve;if(Ce===V){var Me,Se=void 0,Ue=void 0,Fe=!1;try{Se=le.then}catch(Be){Fe=!0,Ue=Be}Se===N&&le._state!==G?this._settledAt(le._state,re,le._result):typeof Se!="function"?(this._remaining--,this._result[re]=le):Te===ge?(Me=new Te(H),Fe?ee(Me,Ue):F(Me,le,Se),this._willSettleAt(Me,re)):this._willSettleAt(new Te(function(Be){return Be(le)}),re)}else this._willSettleAt(Ce(le),re)},pe.prototype._settledAt=function(le,re,Te){var Ce=this.promise;Ce._state===G&&(this._remaining--,le===2?ee(Ce,Te):this._result[re]=Te),this._remaining===0&&J(Ce,this._result)},pe.prototype._willSettleAt=function(le,re){var Te=this;te(le,void 0,function(Ce){return Te._settledAt(1,re,Ce)},function(Ce){return Te._settledAt(2,re,Ce)})};var ie=pe;function pe(le,re){this._instanceConstructor=le,this.promise=new le(H),this.promise[k]||Z(this.promise),w(re)?(this.length=re.length,this._remaining=re.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(re),this._remaining!==0)||J(this.promise,this._result)):ee(this.promise,new Error("Array Methods must be provided an Array"))}be.prototype.catch=function(le){return this.then(null,le)},be.prototype.finally=function(le){var re=this.constructor;return b(le)?this.then(function(Te){return re.resolve(le()).then(function(){return Te})},function(Te){return re.resolve(le()).then(function(){throw Te})}):this.then(le,le)};var ge=be;function be(le){if(this[k]=q++,this._result=this._state=void 0,this._subscribers=[],H!==le){if(typeof le!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof be))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var re=this;try{le(function(Te){W(re,Te)},function(Te){ee(re,Te)})}catch(Te){ee(re,Te)}}}return ge.prototype.then=N,ge.all=function(le){return new ie(this,le).promise},ge.race=function(le){var re=this;return w(le)?new re(function(Te,Ce){for(var Me=le.length,Se=0;Se<Me;Se++)re.resolve(le[Se]).then(Te,Ce)}):new re(function(Te,Ce){return Ce(new TypeError("You must pass an array to race."))})},ge.resolve=V,ge.reject=function(le){var re=new this(H);return ee(re,le),re},ge._setScheduler=function(le){o=le},ge._setAsap=function(le){u=le},ge._asap=u,ge.polyfill=function(){var le=void 0;if(f!==void 0)le=f;else if(typeof self<"u")le=self;else try{le=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var re=le.Promise;if(re){var Te=null;try{Te=Object.prototype.toString.call(re.resolve())}catch{}if(Te==="[object Promise]"&&!re.cast)return}le.Promise=ge},ge.Promise=ge},typeof M=="object"&&R!==void 0?R.exports=h():this.ES6Promise=h()}).call(this,t("_process"),U!==void 0?U:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:249}],241:[function(t,R,M){var p;p=function(f,h){var b="callback";function w(l){try{delete window[l]}catch{window[l]=void 0}}function c(l){(l=document.getElementById(l))&&document.getElementsByTagName("head")[0].removeChild(l)}h.exports=function(l){var o=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],u=l,m=o.timeout||5e3,g=o.jsonpCallback||b,_=void 0;return new Promise(function(v,x){var E=o.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),j=g+"_"+E,O=(window[E]=function(P){v({ok:!0,json:function(){return Promise.resolve(P)}}),_&&clearTimeout(_),c(j),w(E)},u+=u.indexOf("?")===-1?"?":"&",document.createElement("script"));O.setAttribute("src",""+u+g+"="+E),o.charset&&O.setAttribute("charset",o.charset),O.id=j,document.getElementsByTagName("head")[0].appendChild(O),_=setTimeout(function(){x(new Error("JSONP request to "+l+" timed out")),w(E),c(j),window[E]=function(){w(E)}},m),O.onerror=function(){x(new Error("JSONP request to "+l+" failed")),w(E),c(j),_&&clearTimeout(_)}})}},M!==void 0&&R!==void 0?p(0,R):(p(p={exports:{}},p),this.fetchJsonp=p.exports)},{}],242:[function(t,R,M){var p=function(f){var h,b,w,c,l,o,u,m,g,_;if(!(f===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return _=f.document,h=function(){return f.URL||f.webkitURL||f},b=_.createElementNS("http://www.w3.org/1999/xhtml","a"),w="download"in b,c=/constructor/i.test(f.HTMLElement)||f.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent),o=function(v){(f.setImmediate||f.setTimeout)(function(){throw v},0)},u=function(v){setTimeout(function(){typeof v=="string"?h().revokeObjectURL(v):v.remove()},4e4)},m=function(v){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(v.type)?new Blob(["\uFEFF",v],{type:v.type}):v},_=(g=function(v,x,E){E||(v=m(v));var j,O,P=this,L=(E=v.type==="application/octet-stream",function(){for(var z=P,N="writestart progress write writeend".split(" "),V=(N=[].concat(N)).length;V--;){var k=z["on"+N[V]];if(typeof k=="function")try{k.call(z,z)}catch(H){o(H)}}});P.readyState=P.INIT,w?(j=h().createObjectURL(v),setTimeout(function(){var z,N;b.href=j,b.download=x,z=b,N=new MouseEvent("click"),z.dispatchEvent(N),L(),u(j),P.readyState=P.DONE})):(l||E&&c)&&f.FileReader?((O=new FileReader).onloadend=function(){var z=l?O.result:O.result.replace(/^data:[^;]*;/,"data:attachment/file;");f.open(z,"_blank")||(f.location.href=z),z=void 0,P.readyState=P.DONE,L()},O.readAsDataURL(v),P.readyState=P.INIT):(j=j||h().createObjectURL(v),!E&&f.open(j,"_blank")||(f.location.href=j),P.readyState=P.DONE,L(),u(j))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(v,x,E){return x=x||v.name||"download",E||(v=m(v)),navigator.msSaveOrOpenBlob(v,x)}:(_.abort=function(){},_.readyState=_.INIT=0,_.WRITING=1,_.DONE=2,_.error=_.onwritestart=_.onprogress=_.onwrite=_.onabort=_.onerror=_.onwriteend=null,function(v,x,E){return new g(v,x||v.name||"download",E)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);R!==void 0&&R.exports&&(R.exports.saveAs=p)},{}],243:[function(t,R,M){var p,f=Object.defineProperty,h=(f(M,"__esModule",{value:!0}),M),b={GIFEncoder:()=>L,applyPalette:()=>function(G,F,W="rgb565"){if(!G||!G.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(G instanceof Uint8Array||G instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<F.length)throw new Error("applyPalette() only works with 256 colors or less");const Q=new Uint32Array(G.buffer),J=Q.length,ee=W==="rgb444"?4096:65536,te=new Uint8Array(J),se=new Array(ee);if(W==="rgba4444")for(let Te=0;Te<J;Te++){var ce,q=(ce=Q[Te])>>24&255,Z=ce>>16&255,ie=ce>>8&255,pe=(pe=u(ce=255&ce,ie,Z,q))in se?se[pe]:se[pe]=function(Ce,Me,Se,Ue,Fe){let Be=0,st=1e100;for(let ze=0;ze<Fe.length;ze++){var ve=Fe[ze],ue=j(ve[3]-Ue);ue>st||(ue+=j(ve[0]-Ce))>st||(ue+=j(ve[1]-Me))>st||(ue+=j(ve[2]-Se))>st||(st=ue,Be=ze)}return Be}(ce,ie,Z,q,F);te[Te]=pe}else{const Te=W==="rgb444"?m:o;for(let Ce=0;Ce<J;Ce++){var ge,be=(ge=Q[Ce])>>16&255,le=ge>>8&255,re=(re=Te(ge=255&ge,le,be))in se?se[re]:se[re]=function(Me,Se,Ue,Fe){let Be=0,st=1e100;for(let ze=0;ze<Fe.length;ze++){var ve=Fe[ze],ue=j(ve[0]-Me);ue>st||(ue+=j(ve[1]-Se))>st||(ue+=j(ve[2]-Ue))>st||(st=ue,Be=ze)}return Be}(ge,le,be,F);te[Ce]=re}}return te},default:()=>H,nearestColor:()=>function(G,F,W=x){return G[O(G,F,W)]},nearestColorIndex:()=>O,nearestColorIndexWithDistance:()=>P,prequantize:()=>function(G,{roundRGB:F=5,roundAlpha:W=10,oneBitAlpha:Q=null}={}){const J=new Uint32Array(G.buffer);for(let ce=0;ce<J.length;ce++){let q=(se=J[ce])>>24&255;var ee=se>>16&255,te=se>>8&255,se=255&se;q=E(q,W),Q&&(q=q<=(typeof Q=="number"?Q:127)?0:255),se=E(se,F),te=E(te,F),ee=E(ee,F),J[ce]=q<<24|ee<<16|te<<8|se<<0}},quantize:()=>function(G,F,W={}){var{format:Q="rgb565",clearAlpha:J=!0,clearAlphaColor:ee=0,clearAlphaThreshold:te=0,oneBitAlpha:se=!1}=W;if(!G||!G.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(G instanceof Uint8Array||G instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");G=new Uint32Array(G.buffer);let ce=W.useSqrt!==!1;const q=Q==="rgba4444",Z=function(me,je){const Ie=new Array(je==="rgb444"?4096:65536),Ye=me.length;if(je==="rgba4444")for(let Ge=0;Ge<Ye;++Ge){var it,yt=(it=me[Ge])>>24&255,Ze=it>>16&255,at=it>>8&255,fe=u(it=255&it,at,Ze,yt);let ht=fe in Ie?Ie[fe]:Ie[fe]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};ht.rc+=it,ht.gc+=at,ht.bc+=Ze,ht.ac+=yt,ht.cnt++}else if(je==="rgb444")for(let Ge=0;Ge<Ye;++Ge){var ae,oe=(ae=me[Ge])>>16&255,_e=ae>>8&255,he=m(ae=255&ae,_e,oe);let ht=he in Ie?Ie[he]:Ie[he]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};ht.rc+=ae,ht.gc+=_e,ht.bc+=oe,ht.cnt++}else for(let Ge=0;Ge<Ye;++Ge){var ke,We=(ke=me[Ge])>>16&255,$e=ke>>8&255,Ee=o(ke=255&ke,$e,We);let ht=Ee in Ie?Ie[Ee]:Ie[Ee]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};ht.rc+=ke,ht.gc+=$e,ht.bc+=We,ht.cnt++}return Ie}(G,Q),ie=Z.length,pe=ie-1,ge=new Uint32Array(ie+1);for(var be=0,le=0;le<ie;++le){const me=Z[le];me!=null&&(ue=1/me.cnt,q&&(me.ac*=ue),me.rc*=ue,me.gc*=ue,me.bc*=ue,Z[be++]=me)}_(F)/be<.022&&(ce=!1);var re,Te,Ce;for(le=0;le<be-1;++le)Z[le].fw=le+1,Z[le+1].bk=le,ce&&(Z[le].cnt=Math.sqrt(Z[le].cnt));for(ce&&(Z[le].cnt=Math.sqrt(Z[le].cnt)),le=0;le<be;++le){v(Z,le);var Me=Z[le].err;for(Te=++ge[0];1<Te&&!(Z[re=ge[Ce=Te>>1]].err<=Me);Te=Ce)ge[Te]=re;ge[Te]=le}var Se,Ue=be-F;for(le=0;le<Ue;){for(;;){var Fe=ge[1];if((Se=Z[Fe]).tm>=Se.mtm&&Z[Se.nn].mtm<=Se.tm)break;for(Se.mtm==pe?Fe=ge[1]=ge[ge[0]--]:(v(Z,Fe),Se.tm=le),Me=Z[Fe].err,Te=1;(Ce=Te+Te)<=ge[0]&&(Ce<ge[0]&&Z[ge[Ce]].err>Z[ge[Ce+1]].err&&Ce++,!(Me<=Z[re=ge[Ce]].err));Te=Ce)ge[Te]=re;ge[Te]=Fe}var Be=Z[Se.nn],st=Se.cnt,ve=Be.cnt,ue=1/(st+ve);q&&(Se.ac=ue*(st*Se.ac+ve*Be.ac)),Se.rc=ue*(st*Se.rc+ve*Be.rc),Se.gc=ue*(st*Se.gc+ve*Be.gc),Se.bc=ue*(st*Se.bc+ve*Be.bc),Se.cnt+=Be.cnt,Se.mtm=++le,Z[Be.bk].fw=Be.fw,Z[Be.fw].bk=Be.bk,Be.mtm=pe}let ze=[];for(le=0;;0){let me=g(Math.round(Z[le].rc),0,255),je=g(Math.round(Z[le].gc),0,255),Ie=g(Math.round(Z[le].bc),0,255),Ye=255;q&&(Ye=g(Math.round(Z[le].ac),0,255),se&&(Ye=Ye<=(He=typeof se=="number"?se:127)?0:255),J&&Ye<=te&&(me=je=Ie=ee,Ye=0));var He=q?[me,je,Ie,Ye]:[me,je,Ie];if(function(it,yt){for(let fe=0;fe<it.length;fe++){var Ze=(at=it[fe])[0]===yt[0]&&at[1]===yt[1]&&at[2]===yt[2],at=!(4<=at.length&&4<=yt.length)||at[3]===yt[3];if(Ze&&at)return!0}return!1}(ze,He)||ze.push(He),(le=Z[le].fw)==0)break}return ze},snapColorsToPalette:()=>function(G,F,W=5){if(G.length&&F.length){var Q=G.map(ce=>ce.slice(0,3)),J=W*W,ee=G[0].length;for(let ce=0;ce<F.length;ce++){let q=F[ce];q=q.length<ee?[q[0],q[1],q[2],255]:q.length>ee?q.slice(0,3):q.slice();var te,se=(te=P(Q,q.slice(0,3),x))[0];0<(te=te[1])&&te<=J&&(G[se]=q)}}}};for(p in b)f(h,p,{get:b[p],enumerable:!0});var w=59;function c(G=256){let F=0,W=new Uint8Array(G);return{get buffer(){return W.buffer},reset(){F=0},bytesView:()=>W.subarray(0,F),bytes:()=>W.slice(0,F),writeByte(J){Q(F+1),W[F]=J,F++},writeBytes(J,ee=0,te=J.length){Q(F+te);for(let se=0;se<te;se++)W[F++]=J[se+ee]},writeBytesView(J,ee=0,te=J.byteLength){Q(F+te),W.set(J.subarray(ee,ee+te),F),F+=te}};function Q(J){var ee=W.length;if(!(J<=ee)){J=Math.max(J,ee*(ee<1048576?2:1.125)>>>0),ee!=0&&(J=Math.max(J,256));const te=W;W=new Uint8Array(J),0<F&&W.set(te.subarray(0,F),0)}}}var l=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function o(G,F,W){return G<<8&63488|F<<2&992|W>>3}function u(G,F,W,Q){return G>>4|240&F|(240&W)<<4|(240&Q)<<8}function m(G,F,W){return G>>4<<8|240&F|W>>4}function g(G,F,W){return G<F?F:W<G?W:G}function _(G){return G*G}function v(G,F,W){var Q=0,J=1e100;const ee=G[F];for(var te=ee.cnt,se=ee.ac,ce=ee.rc,q=ee.gc,Z=ee.bc,ie=ee.fw;ie!=0;ie=G[ie].fw){var pe,ge,be=G[ie];J<=(ge=te*(ge=be.cnt)/(te+ge))||(pe=0,J<=(pe+=ge*_(be.rc-ce))||J<=(pe+=ge*_(be.gc-q))||J<=(pe+=ge*_(be.bc-Z))||(J=pe,Q=ie))}ee.err=J,ee.nn=Q}function x(G,F){for(var W=0,Q=0;Q<G.length;Q++){var J=G[Q]-F[Q];W+=J*J}return W}function E(G,F){return 1<F?Math.round(G/F)*F:G}function j(G){return G*G}function O(G,F,W=x){let Q=1/0,J=-1;for(let te=0;te<G.length;te++){var ee=W(F,G[te]);ee<Q&&(Q=ee,J=te)}return J}function P(G,F,W=x){let Q=1/0,J=-1;for(let te=0;te<G.length;te++){var ee=W(F,G[te]);ee<Q&&(Q=ee,J=te)}return[J,Q]}function L(G={}){const{initialCapacity:F=4096,auto:W=!0}=G,Q=c(F),J=new Uint8Array(256),ee=new Int32Array(5003),te=new Int32Array(5003);let se=!1;return{reset(){Q.reset(),se=!1},finish(){Q.writeByte(w)},bytes:()=>Q.bytes(),bytesView:()=>Q.bytesView(),get buffer(){return Q.buffer},get stream(){return Q},writeHeader:ce,writeFrame(q,Z,ie,pe={}){var{transparent:ge=!1,transparentIndex:be=0,delay:ve=0,palette:le=null,repeat:Fe=0,colorDepth:re=8,dispose:Te=-1}=pe;let Ce=!1;if(W?se||(Ce=!0,ce(),se=!0):Ce=!!pe.first,Z=Math.max(0,Math.floor(Z)),ie=Math.max(0,Math.floor(ie)),Ce){if(!le)throw new Error("First frame must include a { palette } option");var[pe,Be,Se,st,Ue=8]=[Q,Z,ie,le,re];Ue=128|Ue-1<<4|(st=k(st.length)-1),N(pe,Be),N(pe,Se),pe.writeBytes([Ue,0,0]),z(Q,le),0<=Fe&&(Be=Fe,(st=Q).writeByte(33),st.writeByte(255),st.writeByte(11),V(st,"NETSCAPE2.0"),st.writeByte(3),st.writeByte(1),N(st,Be),st.writeByte(0))}var Me,Se,Ue=Te,Fe=Se=Math.round(ve/10),Be=ge,st=be,ve=((pe=Q).writeByte(33),pe.writeByte(249),pe.writeByte(4),st<0&&(st=0,Be=!1),Be=Be?(Me=1,2):Me=0,0<=Ue&&(Be=7&Ue),Be<<=2,pe.writeByte(0|Be|Me),N(pe,Fe),pe.writeByte(st||0),pe.writeByte(0),!!le&&!Ce);ge=Z,be=ie,Me=ve?le:null,(Te=Q).writeByte(44),N(Te,0),N(Te,0),N(Te,ge),N(Te,be),Me?(ge=k(Me.length)-1,Te.writeByte(128|ge)):Te.writeByte(0),ve&&z(Q,le),[Fe,pe,be,ge,Te=8,ve,le,q]=[Q,q,Z,ie,re,J,ee,te],function(ue,ze,He,me,je=c(512),Ie=new Uint8Array(256),Ye=new Int32Array(5003),it=new Int32Array(5003)){var yt=Ye.length;me=Math.max(2,me),Ie.fill(0),it.fill(0),Ye.fill(-1);let Ze=0,at=0;var fe=me+1;const ae=fe;let oe=!1,_e=ae,he=(1<<_e)-1;var ke=1<<fe-1;const We=1+ke;let $e=2+ke,Ee=0,Ge=He[0],ht=0;for(let Gt=yt;Gt<65536;Gt*=2)++ht;ht=8-ht,je.writeByte(me),Nt(ke);var wt=He.length;for(let Gt=1;Gt<wt;Gt++)e:{var Lt=He[Gt],Ct=(Lt<<12)+Ge;let Kt=Lt<<ht^Ge;if(Ye[Kt]===Ct)Ge=it[Kt];else{for(var Ft=Kt===0?1:yt-Kt;0<=Ye[Kt];)if((Kt-=Ft)<0&&(Kt+=yt),Ye[Kt]===Ct){Ge=it[Kt];break e}Nt(Ge),Ge=Lt,$e<4096?(it[Kt]=$e++,Ye[Kt]=Ct):(Ye.fill(-1),$e=2+ke,oe=!0,Nt(ke))}}return Nt(Ge),Nt(We),je.writeByte(0),je.bytesView();function Nt(Gt){for(Ze&=l[at],0<at?Ze|=Gt<<at:Ze=Gt,at+=_e;8<=at;)Ie[Ee++]=255&Ze,254<=Ee&&(je.writeByte(Ee),je.writeBytesView(Ie,0,Ee),Ee=0),Ze>>=8,at-=8;if(($e>he||oe)&&(oe?(_e=ae,he=(1<<_e)-1,oe=!1):(++_e,he=_e===12?1<<_e:(1<<_e)-1)),Gt==We){for(;0<at;)Ie[Ee++]=255&Ze,254<=Ee&&(je.writeByte(Ee),je.writeBytesView(Ie,0,Ee),Ee=0),Ze>>=8,at-=8;0<Ee&&(je.writeByte(Ee),je.writeBytesView(Ie,0,Ee),Ee=0)}}}(0,0,pe,Te,Fe,ve,le,q)}};function ce(){V(Q,"GIF89a")}}function z(G,F){var W=1<<k(F.length);for(let Q=0;Q<W;Q++){let J=[0,0,0];Q<F.length&&(J=F[Q]),G.writeByte(J[0]),G.writeByte(J[1]),G.writeByte(J[2])}}function N(G,F){G.writeByte(255&F),G.writeByte(F>>8&255)}function V(G,F){for(var W=0;W<F.length;W++)G.writeByte(F.charCodeAt(W))}function k(G){return Math.max(Math.ceil(Math.log2(G)),1)}var H=L},{}],244:[function(t,R,M){M.read=function(p,f,h,b,w){var c,l,o=8*w-b-1,u=(1<<o)-1,m=u>>1,g=-7,_=h?w-1:0,v=h?-1:1;for(w=p[f+_],_+=v,c=w&(1<<-g)-1,w>>=-g,g+=o;0<g;c=256*c+p[f+_],_+=v,g-=8);for(l=c&(1<<-g)-1,c>>=-g,g+=b;0<g;l=256*l+p[f+_],_+=v,g-=8);if(c===0)c=1-m;else{if(c===u)return l?NaN:1/0*(w?-1:1);l+=Math.pow(2,b),c-=m}return(w?-1:1)*l*Math.pow(2,c-b)},M.write=function(p,f,h,b,w,c){var l,o,u=8*c-w-1,m=(1<<u)-1,g=m>>1,_=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=b?0:c-1,x=b?1:-1;for(c=f<0||f===0&&1/f<0?1:0,f=Math.abs(f),isNaN(f)||f===1/0?(o=isNaN(f)?1:0,l=m):(l=Math.floor(Math.log(f)/Math.LN2),f*(b=Math.pow(2,-l))<1&&(l--,b*=2),2<=(f+=1<=l+g?_/b:_*Math.pow(2,1-g))*b&&(l++,b/=2),m<=l+g?(o=0,l=m):1<=l+g?(o=(f*b-1)*Math.pow(2,w),l+=g):(o=f*Math.pow(2,g-1)*Math.pow(2,w),l=0));8<=w;p[h+v]=255&o,v+=x,o/=256,w-=8);for(l=l<<w|o,u+=w;0<u;p[h+v]=255&l,v+=x,l/=256,u-=8);p[h+v-x]|=128*c}},{}],245:[function(t,R,M){var p;function f(fe,ae){return fe.b===ae.b&&fe.a===ae.a}function h(fe,ae){return fe.b<ae.b||fe.b===ae.b&&fe.a<=ae.a}function b(fe,ae,oe){var _e=ae.b-fe.b,he=oe.b-ae.b;return 0<_e+he?_e<he?ae.a-fe.a+_e/(_e+he)*(fe.a-oe.a):ae.a-oe.a+he/(_e+he)*(oe.a-fe.a):0}function w(fe,ae,oe){var _e=ae.b-fe.b,he=oe.b-ae.b;return 0<_e+he?(ae.a-oe.a)*_e+(ae.a-fe.a)*he:0}function c(fe,ae){return fe.a<ae.a||fe.a===ae.a&&fe.b<=ae.b}function l(fe,ae,oe){var _e=ae.a-fe.a,he=oe.a-ae.a;return 0<_e+he?_e<he?ae.b-fe.b+_e/(_e+he)*(fe.b-oe.b):ae.b-oe.b+he/(_e+he)*(oe.b-fe.b):0}function o(fe,ae,oe){var _e=ae.a-fe.a,he=oe.a-ae.a;return 0<_e+he?(ae.b-oe.b)*_e+(ae.b-fe.b)*he:0}function u(fe,ae,oe,_e){return(fe=fe<0?0:fe)<=(oe=oe<0?0:oe)?oe===0?(ae+_e)/2:ae+fe/(fe+oe)*(_e-ae):_e+oe/(fe+oe)*(ae-_e)}function m(fe){var ae=E(fe.b);return O(ae,fe.c),O(ae.b,fe.c),P(ae,fe.a),ae}function g(fe,ae){var oe=!1,_e=!1;fe!==ae&&(ae.a!==fe.a&&(_e=!0,z(ae.a,fe.a)),ae.d!==fe.d&&(oe=!0,N(ae.d,fe.d)),j(ae,fe),_e||(O(ae,fe.a),fe.a.c=fe),oe||(P(ae,fe.d),fe.d.a=fe))}function _(fe){var ae=fe.b,oe=!1;fe.d!==fe.b.d&&(oe=!0,N(fe.d,fe.b.d)),fe.c===fe?z(fe.a,null):(fe.b.d.a=fe.b.e,fe.a.c=fe.c,j(fe,fe.b.e),oe||P(fe,fe.d)),ae.c===ae?(z(ae.a,null),N(ae.d,null)):(fe.d.a=ae.b.e,ae.a.c=ae.c,j(ae,ae.b.e)),L(fe)}function v(fe){var ae=E(fe),oe=ae.b;return j(ae,fe.e),ae.a=fe.b.a,O(oe,ae.a),ae.d=oe.d=fe.d,ae=ae.b,j(fe.b,fe.b.b.e),j(fe.b,ae),fe.b.a=ae.a,ae.b.a.c=ae.b,ae.b.d=fe.b.d,ae.f=fe.f,ae.b.f=fe.b.f,ae}function x(fe,ae){var oe=!1,_e=E(fe),he=_e.b;return ae.d!==fe.d&&(oe=!0,N(ae.d,fe.d)),j(_e,fe.e),j(he,ae),_e.a=fe.b.a,he.a=ae.a,_e.d=he.d=fe.d,fe.d.a=he,oe||P(_e,fe.d),_e}function E(fe){var ae=new Fe,oe=new Fe,_e=fe.b.h;return(((oe.h=_e).b.h=ae).h=fe).b.h=oe,ae.b=oe,((ae.c=ae).e=oe).b=ae,(oe.c=oe).e=ae}function j(fe,ae){var oe=fe.c,_e=ae.c;oe.b.e=ae,(_e.b.e=fe).c=_e,ae.c=oe}function O(fe,ae){var oe=ae.f,_e=new st(ae,oe);for(oe.e=_e,oe=(ae.f=_e).c=fe;oe.a=_e,(oe=oe.c)!==fe;);}function P(fe,ae){var oe=ae.d,_e=new Ue(ae,oe);for(oe.b=_e,(ae.d=_e).a=fe,_e.c=ae.c,oe=fe;oe.d=_e,(oe=oe.e)!==fe;);}function L(fe){var ae=fe.h;fe=fe.b.h,(ae.b.h=fe).b.h=ae}function z(fe,ae){for(var oe=fe.c,_e=oe;_e.a=ae,(_e=_e.c)!==oe;);oe=fe.f,((_e=fe.e).f=oe).e=_e}function N(fe,ae){for(var oe=fe.a,_e=oe;_e.d=ae,(_e=_e.e)!==oe;);oe=fe.d,((_e=fe.b).d=oe).b=_e}function V(fe){var ae=0;return Math.abs(fe[1])>Math.abs(fe[0])&&(ae=1),Math.abs(fe[2])>Math.abs(fe[ae])?2:ae}function k(fe,ae){fe.f+=ae.f,fe.b.f+=ae.b.f}function H(fe,ae,oe){return fe=fe.a,ae=ae.a,oe=oe.a,ae.b.a===fe?oe.b.a===fe?h(ae.a,oe.a)?w(oe.b.a,ae.a,oe.a)<=0:0<=w(ae.b.a,oe.a,ae.a):w(oe.b.a,fe,oe.a)<=0:oe.b.a===fe?0<=w(ae.b.a,fe,ae.a):(ae=b(ae.b.a,fe,ae.a),(fe=b(oe.b.a,fe,oe.a))<=ae)}function G(fe){fe.a.i=null;var ae=fe.e;ae.a.c=ae.c,ae.c.a=ae.a,fe.e=null}function F(fe,ae){_(fe.a),fe.c=!1,(fe.a=ae).i=fe}function W(fe){for(var ae=fe.a.a;(fe=at(fe)).a.a===ae;);return fe.c&&(F(fe,ae=x(Ze(fe).a.b,fe.a.e)),fe=at(fe)),fe}function Q(fe,ae,oe){var _e=new yt;return _e.a=oe,_e.e=re(fe.f,ae.e,_e),oe.i=_e}function J(fe,ae){switch(fe.s){case 100130:return(1&ae)!=0;case 100131:return ae!==0;case 100132:return 0<ae;case 100133:return ae<0;case 100134:return 2<=ae||ae<=-2}return!1}function ee(fe){var ae=fe.a,oe=ae.d;oe.c=fe.d,oe.a=ae,G(fe)}function te(fe,ae,oe){for(ae=(fe=ae).a;fe!==oe;){fe.c=!1;var _e=Ze(fe),he=_e.a;if(he.a!==ae.a){if(!_e.c){ee(fe);break}F(_e,he=x(ae.c.b,he.b))}ae.c!==he&&(g(he.b.e,he),g(ae,he)),ee(fe),ae=_e.a,fe=_e}return ae}function se(fe,ae,oe,_e,he,ke){for(var We=!0;Q(fe,ae,oe.b),(oe=oe.c)!==_e;);for(he===null&&(he=Ze(ae).a.b.c);(oe=(_e=Ze(ae)).a.b).a===he.a;)oe.c!==he&&(g(oe.b.e,oe),g(he.b.e,oe)),_e.f=ae.f-oe.f,_e.d=J(fe,_e.f),ae.b=!0,!We&&ie(fe,ae)&&(k(oe,he),G(ae),_(he)),We=!1,ae=_e,he=oe;ae.b=!0,ke&&ge(fe,ae)}function ce(fe,ae,oe,_e,he){var ke=[ae.g[0],ae.g[1],ae.g[2]];ae.d=null,ae.d=fe.o&&fe.o(ke,oe,_e,fe.c)||null,ae.d===null&&(he?fe.n||(Se(fe,100156),fe.n=!0):ae.d=oe[0])}function q(fe,ae,oe){var _e=[null,null,null,null];_e[0]=ae.a.d,_e[1]=oe.a.d,ce(fe,ae.a,_e,[.5,.5,0,0],!1),g(ae,oe)}function Z(fe,ae,oe,_e,he){var ke=Math.abs(ae.b-fe.b)+Math.abs(ae.a-fe.a),We=Math.abs(oe.b-fe.b)+Math.abs(oe.a-fe.a),$e=he+1;_e[he]=.5*We/(ke+We),_e[$e]=.5*ke/(ke+We),fe.g[0]+=_e[he]*ae.g[0]+_e[$e]*oe.g[0],fe.g[1]+=_e[he]*ae.g[1]+_e[$e]*oe.g[1],fe.g[2]+=_e[he]*ae.g[2]+_e[$e]*oe.g[2]}function ie(fe,ae){var oe=Ze(ae),_e=ae.a,he=oe.a;if(h(_e.a,he.a)){if(0<w(he.b.a,_e.a,he.a))return;if(f(_e.a,he.a)){if(_e.a!==he.a){oe=fe.e;var ke=_e.a.h;if(0<=ke){var We=(oe=oe.b).d,$e=oe.e,Ee=oe.c,Ge=Ee[ke];We[Ge]=We[oe.a],(Ee[We[Ge]]=Ge)<=--oe.a&&(Ge<=1||h($e[We[Ge>>1]],$e[We[Ge]])?Ye:it)(oe,Ge),$e[ke]=null,Ee[ke]=oe.b,oe.b=ke}else for(oe.c[-(ke+1)]=null;0<oe.a&&oe.c[oe.d[oe.a-1]]===null;)--oe.a;q(fe,he.b.e,_e)}}else v(he.b),g(_e,he.b.e),ae.b=oe.b=!0}else{if(w(_e.b.a,he.a,_e.a)<0)return;at(ae).b=ae.b=!0,v(_e.b),g(he.b.e,_e)}return 1}function pe(fe,ae){var oe=Ze(ae),_e=ae.a,he=oe.a,ke=_e.a,We=he.a,$e=_e.b.a,Ee=he.b.a,Ge=new st;if(w($e,fe.a,ke),w(Ee,fe.a,We),!(ke===We||Math.min(ke.a,$e.a)>Math.max(We.a,Ee.a))){if(h(ke,We)){if(0<w(Ee,ke,We))return}else if(w($e,We,ke)<0)return;var ht,wt,Lt=$e,Ct=ke,Ft=Ee,Nt=We;if(h(Lt,Ct)||(ht=Lt,Lt=Ct,Ct=ht),h(Ft,Nt)||(ht=Ft,Ft=Nt,Nt=ht),h(Lt,Ft)||(ht=Lt,Lt=Ft,Ft=ht,ht=Ct,Ct=Nt,Nt=ht),h(Ft,Ct)?h(Ct,Nt)?((ht=b(Lt,Ft,Ct))+(wt=b(Ft,Ct,Nt))<0&&(ht=-ht,wt=-wt),Ge.b=u(ht,Ft.b,wt,Ct.b)):((ht=w(Lt,Ft,Ct))+(wt=-w(Lt,Nt,Ct))<0&&(ht=-ht,wt=-wt),Ge.b=u(ht,Ft.b,wt,Nt.b)):Ge.b=(Ft.b+Ct.b)/2,c(Lt,Ct)||(ht=Lt,Lt=Ct,Ct=ht),c(Ft,Nt)||(ht=Ft,Ft=Nt,Nt=ht),c(Lt,Ft)||(ht=Lt,Lt=Ft,Ft=ht,ht=Ct,Ct=Nt,Nt=ht),c(Ft,Ct)?c(Ct,Nt)?((ht=l(Lt,Ft,Ct))+(wt=l(Ft,Ct,Nt))<0&&(ht=-ht,wt=-wt),Ge.a=u(ht,Ft.a,wt,Ct.a)):((ht=o(Lt,Ft,Ct))+(wt=-o(Lt,Nt,Ct))<0&&(ht=-ht,wt=-wt),Ge.a=u(ht,Ft.a,wt,Nt.a)):Ge.a=(Ft.a+Ct.a)/2,h(Ge,fe.a)&&(Ge.b=fe.a.b,Ge.a=fe.a.a),Lt=h(ke,We)?ke:We,h(Lt,Ge)&&(Ge.b=Lt.b,Ge.a=Lt.a),f(Ge,ke)||f(Ge,We))return ie(fe,ae),0;if(!f($e,fe.a)&&0<=w($e,fe.a,Ge)||!f(Ee,fe.a)&&w(Ee,fe.a,Ge)<=0){if(Ee===fe.a)v(_e.b),g(he.b,_e),_e=Ze(ae=W(ae)).a,te(fe,Ze(ae),oe),se(fe,ae,_e.b.e,_e,_e,!0);else{if($e!==fe.a)return 0<=w($e,fe.a,Ge)&&(at(ae).b=ae.b=!0,v(_e.b),_e.a.b=fe.a.b,_e.a.a=fe.a.a),void(w(Ee,fe.a,Ge)<=0&&(ae.b=oe.b=!0,v(he.b),he.a.b=fe.a.b,he.a.a=fe.a.a));for(v(he.b),g(_e.e,he.b.e),We=(ke=oe=ae).a.b.a;(ke=at(ke)).a.b.a===We;);ke=Ze(ae=ke).a.b.c,oe.a=he.b.e,se(fe,ae,(he=te(fe,oe,null)).c,_e.b.c,ke,!0)}return 1}v(_e.b),v(he.b),g(he.b.e,_e),_e.a.b=Ge.b,_e.a.a=Ge.a,_e.a.h=ue(fe.e,_e.a),_e=_e.a,he=[0,0,0,0],Ge=[ke.d,$e.d,We.d,Ee.d],_e.g[0]=_e.g[1]=_e.g[2]=0,Z(_e,ke,$e,he,0),Z(_e,We,Ee,he,2),ce(fe,_e,Ge,he,!0),at(ae).b=ae.b=oe.b=!0}}function ge(fe,ae){for(var oe=Ze(ae);;){for(;oe.b;)oe=Ze(ae=oe);if(!(ae.b||(ae=at(oe=ae))!==null&&ae.b))break;ae.b=!1;var _e=ae.a,he=oe.a;if(ke=_e.b.a!==he.b.a)e:{var ke,We=Ze(ke=ae),$e=ke.a,Ee=We.a,Ge=void 0;if(h($e.b.a,Ee.b.a)){if(w($e.b.a,Ee.b.a,$e.a)<0){ke=!1;break e}at(ke).b=ke.b=!0,Ge=v($e),g(Ee.b,Ge),Ge.d.c=ke.d}else{if(0<w(Ee.b.a,$e.b.a,Ee.a)){ke=!1;break e}ke.b=We.b=!0,Ge=v(Ee),g($e.e,Ee.b),Ge.b.d.c=ke.d}ke=!0}if(ke&&(oe.c?(G(oe),_(he),he=(oe=Ze(ae)).a):ae.c&&(G(ae),_(_e),_e=(ae=at(oe)).a)),_e.a!==he.a){if(_e.b.a===he.b.a||ae.c||oe.c||_e.b.a!==fe.a&&he.b.a!==fe.a)ie(fe,ae);else if(pe(fe,ae))break}_e.a===he.a&&_e.b.a===he.b.a&&(k(he,_e),G(ae),_(_e),ae=at(oe))}}function be(fe,ae){var oe=new yt,_e=m(fe.b);_e.a.b=4e150,_e.a.a=ae,_e.b.a.b=-4e150,_e.b.a.a=ae,fe.a=_e.b.a,oe.a=_e,oe.f=0,oe.d=!1,oe.c=!1,oe.h=!0,oe.b=!1,_e=re(_e=fe.f,_e.a,oe),oe.e=_e}function le(fe){this.a=new Te,this.b=fe,this.c=H}function re(fe,ae,oe){for(;(ae=ae.c).b!==null&&!fe.c(fe.b,ae.b,oe););return fe=new Te(oe,ae.a,ae),ae.a.c=fe,ae.a=fe}function Te(fe,ae,oe){this.b=fe||null,this.a=ae||this,this.c=oe||this}function Ce(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function Me(fe,ae){if(fe.d!==ae)for(;fe.d!==ae;)if(fe.d<ae)switch(fe.d){case 0:Se(fe,100151),fe.u(null);break;case 1:Se(fe,100152),fe.t()}else switch(fe.d){case 2:Se(fe,100154),fe.v();break;case 1:Se(fe,100153),fe.w()}}function Se(fe,ae){fe.p&&fe.p(ae,fe.c)}function Ue(fe,ae){this.b=fe||this,this.d=ae||this,this.a=null,this.c=!1}function Fe(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Be(){this.c=new st,this.a=new Ue,this.b=new Fe,this.d=new Fe,this.b.b=this.d,this.d.b=this.b}function st(fe,ae){this.e=fe||this,this.f=ae||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function ve(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new He}function ue(fe,ae){var oe,_e,he;return fe.e?(2*(_e=++(oe=fe.b).a)>oe.f&&(oe.f*=2,oe.c=me(oe.c,oe.f+1)),oe.b===0?he=_e:(he=oe.b,oe.b=oe.c[oe.b]),oe.e[he]=ae,oe.c[he]=_e,oe.d[_e]=he,oe.h&&it(oe,_e),he):(oe=fe.a++,fe.c[oe]=ae,-(oe+1))}function ze(fe){if(fe.a===0)return Ie(fe.b);var ae=fe.c[fe.d[fe.a-1]];if(fe.b.a!==0&&h(je(fe.b),ae))return Ie(fe.b);for(;--fe.a,0<fe.a&&fe.c[fe.d[fe.a-1]]===null;);return ae}function He(){this.d=me([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function me(fe,ae){for(var oe=Array(ae),_e=0;_e<fe.length;_e++)oe[_e]=fe[_e];for(;_e<ae;_e++)oe[_e]=0;return oe}function je(fe){return fe.e[fe.d[1]]}function Ie(fe){var ae=fe.d,oe=fe.e,_e=fe.c,he=ae[1],ke=oe[he];return 0<fe.a&&(ae[1]=ae[fe.a],_e[ae[1]]=1,oe[he]=null,_e[he]=fe.b,fe.b=he,0<--fe.a&&Ye(fe,1)),ke}function Ye(fe,ae){for(var oe=fe.d,_e=fe.e,he=fe.c,ke=ae,We=oe[ke];;){var $e=ke<<1,Ee=($e<fe.a&&h(_e[oe[$e+1]],_e[oe[$e]])&&($e+=1),oe[$e]);if($e>fe.a||h(_e[We],_e[Ee])){he[oe[ke]=We]=ke;break}he[oe[ke]=Ee]=ke,ke=$e}}function it(fe,ae){for(var oe=fe.d,_e=fe.e,he=fe.c,ke=ae,We=oe[ke];;){var $e=ke>>1,Ee=oe[$e];if($e==0||h(_e[Ee],_e[We])){he[oe[ke]=We]=ke;break}he[oe[ke]=Ee]=ke,ke=$e}}function yt(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function Ze(fe){return fe.e.c.b}function at(fe){return fe.e.a.b}(p=Ce.prototype).x=function(){Me(this,0)},p.B=function(fe,ae){switch(fe){case 100142:return;case 100140:switch(ae){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=ae)}break;case 100141:return void(this.m=!!ae);default:return void Se(this,100900)}Se(this,100901)},p.y=function(fe){switch(fe){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:Se(this,100900)}return!1},p.A=function(fe,ae,oe){this.j[0]=fe,this.j[1]=ae,this.j[2]=oe},p.z=function(fe,ae){var oe=ae||null;switch(fe){case 100100:case 100106:this.h=oe;break;case 100104:case 100110:this.l=oe;break;case 100101:case 100107:this.k=oe;break;case 100102:case 100108:this.i=oe;break;case 100103:case 100109:this.p=oe;break;case 100105:case 100111:this.o=oe;break;case 100112:this.r=oe;break;default:Se(this,100900)}},p.C=function(fe,ae){var oe=!1,_e=[0,0,0];Me(this,2);for(var he=0;he<3;++he){var ke=fe[he];ke<-1e150&&(ke=-1e150,oe=!0),1e150<ke&&(ke=1e150,oe=!0),_e[he]=ke}oe&&Se(this,100155),(oe=this.q)===null?g(oe=m(this.b),oe.b):(v(oe),oe=oe.e),oe.a.d=ae,oe.a.g[0]=_e[0],oe.a.g[1]=_e[1],oe.a.g[2]=_e[2],oe.f=1,oe.b.f=-1,this.q=oe},p.u=function(fe){Me(this,0),this.d=1,this.b=new Be,this.c=fe},p.t=function(){Me(this,1),this.d=2,this.q=null},p.v=function(){Me(this,2),this.d=1},p.w=function(){Me(this,1),this.d=0;var fe,ae,oe=!1,_e=[Ee=this.j[0],he=this.j[1],We=this.j[2]];if(Ee===0&&he===0&&We===0){for(var he=[-2e150,-2e150,-2e150],ke=[2e150,2e150,2e150],We=[],$e=[],Ee=(oe=this.b.c).e;Ee!==oe;Ee=Ee.e)for(var Ge=0;Ge<3;++Ge){var ht=Ee.g[Ge];ht<ke[Ge]&&(ke[Ge]=ht,$e[Ge]=Ee),ht>he[Ge]&&(he[Ge]=ht,We[Ge]=Ee)}if(he[1]-ke[1]>he[Ee=0]-ke[0]&&(Ee=1),ke[Ee=he[2]-ke[2]>he[Ee]-ke[Ee]?2:Ee]>=he[Ee])_e[0]=0,_e[1]=0,_e[2]=1;else{for(ke=$e[Ee],We=We[Ee],$e=[he=0,0,0],ke=[ke.g[0]-We.g[0],ke.g[1]-We.g[1],ke.g[2]-We.g[2]],Ge=[0,0,0],Ee=oe.e;Ee!==oe;Ee=Ee.e)Ge[0]=Ee.g[0]-We.g[0],Ge[1]=Ee.g[1]-We.g[1],Ge[2]=Ee.g[2]-We.g[2],$e[0]=ke[1]*Ge[2]-ke[2]*Ge[1],$e[1]=ke[2]*Ge[0]-ke[0]*Ge[2],$e[2]=ke[0]*Ge[1]-ke[1]*Ge[0],he<(ht=$e[0]*$e[0]+$e[1]*$e[1]+$e[2]*$e[2])&&(he=ht,_e[0]=$e[0],_e[1]=$e[1],_e[2]=$e[2]);he<=0&&(_e[0]=_e[1]=_e[2]=0,_e[V(ke)]=1)}oe=!0}for($e=V(_e),Ee=this.b.c,he=($e+1)%3,We=($e+2)%3,$e=0<_e[$e]?1:-1,_e=Ee.e;_e!==Ee;_e=_e.e)_e.b=_e.g[he],_e.a=$e*_e.g[We];if(oe){for(_e=0,Ee=(oe=this.b.a).b;Ee!==oe;Ee=Ee.b)if(!((he=Ee.a).f<=0))for(;_e+=(he.a.b-he.b.a.b)*(he.a.a+he.b.a.a),(he=he.e)!==Ee.a;);if(_e<0)for(oe=(_e=this.b.c).e;oe!==_e;oe=oe.e)oe.a=-oe.a}for(this.n=!1,Ee=(_e=this.b.b).h;Ee!==_e;Ee=oe)oe=Ee.h,he=Ee.e,f(Ee.a,Ee.b.a)&&Ee.e.e!==Ee&&(q(this,he,Ee),_(Ee),he=(Ee=he).e),he.e===Ee&&(he!==Ee&&(he!==oe&&he!==oe.b||(oe=oe.h),_(he)),Ee!==oe&&Ee!==oe.b||(oe=oe.h),_(Ee));for(this.e=_e=new ve,Ee=(oe=this.b.c).e;Ee!==oe;Ee=Ee.e)Ee.h=ue(_e,Ee);var wt=_e;wt.d=[];for(var Lt=0;Lt<wt.a;Lt++)wt.d[Lt]=Lt;wt.d.sort(function(Nt){return function(Gt,Kt){return h(Nt[Gt],Nt[Kt])?1:-1}}(wt.c)),wt.e=!0;for(var Ct=wt.b,Ft=Ct.a;1<=Ft;--Ft)Ye(Ct,Ft);for(Ct.h=!0,this.f=new le(this),be(this,-4e150),be(this,4e150);(_e=ze(this.e))!==null;){for(;;){e:if((Ee=this.e).a===0)oe=je(Ee.b);else if(oe=Ee.c[Ee.d[Ee.a-1]],Ee.b.a!==0&&h(Ee=je(Ee.b),oe)){oe=Ee;break e}if(oe===null||!f(oe,_e))break;oe=ze(this.e),q(this,_e.c,oe.c)}(function Nt(Gt,Kt){for(var vr,lr=(Gt.a=Kt).c;lr.i===null;)if((lr=lr.c)===Kt.c){lr=Gt;var Ir=Kt;(ar=new yt).a=Ir.c.b;for(var $r=(er=lr.f).a;($r=$r.a).b!==null&&!er.c(er.b,ar,$r.b););var er,Vr,kr=Ze(er=$r.b),ar=er.a;return $r=kr.a,void(w(ar.b.a,Ir,ar.a)===0?f((ar=er.a).a,Ir)||f(ar.b.a,Ir)||(v(ar.b),er.c&&(_(ar.c),er.c=!1),g(Ir.c,ar),Nt(lr,Ir)):(Vr=h($r.b.a,ar.b.a)?er:kr,kr=void 0,er.d||Vr.c?(kr=Vr===er?x(Ir.c.b,ar.e):x($r.b.c.b,Ir.c).b,Vr.c?F(Vr,kr):((er=Q(ar=lr,er,kr)).f=at(er).f+er.a.f,er.d=J(ar,er.f)),Nt(lr,Ir)):se(lr,er,Ir.c,Ir.c,null,!0)))}er=(ar=Ze(lr=W(lr.i))).a,(ar=te(Gt,ar,null)).c===er?(ar=(er=ar).c,$r=Ze(lr),kr=lr.a,Vr=$r.a,vr=!1,kr.b.a!==Vr.b.a&&pe(Gt,lr),f(kr.a,Gt.a)&&(g(ar.b.e,kr),ar=Ze(lr=W(lr)).a,te(Gt,Ze(lr),$r),vr=!0),f(Vr.a,Gt.a)&&(g(er,Vr.b.e),er=te(Gt,$r,null),vr=!0),vr?se(Gt,lr,er.c,ar,ar,!0):(Ir=h(Vr.a,kr.a)?Vr.b.e:kr,se(Gt,lr,Ir=x(er.c.b,Ir),Ir.c,Ir.c,!1),Ir.b.i.c=!0,ge(Gt,lr))):se(Gt,lr,ar.c,er,er,!0)})(this,_e)}for(this.a=this.f.a.a.b.a.a,_e=0;(oe=this.f.a.a.b)!==null;)oe.h||++_e,G(oe);for(this.f=null,(_e=this.e).b=null,_e.d=null,this.e=_e.c=null,Ee=(_e=this.b).a.b;Ee!==_e.a;Ee=oe)oe=Ee.b,(Ee=Ee.a).e.e===Ee&&(k(Ee.c,Ee),_(Ee));if(!this.n){if(_e=this.b,this.m)for(Ee=_e.b.h;Ee!==_e.b;Ee=oe)oe=Ee.h,Ee.b.d.c!==Ee.d.c?Ee.f=Ee.d.c?1:-1:_(Ee);else for(Ee=_e.a.b;Ee!==_e.a;Ee=oe)if(oe=Ee.b,Ee.c){for(Ee=Ee.a;h(Ee.b.a,Ee.a);Ee=Ee.c.b);for(;h(Ee.a,Ee.b.a);Ee=Ee.e);for(he=Ee.c.b,We=void 0;Ee.e!==he;)if(h(Ee.b.a,he.a)){for(;he.e!==Ee&&(h((ae=he.e).b.a,ae.a)||w(he.a,he.b.a,he.e.b.a)<=0);)he=(We=x(he.e,he)).b;he=he.c.b}else{for(;he.e!==Ee&&(h((fe=Ee.c.b).a,fe.b.a)||0<=w(Ee.b.a,Ee.a,Ee.c.b.a));)Ee=(We=x(Ee,Ee.c.b)).b;Ee=Ee.e}for(;he.e.e!==Ee;)he=(We=x(he.e,he)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(oe=(_e=this.b).a.b;oe!==_e.a;oe=oe.b)if(oe.c){for(this.h&&this.h(2,this.c),Ee=oe.a;this.k&&this.k(Ee.a.d,this.c),(Ee=Ee.e)!==oe.a;);this.i&&this.i(this.c)}}else{for(_e=this.b,oe=!!this.l,Ee=!1,he=-1,We=_e.a.d;We!==_e.a;We=We.d)if(We.c)for(Ee||(this.h&&this.h(4,this.c),Ee=!0),$e=We.a;oe&&he!==(ke=$e.b.d.c?0:1)&&(he=ke,this.l&&this.l(!!he,this.c)),this.k&&this.k($e.a.d,this.c),($e=$e.e)!==We.a;);Ee&&this.i&&this.i(this.c)}if(this.r){for(Ee=(_e=this.b).a.b;Ee!==_e.a;Ee=oe)if(oe=Ee.b,!Ee.c){for(We=(he=Ee.a).e,$e=void 0;We=($e=We).e,($e.d=null)===$e.b.d&&($e.c===$e?z($e.a,null):($e.a.c=$e.c,j($e,$e.b.e)),(ke=$e.b).c===ke?z(ke.a,null):(ke.a.c=ke.c,j(ke,ke.b.e)),L($e)),$e!==he;);he=Ee.d,((Ee=Ee.b).d=he).b=Ee}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:Ce,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},Ce.prototype.gluDeleteTess=Ce.prototype.x,Ce.prototype.gluTessProperty=Ce.prototype.B,Ce.prototype.gluGetTessProperty=Ce.prototype.y,Ce.prototype.gluTessNormal=Ce.prototype.A,Ce.prototype.gluTessCallback=Ce.prototype.z,Ce.prototype.gluTessVertex=Ce.prototype.C,Ce.prototype.gluTessBeginPolygon=Ce.prototype.u,Ce.prototype.gluTessBeginContour=Ce.prototype.t,Ce.prototype.gluTessEndContour=Ce.prototype.v,Ce.prototype.gluTessEndPolygon=Ce.prototype.w,R!==void 0&&(R.exports=this.libtess)},{}],246:[function(t,R,M){function p(f,h,b,w){for(var c=f[h++],l=1<<c,o=1+l,u=1+o,m=c+1,g=(1<<m)-1,_=0,v=0,x=0,E=f[h++],j=new Int32Array(4096),O=null;;){for(;_<16&&E!==0;)v|=f[h++]<<_,_+=8,E===1?E=f[h++]:--E;if(_<m)break;var P=v&g;if(v>>=m,_-=m,P==l)u=1+o,g=(1<<(m=c+1))-1,O=null;else{if(P==o)break;for(var L=P<u?P:O,z=0,N=L;l<N;)N=j[N]>>8,++z;var V=N;if(w<x+z+(L!==P?1:0))return void console.log("Warning, gif stream longer than expected.");b[x++]=V;var k=x+=z;for(L!==P&&(b[x++]=V),N=L;z--;)N=j[N],b[--k]=255&N,N>>=8;O!==null&&u<4096&&(j[u++]=O<<8|V,g+1<=u&&m<12&&(++m,g=g<<1|1)),O=P}}x!==w&&console.log("Warning, gif stream shorter than expected.")}try{M.GifWriter=function(f,h,b,w){var c=0,l=(w=w===void 0?{}:w).loop===void 0?null:w.loop,o=w.palette===void 0?null:w.palette;if(h<=0||b<=0||65535<h||65535<b)throw new Error("Width/Height invalid.");function u(O){if((O=O.length)<2||256<O||O&O-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return O}f[c++]=71,f[c++]=73,f[c++]=70,f[c++]=56,f[c++]=57,f[c++]=97;var m=0,g=0;if(o!==null){for(var _=u(o);_>>=1;)++m;if(_=1<<m,--m,w.background!==void 0){if(_<=(g=w.background))throw new Error("Background index out of range.");if(g===0)throw new Error("Background index explicitly passed as 0.")}}if(f[c++]=255&h,f[c++]=h>>8&255,f[c++]=255&b,f[c++]=b>>8&255,f[c++]=(o!==null?128:0)|m,f[c++]=g,f[c++]=0,o!==null)for(var v=0,x=o.length;v<x;++v){var E=o[v];f[c++]=E>>16&255,f[c++]=E>>8&255,f[c++]=255&E}if(l!==null){if(l<0||65535<l)throw new Error("Loop count invalid.");f[c++]=33,f[c++]=255,f[c++]=11,f[c++]=78,f[c++]=69,f[c++]=84,f[c++]=83,f[c++]=67,f[c++]=65,f[c++]=80,f[c++]=69,f[c++]=50,f[c++]=46,f[c++]=48,f[c++]=3,f[c++]=1,f[c++]=255&l,f[c++]=l>>8&255,f[c++]=0}var j=!1;this.addFrame=function(O,P,L,z,N,V){if(j===!0&&(--c,j=!1),V=V===void 0?{}:V,O<0||P<0||65535<O||65535<P)throw new Error("x/y invalid.");if(L<=0||z<=0||65535<L||65535<z)throw new Error("Width/Height invalid.");if(N.length<L*z)throw new Error("Not enough pixels for the frame size.");var k=!0,H=V.palette;if(H==null&&(k=!1,H=o),H==null)throw new Error("Must supply either a local or global palette.");for(var G=u(H),F=0;G>>=1;)++F;G=1<<F;var W=V.delay===void 0?0:V.delay,Q=V.disposal===void 0?0:V.disposal;if(Q<0||3<Q)throw new Error("Disposal out of range.");var J=!1,ee=0;if(V.transparent!==void 0&&V.transparent!==null&&(J=!0,(ee=V.transparent)<0||G<=ee))throw new Error("Transparent color index.");if(Q===0&&!J&&W===0||(f[c++]=33,f[c++]=249,f[c++]=4,f[c++]=Q<<2|(J===!0?1:0),f[c++]=255&W,f[c++]=W>>8&255,f[c++]=ee,f[c++]=0),f[c++]=44,f[c++]=255&O,f[c++]=O>>8&255,f[c++]=255&P,f[c++]=P>>8&255,f[c++]=255&L,f[c++]=L>>8&255,f[c++]=255&z,f[c++]=z>>8&255,f[c++]=k===!0?128|F-1:0,k===!0)for(var te=0,se=H.length;te<se;++te){var ce=H[te];f[c++]=ce>>16&255,f[c++]=ce>>8&255,f[c++]=255&ce}return c=function(q,Z,ie,pe){q[Z++]=ie;var ge=Z++,be=1<<ie,le=be-1,re=1+be,Te=1+re,Ce=ie+1,Me=0,Se=0;function Ue(je){for(;je<=Me;)q[Z++]=255&Se,Se>>=8,Me-=8,Z===ge+256&&(q[ge]=255,ge=Z++)}function Fe(je){Se|=je<<Me,Me+=Ce,Ue(8)}var Be=pe[0]&le,st={};Fe(be);for(var ve=1,ue=pe.length;ve<ue;++ve){var ze=pe[ve]&le,He=Be<<8|ze,me=st[He];if(me===void 0){for(Se|=Be<<Me,Me+=Ce;8<=Me;)q[Z++]=255&Se,Se>>=8,Me-=8,Z===ge+256&&(q[ge]=255,ge=Z++);Te===4096?(Fe(be),Te=1+re,Ce=ie+1,st={}):(1<<Ce<=Te&&++Ce,st[He]=Te++),Be=ze}else Be=me}return Fe(Be),Fe(re),Ue(1),ge+1===Z?q[ge]=0:(q[ge]=Z-ge-1,q[Z++]=0),Z}(f,c,F<2?2:F,N)},this.end=function(){return j===!1&&(f[c++]=59,j=!0),c},this.getOutputBuffer=function(){return f},this.setOutputBuffer=function(O){f=O},this.getOutputBufferPosition=function(){return c},this.setOutputBufferPosition=function(O){c=O}},M.GifReader=function(f){var h=0;if(f[h++]!==71||f[h++]!==73||f[h++]!==70||f[h++]!==56||(f[h++]+1&253)!=56||f[h++]!==97)throw new Error("Invalid GIF 87a/89a header.");var b=f[h++]|f[h++]<<8,w=f[h++]|f[h++]<<8,c=f[h++],l=1<<1+(7&c),o=(f[h++],f[h++],null),u=null,m=(c>>7&&(o=h,h+=3*(u=l)),!0),g=[],_=0,v=null,x=0,E=null;for(this.width=b,this.height=w;m&&h<f.length;)switch(f[h++]){case 33:switch(f[h++]){case 255:if(f[h]!==11||f[h+1]==78&&f[h+2]==69&&f[h+3]==84&&f[h+4]==83&&f[h+5]==67&&f[h+6]==65&&f[h+7]==80&&f[h+8]==69&&f[h+9]==50&&f[h+10]==46&&f[h+11]==48&&f[h+12]==3&&f[h+13]==1&&f[h+16]==0)h+=14,E=f[h++]|f[h++]<<8,h++;else for(h+=12;;){if(!(0<=(O=f[h++])))throw Error("Invalid block size");if(O===0)break;h+=O}break;case 249:if(f[h++]!==4||f[h+4]!==0)throw new Error("Invalid graphics extension block.");var j=f[h++];_=f[h++]|f[h++]<<8,v=f[h++],(1&j)==0&&(v=null),x=j>>2&7,h++;break;case 254:for(;;){if(!(0<=(O=f[h++])))throw Error("Invalid block size");if(O===0)break;h+=O}break;default:throw new Error("Unknown graphic control label: 0x"+f[h-1].toString(16))}break;case 44:var O,P=f[h++]|f[h++]<<8,L=f[h++]|f[h++]<<8,z=f[h++]|f[h++]<<8,N=f[h++]|f[h++]<<8,V=(F=f[h++])>>6&1,k=o,H=u,G=!1,F=(F>>7&&(G=!0,k=h,h+=3*(H=1<<1+(7&F))),h);for(h++;;){if(!(0<=(O=f[h++])))throw Error("Invalid block size");if(O===0)break;h+=O}g.push({x:P,y:L,width:z,height:N,has_local_palette:G,palette_offset:k,palette_size:H,data_offset:F,data_length:h-F,transparent_index:v,interlaced:!!V,delay:_,disposal:x});break;case 59:m=!1;break;default:throw new Error("Unknown gif block: 0x"+f[h-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return E},this.frameInfo=function(W){if(W<0||W>=g.length)throw new Error("Frame index out of range.");return g[W]},this.decodeAndBlitFrameBGRA=function(W,Q){for(var J=(W=this.frameInfo(W)).width*W.height,ee=new Uint8Array(J),te=(p(f,W.data_offset,ee,J),W.palette_offset),se=W.transparent_index,ce=(se===null&&(se=256),W.width),q=b-ce,Z=ce,ie=4*(W.y*b+W.x),pe=4*((W.y+W.height)*b+W.x),ge=ie,be=4*q,le=(W.interlaced===!0&&(be+=4*b*7),8),re=0,Te=ee.length;re<Te;++re){var Ce,Me,Se=ee[re];Z===0&&(Z=ce,pe<=(ge+=be)&&(be=4*q+4*b*(le-1),ge=ie+(ce+q)*(le<<1),le>>=1)),Se===se?ge+=4:(Ce=f[te+3*Se],Me=f[te+3*Se+1],Se=f[te+3*Se+2],Q[ge++]=Se,Q[ge++]=Me,Q[ge++]=Ce,Q[ge++]=255),--Z}},this.decodeAndBlitFrameRGBA=function(W,Q){for(var J=(W=this.frameInfo(W)).width*W.height,ee=new Uint8Array(J),te=(p(f,W.data_offset,ee,J),W.palette_offset),se=W.transparent_index,ce=(se===null&&(se=256),W.width),q=b-ce,Z=ce,ie=4*(W.y*b+W.x),pe=4*((W.y+W.height)*b+W.x),ge=ie,be=4*q,le=(W.interlaced===!0&&(be+=4*b*7),8),re=0,Te=ee.length;re<Te;++re){var Ce,Me,Se=ee[re];Z===0&&(Z=ce,pe<=(ge+=be)&&(be=4*q+4*b*(le-1),ge=ie+(ce+q)*(le<<1),le>>=1)),Se===se?ge+=4:(Ce=f[te+3*Se],Me=f[te+3*Se+1],Se=f[te+3*Se+2],Q[ge++]=Ce,Q[ge++]=Me,Q[ge++]=Se,Q[ge++]=255),--Z}}}}catch{}},{}],247:[function(t,R,M){(function(p){(function(f){function h(S){if(this==null)throw TypeError();var C,I=String(this),X=I.length;if(!((S=(S=S?Number(S):0)!=S?0:S)<0||X<=S))return 55296<=(C=I.charCodeAt(S))&&C<=56319&&S+1<X&&56320<=(X=I.charCodeAt(S+1))&&X<=57343?1024*(C-55296)+X-56320+65536:C}String.prototype.codePointAt||((b=function(){try{var S={},C=Object.defineProperty,I=C(S,S,S)&&C}catch{}return I}())?b(String.prototype,"codePointAt",{value:h,configurable:!0,writable:!0}):String.prototype.codePointAt=h);var b;function w(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function c(S,C){this.source=S,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=C,this.destLen=0,this.ltree=new w,this.dtree=new w}var l=new w,o=new w,u=new Uint8Array(30),m=new Uint16Array(30),g=new Uint8Array(30),_=new Uint16Array(30),v=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),x=new w,E=new Uint8Array(320);function j(S,C,I,X){for(var K,$=0;$<I;++$)S[$]=0;for($=0;$<30-I;++$)S[$+I]=$/I|0;for(K=X,$=0;$<30;++$)C[$]=K,K+=1<<S[$]}var O=new Uint16Array(16);function P(S,C,I,X){for(var K,$=0;$<16;++$)S.table[$]=0;for($=0;$<X;++$)S.table[C[I+$]]++;for($=K=S.table[0]=0;$<16;++$)O[$]=K,K+=S.table[$];for($=0;$<X;++$)C[I+$]&&(S.trans[O[C[I+$]]++]=$)}function L(S,C,I){if(!C)return I;for(;S.bitcount<24;)S.tag|=S.source[S.sourceIndex++]<<S.bitcount,S.bitcount+=8;var X=S.tag&65535>>>16-C;return S.tag>>>=C,S.bitcount-=C,X+I}function z(S,C){for(;S.bitcount<24;)S.tag|=S.source[S.sourceIndex++]<<S.bitcount,S.bitcount+=8;for(var I=0,X=0,K=0,$=S.tag;X=2*X+(1&$),$>>>=1,I+=C.table[++K],0<=(X-=C.table[K]););return S.tag=$,S.bitcount-=K,C.trans[I+X]}function N(S,C,I){for(;;){if(($=z(S,C))===256)return 0;if($<256)S.dest[S.destLen++]=$;else for(var X,K=L(S,u[$-=257],m[$]),$=z(S,I),ne=X=S.destLen-L(S,g[$],_[$]);ne<X+K;++ne)S.dest[S.destLen++]=S.dest[ne]}}for(var V=l,k=o,H=0;H<7;++H)V.table[H]=0;for(V.table[7]=24,V.table[8]=152,V.table[9]=112,H=0;H<24;++H)V.trans[H]=256+H;for(H=0;H<144;++H)V.trans[24+H]=H;for(H=0;H<8;++H)V.trans[168+H]=280+H;for(H=0;H<112;++H)V.trans[176+H]=144+H;for(H=0;H<5;++H)k.table[H]=0;for(k.table[5]=32,H=0;H<32;++H)k.trans[H]=H;j(u,m,4,3),j(g,_,2,1),u[28]=0,m[28]=258;function G(S,C,I,X,K){return Math.pow(1-K,3)*S+3*Math.pow(1-K,2)*K*C+3*(1-K)*Math.pow(K,2)*I+Math.pow(K,3)*X}function F(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function W(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function Q(S){throw new Error(S)}function J(S,C){S||Q(C)}F.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},F.prototype.addPoint=function(S,C){typeof S=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=S,this.x2=S),S<this.x1&&(this.x1=S),S>this.x2&&(this.x2=S)),typeof C=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=C,this.y2=C),C<this.y1&&(this.y1=C),C>this.y2&&(this.y2=C))},F.prototype.addX=function(S){this.addPoint(S,null)},F.prototype.addY=function(S){this.addPoint(null,S)},F.prototype.addBezier=function(S,C,I,X,K,$,ne,we){var Ae=[S,C],De=[I,X],Ve=[K,$],Qe=[ne,we];this.addPoint(S,C),this.addPoint(ne,we);for(var Je=0;Je<=1;Je++){var Pe,St=6*Ae[Je]-12*De[Je]+6*Ve[Je],ut=-3*Ae[Je]+9*De[Je]-9*Ve[Je]+3*Qe[Je],lt=3*De[Je]-3*Ae[Je];ut==0?St==0||0<(Pe=-lt/St)&&Pe<1&&(Je===0&&this.addX(G(Ae[Je],De[Je],Ve[Je],Qe[Je],Pe)),Je===1&&this.addY(G(Ae[Je],De[Je],Ve[Je],Qe[Je],Pe))):(Pe=Math.pow(St,2)-4*lt*ut)<0||(0<(lt=(-St+Math.sqrt(Pe))/(2*ut))&&lt<1&&(Je===0&&this.addX(G(Ae[Je],De[Je],Ve[Je],Qe[Je],lt)),Je===1&&this.addY(G(Ae[Je],De[Je],Ve[Je],Qe[Je],lt))),0<(lt=(-St-Math.sqrt(Pe))/(2*ut))&&lt<1&&(Je===0&&this.addX(G(Ae[Je],De[Je],Ve[Je],Qe[Je],lt)),Je===1&&this.addY(G(Ae[Je],De[Je],Ve[Je],Qe[Je],lt))))}},F.prototype.addQuad=function(S,C,I,X,K,$){I=S+2/3*(I-S),X=C+2/3*(X-C),this.addBezier(S,C,I,X,I+1/3*(K-S),X+1/3*($-C),K,$)},W.prototype.moveTo=function(S,C){this.commands.push({type:"M",x:S,y:C})},W.prototype.lineTo=function(S,C){this.commands.push({type:"L",x:S,y:C})},W.prototype.curveTo=W.prototype.bezierCurveTo=function(S,C,I,X,K,$){this.commands.push({type:"C",x1:S,y1:C,x2:I,y2:X,x:K,y:$})},W.prototype.quadTo=W.prototype.quadraticCurveTo=function(S,C,I,X){this.commands.push({type:"Q",x1:S,y1:C,x:I,y:X})},W.prototype.close=W.prototype.closePath=function(){this.commands.push({type:"Z"})},W.prototype.extend=function(S){var C;if(S.commands)S=S.commands;else if(S instanceof F)return C=S,this.moveTo(C.x1,C.y1),this.lineTo(C.x2,C.y1),this.lineTo(C.x2,C.y2),this.lineTo(C.x1,C.y2),void this.close();Array.prototype.push.apply(this.commands,S)},W.prototype.getBoundingBox=function(){for(var S=new F,C=0,I=0,X=0,K=0,$=0;$<this.commands.length;$++){var ne=this.commands[$];switch(ne.type){case"M":S.addPoint(ne.x,ne.y),C=X=ne.x,I=K=ne.y;break;case"L":S.addPoint(ne.x,ne.y),X=ne.x,K=ne.y;break;case"Q":S.addQuad(X,K,ne.x1,ne.y1,ne.x,ne.y),X=ne.x,K=ne.y;break;case"C":S.addBezier(X,K,ne.x1,ne.y1,ne.x2,ne.y2,ne.x,ne.y),X=ne.x,K=ne.y;break;case"Z":X=C,K=I;break;default:throw new Error("Unexpected path command "+ne.type)}}return S.isEmpty()&&S.addPoint(0,0),S},W.prototype.draw=function(S){S.beginPath();for(var C=0;C<this.commands.length;C+=1){var I=this.commands[C];I.type==="M"?S.moveTo(I.x,I.y):I.type==="L"?S.lineTo(I.x,I.y):I.type==="C"?S.bezierCurveTo(I.x1,I.y1,I.x2,I.y2,I.x,I.y):I.type==="Q"?S.quadraticCurveTo(I.x1,I.y1,I.x,I.y):I.type==="Z"&&S.closePath()}this.fill&&(S.fillStyle=this.fill,S.fill()),this.stroke&&(S.strokeStyle=this.stroke,S.lineWidth=this.strokeWidth,S.stroke())},W.prototype.toPathData=function(S){function C(){for(var $=arguments,ne="",we=0;we<arguments.length;we+=1){var Ae=$[we];0<=Ae&&0<we&&(ne+=" "),ne+=(Ae=Ae,Math.round(Ae)===Ae?""+Math.round(Ae):Ae.toFixed(S))}return ne}S=S!==void 0?S:2;for(var I="",X=0;X<this.commands.length;X+=1){var K=this.commands[X];K.type==="M"?I+="M"+C(K.x,K.y):K.type==="L"?I+="L"+C(K.x,K.y):K.type==="C"?I+="C"+C(K.x1,K.y1,K.x2,K.y2,K.x,K.y):K.type==="Q"?I+="Q"+C(K.x1,K.y1,K.x,K.y):K.type==="Z"&&(I+="Z")}return I},W.prototype.toSVG=function(S){var C=(C='<path d="')+this.toPathData(S)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?C+=' fill="none"':C+=' fill="'+this.fill+'"'),this.stroke&&(C+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),C+"/>"},W.prototype.toDOMElement=function(S){S=this.toPathData(S);var C=document.createElementNS("http://www.w3.org/2000/svg","path");return C.setAttribute("d",S),C};var ee={fail:Q,argument:J,assert:J},te={},se={},ce={};function q(S){return function(){return S}}se.BYTE=function(S){return ee.argument(0<=S&&S<=255,"Byte value should be between 0 and 255."),[S]},ce.BYTE=q(1),se.CHAR=function(S){return[S.charCodeAt(0)]},ce.CHAR=q(1),se.CHARARRAY=function(S){for(var C=[],I=0;I<S.length;I+=1)C[I]=S.charCodeAt(I);return C},ce.CHARARRAY=function(S){return S.length},se.USHORT=function(S){return[S>>8&255,255&S]},ce.USHORT=q(2),se.SHORT=function(S){return[(S=32768<=S?-(65536-S):S)>>8&255,255&S]},ce.SHORT=q(2),se.UINT24=function(S){return[S>>16&255,S>>8&255,255&S]},ce.UINT24=q(3),se.ULONG=function(S){return[S>>24&255,S>>16&255,S>>8&255,255&S]},ce.ULONG=q(4),se.LONG=function(S){return[(S=2147483648<=S?-(4294967296-S):S)>>24&255,S>>16&255,S>>8&255,255&S]},ce.LONG=q(4),se.FIXED=se.ULONG,ce.FIXED=ce.ULONG,se.FWORD=se.SHORT,ce.FWORD=ce.SHORT,se.UFWORD=se.USHORT,ce.UFWORD=ce.USHORT,se.LONGDATETIME=function(S){return[0,0,0,0,S>>24&255,S>>16&255,S>>8&255,255&S]},ce.LONGDATETIME=q(8),se.TAG=function(S){return ee.argument(S.length===4,"Tag should be exactly 4 ASCII characters."),[S.charCodeAt(0),S.charCodeAt(1),S.charCodeAt(2),S.charCodeAt(3)]},ce.TAG=q(4),se.Card8=se.BYTE,ce.Card8=ce.BYTE,se.Card16=se.USHORT,ce.Card16=ce.USHORT,se.OffSize=se.BYTE,ce.OffSize=ce.BYTE,se.SID=se.USHORT,ce.SID=ce.USHORT,se.NUMBER=function(S){return-107<=S&&S<=107?[S+139]:108<=S&&S<=1131?[247+((S-=108)>>8),255&S]:-1131<=S&&S<=-108?[251+((S=-S-108)>>8),255&S]:-32768<=S&&S<=32767?se.NUMBER16(S):se.NUMBER32(S)},ce.NUMBER=function(S){return se.NUMBER(S).length},se.NUMBER16=function(S){return[28,S>>8&255,255&S]},ce.NUMBER16=q(3),se.NUMBER32=function(S){return[29,S>>24&255,S>>16&255,S>>8&255,255&S]},ce.NUMBER32=q(5),se.REAL=function(S){for(var C=S.toString(),I=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(C),X=(I&&(I=parseFloat("1e"+((I[2]?+I[2]:0)+I[1].length)),C=(Math.round(S*I)/I).toString()),""),K=0,$=C.length;K<$;K+=1){var ne=C[K];X+=ne==="e"?C[++K]==="-"?"c":"b":ne==="."?"a":ne==="-"?"e":ne}for(var we=[30],Ae=0,De=(X+=1&X.length?"f":"ff").length;Ae<De;Ae+=2)we.push(parseInt(X.substr(Ae,2),16));return we},ce.REAL=function(S){return se.REAL(S).length},se.NAME=se.CHARARRAY,ce.NAME=ce.CHARARRAY,se.STRING=se.CHARARRAY,ce.STRING=ce.CHARARRAY,te.UTF8=function(S,C,I){for(var X=[],K=I,$=0;$<K;$++,C+=1)X[$]=S.getUint8(C);return String.fromCharCode.apply(null,X)},te.UTF16=function(S,C,I){for(var X=[],K=I/2,$=0;$<K;$++,C+=2)X[$]=S.getUint16(C);return String.fromCharCode.apply(null,X)},se.UTF16=function(S){for(var C=[],I=0;I<S.length;I+=1){var X=S.charCodeAt(I);C[C.length]=X>>8&255,C[C.length]=255&X}return C},ce.UTF16=function(S){return 2*S.length};var Z,ie={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"},pe=(te.MACSTRING=function(S,C,I,X){var K=ie[X];if(K!==void 0){for(var $="",ne=0;ne<I;ne++){var we=S.getUint8(C+ne);$+=we<=127?String.fromCharCode(we):K[127&we]}return $}},typeof WeakMap=="function"&&new WeakMap);function ge(S){return-128<=S&&S<=127}se.MACSTRING=function(S,C){var I=function(ne){if(!Z)for(var we in Z={},ie)Z[we]=new String(we);var Ae=Z[ne];if(Ae!==void 0){if(pe){var De=pe.get(Ae);if(De!==void 0)return De}var Ve=ie[ne];if(Ve!==void 0){for(var Qe={},Je=0;Je<Ve.length;Je++)Qe[Ve.charCodeAt(Je)]=Je+128;return pe&&pe.set(Ae,Qe),Qe}}}(C);if(I!==void 0){for(var X=[],K=0;K<S.length;K++){var $=S.charCodeAt(K);if(128<=$&&($=I[$])===void 0)return;X[K]=$}return X}},ce.MACSTRING=function(S,C){return(S=se.MACSTRING(S,C))!==void 0?S.length:0},se.VARDELTAS=function(S){for(var C=0,I=[];C<S.length;){var X=S[C];C=(X===0?function(K,$,ne){for(var we=0,Ae=K.length;$<Ae&&we<64&&K[$]===0;)++$,++we;return ne.push(128|we-1),$}:-128<=X&&X<=127?function(K,$,ne){for(var we=0,Ae=K.length,De=$;De<Ae&&we<64;){var Ve=K[De];if(!ge(Ve)||Ve===0&&De+1<Ae&&K[De+1]===0)break;++De,++we}ne.push(we-1);for(var Qe=$;Qe<De;++Qe)ne.push(K[Qe]+256&255);return De}:function(K,$,ne){for(var we=0,Ae=K.length,De=$;De<Ae&&we<64;){var Ve=K[De];if(Ve===0||ge(Ve)&&De+1<Ae&&ge(K[De+1]))break;++De,++we}ne.push(64|we-1);for(var Qe=$;Qe<De;++Qe){var Je=K[Qe];ne.push(Je+65536>>8&255,Je+256&255)}return De})(S,C,I)}return I},se.INDEX=function(S){for(var C=1,I=[C],X=[],K=0;K<S.length;K+=1){var $=se.OBJECT(S[K]);Array.prototype.push.apply(X,$),C+=$.length,I.push(C)}if(X.length===0)return[0,0];for(var ne=[],we=1+Math.floor(Math.log(C)/Math.log(2))/8|0,Ae=[void 0,se.BYTE,se.USHORT,se.UINT24,se.ULONG][we],De=0;De<I.length;De+=1){var Ve=Ae(I[De]);Array.prototype.push.apply(ne,Ve)}return Array.prototype.concat(se.Card16(S.length),se.OffSize(we),ne,X)},ce.INDEX=function(S){return se.INDEX(S).length},se.DICT=function(S){for(var C=[],I=Object.keys(S),X=I.length,K=0;K<X;K+=1){var $=parseInt(I[K],0),ne=S[$];C=(C=C.concat(se.OPERAND(ne.value,ne.type))).concat(se.OPERATOR($))}return C},ce.DICT=function(S){return se.DICT(S).length},se.OPERATOR=function(S){return S<1200?[S]:[12,S-1200]},se.OPERAND=function(S,C){var I=[];if(Array.isArray(C))for(var X=0;X<C.length;X+=1)ee.argument(S.length===C.length,"Not enough arguments given for type"+C),I=I.concat(se.OPERAND(S[X],C[X]));else if(C==="SID")I=I.concat(se.NUMBER(S));else if(C==="offset")I=I.concat(se.NUMBER32(S));else if(C==="number")I=I.concat(se.NUMBER(S));else{if(C!=="real")throw new Error("Unknown operand type "+C);I=I.concat(se.REAL(S))}return I},se.OP=se.BYTE,ce.OP=ce.BYTE;var be=typeof WeakMap=="function"&&new WeakMap;function le(S,C,I){for(var X=0;X<C.length;X+=1){var K=C[X];this[K.name]=K.value}if(this.tableName=S,this.fields=C,I)for(var $=Object.keys(I),ne=0;ne<$.length;ne+=1){var we=$[ne],Ae=I[we];this[we]!==void 0&&(this[we]=Ae)}}function re(S,C,I){I===void 0&&(I=C.length);var X=new Array(C.length+1);X[0]={name:S+"Count",type:"USHORT",value:I};for(var K=0;K<C.length;K++)X[K+1]={name:S+K,type:"USHORT",value:C[K]};return X}function Te(S,C,I){var X=C.length,K=new Array(X+1);K[0]={name:S+"Count",type:"USHORT",value:X};for(var $=0;$<X;$++)K[$+1]={name:S+$,type:"TABLE",value:I(C[$],$)};return K}function Ce(S,C,I){var X=C.length,K=[];K[0]={name:S+"Count",type:"USHORT",value:X};for(var $=0;$<X;$++)K=K.concat(I(C[$],$));return K}function Me(S){S.format===1?le.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(re("glyph",S.glyphs))):ee.assert(!1,"Can't create coverage table format 2 yet.")}function Se(S){le.call(this,"scriptListTable",Ce("scriptRecord",S,function(C,I){var X=C.script,K=X.defaultLangSys;return ee.assert(!!K,"Unable to write GSUB: script "+C.tag+" has no default language system."),[{name:"scriptTag"+I,type:"TAG",value:C.tag},{name:"script"+I,type:"TABLE",value:new le("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new le("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:K.reqFeatureIndex}].concat(re("featureIndex",K.featureIndexes)))}].concat(Ce("langSys",X.langSysRecords,function($,ne){var we=$.langSys;return[{name:"langSysTag"+ne,type:"TAG",value:$.tag},{name:"langSys"+ne,type:"TABLE",value:new le("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:we.reqFeatureIndex}].concat(re("featureIndex",we.featureIndexes)))}]})))}]}))}function Ue(S){le.call(this,"featureListTable",Ce("featureRecord",S,function(C,I){var X=C.feature;return[{name:"featureTag"+I,type:"TAG",value:C.tag},{name:"feature"+I,type:"TABLE",value:new le("featureTable",[{name:"featureParams",type:"USHORT",value:X.featureParams}].concat(re("lookupListIndex",X.lookupListIndexes)))}]}))}function Fe(S,C){le.call(this,"lookupListTable",Te("lookup",S,function(I){var X=C[I.lookupType];return ee.assert(!!X,"Unable to write GSUB lookup type "+I.lookupType+" tables."),new le("lookupTable",[{name:"lookupType",type:"USHORT",value:I.lookupType},{name:"lookupFlag",type:"USHORT",value:I.lookupFlag}].concat(Te("subtable",I.subtables,X)))}))}se.CHARSTRING=function(S){if(be){var C=be.get(S);if(C!==void 0)return C}for(var I=[],X=S.length,K=0;K<X;K+=1){var $=S[K];I=I.concat(se[$.type]($.value))}return be&&be.set(S,I),I},ce.CHARSTRING=function(S){return se.CHARSTRING(S).length},se.OBJECT=function(S){var C=se[S.type];return ee.argument(C!==void 0,"No encoding function for type "+S.type),C(S.value)},ce.OBJECT=function(S){var C=ce[S.type];return ee.argument(C!==void 0,"No sizeOf function for type "+S.type),C(S.value)},se.TABLE=function(S){for(var C=[],I=S.fields.length,X=[],K=[],$=0;$<I;$+=1){var ne=S.fields[$],we=se[ne.type],Ae=(ee.argument(we!==void 0,"No encoding function for field type "+ne.type+" ("+ne.name+")"),S[ne.name]);we=we(Ae=Ae===void 0?ne.value:Ae),ne.type==="TABLE"?(K.push(C.length),C=C.concat([0,0]),X.push(we)):C=C.concat(we)}for(var De=0;De<X.length;De+=1){var Ve=K[De],Qe=C.length;ee.argument(Qe<65536,"Table "+S.tableName+" too big."),C[Ve]=Qe>>8,C[Ve+1]=255&Qe,C=C.concat(X[De])}return C},ce.TABLE=function(S){for(var C=0,I=S.fields.length,X=0;X<I;X+=1){var K=S.fields[X],$=ce[K.type],ne=(ee.argument($!==void 0,"No sizeOf function for field type "+K.type+" ("+K.name+")"),S[K.name]);C+=$(ne=ne===void 0?K.value:ne),K.type==="TABLE"&&(C+=2)}return C},se.RECORD=se.TABLE,ce.RECORD=ce.TABLE,se.LITERAL=function(S){return S},ce.LITERAL=function(S){return S.length},le.prototype.encode=function(){return se.TABLE(this)},le.prototype.sizeOf=function(){return ce.TABLE(this)};var Be={Table:le,Record:le,Coverage:(Me.prototype=Object.create(le.prototype)).constructor=Me,ScriptList:(Se.prototype=Object.create(le.prototype)).constructor=Se,FeatureList:(Ue.prototype=Object.create(le.prototype)).constructor=Ue,LookupList:(Fe.prototype=Object.create(le.prototype)).constructor=Fe,ushortList:re,tableList:Te,recordList:Ce};function st(S,C){return S.getUint8(C)}function ve(S,C){return S.getUint16(C,!1)}function ue(S,C){return S.getUint32(C,!1)}function ze(S,C){return S.getInt16(C,!1)+S.getUint16(C+2,!1)/65535}var He={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function me(S,C){this.data=S,this.offset=C,this.relativeOffset=0}me.prototype.parseByte=function(){var S=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,S},me.prototype.parseChar=function(){var S=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,S},me.prototype.parseCard8=me.prototype.parseByte,me.prototype.parseCard16=me.prototype.parseUShort=function(){var S=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,S},me.prototype.parseSID=me.prototype.parseUShort,me.prototype.parseOffset16=me.prototype.parseUShort,me.prototype.parseShort=function(){var S=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,S},me.prototype.parseF2Dot14=function(){var S=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,S},me.prototype.parseOffset32=me.prototype.parseULong=function(){var S=ue(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,S},me.prototype.parseFixed=function(){var S=ze(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,S},me.prototype.parseString=function(S){var C=this.data,I=this.offset+this.relativeOffset,X="";this.relativeOffset+=S;for(var K=0;K<S;K++)X+=String.fromCharCode(C.getUint8(I+K));return X},me.prototype.parseTag=function(){return this.parseString(4)},me.prototype.parseLongDateTime=function(){var S=ue(this.data,this.offset+this.relativeOffset+4);return S-=2082844800,this.relativeOffset+=8,S},me.prototype.parseVersion=function(S){var C=ve(this.data,this.offset+this.relativeOffset),I=ve(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,C+I/(S=S===void 0?4096:S)/10},me.prototype.skip=function(S,C){this.relativeOffset+=He[S]*(C=C===void 0?1:C)},me.prototype.parseULongList=function(S){S===void 0&&(S=this.parseULong());for(var C=new Array(S),I=this.data,X=this.offset+this.relativeOffset,K=0;K<S;K++)C[K]=I.getUint32(X),X+=4;return this.relativeOffset+=4*S,C},me.prototype.parseOffset16List=me.prototype.parseUShortList=function(S){S===void 0&&(S=this.parseUShort());for(var C=new Array(S),I=this.data,X=this.offset+this.relativeOffset,K=0;K<S;K++)C[K]=I.getUint16(X),X+=2;return this.relativeOffset+=2*S,C},me.prototype.parseShortList=function(S){for(var C=new Array(S),I=this.data,X=this.offset+this.relativeOffset,K=0;K<S;K++)C[K]=I.getInt16(X),X+=2;return this.relativeOffset+=2*S,C},me.prototype.parseByteList=function(S){for(var C=new Array(S),I=this.data,X=this.offset+this.relativeOffset,K=0;K<S;K++)C[K]=I.getUint8(X++);return this.relativeOffset+=S,C},me.prototype.parseList=function(S,C){C||(C=S,S=this.parseUShort());for(var I=new Array(S),X=0;X<S;X++)I[X]=C.call(this);return I},me.prototype.parseList32=function(S,C){C||(C=S,S=this.parseULong());for(var I=new Array(S),X=0;X<S;X++)I[X]=C.call(this);return I},me.prototype.parseRecordList=function(S,C){C||(C=S,S=this.parseUShort());for(var I=new Array(S),X=Object.keys(C),K=0;K<S;K++){for(var $={},ne=0;ne<X.length;ne++){var we=X[ne],Ae=C[we];$[we]=Ae.call(this)}I[K]=$}return I},me.prototype.parseRecordList32=function(S,C){C||(C=S,S=this.parseULong());for(var I=new Array(S),X=Object.keys(C),K=0;K<S;K++){for(var $={},ne=0;ne<X.length;ne++){var we=X[ne],Ae=C[we];$[we]=Ae.call(this)}I[K]=$}return I},me.prototype.parseStruct=function(S){if(typeof S=="function")return S.call(this);for(var C=Object.keys(S),I={},X=0;X<C.length;X++){var K=C[X],$=S[K];I[K]=$.call(this)}return I},me.prototype.parseValueRecord=function(S){var C;if((S=S===void 0?this.parseUShort():S)!==0)return C={},1&S&&(C.xPlacement=this.parseShort()),2&S&&(C.yPlacement=this.parseShort()),4&S&&(C.xAdvance=this.parseShort()),8&S&&(C.yAdvance=this.parseShort()),16&S&&(C.xPlaDevice=void 0,this.parseShort()),32&S&&(C.yPlaDevice=void 0,this.parseShort()),64&S&&(C.xAdvDevice=void 0,this.parseShort()),128&S&&(C.yAdvDevice=void 0,this.parseShort()),C},me.prototype.parseValueRecordList=function(){for(var S=this.parseUShort(),C=this.parseUShort(),I=new Array(C),X=0;X<C;X++)I[X]=this.parseValueRecord(S);return I},me.prototype.parsePointer=function(S){var C=this.parseOffset16();if(0<C)return new me(this.data,this.offset+C).parseStruct(S)},me.prototype.parsePointer32=function(S){var C=this.parseOffset32();if(0<C)return new me(this.data,this.offset+C).parseStruct(S)},me.prototype.parseListOfLists=function(S){for(var C=this.parseOffset16List(),I=C.length,X=this.relativeOffset,K=new Array(I),$=0;$<I;$++){var ne=C[$];if(ne===0)K[$]=void 0;else if(this.relativeOffset=ne,S){for(var we=this.parseOffset16List(),Ae=new Array(we.length),De=0;De<we.length;De++)this.relativeOffset=ne+we[De],Ae[De]=S.call(this);K[$]=Ae}else K[$]=this.parseUShortList()}return this.relativeOffset=X,K},me.prototype.parseCoverage=function(){var S=this.offset+this.relativeOffset,C=this.parseUShort(),I=this.parseUShort();if(C===1)return{format:1,glyphs:this.parseUShortList(I)};if(C!==2)throw new Error("0x"+S.toString(16)+": Coverage format must be 1 or 2.");for(var X=new Array(I),K=0;K<I;K++)X[K]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:X}},me.prototype.parseClassDef=function(){var S=this.offset+this.relativeOffset,C=this.parseUShort();if(C===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(C===2)return{format:2,ranges:this.parseRecordList({start:me.uShort,end:me.uShort,classId:me.uShort})};throw new Error("0x"+S.toString(16)+": ClassDef format must be 1 or 2.")},me.list=function(S,C){return function(){return this.parseList(S,C)}},me.list32=function(S,C){return function(){return this.parseList32(S,C)}},me.recordList=function(S,C){return function(){return this.parseRecordList(S,C)}},me.recordList32=function(S,C){return function(){return this.parseRecordList32(S,C)}},me.pointer=function(S){return function(){return this.parsePointer(S)}},me.pointer32=function(S){return function(){return this.parsePointer32(S)}},me.tag=me.prototype.parseTag,me.byte=me.prototype.parseByte,me.uShort=me.offset16=me.prototype.parseUShort,me.uShortList=me.prototype.parseUShortList,me.uLong=me.offset32=me.prototype.parseULong,me.uLongList=me.prototype.parseULongList,me.struct=me.prototype.parseStruct,me.coverage=me.prototype.parseCoverage,me.classDef=me.prototype.parseClassDef;var je={reserved:me.uShort,reqFeatureIndex:me.uShort,featureIndexes:me.uShortList},Ie=(me.prototype.parseScriptList=function(){return this.parsePointer(me.recordList({tag:me.tag,script:me.pointer({defaultLangSys:me.pointer(je),langSysRecords:me.recordList({tag:me.tag,langSys:me.pointer(je)})})}))||[]},me.prototype.parseFeatureList=function(){return this.parsePointer(me.recordList({tag:me.tag,feature:me.pointer({featureParams:me.offset16,lookupListIndexes:me.uShortList})}))||[]},me.prototype.parseLookupList=function(S){return this.parsePointer(me.list(me.pointer(function(){var C=this.parseUShort(),I=(ee.argument(1<=C&&C<=9,"GPOS/GSUB lookup type "+C+" unknown."),this.parseUShort()),X=16&I;return{lookupType:C,lookupFlag:I,subtables:this.parseList(me.pointer(S[C])),markFilteringSet:X?this.parseUShort():void 0}})))||[]},me.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var S=this.parseUShort(),C=this.parseUShort();return ee.argument(S===1&&C<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:me.offset32,featureTableSubstitutionOffset:me.offset32})})||[]},{getByte:st,getCard8:st,getUShort:ve,getCard16:ve,getShort:function(S,C){return S.getInt16(C,!1)},getULong:ue,getFixed:ze,getTag:function(S,C){for(var I="",X=C;X<C+4;X+=1)I+=String.fromCharCode(S.getInt8(X));return I},getOffset:function(S,C,I){for(var X=0,K=0;K<I;K+=1)X=(X<<=8)+S.getUint8(C+K);return X},getBytes:function(S,C,I){for(var X=[],K=C;K<I;K+=1)X.push(S.getUint8(K));return X},bytesToString:function(S){for(var C="",I=0;I<S.length;I+=1)C+=String.fromCharCode(S[I]);return C},Parser:me}),Ye=function(S,C){for(var I={},X=(I.version=Ie.getUShort(S,C),ee.argument(I.version===0,"cmap table version should be 0."),I.numTables=Ie.getUShort(S,C+2),-1),K=I.numTables-1;0<=K;--K){var $=Ie.getUShort(S,C+4+8*K),ne=Ie.getUShort(S,C+4+8*K+2);if($===3&&(ne===0||ne===1||ne===10)||$===0&&(ne===0||ne===1||ne===2||ne===3||ne===4)){X=Ie.getULong(S,C+4+8*K+4);break}}if(X===-1)throw new Error("No valid cmap sub-tables found.");var we=new Ie.Parser(S,C+X);if(I.format=we.parseUShort(),I.format===12){var Ae,De=I,Ve=we;Ve.parseUShort(),De.length=Ve.parseULong(),De.language=Ve.parseULong(),De.groupCount=Ae=Ve.parseULong(),De.glyphIndexMap={};for(var Qe=0;Qe<Ae;Qe+=1)for(var Je=Ve.parseULong(),Pe=Ve.parseULong(),St=Ve.parseULong(),ut=Je;ut<=Pe;ut+=1)De.glyphIndexMap[ut]=St,St++}else{if(I.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+I.format+").");var lt=I,ct=S,mt=C,At=X;lt.length=we.parseUShort(),lt.language=we.parseUShort(),lt.segCount=Et=we.parseUShort()>>1,we.skip("uShort",3),lt.glyphIndexMap={};for(var Et,jt=new Ie.Parser(ct,mt+At+14),Jt=new Ie.Parser(ct,mt+At+16+2*Et),ir=new Ie.Parser(ct,mt+At+16+4*Et),dr=new Ie.Parser(ct,mt+At+16+6*Et),Rr=mt+At+16+8*Et,Sr=0;Sr<Et-1;Sr+=1)for(var gr=void 0,Zt=jt.parseUShort(),Cr=Jt.parseUShort(),Er=ir.parseShort(),Wr=dr.parseUShort(),br=Cr;br<=Zt;br+=1)Wr!==0?(Rr=(Rr=dr.offset+dr.relativeOffset-2)+Wr+2*(br-Cr),(gr=Ie.getUShort(ct,Rr))!==0&&(gr=gr+Er&65535)):gr=br+Er&65535,lt.glyphIndexMap[br]=gr}return I},it=function(S){for(var C=!0,I=S.length-1;0<I;--I)if(65535<S.get(I).unicode){console.log("Adding CMAP format 12 (needed!)"),C=!1;break}var X,K,$=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:C?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:C?12:20}],ne=($=($=C?$:$.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new Be.Table("cmap",$));for(ne.segments=[],I=0;I<S.length;I+=1){for(var we=S.get(I),Ae=0;Ae<we.unicodes.length;Ae+=1)X=we.unicodes[Ae],K=I,ne.segments.push({end:X,start:X,delta:-(X-K),offset:0,glyphIndex:K});ne.segments=ne.segments.sort(function(mt,At){return mt.start-At.start})}ne.segments.push({end:65535,start:65535,delta:1,offset:0});var De=ne.segments.length,Ve=0,Qe=[],Je=[],Pe=[],St=[],ut=[],lt=[];for(I=0;I<De;I+=1){var ct=ne.segments[I];ct.end<=65535&&ct.start<=65535?(Qe=Qe.concat({name:"end_"+I,type:"USHORT",value:ct.end}),Je=Je.concat({name:"start_"+I,type:"USHORT",value:ct.start}),Pe=Pe.concat({name:"idDelta_"+I,type:"SHORT",value:ct.delta}),St=St.concat({name:"idRangeOffset_"+I,type:"USHORT",value:ct.offset}),ct.glyphId!==void 0&&(ut=ut.concat({name:"glyph_"+I,type:"USHORT",value:ct.glyphId}))):Ve+=1,C||ct.glyphIndex===void 0||(lt=(lt=(lt=lt.concat({name:"cmap12Start_"+I,type:"ULONG",value:ct.start})).concat({name:"cmap12End_"+I,type:"ULONG",value:ct.end})).concat({name:"cmap12Glyph_"+I,type:"ULONG",value:ct.glyphIndex}))}return ne.segCountX2=2*(De-Ve),ne.searchRange=2*Math.pow(2,Math.floor(Math.log(De-Ve)/Math.log(2))),ne.entrySelector=Math.log(ne.searchRange/2)/Math.log(2),ne.rangeShift=ne.segCountX2-ne.searchRange,ne.fields=ne.fields.concat(Qe),ne.fields.push({name:"reservedPad",type:"USHORT",value:0}),ne.fields=ne.fields.concat(Je),ne.fields=ne.fields.concat(Pe),ne.fields=ne.fields.concat(St),ne.fields=ne.fields.concat(ut),ne.cmap4Length=14+2*Qe.length+2+2*Je.length+2*Pe.length+2*St.length+2*ut.length,C||($=16+4*lt.length,ne.cmap12Offset=20+ne.cmap4Length,ne.fields=ne.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:$},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:lt.length/3}]),ne.fields=ne.fields.concat(lt)),ne},yt=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Ze=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],at=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],fe=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function ae(S){this.font=S}function oe(S){this.cmap=S}function _e(S,C){this.encoding=S,this.charset=C}function he(S){switch(S.version){case 1:this.names=fe.slice();break;case 2:this.names=new Array(S.numberOfGlyphs);for(var C=0;C<S.numberOfGlyphs;C++)S.glyphNameIndex[C]<fe.length?this.names[C]=fe[S.glyphNameIndex[C]]:this.names[C]=S.names[S.glyphNameIndex[C]-fe.length];break;case 2.5:this.names=new Array(S.numberOfGlyphs);for(var I=0;I<S.numberOfGlyphs;I++)this.names[I]=fe[I+S.glyphNameIndex[I]];break;default:this.names=[]}}ae.prototype.charToGlyphIndex=function(S){var C=S.codePointAt(0),I=this.font.glyphs;if(I){for(var X=0;X<I.length;X+=1)for(var K=I.get(X),$=0;$<K.unicodes.length;$+=1)if(K.unicodes[$]===C)return X}return null},oe.prototype.charToGlyphIndex=function(S){return this.cmap.glyphIndexMap[S.codePointAt(0)]||0},_e.prototype.charToGlyphIndex=function(S){return S=S.codePointAt(0),S=this.encoding[S],this.charset.indexOf(S)},he.prototype.nameToGlyphIndex=function(S){return this.names.indexOf(S)},he.prototype.glyphIndexToName=function(S){return this.names[S]};var ke=function(S,C,I,X,K){S.beginPath(),S.moveTo(C,I),S.lineTo(X,K),S.stroke()};function We(S){this.bindConstructorValues(S)}function $e(S,C,I){Object.defineProperty(S,C,{get:function(){return S.path,S[I]},set:function(X){S[I]=X},enumerable:!0,configurable:!0})}function Ee(S,C){if(this.font=S,this.glyphs={},Array.isArray(C))for(var I=0;I<C.length;I++)this.glyphs[I]=C[I];this.length=C&&C.length||0}We.prototype.bindConstructorValues=function(S){var C;this.index=S.index||0,this.name=S.name||null,this.unicode=S.unicode||void 0,this.unicodes=S.unicodes||S.unicode!==void 0?[S.unicode]:[],S.xMin&&(this.xMin=S.xMin),S.yMin&&(this.yMin=S.yMin),S.xMax&&(this.xMax=S.xMax),S.yMax&&(this.yMax=S.yMax),S.advanceWidth&&(this.advanceWidth=S.advanceWidth),Object.defineProperty(this,"path",(S=S.path,C=S||new W,{configurable:!0,get:function(){return C=typeof C=="function"?C():C},set:function(I){C=I}}))},We.prototype.addUnicode=function(S){this.unicodes.length===0&&(this.unicode=S),this.unicodes.push(S)},We.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},We.prototype.getPath=function(S,C,I,X,K){S=S!==void 0?S:0,C=C!==void 0?C:0,I=I!==void 0?I:72;for(var $,ne,we=(X=X||{}).xScale,Ae=X.yScale,De=(($=X.hinting&&K&&K.hinting?this.path&&K.hinting.exec(this,I):$)?(ne=K.hinting.getCommands($),S=Math.round(S),C=Math.round(C),we=Ae=1):(ne=this.path.commands,X=1/this.path.unitsPerEm*I,we===void 0&&(we=X),Ae===void 0&&(Ae=X)),new W),Ve=0;Ve<ne.length;Ve+=1){var Qe=ne[Ve];Qe.type==="M"?De.moveTo(S+Qe.x*we,C+-Qe.y*Ae):Qe.type==="L"?De.lineTo(S+Qe.x*we,C+-Qe.y*Ae):Qe.type==="Q"?De.quadraticCurveTo(S+Qe.x1*we,C+-Qe.y1*Ae,S+Qe.x*we,C+-Qe.y*Ae):Qe.type==="C"?De.curveTo(S+Qe.x1*we,C+-Qe.y1*Ae,S+Qe.x2*we,C+-Qe.y2*Ae,S+Qe.x*we,C+-Qe.y*Ae):Qe.type==="Z"&&De.closePath()}return De},We.prototype.getContours=function(){if(this.points===void 0)return[];for(var S=[],C=[],I=0;I<this.points.length;I+=1){var X=this.points[I];C.push(X),X.lastPointOfContour&&(S.push(C),C=[])}return ee.argument(C.length===0,"There are still points left in the current contour."),S},We.prototype.getMetrics=function(){for(var S=this.path.commands,C=[],I=[],X=0;X<S.length;X+=1){var K=S[X];K.type!=="Z"&&(C.push(K.x),I.push(K.y)),K.type!=="Q"&&K.type!=="C"||(C.push(K.x1),I.push(K.y1)),K.type==="C"&&(C.push(K.x2),I.push(K.y2))}var $={xMin:Math.min.apply(null,C),yMin:Math.min.apply(null,I),xMax:Math.max.apply(null,C),yMax:Math.max.apply(null,I),leftSideBearing:this.leftSideBearing};return isFinite($.xMin)||($.xMin=0),isFinite($.xMax)||($.xMax=this.advanceWidth),isFinite($.yMin)||($.yMin=0),isFinite($.yMax)||($.yMax=0),$.rightSideBearing=this.advanceWidth-$.leftSideBearing-($.xMax-$.xMin),$},We.prototype.draw=function(S,C,I,X,K){this.getPath(C,I,X,K).draw(S)},We.prototype.drawPoints=function(S,C,I,X){function K(Ve,Qe,Je,Pe){var St=2*Math.PI;S.beginPath();for(var ut=0;ut<Ve.length;ut+=1)S.moveTo(Qe+Ve[ut].x*Pe,Je+Ve[ut].y*Pe),S.arc(Qe+Ve[ut].x*Pe,Je+Ve[ut].y*Pe,2,0,St,!1);S.closePath(),S.fill()}C=C!==void 0?C:0,I=I!==void 0?I:0,X=1/this.path.unitsPerEm*(X=X!==void 0?X:24);for(var $=[],ne=[],we=this.path,Ae=0;Ae<we.commands.length;Ae+=1){var De=we.commands[Ae];De.x!==void 0&&$.push({x:De.x,y:-De.y}),De.x1!==void 0&&ne.push({x:De.x1,y:-De.y1}),De.x2!==void 0&&ne.push({x:De.x2,y:-De.y2})}S.fillStyle="blue",K($,C,I,X),S.fillStyle="red",K(ne,C,I,X)},We.prototype.drawMetrics=function(S,C,I,X){C=C!==void 0?C:0,I=I!==void 0?I:0,X=1/this.path.unitsPerEm*(X=X!==void 0?X:24),S.lineWidth=1,S.strokeStyle="black",ke(S,C,-1e4,C,1e4),ke(S,-1e4,I,1e4,I);var K=this.xMin||0,$=this.yMin||0,ne=this.xMax||0,we=this.yMax||0,Ae=this.advanceWidth||0;S.strokeStyle="blue",ke(S,C+K*X,-1e4,C+K*X,1e4),ke(S,C+ne*X,-1e4,C+ne*X,1e4),ke(S,-1e4,I+-$*X,1e4,I+-$*X),ke(S,-1e4,I+-we*X,1e4,I+-we*X),S.strokeStyle="green",ke(S,C+Ae*X,-1e4,C+Ae*X,1e4)},Ee.prototype.get=function(S){return typeof this.glyphs[S]=="function"&&(this.glyphs[S]=this.glyphs[S]()),this.glyphs[S]},Ee.prototype.push=function(S,C){this.glyphs[S]=C,this.length++};var Ge={GlyphSet:Ee,glyphLoader:function(S,C){return new We({index:C,font:S})},ttfGlyphLoader:function(S,C,I,X,K,$){return function(){var ne=new We({index:C,font:S});return ne.path=function(){I(ne,X,K);var we=$(S.glyphs,ne);return we.unitsPerEm=S.unitsPerEm,we},$e(ne,"xMin","_xMin"),$e(ne,"xMax","_xMax"),$e(ne,"yMin","_yMin"),$e(ne,"yMax","_yMax"),ne}},cffGlyphLoader:function(S,C,I,X){return function(){var K=new We({index:C,font:S});return K.path=function(){var $=I(S,K,X);return $.unitsPerEm=S.unitsPerEm,$},K}}};function ht(S){return S=S.length<1240?107:S.length<33900?1131:32768}function wt(S,C,I){var X,K=[],$=[],ne=Ie.getCard16(S,C);if(ne!==0){for(var we=Ie.getByte(S,C+2),Ae=C+(ne+1)*we+2,De=C+3,Ve=0;Ve<ne+1;Ve+=1)K.push(Ie.getOffset(S,De,we)),De+=we;X=Ae+K[ne]}else X=C+2;for(var Qe=0;Qe<K.length-1;Qe+=1){var Je=Ie.getBytes(S,Ae+K[Qe],Ae+K[Qe+1]);I&&(Je=I(Je)),$.push(Je)}return{objects:$,startOffset:C,endOffset:X}}function Lt(S,C){if(C===28)return S.parseByte()<<8|S.parseByte();if(C===29)return S.parseByte()<<24|S.parseByte()<<16|S.parseByte()<<8|S.parseByte();if(C===30){for(var I=S,X="",K=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var $=(ne=I.parseByte())>>4,ne=15&ne;if($==15||(X+=K[$],ne==15))break;X+=K[ne]}return parseFloat(X)}if(32<=C&&C<=246)return C-139;if(247<=C&&C<=250)return 256*(C-247)+S.parseByte()+108;if(251<=C&&C<=254)return 256*-(C-251)-S.parseByte()-108;throw new Error("Invalid b0 "+C)}function Ct(S,C,I){var X=new Ie.Parser(S,C=C!==void 0?C:0),K=[],$=[];for(I=I!==void 0?I:S.length;X.relativeOffset<I;){var ne=X.parseByte();ne<=21?(ne===12&&(ne=1200+X.parseByte()),K.push([ne,$]),$=[]):$.push(Lt(X,ne))}for(var we=K,Ae={},De=0;De<we.length;De+=1){var Ve=we[De][0],Qe=we[De][1],Je=Qe.length===1?Qe[0]:Qe;if(Ae.hasOwnProperty(Ve)&&!isNaN(Ae[Ve]))throw new Error("Object "+Ae+" already has key "+Ve);Ae[Ve]=Je}return Ae}function Ft(S,C){return C<=390?yt[C]:S[C-391]}function Nt(S,C,I){for(var X,K={},$=0;$<C.length;$+=1){var ne=C[$];if(Array.isArray(ne.type)){var we=[];we.length=ne.type.length;for(var Ae=0;Ae<ne.type.length;Ae++)(X=S[ne.op]!==void 0?S[ne.op][Ae]:void 0)===void 0&&(X=ne.value!==void 0&&ne.value[Ae]!==void 0?ne.value[Ae]:null),ne.type[Ae]==="SID"&&(X=Ft(I,X)),we[Ae]=X;K[ne.name]=we}else(X=S[ne.op])===void 0&&(X=ne.value!==void 0?ne.value:null),ne.type==="SID"&&(X=Ft(I,X)),K[ne.name]=X}return K}var Gt=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Kt=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function vr(S,C,I,X){return Nt(Ct(S,C,I),Kt,X)}function lr(S,C,I,X){for(var K=[],$=0;$<I.length;$+=1){var ne,we=((ne=(we=X,Nt(Ct(ne=new DataView(new Uint8Array(I[$]).buffer),0,ne.byteLength),Gt,we)))._subrs=[],ne._subrsBias=0,ne.private[0]),Ae=ne.private[1];we!==0&&Ae!==0&&(we=vr(S,Ae+C,we,X),ne._defaultWidthX=we.defaultWidthX,ne._nominalWidthX=we.nominalWidthX,we.subrs!==0&&(Ae=wt(S,Ae+we.subrs+C),ne._subrs=Ae.objects,ne._subrsBias=ht(ne._subrs)),ne._privateDict=we),K.push(ne)}return K}function Ir(S,C,I){var X,K,$,ne,we,Ae,De,Ve,Qe,Je=new W,Pe=[],St=0,ut=!1,lt=!1,ct=0,mt=0,At=(Qe=(S.isCIDFont?(we=S.tables.cff.topDict._fdSelect[C.index],we=S.tables.cff.topDict._fdArray[we],Ae=we._subrs,De=we._subrsBias,Ve=we._defaultWidthX,we):(Ae=S.tables.cff.topDict._subrs,De=S.tables.cff.topDict._subrsBias,Ve=S.tables.cff.topDict._defaultWidthX,S.tables.cff.topDict))._nominalWidthX,Ve);function Et(Jt,ir){lt&&Je.closePath(),Je.moveTo(Jt,ir),lt=!0}function jt(){Pe.length%2==0||ut||(At=Pe.shift()+Qe),St+=Pe.length>>1,Pe.length=0,ut=!0}return function Jt(ir){for(var dr,Rr,Sr,gr,Zt,Cr,Er,Wr,br,Fr,Zr,vn,Dr=0;Dr<ir.length;){var on=ir[Dr];switch(Dr+=1,on){case 1:case 3:jt();break;case 4:1<Pe.length&&!ut&&(At=Pe.shift()+Qe,ut=!0),mt+=Pe.pop(),Et(ct,mt);break;case 5:for(;0<Pe.length;)ct+=Pe.shift(),mt+=Pe.shift(),Je.lineTo(ct,mt);break;case 6:for(;0<Pe.length&&(ct+=Pe.shift(),Je.lineTo(ct,mt),Pe.length!==0);)mt+=Pe.shift(),Je.lineTo(ct,mt);break;case 7:for(;0<Pe.length&&(mt+=Pe.shift(),Je.lineTo(ct,mt),Pe.length!==0);)ct+=Pe.shift(),Je.lineTo(ct,mt);break;case 8:for(;0<Pe.length;)X=ct+Pe.shift(),K=mt+Pe.shift(),$=X+Pe.shift(),ne=K+Pe.shift(),ct=$+Pe.shift(),mt=ne+Pe.shift(),Je.curveTo(X,K,$,ne,ct,mt);break;case 10:Zt=Pe.pop()+De,(Cr=Ae[Zt])&&Jt(Cr);break;case 11:return;case 12:switch(on=ir[Dr],Dr+=1,on){case 35:X=ct+Pe.shift(),K=mt+Pe.shift(),$=X+Pe.shift(),ne=K+Pe.shift(),Er=$+Pe.shift(),Wr=ne+Pe.shift(),br=Er+Pe.shift(),Fr=Wr+Pe.shift(),Zr=br+Pe.shift(),vn=Fr+Pe.shift(),ct=Zr+Pe.shift(),mt=vn+Pe.shift(),Pe.shift(),Je.curveTo(X,K,$,ne,Er,Wr),Je.curveTo(br,Fr,Zr,vn,ct,mt);break;case 34:X=ct+Pe.shift(),K=mt,$=X+Pe.shift(),ne=K+Pe.shift(),Er=$+Pe.shift(),Wr=ne,br=Er+Pe.shift(),Fr=ne,Zr=br+Pe.shift(),vn=mt,ct=Zr+Pe.shift(),Je.curveTo(X,K,$,ne,Er,Wr),Je.curveTo(br,Fr,Zr,vn,ct,mt);break;case 36:X=ct+Pe.shift(),K=mt+Pe.shift(),$=X+Pe.shift(),ne=K+Pe.shift(),Er=$+Pe.shift(),Wr=ne,br=Er+Pe.shift(),Fr=ne,Zr=br+Pe.shift(),vn=Fr+Pe.shift(),ct=Zr+Pe.shift(),Je.curveTo(X,K,$,ne,Er,Wr),Je.curveTo(br,Fr,Zr,vn,ct,mt);break;case 37:X=ct+Pe.shift(),K=mt+Pe.shift(),$=X+Pe.shift(),ne=K+Pe.shift(),Er=$+Pe.shift(),Wr=ne+Pe.shift(),br=Er+Pe.shift(),Fr=Wr+Pe.shift(),Zr=br+Pe.shift(),vn=Fr+Pe.shift(),Math.abs(Zr-ct)>Math.abs(vn-mt)?ct=Zr+Pe.shift():mt=vn+Pe.shift(),Je.curveTo(X,K,$,ne,Er,Wr),Je.curveTo(br,Fr,Zr,vn,ct,mt);break;default:console.log("Glyph "+C.index+": unknown operator 1200"+on),Pe.length=0}break;case 14:0<Pe.length&&!ut&&(At=Pe.shift()+Qe,ut=!0),lt&&(Je.closePath(),lt=!1);break;case 18:jt();break;case 19:case 20:jt(),Dr+=St+7>>3;break;case 21:2<Pe.length&&!ut&&(At=Pe.shift()+Qe,ut=!0),mt+=Pe.pop(),Et(ct+=Pe.pop(),mt);break;case 22:1<Pe.length&&!ut&&(At=Pe.shift()+Qe,ut=!0),Et(ct+=Pe.pop(),mt);break;case 23:jt();break;case 24:for(;2<Pe.length;)X=ct+Pe.shift(),K=mt+Pe.shift(),$=X+Pe.shift(),ne=K+Pe.shift(),ct=$+Pe.shift(),mt=ne+Pe.shift(),Je.curveTo(X,K,$,ne,ct,mt);ct+=Pe.shift(),mt+=Pe.shift(),Je.lineTo(ct,mt);break;case 25:for(;6<Pe.length;)ct+=Pe.shift(),mt+=Pe.shift(),Je.lineTo(ct,mt);X=ct+Pe.shift(),K=mt+Pe.shift(),$=X+Pe.shift(),ne=K+Pe.shift(),ct=$+Pe.shift(),mt=ne+Pe.shift(),Je.curveTo(X,K,$,ne,ct,mt);break;case 26:for(Pe.length%2&&(ct+=Pe.shift());0<Pe.length;)X=ct,K=mt+Pe.shift(),$=X+Pe.shift(),ne=K+Pe.shift(),ct=$,mt=ne+Pe.shift(),Je.curveTo(X,K,$,ne,ct,mt);break;case 27:for(Pe.length%2&&(mt+=Pe.shift());0<Pe.length;)X=ct+Pe.shift(),K=mt,$=X+Pe.shift(),ne=K+Pe.shift(),ct=$+Pe.shift(),mt=ne,Je.curveTo(X,K,$,ne,ct,mt);break;case 28:dr=ir[Dr],Rr=ir[Dr+1],Pe.push((dr<<24|Rr<<16)>>16),Dr+=2;break;case 29:Zt=Pe.pop()+S.gsubrsBias,(Cr=S.gsubrs[Zt])&&Jt(Cr);break;case 30:for(;0<Pe.length&&(X=ct,K=mt+Pe.shift(),$=X+Pe.shift(),ne=K+Pe.shift(),ct=$+Pe.shift(),mt=ne+(Pe.length===1?Pe.shift():0),Je.curveTo(X,K,$,ne,ct,mt),Pe.length!==0);)X=ct+Pe.shift(),K=mt,$=X+Pe.shift(),ne=K+Pe.shift(),mt=ne+Pe.shift(),ct=$+(Pe.length===1?Pe.shift():0),Je.curveTo(X,K,$,ne,ct,mt);break;case 31:for(;0<Pe.length&&(X=ct+Pe.shift(),K=mt,$=X+Pe.shift(),ne=K+Pe.shift(),mt=ne+Pe.shift(),ct=$+(Pe.length===1?Pe.shift():0),Je.curveTo(X,K,$,ne,ct,mt),Pe.length!==0);)X=ct,K=mt+Pe.shift(),$=X+Pe.shift(),ne=K+Pe.shift(),ct=$+Pe.shift(),mt=ne+(Pe.length===1?Pe.shift():0),Je.curveTo(X,K,$,ne,ct,mt);break;default:on<32?console.log("Glyph "+C.index+": unknown operator "+on):on<247?Pe.push(on-139):on<251?(dr=ir[Dr],Dr+=1,Pe.push(256*(on-247)+dr+108)):on<255?(dr=ir[Dr],Dr+=1,Pe.push(256*-(on-251)-dr-108)):(dr=ir[Dr],Rr=ir[Dr+1],Sr=ir[Dr+2],gr=ir[Dr+3],Dr+=4,Pe.push((dr<<24|Rr<<16|Sr<<8|gr)/65536))}}}(I),C.advanceWidth=At,Je}function $r(S,C){var I,X=yt.indexOf(S);return 0<=X&&(I=X),0<=(X=C.indexOf(S))?I=X+yt.length:(I=yt.length+C.length,C.push(S)),I}function er(S,C,I){for(var X={},K=0;K<S.length;K+=1){var $=S[K],ne=C[$.name];ne===void 0||function we(Ae,De){if(Ae===De)return 1;if(Array.isArray(Ae)&&Array.isArray(De)&&Ae.length===De.length){for(var Ve=0;Ve<Ae.length;Ve+=1)if(!we(Ae[Ve],De[Ve]))return;return 1}}(ne,$.value)||($.type==="SID"&&(ne=$r(ne,I)),X[$.op]={name:$.name,type:$.type,value:ne})}return X}function Vr(S,C){var I=new Be.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return I.dict=er(Gt,S,C),I}function kr(S){var C=new Be.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return C.topDicts=[{name:"topDict_0",type:"TABLE",value:S}],C}var ar=function(S,C,I){I.tables.cff={},X=S,K=C,($={}).formatMajor=Ie.getCard8(X,K),$.formatMinor=Ie.getCard8(X,K+1),$.size=Ie.getCard8(X,K+2),$.offsetSize=Ie.getCard8(X,K+3),$.startOffset=K,$.endOffset=K+4;var X=wt(S,$.endOffset,Ie.bytesToString),K=wt(S,X.endOffset),$=wt(S,K.endOffset,Ie.bytesToString);if(X=wt(S,$.endOffset),I.gsubrs=X.objects,I.gsubrsBias=ht(I.gsubrs),(X=lr(S,C,K.objects,$.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+X.length);if(K=X[0],(I.tables.cff.topDict=K)._privateDict&&(I.defaultWidthX=K._privateDict.defaultWidthX,I.nominalWidthX=K._privateDict.nominalWidthX),K.ros[0]!==void 0&&K.ros[1]!==void 0&&(I.isCIDFont=!0),I.isCIDFont){X=K.fdArray;var ne=K.fdSelect;if(X===0||ne===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");X=lr(S,C,wt(S,X+=C).objects,$.objects),K._fdArray=X,K._fdSelect=function(Ve,Qe,Je,Pe){var St,ut=[],lt=new Ie.Parser(Ve,Qe);if((Ve=lt.parseCard8())===0)for(var ct=0;ct<Je;ct++){if(Pe<=(St=lt.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+St+" (FD count "+Pe+")");ut.push(St)}else{if(Ve!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Ve);var mt,At=lt.parseCard16(),Et=lt.parseCard16();if(Et!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Et);for(var jt=0;jt<At;jt++){if(St=lt.parseCard8(),mt=lt.parseCard16(),Pe<=St)throw new Error("CFF table CID Font FDSelect has bad FD index value "+St+" (FD count "+Pe+")");if(Je<mt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+mt);for(;Et<mt;Et++)ut.push(St);Et=mt}if(mt!==Je)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+mt)}return ut}(S,ne+=C,I.numGlyphs,X.length)}X=vr(S,ne=C+K.private[1],K.private[0],$.objects);var we=(I.defaultWidthX=X.defaultWidthX,I.nominalWidthX=X.nominalWidthX,X.subrs!==0?(ne=wt(S,ne+X.subrs),I.subrs=ne.objects,I.subrsBias=ht(I.subrs)):(I.subrs=[],I.subrsBias=0),wt(S,C+K.charStrings));I.nGlyphs=we.objects.length,X=function(Ve,Qe,Je,Pe){var St=new Ie.Parser(Ve,Qe),ut=(--Je,[".notdef"]);if((Ve=St.parseCard8())===0)for(var lt=0;lt<Je;lt+=1)ct=St.parseSID(),ut.push(Ft(Pe,ct));else if(Ve===1)for(;ut.length<=Je;)for(var ct=St.parseSID(),mt=St.parseCard8(),At=0;At<=mt;At+=1)ut.push(Ft(Pe,ct)),ct+=1;else{if(Ve!==2)throw new Error("Unknown charset format "+Ve);for(;ut.length<=Je;){ct=St.parseSID(),mt=St.parseCard16();for(var Et=0;Et<=mt;Et+=1)ut.push(Ft(Pe,ct)),ct+=1}}return ut}(S,C+K.charset,I.nGlyphs,$.objects),K.encoding===0?I.cffEncoding=new _e(Ze,X):K.encoding===1?I.cffEncoding=new _e(at,X):I.cffEncoding=function(Ve,Qe,Je){var Pe={},St=new Ie.Parser(Ve,Qe);if((Ve=St.parseCard8())===0)for(var ut=St.parseCard8(),lt=0;lt<ut;lt+=1)Pe[mt=St.parseCard8()]=lt;else{if(Ve!==1)throw new Error("Unknown encoding format "+Ve);for(var ct=St.parseCard8(),mt=1,At=0;At<ct;At+=1)for(var Et=St.parseCard8(),jt=St.parseCard8(),Jt=Et;Jt<=Et+jt;Jt+=1)Pe[Jt]=mt,mt+=1}return new _e(Pe,Je)}(S,C+K.encoding,X),I.encoding=I.encoding||I.cffEncoding,I.glyphs=new Ge.GlyphSet(I);for(var Ae=0;Ae<I.nGlyphs;Ae+=1){var De=we.objects[Ae];I.glyphs.push(Ae,Ge.cffGlyphLoader(I,Ae,Ir,De))}},Gn=function(S,C){for(var I,X=new Be.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),K=1/C.unitsPerEm,$=(K={version:C.version,fullName:C.fullName,familyName:C.familyName,weight:C.weightName,fontBBox:C.fontBBox||[0,0,0,0],fontMatrix:[K,0,0,K,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},[]),ne=1;ne<S.length;ne+=1)I=S.get(ne),$.push(I.name);var we,Ae,De=[],Ve=(C=(X.header=new Be.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),X.nameIndex=function(Qe){var Je=new Be.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Je.names=[];for(var Pe=0;Pe<Qe.length;Pe+=1)Je.names.push({name:"name_"+Pe,type:"NAME",value:Qe[Pe]});return Je}([C.postScriptName]),Vr(K,De)),X.topDictIndex=kr(C),X.globalSubrIndex=new Be.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),X.charsets=function(Qe,Je){for(var Pe=new Be.Record("Charsets",[{name:"format",type:"Card8",value:0}]),St=0;St<Qe.length;St+=1){var ut=$r(Qe[St],Je);Pe.fields.push({name:"glyph_"+St,type:"SID",value:ut})}return Pe}($,De),X.charStringsIndex=function(Qe){for(var Je=new Be.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),Pe=0;Pe<Qe.length;Pe+=1){var St=Qe.get(Pe),ut=function(lt){for(var ct=[],mt=lt.path,At=(ct.push({name:"width",type:"NUMBER",value:lt.advanceWidth}),0),Et=0,jt=0;jt<mt.commands.length;jt+=1){var Jt,ir,dr,Rr,Sr=void 0,gr=void 0,Zt=mt.commands[jt];(Zt=Zt.type==="Q"?{type:"C",x:Zt.x,y:Zt.y,x1:1/3*At+2/3*Zt.x1,y1:1/3*Et+2/3*Zt.y1,x2:1/3*Zt.x+2/3*Zt.x1,y2:1/3*Zt.y+2/3*Zt.y1}:Zt).type==="M"?(Sr=Math.round(Zt.x-At),gr=Math.round(Zt.y-Et),ct.push({name:"dx",type:"NUMBER",value:Sr}),ct.push({name:"dy",type:"NUMBER",value:gr}),ct.push({name:"rmoveto",type:"OP",value:21}),At=Math.round(Zt.x),Et=Math.round(Zt.y)):Zt.type==="L"?(Sr=Math.round(Zt.x-At),gr=Math.round(Zt.y-Et),ct.push({name:"dx",type:"NUMBER",value:Sr}),ct.push({name:"dy",type:"NUMBER",value:gr}),ct.push({name:"rlineto",type:"OP",value:5}),At=Math.round(Zt.x),Et=Math.round(Zt.y)):Zt.type==="C"&&(Jt=Math.round(Zt.x1-At),ir=Math.round(Zt.y1-Et),dr=Math.round(Zt.x2-Zt.x1),Rr=Math.round(Zt.y2-Zt.y1),Sr=Math.round(Zt.x-Zt.x2),gr=Math.round(Zt.y-Zt.y2),ct.push({name:"dx1",type:"NUMBER",value:Jt}),ct.push({name:"dy1",type:"NUMBER",value:ir}),ct.push({name:"dx2",type:"NUMBER",value:dr}),ct.push({name:"dy2",type:"NUMBER",value:Rr}),ct.push({name:"dx",type:"NUMBER",value:Sr}),ct.push({name:"dy",type:"NUMBER",value:gr}),ct.push({name:"rrcurveto",type:"OP",value:8}),At=Math.round(Zt.x),Et=Math.round(Zt.y))}return ct.push({name:"endchar",type:"OP",value:14}),ct}(St);Je.charStrings.push({name:St.name,type:"CHARSTRING",value:ut})}return Je}(S),X.privateDict=(Ve={},we=De,(Ae=new Be.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=er(Kt,Ve,we),Ae),X.stringIndex=function(Qe){var Je=new Be.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Je.strings=[];for(var Pe=0;Pe<Qe.length;Pe+=1)Je.strings.push({name:"string_"+Pe,type:"STRING",value:Qe[Pe]});return Je}(De),X.header.sizeOf()+X.nameIndex.sizeOf()+X.topDictIndex.sizeOf()+X.stringIndex.sizeOf()+X.globalSubrIndex.sizeOf());return K.charset=Ve,K.encoding=0,K.charStrings=K.charset+X.charsets.sizeOf(),K.private[1]=K.charStrings+X.charStringsIndex.sizeOf(),C=Vr(K,De),X.topDictIndex=kr(C),X},ci=function(S,C){var I={};return S=new Ie.Parser(S,C),I.version=S.parseVersion(),I.fontRevision=Math.round(1e3*S.parseFixed())/1e3,I.checkSumAdjustment=S.parseULong(),I.magicNumber=S.parseULong(),ee.argument(I.magicNumber===1594834165,"Font header has wrong magic number."),I.flags=S.parseUShort(),I.unitsPerEm=S.parseUShort(),I.created=S.parseLongDateTime(),I.modified=S.parseLongDateTime(),I.xMin=S.parseShort(),I.yMin=S.parseShort(),I.xMax=S.parseShort(),I.yMax=S.parseShort(),I.macStyle=S.parseUShort(),I.lowestRecPPEM=S.parseUShort(),I.fontDirectionHint=S.parseShort(),I.indexToLocFormat=S.parseShort(),I.glyphDataFormat=S.parseShort(),I},Jn=function(S){var C=Math.round(new Date().getTime()/1e3)+2082844800,I=C;return S.createdTimestamp&&(I=S.createdTimestamp+2082844800),new Be.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:I},{name:"modified",type:"LONGDATETIME",value:C},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],S)},Hr=function(S,C){var I={};return S=new Ie.Parser(S,C),I.version=S.parseVersion(),I.ascender=S.parseShort(),I.descender=S.parseShort(),I.lineGap=S.parseShort(),I.advanceWidthMax=S.parseUShort(),I.minLeftSideBearing=S.parseShort(),I.minRightSideBearing=S.parseShort(),I.xMaxExtent=S.parseShort(),I.caretSlopeRise=S.parseShort(),I.caretSlopeRun=S.parseShort(),I.caretOffset=S.parseShort(),S.relativeOffset+=8,I.metricDataFormat=S.parseShort(),I.numberOfHMetrics=S.parseUShort(),I},as=function(S){return new Be.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],S)},Le=function(S,C,I,X,K){for(var $,ne,we=new Ie.Parser(S,C),Ae=0;Ae<X;Ae+=1){Ae<I&&($=we.parseUShort(),ne=we.parseShort());var De=K.get(Ae);De.advanceWidth=$,De.leftSideBearing=ne}},xt=function(S){for(var C=new Be.Table("hmtx",[]),I=0;I<S.length;I+=1){var X=(K=S.get(I)).advanceWidth||0,K=K.leftSideBearing||0;C.fields.push({name:"advanceWidth_"+I,type:"USHORT",value:X}),C.fields.push({name:"leftSideBearing_"+I,type:"SHORT",value:K})}return C},ye=function(S){for(var C=new Be.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:S.length}]),I="",X=12+4*S.length,K=0;K<S.length;++K){var $=I.indexOf(S[K]);$<0&&($=I.length,I+=S[K]),C.fields.push({name:"offset "+K,type:"USHORT",value:X+$}),C.fields.push({name:"length "+K,type:"USHORT",value:S[K].length})}return C.fields.push({name:"stringPool",type:"CHARARRAY",value:I}),C},Re=function(S,C){for(var I=new Ie.Parser(S,C),X=I.parseULong(),K=(ee.argument(X===1,"Unsupported ltag table version."),I.skip("uLong",1),I.parseULong()),$=[],ne=0;ne<K;ne++){for(var we="",Ae=C+I.parseUShort(),De=I.parseUShort(),Ve=Ae;Ve<Ae+De;++Ve)we+=String.fromCharCode(S.getInt8(Ve));$.push(we)}return $},Ke=function(S,C){var I={};return S=new Ie.Parser(S,C),I.version=S.parseVersion(),I.numGlyphs=S.parseUShort(),I.version===1&&(I.maxPoints=S.parseUShort(),I.maxContours=S.parseUShort(),I.maxCompositePoints=S.parseUShort(),I.maxCompositeContours=S.parseUShort(),I.maxZones=S.parseUShort(),I.maxTwilightPoints=S.parseUShort(),I.maxStorage=S.parseUShort(),I.maxFunctionDefs=S.parseUShort(),I.maxInstructionDefs=S.parseUShort(),I.maxStackElements=S.parseUShort(),I.maxSizeOfInstructions=S.parseUShort(),I.maxComponentElements=S.parseUShort(),I.maxComponentDepth=S.parseUShort()),I},Oe=function(S){return new Be.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:S}])},Xe=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],rt={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},vt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},dt={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},Mt="utf-16",Dt={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Ot={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Tt(S,C,I){switch(S){case 0:return Mt;case 1:return Ot[I]||Dt[C];case 3:if(C===1||C===10)return Mt}}function It(S){var C,I={};for(C in S)I[S[C]]=parseInt(C);return I}function Xt(S,C,I,X,K,$){return new Be.Record("NameRecord",[{name:"platformID",type:"USHORT",value:S},{name:"encodingID",type:"USHORT",value:C},{name:"languageID",type:"USHORT",value:I},{name:"nameID",type:"USHORT",value:X},{name:"length",type:"USHORT",value:K},{name:"offset",type:"USHORT",value:$}])}function Qt(S,C){if((I=function($,ne){var we=$.length,Ae=ne.length-we+1;e:for(var De=0;De<Ae;De++)for(;De<Ae;De++){for(var Ve=0;Ve<we;Ve++)if(ne[De+Ve]!==$[Ve])continue e;return De}return-1}(S,C))<0)for(var I=C.length,X=0,K=S.length;X<K;++X)C.push(S[X]);return I}var Vt=function(S,C,I){for(var X={},K=new Ie.Parser(S,C),$=(C=K.parseUShort(),K.parseUShort()),ne=K.offset+K.parseUShort(),we=0;we<$;we++){var Ae=K.parseUShort(),De=K.parseUShort(),Ve=K.parseUShort(),Qe=K.parseUShort(),Je=(Qe=Xe[Qe]||Qe,K.parseUShort()),Pe=K.parseUShort(),St=function(ut,lt,ct){switch(ut){case 0:if(lt===65535)return"und";if(ct)return ct[lt];break;case 1:return rt[lt];case 3:return dt[lt]}}(Ae,Ve,I);(Ae=Tt(Ae,De,Ve))!==void 0&&St!==void 0&&(De=void 0,(De=Ae===Mt?te.UTF16(S,ne+Pe,Je):te.MACSTRING(S,ne+Pe,Je,Ae))&&((Ve=(Ve=X[Qe])===void 0?X[Qe]={}:Ve)[St]=De))}return C===1&&K.parseUShort(),X},ur=function(S,C){var I,X=[],K={},$=It(Xe);for(I in S){var ne=$[I];if(ne===void 0&&(ne=I),Je=parseInt(ne),isNaN(Je))throw new Error('Name table entry "'+I+'" does not exist, see nameTableNames for complete list.');K[Je]=S[I],X.push(Je)}for(var we=It(rt),Ae=It(dt),De=[],Ve=[],Qe=0;Qe<X.length;Qe++){var Je,Pe,St=K[Je=X[Qe]];for(Pe in St){var ut=St[Pe],lt=1,ct=we[Pe],mt=vt[ct],At=Tt(lt,mt,ct),Et=((At=se.MACSTRING(ut,At))===void 0&&(lt=0,(ct=C.indexOf(Pe))<0&&(ct=C.length,C.push(Pe)),mt=4,At=se.UTF16(ut)),Qt(At,Ve));(lt=(De.push(Xt(lt,mt,ct,Je,At.length,Et)),Ae[Pe]))!==void 0&&(ct=Qt(mt=se.UTF16(ut),Ve),De.push(Xt(3,1,lt,Je,mt.length,ct)))}}De.sort(function(ir,dr){return ir.platformID-dr.platformID||ir.encodingID-dr.encodingID||ir.languageID-dr.languageID||ir.nameID-dr.nameID});for(var jt=new Be.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:De.length},{name:"stringOffset",type:"USHORT",value:6+12*De.length}]),Jt=0;Jt<De.length;Jt++)jt.fields.push({name:"record_"+Jt,type:"RECORD",value:De[Jt]});return jt.fields.push({name:"strings",type:"LITERAL",value:Ve}),jt},zt=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Xr=function(S,C){var I={},X=new Ie.Parser(S,C);I.version=X.parseUShort(),I.xAvgCharWidth=X.parseShort(),I.usWeightClass=X.parseUShort(),I.usWidthClass=X.parseUShort(),I.fsType=X.parseUShort(),I.ySubscriptXSize=X.parseShort(),I.ySubscriptYSize=X.parseShort(),I.ySubscriptXOffset=X.parseShort(),I.ySubscriptYOffset=X.parseShort(),I.ySuperscriptXSize=X.parseShort(),I.ySuperscriptYSize=X.parseShort(),I.ySuperscriptXOffset=X.parseShort(),I.ySuperscriptYOffset=X.parseShort(),I.yStrikeoutSize=X.parseShort(),I.yStrikeoutPosition=X.parseShort(),I.sFamilyClass=X.parseShort(),I.panose=[];for(var K=0;K<10;K++)I.panose[K]=X.parseByte();return I.ulUnicodeRange1=X.parseULong(),I.ulUnicodeRange2=X.parseULong(),I.ulUnicodeRange3=X.parseULong(),I.ulUnicodeRange4=X.parseULong(),I.achVendID=String.fromCharCode(X.parseByte(),X.parseByte(),X.parseByte(),X.parseByte()),I.fsSelection=X.parseUShort(),I.usFirstCharIndex=X.parseUShort(),I.usLastCharIndex=X.parseUShort(),I.sTypoAscender=X.parseShort(),I.sTypoDescender=X.parseShort(),I.sTypoLineGap=X.parseShort(),I.usWinAscent=X.parseUShort(),I.usWinDescent=X.parseUShort(),1<=I.version&&(I.ulCodePageRange1=X.parseULong(),I.ulCodePageRange2=X.parseULong()),2<=I.version&&(I.sxHeight=X.parseShort(),I.sCapHeight=X.parseShort(),I.usDefaultChar=X.parseUShort(),I.usBreakChar=X.parseUShort(),I.usMaxContent=X.parseUShort()),I},hr=function(S){return new Be.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],S)},wn=function(S){for(var C=0;C<zt.length;C+=1){var I=zt[C];if(S>=I.begin&&S<I.end)return C}return-1},Gi=function(S,C){var I={},X=new Ie.Parser(S,C);switch(I.version=X.parseVersion(),I.italicAngle=X.parseFixed(),I.underlinePosition=X.parseShort(),I.underlineThickness=X.parseShort(),I.isFixedPitch=X.parseULong(),I.minMemType42=X.parseULong(),I.maxMemType42=X.parseULong(),I.minMemType1=X.parseULong(),I.maxMemType1=X.parseULong(),I.version){case 1:I.names=fe.slice();break;case 2:I.numberOfGlyphs=X.parseUShort(),I.glyphNameIndex=new Array(I.numberOfGlyphs);for(var K=0;K<I.numberOfGlyphs;K++)I.glyphNameIndex[K]=X.parseUShort();I.names=[];for(var $,ne=0;ne<I.numberOfGlyphs;ne++)I.glyphNameIndex[ne]>=fe.length&&($=X.parseChar(),I.names.push(X.parseString($)));break;case 2.5:I.numberOfGlyphs=X.parseUShort(),I.offset=new Array(I.numberOfGlyphs);for(var we=0;we<I.numberOfGlyphs;we++)I.offset[we]=X.parseChar()}return I},jr=function(){return new Be.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])},nn=new Array(9),mr=(nn[1]=function(){var S=this.offset+this.relativeOffset,C=this.parseUShort();return C===1?{substFormat:1,coverage:this.parsePointer(me.coverage),deltaGlyphId:this.parseUShort()}:C===2?{substFormat:2,coverage:this.parsePointer(me.coverage),substitute:this.parseOffset16List()}:void ee.assert(!1,"0x"+S.toString(16)+": lookup type 1 format must be 1 or 2.")},nn[2]=function(){var S=this.parseUShort();return ee.argument(S===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:S,coverage:this.parsePointer(me.coverage),sequences:this.parseListOfLists()}},nn[3]=function(){var S=this.parseUShort();return ee.argument(S===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:S,coverage:this.parsePointer(me.coverage),alternateSets:this.parseListOfLists()}},nn[4]=function(){var S=this.parseUShort();return ee.argument(S===1,"GSUB ligature table identifier-format must be 1"),{substFormat:S,coverage:this.parsePointer(me.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:me.uShort,lookupListIndex:me.uShort});nn[5]=function(){var S,C,I=this.offset+this.relativeOffset,X=this.parseUShort();return X===1?{substFormat:X,coverage:this.parsePointer(me.coverage),ruleSets:this.parseListOfLists(function(){var K=this.parseUShort(),$=this.parseUShort();return{input:this.parseUShortList(K-1),lookupRecords:this.parseRecordList($,mr)}})}:X===2?{substFormat:X,coverage:this.parsePointer(me.coverage),classDef:this.parsePointer(me.classDef),classSets:this.parseListOfLists(function(){var K=this.parseUShort(),$=this.parseUShort();return{classes:this.parseUShortList(K-1),lookupRecords:this.parseRecordList($,mr)}})}:X===3?(S=this.parseUShort(),C=this.parseUShort(),{substFormat:X,coverages:this.parseList(S,me.pointer(me.coverage)),lookupRecords:this.parseRecordList(C,mr)}):void ee.assert(!1,"0x"+I.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},nn[6]=function(){var S=this.offset+this.relativeOffset,C=this.parseUShort();return C===1?{substFormat:1,coverage:this.parsePointer(me.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(mr)}})}:C===2?{substFormat:2,coverage:this.parsePointer(me.coverage),backtrackClassDef:this.parsePointer(me.classDef),inputClassDef:this.parsePointer(me.classDef),lookaheadClassDef:this.parsePointer(me.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(mr)}})}:C===3?{substFormat:3,backtrackCoverage:this.parseList(me.pointer(me.coverage)),inputCoverage:this.parseList(me.pointer(me.coverage)),lookaheadCoverage:this.parseList(me.pointer(me.coverage)),lookupRecords:this.parseRecordList(mr)}:void ee.assert(!1,"0x"+S.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},nn[7]=function(){var S=this.parseUShort(),C=(S=(ee.argument(S===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),new me(this.data,this.offset+this.parseULong()));return{substFormat:1,lookupType:S,extension:nn[S].call(C)}},nn[8]=function(){var S=this.parseUShort();return ee.argument(S===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:S,coverage:this.parsePointer(me.coverage),backtrackCoverage:this.parseList(me.pointer(me.coverage)),lookaheadCoverage:this.parseList(me.pointer(me.coverage)),substitutes:this.parseUShortList()}};var sn=new Array(9);sn[1]=function(S){return S.substFormat===1?new Be.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Be.Coverage(S.coverage)},{name:"deltaGlyphID",type:"USHORT",value:S.deltaGlyphId}]):new Be.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Be.Coverage(S.coverage)}].concat(Be.ushortList("substitute",S.substitute)))},sn[3]=function(S){return ee.assert(S.substFormat===1,"Lookup type 3 substFormat must be 1."),new Be.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Be.Coverage(S.coverage)}].concat(Be.tableList("altSet",S.alternateSets,function(C){return new Be.Table("alternateSetTable",Be.ushortList("alternate",C))})))},sn[4]=function(S){return ee.assert(S.substFormat===1,"Lookup type 4 substFormat must be 1."),new Be.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Be.Coverage(S.coverage)}].concat(Be.tableList("ligSet",S.ligatureSets,function(C){return new Be.Table("ligatureSetTable",Be.tableList("ligature",C,function(I){return new Be.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:I.ligGlyph}].concat(Be.ushortList("component",I.components,I.components.length+1)))}))})))};var an=function(S,C){return C=(S=new me(S,C=C||0)).parseVersion(1),ee.argument(C===1||C===1.1,"Unsupported GSUB table version."),C===1?{version:C,scripts:S.parseScriptList(),features:S.parseFeatureList(),lookups:S.parseLookupList(nn)}:{version:C,scripts:S.parseScriptList(),features:S.parseFeatureList(),lookups:S.parseLookupList(nn),variations:S.parseFeatureVariationsList()}},dn=function(S){return new Be.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Be.ScriptList(S.scripts)},{name:"features",type:"TABLE",value:new Be.FeatureList(S.features)},{name:"lookups",type:"TABLE",value:new Be.LookupList(S.lookups,sn)}])},gn=function(S,C){for(var I=new Ie.Parser(S,C),X=I.parseULong(),K=(ee.argument(X===1,"Unsupported META table version."),I.parseULong(),I.parseULong(),I.parseULong()),$={},ne=0;ne<K;ne++){var we=I.parseTag(),Ae=I.parseULong(),De=I.parseULong();Ae=te.UTF8(S,C+Ae,De),$[we]=Ae}return $},fi=function(S){var C,I=Object.keys(S).length,X="",K=16+12*I,$=new Be.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:K},{name:"numTags",type:"ULONG",value:I}]);for(C in S){var ne=X.length;X+=S[C],$.fields.push({name:"tag "+C,type:"TAG",value:C}),$.fields.push({name:"offset "+C,type:"ULONG",value:K+ne}),$.fields.push({name:"length "+C,type:"ULONG",value:S[C].length})}return $.fields.push({name:"stringPool",type:"CHARARRAY",value:X}),$};function di(S){return Math.log(S)/Math.log(2)|0}function jl(S){for(;S.length%4!=0;)S.push(0);for(var C=0,I=0;I<S.length;I+=4)C+=(S[I]<<24)+(S[I+1]<<16)+(S[I+2]<<8)+S[I+3];return C%Math.pow(2,32)}function Rl(S,C,I,X){return new Be.Record("Table Record",[{name:"tag",type:"TAG",value:S!==void 0?S:""},{name:"checkSum",type:"ULONG",value:C!==void 0?C:0},{name:"offset",type:"ULONG",value:I!==void 0?I:0},{name:"length",type:"ULONG",value:X!==void 0?X:0}])}function Cl(S){for(var C=new Be.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),I=(C.tables=S,C.numTables=S.length,Math.pow(2,di(C.numTables))),X=(C.searchRange=16*I,C.entrySelector=di(I),C.rangeShift=16*C.numTables-C.searchRange,[]),K=[],$=C.sizeOf()+Rl().sizeOf()*C.numTables;$%4!=0;)$+=1,K.push({name:"padding",type:"BYTE",value:0});for(var ne=0;ne<S.length;ne+=1){var we=S[ne],Ae=(ee.argument(we.tableName.length===4,"Table name"+we.tableName+" is invalid."),we.sizeOf()),De=Rl(we.tableName,jl(we.encode()),$,Ae);for(X.push({name:De.tag+" Table Record",type:"RECORD",value:De}),K.push({name:we.tableName+" table",type:"RECORD",value:we}),$+=Ae,ee.argument(!isNaN($),"Something went wrong calculating the offset.");$%4!=0;)$+=1,K.push({name:"padding",type:"BYTE",value:0})}return X.sort(function(Ve,Qe){return Ve.value.tag>Qe.value.tag?1:-1}),C.fields=C.fields.concat(X),C.fields=C.fields.concat(K),C}function nc(S,C,I){for(var X=0;X<C.length;X+=1){var K=S.charToGlyphIndex(C[X]);if(0<K)return S.glyphs.get(K).getMetrics()}return I}var xd=function(S){for(var C,I=[],X=[],K=[],$=[],ne=[],we=[],Ae=[],De=0,Ve=0,Qe=0,Je=0,Pe=0,St=0;St<S.glyphs.length;St+=1){var ut=S.glyphs.get(St),lt=0|ut.unicode;if(isNaN(ut.advanceWidth))throw new Error("Glyph "+ut.name+" ("+St+"): advanceWidth is not a number.");if((lt<C||C===void 0)&&0<lt&&(C=lt),De<lt&&(De=lt),(lt=wn(lt))<32)Ve|=1<<lt;else if(lt<64)Qe|=1<<lt-32;else if(lt<96)Je|=1<<lt-64;else{if(!(lt<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Pe|=1<<lt-96}ut.name!==".notdef"&&(lt=ut.getMetrics(),I.push(lt.xMin),X.push(lt.yMin),K.push(lt.xMax),$.push(lt.yMax),we.push(lt.leftSideBearing),Ae.push(lt.rightSideBearing),ne.push(ut.advanceWidth))}var ct,mt={xMin:Math.min.apply(null,I),yMin:Math.min.apply(null,X),xMax:Math.max.apply(null,K),yMax:Math.max.apply(null,$),advanceWidthMax:Math.max.apply(null,ne),advanceWidthAvg:function(on){for(var Ta=0,Aa=0;Aa<on.length;Aa+=1)Ta+=on[Aa];return Ta/on.length}(ne),minLeftSideBearing:Math.min.apply(null,we),maxLeftSideBearing:Math.max.apply(null,we),minRightSideBearing:Math.min.apply(null,Ae)},At=(mt.ascender=S.ascender,mt.descender=S.descender,Jn({flags:3,unitsPerEm:S.unitsPerEm,xMin:mt.xMin,yMin:mt.yMin,xMax:mt.xMax,yMax:mt.yMax,lowestRecPPEM:3,createdTimestamp:S.createdTimestamp})),Et=as({ascender:mt.ascender,descender:mt.descender,advanceWidthMax:mt.advanceWidthMax,minLeftSideBearing:mt.minLeftSideBearing,minRightSideBearing:mt.minRightSideBearing,xMaxExtent:mt.maxLeftSideBearing+(mt.xMax-mt.xMin),numberOfHMetrics:S.glyphs.length}),jt=Oe(S.glyphs.length),Jt=hr({xAvgCharWidth:Math.round(mt.advanceWidthAvg),usWeightClass:S.tables.os2.usWeightClass,usWidthClass:S.tables.os2.usWidthClass,usFirstCharIndex:C,usLastCharIndex:De,ulUnicodeRange1:Ve,ulUnicodeRange2:Qe,ulUnicodeRange3:Je,ulUnicodeRange4:Pe,fsSelection:S.tables.os2.fsSelection,sTypoAscender:mt.ascender,sTypoDescender:mt.descender,sTypoLineGap:0,usWinAscent:mt.yMax,usWinDescent:Math.abs(mt.yMin),ulCodePageRange1:1,sxHeight:nc(S,"xyvw",{yMax:Math.round(mt.ascender/2)}).yMax,sCapHeight:nc(S,"HIKLEFJMNTZBDPRAGOQSUVWXY",mt).yMax,usDefaultChar:S.hasChar(" ")?32:0,usBreakChar:S.hasChar(" ")?32:0}),ir=xt(S.glyphs),dr=it(S.glyphs),Rr=(Wr=S.getEnglishName("fontFamily"))+" "+(br=S.getEnglishName("fontSubfamily")),Sr=(Sr=S.getEnglishName("postScriptName"))||Wr.replace(/\s/g,"")+"-"+br,gr={};for(ct in S.names)gr[ct]=S.names[ct];gr.uniqueID||(gr.uniqueID={en:S.getEnglishName("manufacturer")+":"+Rr}),gr.postScriptName||(gr.postScriptName={en:Sr}),gr.preferredFamily||(gr.preferredFamily=S.names.fontFamily),gr.preferredSubfamily||(gr.preferredSubfamily=S.names.fontSubfamily);var Zt=ur(gr,Cr=[]),Cr=0<Cr.length?ye(Cr):void 0,Er=jr(),Wr=(Rr=Gn(S.glyphs,{version:S.getEnglishName("version"),fullName:Rr,familyName:Wr,weightName:br,postScriptName:Sr,unitsPerEm:S.unitsPerEm,fontBBox:[0,mt.yMin,mt.ascender,mt.advanceWidthMax]}),S.metas&&0<Object.keys(S.metas).length?fi(S.metas):void 0),br=[At,Et,jt,Jt,Zt,dr,Er,Rr,ir];Cr&&br.push(Cr),S.tables.gsub&&br.push(dn(S.tables.gsub)),Wr&&br.push(Wr);for(var Fr=jl((Sr=Cl(br)).encode()),Zr=Sr.fields,vn=!1,Dr=0;Dr<Zr.length;Dr+=1)if(Zr[Dr].name==="head table"){Zr[Dr].value.checkSumAdjustment=2981146554-Fr,vn=!0;break}if(vn)return Sr;throw new Error("Could not find head table with checkSum to adjust.")};function ks(S,C){for(var I=0,X=S.length-1;I<=X;){var K=I+X>>>1,$=S[K].tag;if($===C)return K;$<C?I=1+K:X=K-1}return-I-1}function uo(S,C){for(var I=0,X=S.length-1;I<=X;){var K=I+X>>>1,$=S[K];if($===C)return K;$<C?I=1+K:X=K-1}return-I-1}function co(S,C){for(var I=0,X=S.length-1;I<=X;){var K,$=I+X>>>1,ne=(K=S[$]).start;if(ne===C)return K;ne<C?I=1+$:X=$-1}if(0<I)return C>(K=S[I-1]).end?0:K}function Ci(S,C){this.font=S,this.tableName=C}function Di(S){Ci.call(this,S,"gpos")}function $n(S){Ci.call(this,S,"gsub")}function fo(S,C,I){for(var X=S.subtables,K=0;K<X.length;K++){var $=X[K];if($.substFormat===C)return $}if(I)return X.push(I),I}function Dl(S){for(var C=new ArrayBuffer(S.length),I=new Uint8Array(C),X=0;X<S.length;++X)I[X]=S[X];return C}function hi(S,C){if(!S)throw C}function pi(S,C,I,X,K){var $=0<(C&X)?($=S.parseByte(),I+($=(C&K)==0?-$:$)):0<(C&K)?I:I+S.parseShort();return $}function Ll(S,C,I){var X,K=new Ie.Parser(C,I);if(S.numberOfContours=K.parseShort(),S._xMin=K.parseShort(),S._yMin=K.parseShort(),S._xMax=K.parseShort(),S._yMax=K.parseShort(),0<S.numberOfContours){for(var $=S.endPointIndices=[],ne=0;ne<S.numberOfContours;ne+=1)$.push(K.parseUShort());S.instructionLength=K.parseUShort(),S.instructions=[];for(var we=0;we<S.instructionLength;we+=1)S.instructions.push(K.parseByte());for(var Ae=$[$.length-1]+1,De=[],Ve=0;Ve<Ae;Ve+=1)if(X=K.parseByte(),De.push(X),0<(8&X))for(var Qe=K.parseByte(),Je=0;Je<Qe;Je+=1)De.push(X),Ve+=1;if(ee.argument(De.length===Ae,"Bad flags."),0<$.length){var Pe,St=[];if(0<Ae){for(var ut=0;ut<Ae;ut+=1)X=De[ut],(Pe={}).onCurve=!!(1&X),Pe.lastPointOfContour=0<=$.indexOf(ut),St.push(Pe);for(var lt=0,ct=0;ct<Ae;ct+=1)X=De[ct],(Pe=St[ct]).x=pi(K,X,lt,2,16),lt=Pe.x;for(var mt=0,At=0;At<Ae;At+=1)X=De[At],(Pe=St[At]).y=pi(K,X,mt,4,32),mt=Pe.y}S.points=St}else S.points=[]}else if(S.numberOfContours===0)S.points=[];else{S.isComposite=!0,S.points=[],S.components=[];for(var Et=!0;Et;){De=K.parseUShort();var jt={glyphIndex:K.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&De)?0<(2&De)?(jt.dx=K.parseShort(),jt.dy=K.parseShort()):jt.matchedPoints=[K.parseUShort(),K.parseUShort()]:0<(2&De)?(jt.dx=K.parseChar(),jt.dy=K.parseChar()):jt.matchedPoints=[K.parseByte(),K.parseByte()],0<(8&De)?jt.xScale=jt.yScale=K.parseF2Dot14():0<(64&De)?(jt.xScale=K.parseF2Dot14(),jt.yScale=K.parseF2Dot14()):0<(128&De)&&(jt.xScale=K.parseF2Dot14(),jt.scale01=K.parseF2Dot14(),jt.scale10=K.parseF2Dot14(),jt.yScale=K.parseF2Dot14()),S.components.push(jt),Et=!!(32&De)}if(256&De){S.instructionLength=K.parseUShort(),S.instructions=[];for(var Jt=0;Jt<S.instructionLength;Jt+=1)S.instructions.push(K.parseByte())}}}function os(S,C){for(var I=[],X=0;X<S.length;X+=1){var K=S[X];K={x:C.xScale*K.x+C.scale01*K.y+C.dx,y:C.scale10*K.x+C.yScale*K.y+C.dy,onCurve:K.onCurve,lastPointOfContour:K.lastPointOfContour},I.push(K)}return I}function Li(S){var C=new W;if(S)for(var I=function(Qe){for(var Je=[],Pe=[],St=0;St<Qe.length;St+=1){var ut=Qe[St];Pe.push(ut),ut.lastPointOfContour&&(Je.push(Pe),Pe=[])}return ee.argument(Pe.length===0,"There are still points left in the current contour."),Je}(S),X=0;X<I.length;++X){var K,$=I[X],ne=$[$.length-1],we=$[0];ne.onCurve?C.moveTo(ne.x,ne.y):we.onCurve?C.moveTo(we.x,we.y):(K={x:.5*(ne.x+we.x),y:.5*(ne.y+we.y)},C.moveTo(K.x,K.y));for(var Ae=0;Ae<$.length;++Ae){var De,Ve=ne;ne=we,we=$[(Ae+1)%$.length],ne.onCurve?C.lineTo(ne.x,ne.y):(De=we,Ve.onCurve||(ne.x,Ve.x,ne.y,Ve.y),we.onCurve||(De={x:.5*(ne.x+we.x),y:.5*(ne.y+we.y)}),C.quadraticCurveTo(ne.x,ne.y,De.x,De.y))}C.closePath()}return C}function Ol(S,C){if(C.isComposite)for(var I=0;I<C.components.length;I+=1){var X=C.components[I],K=S.get(X.glyphIndex);if(K.getPath(),K.points){var $=void 0;if(X.matchedPoints===void 0)$=os(K.points,X);else{if(X.matchedPoints[0]>C.points.length-1||X.matchedPoints[1]>K.points.length-1)throw Error("Matched points out of range in "+C.name);var ne=C.points[X.matchedPoints[0]],we=os([we=K.points[X.matchedPoints[1]]],X={xScale:X.xScale,scale01:X.scale01,scale10:X.scale10,yScale:X.yScale,dx:0,dy:0})[0];X.dx=ne.x-we.x,X.dy=ne.y-we.y,$=os(K.points,X)}C.points=C.points.concat($)}}return Li(C.points)}(Di.prototype=Ci.prototype={searchTag:ks,binSearch:uo,getTable:function(S){var C=this.font.tables[this.tableName];return!C&&S?this.font.tables[this.tableName]=this.createDefaultTable():C},getScriptNames:function(){var S=this.getTable();return S?S.scripts.map(function(C){return C.tag}):[]},getDefaultScriptName:function(){var S=this.getTable();if(S){for(var C=!1,I=0;I<S.scripts.length;I++){var X=S.scripts[I].tag;if(X==="DFLT")return X;X==="latn"&&(C=!0)}return C?"latn":void 0}},getScriptTable:function(S,C){var I,X=this.getTable(C);if(X)return I=X.scripts,0<=(X=ks(X.scripts,S=S||"DFLT"))?I[X].script:C?(I.splice(-1-X,0,C={tag:S,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),C.script):void 0},getLangSysTable:function(S,C,I){var X;if(S=this.getScriptTable(S,I))return C&&C!=="dflt"&&C!=="DFLT"?0<=(X=ks(S.langSysRecords,C))?S.langSysRecords[X].langSys:I?(S.langSysRecords.splice(-1-X,0,I={tag:C,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),I.langSys):void 0:S.defaultLangSys},getFeatureTable:function(S,C,I,X){if(S=this.getLangSysTable(S,C,X)){for(var K,$=S.featureIndexes,ne=this.font.tables[this.tableName].features,we=0;we<$.length;we++)if((K=ne[$[we]]).tag===I)return K.feature;if(X)return C=ne.length,ee.assert(C===0||I>=ne[C-1].tag,"Features must be added in alphabetical order."),ne.push(K={tag:I,feature:{params:0,lookupListIndexes:[]}}),$.push(C),K.feature}},getLookupTables:function(S,C,I,X,K){var $=[];if(S=this.getFeatureTable(S,C,I,K)){for(var ne,we=S.lookupListIndexes,Ae=this.font.tables[this.tableName].lookups,De=0;De<we.length;De++)(ne=Ae[we[De]]).lookupType===X&&$.push(ne);if($.length===0&&K)return C=Ae.length,Ae.push(ne={lookupType:X,lookupFlag:0,subtables:[],markFilteringSet:void 0}),we.push(C),[ne]}return $},getGlyphClass:function(S,C){switch(S.format){case 1:return S.startGlyph<=C&&C<S.startGlyph+S.classes.length?S.classes[C-S.startGlyph]:0;case 2:var I=co(S.ranges,C);return I?I.classId:0}},getCoverageIndex:function(S,C){switch(S.format){case 1:var I=uo(S.glyphs,C);return 0<=I?I:-1;case 2:return(I=co(S.ranges,C))?I.index+C-I.start:-1}},expandCoverage:function(S){if(S.format===1)return S.glyphs;for(var C=[],I=S.ranges,X=0;X<I.length;X++)for(var K=I[X],$=K.start,ne=K.end,we=$;we<=ne;we++)C.push(we);return C}}).init=function(){var S=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(S)},Di.prototype.getKerningValue=function(S,C,I){for(var X=0;X<S.length;X++)for(var K=S[X].subtables,$=0;$<K.length;$++){var ne=K[$],we=this.getCoverageIndex(ne.coverage,C);if(!(we<0))switch(ne.posFormat){case 1:for(var Ae=ne.pairSets[we],De=0;De<Ae.length;De++){var Ve=Ae[De];if(Ve.secondGlyph===I)return Ve.value1&&Ve.value1.xAdvance||0}break;case 2:var Qe=this.getGlyphClass(ne.classDef1,C),Je=this.getGlyphClass(ne.classDef2,I);return(Qe=ne.classRecords[Qe][Je]).value1&&Qe.value1.xAdvance||0}}return 0},Di.prototype.getKerningTables=function(S,C){if(this.font.tables.gpos)return this.getLookupTables(S,C,"kern",2)},($n.prototype=Ci.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},$n.prototype.getSingle=function(S,C,I){for(var X=[],K=this.getLookupTables(C,I,S,1),$=0;$<K.length;$++)for(var ne=K[$].subtables,we=0;we<ne.length;we++){var Ae=ne[we],De=this.expandCoverage(Ae.coverage),Ve=void 0;if(Ae.substFormat===1){var Qe=Ae.deltaGlyphId;for(Ve=0;Ve<De.length;Ve++){var Je=De[Ve];X.push({sub:Je,by:Je+Qe})}}else{var Pe=Ae.substitute;for(Ve=0;Ve<De.length;Ve++)X.push({sub:De[Ve],by:Pe[Ve]})}}return X},$n.prototype.getAlternates=function(S,C,I){for(var X=[],K=this.getLookupTables(C,I,S,3),$=0;$<K.length;$++)for(var ne=K[$].subtables,we=0;we<ne.length;we++)for(var Ae=ne[we],De=this.expandCoverage(Ae.coverage),Ve=Ae.alternateSets,Qe=0;Qe<De.length;Qe++)X.push({sub:De[Qe],by:Ve[Qe]});return X},$n.prototype.getLigatures=function(S,C,I){for(var X=[],K=this.getLookupTables(C,I,S,4),$=0;$<K.length;$++)for(var ne=K[$].subtables,we=0;we<ne.length;we++)for(var Ae=ne[we],De=this.expandCoverage(Ae.coverage),Ve=Ae.ligatureSets,Qe=0;Qe<De.length;Qe++)for(var Je=De[Qe],Pe=Ve[Qe],St=0;St<Pe.length;St++){var ut=Pe[St];X.push({sub:[Je].concat(ut.components),by:ut.ligGlyph})}return X},$n.prototype.addSingle=function(S,C,I,X){I=fo(this.getLookupTables(I,X,S,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),ee.assert(I.coverage.format===1,"Ligature: unable to modify coverage table format "+I.coverage.format),X=C.sub,(S=this.binSearch(I.coverage.glyphs,X))<0&&(I.coverage.glyphs.splice(S=-1-S,0,X),I.substitute.splice(S,0,0)),I.substitute[S]=C.by},$n.prototype.addAlternate=function(S,C,I,X){I=fo(this.getLookupTables(I,X,S,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),ee.assert(I.coverage.format===1,"Ligature: unable to modify coverage table format "+I.coverage.format),X=C.sub,(S=this.binSearch(I.coverage.glyphs,X))<0&&(I.coverage.glyphs.splice(S=-1-S,0,X),I.alternateSets.splice(S,0,0)),I.alternateSets[S]=C.by},$n.prototype.addLigature=function(S,C,I,X){(X=(I=this.getLookupTables(I,X,S,4,!0)[0]).subtables[0])||(I.subtables[0]=X={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),ee.assert(X.coverage.format===1,"Ligature: unable to modify coverage table format "+X.coverage.format),S=C.sub[0];var K=C.sub.slice(1);if(I={ligGlyph:C.by,components:K},0<=(C=this.binSearch(X.coverage.glyphs,S))){for(var $=X.ligatureSets[C],ne=0;ne<$.length;ne++)if(function(we,Ae){var De=we.length;if(De===Ae.length){for(var Ve=0;Ve<De;Ve++)if(we[Ve]!==Ae[Ve])return;return 1}}($[ne].components,K))return;$.push(I)}else X.coverage.glyphs.splice(C=-1-C,0,S),X.ligatureSets.splice(C,0,[I])},$n.prototype.getFeature=function(S,C,I){if(/ss\d\d/.test(S))return this.getSingle(S,C,I);switch(S){case"aalt":case"salt":return this.getSingle(S,C,I).concat(this.getAlternates(S,C,I));case"dlig":case"liga":case"rlig":return this.getLigatures(S,C,I)}},$n.prototype.add=function(S,C,I,X){if(/ss\d\d/.test(S))return this.addSingle(S,C,I,X);switch(S){case"aalt":case"salt":return typeof C.by=="number"?this.addSingle(S,C,I,X):this.addAlternate(S,C,I,X);case"dlig":case"liga":case"rlig":return this.addLigature(S,C,I,X)}};var wa={getPath:Li,parse:function(S,C,I,X){for(var K=new Ge.GlyphSet(X),$=0;$<I.length-1;$+=1){var ne=I[$];ne!==I[$+1]?K.push($,Ge.ttfGlyphLoader(X,$,Ll,S,C+ne,Ol)):K.push($,Ge.glyphLoader(X,$))}return K}};function Pl(S){this.font=S,this.getCommands=function(C){return wa.getPath(C).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function ho(S){return S}function Ma(S){return Math.sign(S)*Math.round(Math.abs(S))}function ic(S){return Math.sign(S)*Math.round(Math.abs(2*S))/2}function Ln(S){return Math.sign(S)*(Math.round(Math.abs(S)+.5)-.5)}function ls(S){return Math.sign(S)*Math.ceil(Math.abs(S))}function po(S){return Math.sign(S)*Math.floor(Math.abs(S))}function Fs(S){var C=this.srPeriod,I=this.srPhase,X=1;return S<0&&(S=-S,X=-1),S+=this.srThreshold-I,S=Math.trunc(S/C)*C,(S+=I)<0?I*X:S*X}var mi={x:1,y:0,axis:"x",distance:function(S,C,I,X){return(I?S.xo:S.x)-(X?C.xo:C.x)},interpolate:function(S,C,I,X){var K,$,ne,we,Ae,De,Ve;if(!X||X===this)return K=S.xo-C.xo,$=S.xo-I.xo,Ae=C.x-C.xo,De=I.x-I.xo,(Ve=(ne=Math.abs(K))+(we=Math.abs($)))===0?void(S.x=S.xo+(Ae+De)/2):void(S.x=S.xo+(Ae*we+De*ne)/Ve);K=X.distance(S,C,!0,!0),$=X.distance(S,I,!0,!0),Ae=X.distance(C,C,!1,!0),De=X.distance(I,I,!1,!0),(Ve=(ne=Math.abs(K))+(we=Math.abs($)))===0?mi.setRelative(S,S,(Ae+De)/2,X,!0):mi.setRelative(S,S,(Ae*we+De*ne)/Ve,X,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(S,C,I,X,K){var $,ne;X&&X!==this?($=K?C.xo:C.x,ne=K?C.yo:C.y,$+=I*X.x,ne+=I*X.y,S.x=$+(S.y-ne)/X.normalSlope):S.x=(K?C.xo:C.x)+I},slope:0,touch:function(S){S.xTouched=!0},touched:function(S){return S.xTouched},untouch:function(S){S.xTouched=!1}},ei={x:0,y:1,axis:"y",distance:function(S,C,I,X){return(I?S.yo:S.y)-(X?C.yo:C.y)},interpolate:function(S,C,I,X){var K,$,ne,we,Ae,De,Ve;if(!X||X===this)return K=S.yo-C.yo,$=S.yo-I.yo,Ae=C.y-C.yo,De=I.y-I.yo,(Ve=(ne=Math.abs(K))+(we=Math.abs($)))===0?void(S.y=S.yo+(Ae+De)/2):void(S.y=S.yo+(Ae*we+De*ne)/Ve);K=X.distance(S,C,!0,!0),$=X.distance(S,I,!0,!0),Ae=X.distance(C,C,!1,!0),De=X.distance(I,I,!1,!0),(Ve=(ne=Math.abs(K))+(we=Math.abs($)))===0?ei.setRelative(S,S,(Ae+De)/2,X,!0):ei.setRelative(S,S,(Ae*we+De*ne)/Ve,X,!0)},normalSlope:0,setRelative:function(S,C,I,X,K){var $,ne;X&&X!==this?($=K?C.xo:C.x,ne=K?C.yo:C.y,$+=I*X.x,ne+=I*X.y,S.y=ne+X.normalSlope*(S.x-$)):S.y=(K?C.yo:C.y)+I},slope:Number.POSITIVE_INFINITY,touch:function(S){S.yTouched=!0},touched:function(S){return S.yTouched},untouch:function(S){S.yTouched=!1}};function us(S,C){this.x=S,this.y=C,this.axis=void 0,this.slope=C/S,this.normalSlope=-S/C,Object.freeze(this)}function Oi(S,C){var I=Math.sqrt(S*S+C*C);return C/=I,(S/=I)==1&&C===0?mi:S===0&&C===1?ei:new us(S,C)}function Hn(S,C,I,X){this.x=this.xo=Math.round(64*S)/64,this.y=this.yo=Math.round(64*C)/64,this.lastPointOfContour=I,this.onCurve=X,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(mi),Object.freeze(ei),us.prototype.distance=function(S,C,I,X){return this.x*mi.distance(S,C,I,X)+this.y*ei.distance(S,C,I,X)},us.prototype.interpolate=function(S,C,I,X){var K=X.distance(S,C,!0,!0),$=X.distance(S,I,!0,!0),ne=(C=X.distance(C,C,!1,!0),I=X.distance(I,I,!1,!0),(K=Math.abs(K))+($=Math.abs($)));ne===0?this.setRelative(S,S,(C+I)/2,X,!0):this.setRelative(S,S,(C*$+I*K)/ne,X,!0)},us.prototype.setRelative=function(S,C,I,X,K){var $=K?C.xo:C.x,ne=(K=K?C.yo:C.y,C=$+I*(X=X||this).x,$=K+I*X.y,K=X.normalSlope,I=this.slope,X=S.x,S.y);S.x=(I*X-K*C+$-ne)/(I-K),S.y=I*(S.x-X)+ne},us.prototype.touch=function(S){S.xTouched=!0,S.yTouched=!0},Hn.prototype.nextTouched=function(S){for(var C=this.nextPointOnContour;!S.touched(C)&&C!==this;)C=C.nextPointOnContour;return C},Hn.prototype.prevTouched=function(S){for(var C=this.prevPointOnContour;!S.touched(C)&&C!==this;)C=C.prevPointOnContour;return C};var Bs=Object.freeze(new Hn(0,0)),Sd={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Hi(S,C){switch(this.env=S,this.stack=[],this.prog=C,S){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=mi,this.round=Ma}}function mo(S){for(var C=S.tZone=new Array(S.gZone.length),I=0;I<C.length;I++)C[I]=new Hn(0,0)}function yo(S,C){var I,X=S.prog,K=S.ip,$=1;do if((I=X[++K])===88)$++;else if(I===89)$--;else if(I===64)K+=X[K+1]+1;else if(I===65)K+=2*X[K+1]+1;else if(176<=I&&I<=183)K+=I-176+1;else if(184<=I&&I<=191)K+=2*(I-184+1);else if(C&&$===1&&I===27)break;while(0<$);S.ip=K}function sc(S,C){f.DEBUG&&console.log(C.step,"SVTCA["+S.axis+"]"),C.fv=C.pv=C.dpv=S}function ac(S,C){f.DEBUG&&console.log(C.step,"SPVTCA["+S.axis+"]"),C.pv=C.dpv=S}function oc(S,C){f.DEBUG&&console.log(C.step,"SFVTCA["+S.axis+"]"),C.fv=S}function lc(S,C){var I,X=(K=C.stack).pop(),K=K.pop(),$=C.z2[X],ne=C.z1[K];f.DEBUG&&console.log("SPVTL["+S+"]",X,K),X=S?(I=$.y-ne.y,ne.x-$.x):(I=ne.x-$.x,ne.y-$.y),C.pv=C.dpv=Oi(I,X)}function uc(S,C){var I,X=(K=C.stack).pop(),K=K.pop(),$=C.z2[X],ne=C.z1[K];f.DEBUG&&console.log("SFVTL["+S+"]",X,K),X=S?(I=$.y-ne.y,ne.x-$.x):(I=ne.x-$.x,ne.y-$.y),C.fv=Oi(I,X)}function go(S){f.DEBUG&&console.log(S.step,"POP[]"),S.stack.pop()}function cc(S,C){var I=C.stack.pop(),X=C.z0[I],K=C.fv,$=C.pv,ne=(f.DEBUG&&console.log(C.step,"MDAP["+S+"]",I),$.distance(X,Bs));S&&(ne=C.round(ne)),K.setRelative(X,Bs,ne,$),K.touch(X),C.rp0=C.rp1=I}function fc(S,C){var I,X,K,$=C.z2,ne=$.length-2;f.DEBUG&&console.log(C.step,"IUP["+S.axis+"]");for(var we=0;we<ne;we++)I=$[we],S.touched(I)||(X=I.prevTouched(S))!==I&&(X===(K=I.nextTouched(S))&&S.setRelative(I,I,S.distance(X,X,!1,!0),S,!0),S.interpolate(I,X,K,S))}function dc(S,C){for(var I=C.stack,X=S?C.rp1:C.rp2,K=(S?C.z0:C.z1)[X],$=C.fv,ne=C.pv,we=C.loop,Ae=C.z2;we--;){var De=I.pop(),Ve=Ae[De],Qe=ne.distance(K,K,!1,!0);$.setRelative(Ve,Ve,Qe,ne),$.touch(Ve),f.DEBUG&&console.log(C.step,(1<C.loop?"loop "+(C.loop-we)+": ":"")+"SHP["+(S?"rp1":"rp2")+"]",De)}C.loop=1}function hc(S,C){for(var I=C.stack,X=S?C.rp1:C.rp2,K=(S?C.z0:C.z1)[X],$=C.fv,ne=C.pv,we=(X=I.pop(),C.z2[C.contours[X]]),Ae=we,De=(f.DEBUG&&console.log(C.step,"SHC["+S+"]",X),ne.distance(K,K,!1,!0));Ae!==K&&$.setRelative(Ae,Ae,De,ne),(Ae=Ae.nextPointOnContour)!==we;);}function vo(S,C){var I,X,K=C.stack,$=S?C.rp1:C.rp2,ne=($=(S?C.z0:C.z1)[$],C.fv),we=C.pv;switch(K=K.pop(),f.DEBUG&&console.log(C.step,"SHZ["+S+"]",K),K){case 0:I=C.tZone;break;case 1:I=C.gZone;break;default:throw new Error("Invalid zone")}for(var Ae=we.distance($,$,!1,!0),De=I.length-2,Ve=0;Ve<De;Ve++)X=I[Ve],ne.setRelative(X,X,Ae,we)}function pc(S,C){var I=(X=C.stack).pop()/64,X=X.pop(),K=C.z1[X],$=C.z0[C.rp0],ne=C.fv,we=C.pv;ne.setRelative(K,$,I,we),ne.touch(K),f.DEBUG&&console.log(C.step,"MSIRP["+S+"]",I,X),C.rp1=C.rp0,C.rp2=X,S&&(C.rp0=X)}function mc(S,C){var I=(X=C.stack).pop(),X=X.pop(),K=C.z0[X],$=C.fv,ne=C.pv,we=C.cvt[I];f.DEBUG&&console.log(C.step,"MIAP["+S+"]",I,"(",we,")",X),I=ne.distance(K,Bs),S&&(Math.abs(I-we)<C.cvCutIn&&(I=we),I=C.round(I)),$.setRelative(K,Bs,I,ne),C.zp0===0&&(K.xo=K.x,K.yo=K.y),$.touch(K),C.rp0=C.rp1=X}function yc(S,C){var I=C.stack,X=I.pop(),K=C.z2[X];f.DEBUG&&console.log(C.step,"GC["+S+"]",X),I.push(64*C.dpv.distance(K,Bs,S,!1))}function Ul(S,C){var I=(X=C.stack).pop(),X=X.pop(),K=C.z1[I],$=C.z0[X];$=C.dpv.distance($,K,S,S),f.DEBUG&&console.log(C.step,"MD["+S+"]",I,X,"->",$),C.stack.push(Math.round(64*$))}function Nl(S,C){var I=C.stack,X=I.pop(),K=C.fv,$=C.pv,ne=C.ppem,we=C.deltaBase+16*(S-1),Ae=C.deltaShift,De=C.z0;f.DEBUG&&console.log(C.step,"DELTAP["+S+"]",X,I);for(var Ve=0;Ve<X;Ve++){var Qe=I.pop(),Je=I.pop();we+((240&Je)>>4)===ne&&(0<=(Je=(15&Je)-8)&&Je++,f.DEBUG&&console.log(C.step,"DELTAPFIX",Qe,"by",Je*Ae),Qe=De[Qe],K.setRelative(Qe,Qe,Je*Ae,$))}}function bo(S,C){var I=C.stack,X=I.pop();f.DEBUG&&console.log(C.step,"ROUND[]"),I.push(64*C.round(X/64))}function Il(S,C){var I=C.stack,X=I.pop(),K=C.ppem,$=C.deltaBase+16*(S-1),ne=C.deltaShift;f.DEBUG&&console.log(C.step,"DELTAC["+S+"]",X,I);for(var we=0;we<X;we++){var Ae=I.pop(),De=I.pop();$+((240&De)>>4)===K&&(0<=(De=(15&De)-8)&&De++,De*=ne,f.DEBUG&&console.log(C.step,"DELTACFIX",Ae,"by",De),C.cvt[Ae]+=De)}}function gc(S,C){var I,X=(K=C.stack).pop(),K=K.pop(),$=C.z2[X],ne=C.z1[K];f.DEBUG&&console.log(C.step,"SDPVTL["+S+"]",X,K),X=S?(I=$.y-ne.y,ne.x-$.x):(I=ne.x-$.x,ne.y-$.y),C.dpv=Oi(I,X)}function Wi(S,C){var I=C.stack,X=C.prog,K=C.ip;f.DEBUG&&console.log(C.step,"PUSHB["+S+"]");for(var $=0;$<S;$++)I.push(X[++K]);C.ip=K}function Xi(S,C){var I=C.ip,X=C.prog,K=C.stack;f.DEBUG&&console.log(C.ip,"PUSHW["+S+"]");for(var $=0;$<S;$++){var ne=X[++I]<<8|X[++I];32768&ne&&(ne=-(1+(65535^ne))),K.push(ne)}C.ip=I}function Pt(S,C,I,X,K,$){var ne,we,Ae=$.stack,De=S&&Ae.pop(),Ve=(Ae=Ae.pop(),$.rp0),Qe=(Ve=$.z0[Ve],$.z1[Ae]),Je=$.minDis,Pe=$.fv,St=$.dpv,ut=ne=St.distance(Qe,Ve,!0,!0),lt=0<=ut?1:-1;ut=Math.abs(ut),S&&(we=$.cvt[De],X&&Math.abs(ut-we)<$.cvCutIn&&(ut=we)),I&&ut<Je&&(ut=Je),X&&(ut=$.round(ut)),Pe.setRelative(Qe,Ve,lt*ut,St),Pe.touch(Qe),f.DEBUG&&console.log($.step,(S?"MIRP[":"MDRP[")+(C?"M":"m")+(I?">":"_")+(X?"R":"_")+(K===0?"Gr":K===1?"Bl":K===2?"Wh":"")+"]",S?De+"("+$.cvt[De]+","+we+")":"",Ae,"(d =",ne,"->",lt*ut,")"),$.rp1=$.rp0,$.rp2=Ae,C&&($.rp0=Ae)}Pl.prototype.exec=function(S,C){if(typeof C!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var I=this.font,X=this._prepState;if(!X||X.ppem!==C){var K=this._fpgmState;if(!K){Hi.prototype=Sd,(K=this._fpgmState=new Hi("fpgm",I.tables.fpgm)).funcs=[],K.font=I,f.DEBUG&&(console.log("---EXEC FPGM---"),K.step=-1);try{qi(K)}catch(De){return console.log("Hinting error in FPGM:"+De),void(this._errorState=3)}}Hi.prototype=K,(X=this._prepState=new Hi("prep",I.tables.prep)).ppem=C;var $=I.tables.cvt;if($)for(var ne=X.cvt=new Array($.length),we=C/I.unitsPerEm,Ae=0;Ae<$.length;Ae++)ne[Ae]=$[Ae]*we;else X.cvt=[];f.DEBUG&&(console.log("---EXEC PREP---"),X.step=-1);try{qi(X)}catch(De){this._errorState<2&&console.log("Hinting error in PREP:"+De),this._errorState=2}}if(!(1<this._errorState))try{return wd(S,X)}catch(De){this._errorState<1&&(console.log("Hinting error:"+De),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var wd=function(S,C){var I=C.ppem/C.font.unitsPerEm,X=I,K=S.components;if(Hi.prototype=C,K){for(var $=C.font,ne=[],we=[],Ae=0;Ae<K.length;Ae++){var De=K[Ae],Ve=$.glyphs.get(De.glyphIndex),Qe=new Hi("glyf",Ve.instructions);f.DEBUG&&(console.log("---EXEC COMP "+Ae+"---"),Qe.step=-1),vc(Ve,Qe,I,X);for(var Je=Math.round(De.dx*I),Pe=Math.round(De.dy*X),St=Qe.gZone,ut=Qe.contours,lt=0;lt<St.length;lt++){var ct=St[lt];ct.xTouched=ct.yTouched=!1,ct.xo=ct.x=ct.x+Je,ct.yo=ct.y=ct.y+Pe}var mt=ne.length;ne.push.apply(ne,St);for(var At=0;At<ut.length;At++)we.push(ut[At]+mt)}S.instructions&&!Qe.inhibitGridFit&&((Qe=new Hi("glyf",S.instructions)).gZone=Qe.z0=Qe.z1=Qe.z2=ne,Qe.contours=we,ne.push(new Hn(0,0),new Hn(Math.round(S.advanceWidth*I),0)),f.DEBUG&&(console.log("---EXEC COMPOSITE---"),Qe.step=-1),qi(Qe),ne.length-=2)}else Qe=new Hi("glyf",S.instructions),f.DEBUG&&(console.log("---EXEC GLYPH---"),Qe.step=-1),vc(S,Qe,I,X),ne=Qe.gZone;return ne},vc=function(S,C,I,X){for(var K,$,ne,we=S.points||[],Ae=we.length,De=C.gZone=C.z0=C.z1=C.z2=[],Ve=C.contours=[],Qe=0;Qe<Ae;Qe++)K=we[Qe],De[Qe]=new Hn(K.x*I,K.y*X,K.lastPointOfContour,K.onCurve);for(var Je=0;Je<Ae;Je++)K=De[Je],$||($=K,Ve.push(Je)),K.lastPointOfContour?((K.nextPointOnContour=$).prevPointOnContour=K,$=void 0):(ne=De[Je+1],(K.nextPointOnContour=ne).prevPointOnContour=K);if(!C.inhibitGridFit){if(f.DEBUG){console.log("PROCESSING GLYPH",C.stack);for(var Pe=0;Pe<Ae;Pe++)console.log(Pe,De[Pe].x,De[Pe].y)}if(De.push(new Hn(0,0),new Hn(Math.round(S.advanceWidth*I),0)),qi(C),De.length-=2,f.DEBUG){console.log("FINISHED GLYPH",C.stack);for(var St=0;St<Ae;St++)console.log(St,De[St].x,De[St].y)}}},qi=function(S){var C=S.prog;if(C){var I,X=C.length;for(S.ip=0;S.ip<X;S.ip++){if(f.DEBUG&&S.step++,!(I=Ea[C[S.ip]]))throw new Error("unknown instruction: 0x"+Number(C[S.ip]).toString(16));I(S)}}},Ea=[sc.bind(void 0,ei),sc.bind(void 0,mi),ac.bind(void 0,ei),ac.bind(void 0,mi),oc.bind(void 0,ei),oc.bind(void 0,mi),lc.bind(void 0,0),lc.bind(void 0,1),uc.bind(void 0,0),uc.bind(void 0,1),function(S){var C=(I=S.stack).pop(),I=I.pop();f.DEBUG&&console.log(S.step,"SPVFS[]",C,I),S.pv=S.dpv=Oi(I,C)},function(S){var C=(I=S.stack).pop(),I=I.pop();f.DEBUG&&console.log(S.step,"SPVFS[]",C,I),S.fv=Oi(I,C)},function(S){var C=S.stack,I=S.pv;f.DEBUG&&console.log(S.step,"GPV[]"),C.push(16384*I.x),C.push(16384*I.y)},function(S){var C=S.stack,I=S.fv;f.DEBUG&&console.log(S.step,"GFV[]"),C.push(16384*I.x),C.push(16384*I.y)},function(S){S.fv=S.pv,f.DEBUG&&console.log(S.step,"SFVTPV[]")},function(S){var C=($=S.stack).pop(),I=$.pop(),X=$.pop(),K=$.pop(),$=$.pop(),ne=S.z0,we=S.z1,Ae=ne[C],De=(ne=ne[I],we[X]),Ve=(we=we[K],S=S.z2[$],C=(f.DEBUG&&console.log("ISECT[], ",C,I,X,K,$),Ae.x),I=Ae.y,X=ne.x,K=ne.y,$=De.x,Ae=De.y,ne=we.x,we=(C-X)*(Ae-(De=we.y))-(I-K)*($-ne),C*K-I*X),Qe=$*De-Ae*ne;S.x=(Ve*($-ne)-Qe*(C-X))/we,S.y=(Ve*(Ae-De)-Qe*(I-K))/we},function(S){S.rp0=S.stack.pop(),f.DEBUG&&console.log(S.step,"SRP0[]",S.rp0)},function(S){S.rp1=S.stack.pop(),f.DEBUG&&console.log(S.step,"SRP1[]",S.rp1)},function(S){S.rp2=S.stack.pop(),f.DEBUG&&console.log(S.step,"SRP2[]",S.rp2)},function(S){var C=S.stack.pop();switch(f.DEBUG&&console.log(S.step,"SZP0[]",C),S.zp0=C){case 0:S.tZone||mo(S),S.z0=S.tZone;break;case 1:S.z0=S.gZone;break;default:throw new Error("Invalid zone pointer")}},function(S){var C=S.stack.pop();switch(f.DEBUG&&console.log(S.step,"SZP1[]",C),S.zp1=C){case 0:S.tZone||mo(S),S.z1=S.tZone;break;case 1:S.z1=S.gZone;break;default:throw new Error("Invalid zone pointer")}},function(S){var C=S.stack.pop();switch(f.DEBUG&&console.log(S.step,"SZP2[]",C),S.zp2=C){case 0:S.tZone||mo(S),S.z2=S.tZone;break;case 1:S.z2=S.gZone;break;default:throw new Error("Invalid zone pointer")}},function(S){var C=S.stack.pop();switch(f.DEBUG&&console.log(S.step,"SZPS[]",C),S.zp0=S.zp1=S.zp2=C){case 0:S.tZone||mo(S),S.z0=S.z1=S.z2=S.tZone;break;case 1:S.z0=S.z1=S.z2=S.gZone;break;default:throw new Error("Invalid zone pointer")}},function(S){S.loop=S.stack.pop(),f.DEBUG&&console.log(S.step,"SLOOP[]",S.loop)},function(S){f.DEBUG&&console.log(S.step,"RTG[]"),S.round=Ma},function(S){f.DEBUG&&console.log(S.step,"RTHG[]"),S.round=Ln},function(S){var C=S.stack.pop();f.DEBUG&&console.log(S.step,"SMD[]",C),S.minDis=C/64},function(S){f.DEBUG&&console.log(S.step,"ELSE[]"),yo(S,!1)},function(S){var C=S.stack.pop();f.DEBUG&&console.log(S.step,"JMPR[]",C),S.ip+=C-1},function(S){var C=S.stack.pop();f.DEBUG&&console.log(S.step,"SCVTCI[]",C),S.cvCutIn=C/64},void 0,void 0,function(S){var C=S.stack;f.DEBUG&&console.log(S.step,"DUP[]"),C.push(C[C.length-1])},go,function(S){f.DEBUG&&console.log(S.step,"CLEAR[]"),S.stack.length=0},function(S){var C=S.stack,I=C.pop(),X=C.pop();f.DEBUG&&console.log(S.step,"SWAP[]"),C.push(I),C.push(X)},function(S){var C=S.stack;f.DEBUG&&console.log(S.step,"DEPTH[]"),C.push(C.length)},function(S){var C=S.stack,I=C.pop();f.DEBUG&&console.log(S.step,"CINDEX[]",I),C.push(C[C.length-I])},function(S){var C=S.stack,I=C.pop();f.DEBUG&&console.log(S.step,"MINDEX[]",I),C.push(C.splice(C.length-I,1)[0])},void 0,void 0,void 0,function(S){var C=(X=S.stack).pop(),I=X.pop(),X=(f.DEBUG&&console.log(S.step,"LOOPCALL[]",C,I),S.ip),K=S.prog;S.prog=S.funcs[C];for(var $=0;$<I;$++)qi(S),f.DEBUG&&console.log(++S.step,$+1<I?"next loopcall":"done loopcall",$);S.ip=X,S.prog=K},function(S){var C=S.stack.pop(),I=(f.DEBUG&&console.log(S.step,"CALL[]",C),S.ip),X=S.prog;S.prog=S.funcs[C],qi(S),S.ip=I,S.prog=X,f.DEBUG&&console.log(++S.step,"returning from",C)},function(S){if(S.env!=="fpgm")throw new Error("FDEF not allowed here");var C=S.stack,I=S.prog,X=S.ip,K=(C=C.pop(),X);for(f.DEBUG&&console.log(S.step,"FDEF[]",C);I[++X]!==45;);S.ip=X,S.funcs[C]=I.slice(K+1,X)},void 0,cc.bind(void 0,0),cc.bind(void 0,1),fc.bind(void 0,ei),fc.bind(void 0,mi),dc.bind(void 0,0),dc.bind(void 0,1),hc.bind(void 0,0),hc.bind(void 0,1),vo.bind(void 0,0),vo.bind(void 0,1),function(S){for(var C=S.stack,I=S.loop,X=S.fv,K=C.pop()/64,$=S.z2;I--;){var ne=C.pop(),we=$[ne];f.DEBUG&&console.log(S.step,(1<S.loop?"loop "+(S.loop-I)+": ":"")+"SHPIX[]",ne,K),X.setRelative(we,we,K),X.touch(we)}S.loop=1},function(S){for(var C=S.stack,I=S.rp1,X=S.rp2,K=S.loop,$=S.z0[I],ne=S.z1[X],we=S.fv,Ae=S.dpv,De=S.z2;K--;){var Ve=C.pop(),Qe=De[Ve];f.DEBUG&&console.log(S.step,(1<S.loop?"loop "+(S.loop-K)+": ":"")+"IP[]",Ve,I,"<->",X),we.interpolate(Qe,$,ne,Ae),we.touch(Qe)}S.loop=1},pc.bind(void 0,0),pc.bind(void 0,1),function(S){for(var C=S.stack,I=S.rp0,X=S.z0[I],K=S.loop,$=S.fv,ne=S.pv,we=S.z1;K--;){var Ae=C.pop(),De=we[Ae];f.DEBUG&&console.log(S.step,(1<S.loop?"loop "+(S.loop-K)+": ":"")+"ALIGNRP[]",Ae),$.setRelative(De,X,0,ne),$.touch(De)}S.loop=1},function(S){f.DEBUG&&console.log(S.step,"RTDG[]"),S.round=ic},mc.bind(void 0,0),mc.bind(void 0,1),function(S){var C=S.prog,I=S.ip,X=S.stack,K=C[++I];f.DEBUG&&console.log(S.step,"NPUSHB[]",K);for(var $=0;$<K;$++)X.push(C[++I]);S.ip=I},function(S){var C=S.ip,I=S.prog,X=S.stack,K=I[++C];f.DEBUG&&console.log(S.step,"NPUSHW[]",K);for(var $=0;$<K;$++){var ne=I[++C]<<8|I[++C];32768&ne&&(ne=-(1+(65535^ne))),X.push(ne)}S.ip=C},function(S){var C=S.stack,I=(I=S.store)||(S.store=[]),X=C.pop();C=C.pop(),f.DEBUG&&console.log(S.step,"WS",X,C),I[C]=X},function(S){var C=S.stack,I=S.store,X=C.pop();f.DEBUG&&console.log(S.step,"RS",X),S=I&&I[X]||0,C.push(S)},function(S){var C=(I=S.stack).pop(),I=I.pop();f.DEBUG&&console.log(S.step,"WCVTP",C,I),S.cvt[I]=C/64},function(S){var C=S.stack,I=C.pop();f.DEBUG&&console.log(S.step,"RCVT",I),C.push(64*S.cvt[I])},yc.bind(void 0,0),yc.bind(void 0,1),void 0,Ul.bind(void 0,0),Ul.bind(void 0,1),function(S){f.DEBUG&&console.log(S.step,"MPPEM[]"),S.stack.push(S.ppem)},void 0,function(S){f.DEBUG&&console.log(S.step,"FLIPON[]"),S.autoFlip=!0},void 0,void 0,function(S){var C=S.stack,I=C.pop(),X=C.pop();f.DEBUG&&console.log(S.step,"LT[]",I,X),C.push(X<I?1:0)},function(S){var C=S.stack,I=C.pop(),X=C.pop();f.DEBUG&&console.log(S.step,"LTEQ[]",I,X),C.push(X<=I?1:0)},function(S){var C=S.stack,I=C.pop(),X=C.pop();f.DEBUG&&console.log(S.step,"GT[]",I,X),C.push(I<X?1:0)},function(S){var C=S.stack,I=C.pop(),X=C.pop();f.DEBUG&&console.log(S.step,"GTEQ[]",I,X),C.push(I<=X?1:0)},function(S){var C=S.stack,I=C.pop(),X=C.pop();f.DEBUG&&console.log(S.step,"EQ[]",I,X),C.push(I===X?1:0)},function(S){var C=S.stack,I=C.pop(),X=C.pop();f.DEBUG&&console.log(S.step,"NEQ[]",I,X),C.push(I!==X?1:0)},function(S){var C=S.stack,I=C.pop();f.DEBUG&&console.log(S.step,"ODD[]",I),C.push(Math.trunc(I)%2?1:0)},function(S){var C=S.stack,I=C.pop();f.DEBUG&&console.log(S.step,"EVEN[]",I),C.push(Math.trunc(I)%2?0:1)},function(S){var C=S.stack.pop();f.DEBUG&&console.log(S.step,"IF[]",C),C||(yo(S,!0),f.DEBUG&&console.log(S.step,"EIF[]"))},function(S){f.DEBUG&&console.log(S.step,"EIF[]")},function(S){var C=S.stack,I=C.pop(),X=C.pop();f.DEBUG&&console.log(S.step,"AND[]",I,X),C.push(I&&X?1:0)},function(S){var C=S.stack,I=C.pop(),X=C.pop();f.DEBUG&&console.log(S.step,"OR[]",I,X),C.push(I||X?1:0)},function(S){var C=S.stack,I=C.pop();f.DEBUG&&console.log(S.step,"NOT[]",I),C.push(I?0:1)},Nl.bind(void 0,1),function(S){var C=S.stack.pop();f.DEBUG&&console.log(S.step,"SDB[]",C),S.deltaBase=C},function(S){var C=S.stack.pop();f.DEBUG&&console.log(S.step,"SDS[]",C),S.deltaShift=Math.pow(.5,C)},function(S){var C=S.stack,I=C.pop(),X=C.pop();f.DEBUG&&console.log(S.step,"ADD[]",I,X),C.push(X+I)},function(S){var C=S.stack,I=C.pop(),X=C.pop();f.DEBUG&&console.log(S.step,"SUB[]",I,X),C.push(X-I)},function(S){var C=S.stack,I=C.pop(),X=C.pop();f.DEBUG&&console.log(S.step,"DIV[]",I,X),C.push(64*X/I)},function(S){var C=S.stack,I=C.pop(),X=C.pop();f.DEBUG&&console.log(S.step,"MUL[]",I,X),C.push(X*I/64)},function(S){var C=S.stack,I=C.pop();f.DEBUG&&console.log(S.step,"ABS[]",I),C.push(Math.abs(I))},function(S){var C=S.stack,I=C.pop();f.DEBUG&&console.log(S.step,"NEG[]",I),C.push(-I)},function(S){var C=S.stack,I=C.pop();f.DEBUG&&console.log(S.step,"FLOOR[]",I),C.push(64*Math.floor(I/64))},function(S){var C=S.stack,I=C.pop();f.DEBUG&&console.log(S.step,"CEILING[]",I),C.push(64*Math.ceil(I/64))},bo.bind(void 0,0),bo.bind(void 0,1),bo.bind(void 0,2),bo.bind(void 0,3),void 0,void 0,void 0,void 0,function(S){var C=(I=S.stack).pop(),I=I.pop();f.DEBUG&&console.log(S.step,"WCVTF[]",C,I),S.cvt[I]=C*S.ppem/S.font.unitsPerEm},Nl.bind(void 0,2),Nl.bind(void 0,3),Il.bind(void 0,1),Il.bind(void 0,2),Il.bind(void 0,3),function(S){var C,I=S.stack.pop();switch(f.DEBUG&&console.log(S.step,"SROUND[]",I),S.round=Fs,192&I){case 0:C=.5;break;case 64:C=1;break;case 128:C=2;break;default:throw new Error("invalid SROUND value")}switch(S.srPeriod=C,48&I){case 0:S.srPhase=0;break;case 16:S.srPhase=.25*C;break;case 32:S.srPhase=.5*C;break;case 48:S.srPhase=.75*C;break;default:throw new Error("invalid SROUND value")}S.srThreshold=(I&=15)==0?0:(I/8-.5)*C},function(S){var C,I=S.stack.pop();switch(f.DEBUG&&console.log(S.step,"S45ROUND[]",I),S.round=Fs,192&I){case 0:C=Math.sqrt(2)/2;break;case 64:C=Math.sqrt(2);break;case 128:C=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(S.srPeriod=C,48&I){case 0:S.srPhase=0;break;case 16:S.srPhase=.25*C;break;case 32:S.srPhase=.5*C;break;case 48:S.srPhase=.75*C;break;default:throw new Error("invalid S45ROUND value")}S.srThreshold=(I&=15)==0?0:(I/8-.5)*C},void 0,void 0,function(S){f.DEBUG&&console.log(S.step,"ROFF[]"),S.round=ho},void 0,function(S){f.DEBUG&&console.log(S.step,"RUTG[]"),S.round=ls},function(S){f.DEBUG&&console.log(S.step,"RDTG[]"),S.round=po},go,go,void 0,void 0,void 0,void 0,void 0,function(S){var C=S.stack.pop();f.DEBUG&&console.log(S.step,"SCANCTRL[]",C)},gc.bind(void 0,0),gc.bind(void 0,1),function(S){var C=S.stack,I=C.pop(),X=0;f.DEBUG&&console.log(S.step,"GETINFO[]",I),1&I&&(X=35),32&I&&(X|=4096),C.push(X)},void 0,function(S){var C=S.stack,I=C.pop(),X=C.pop(),K=C.pop();f.DEBUG&&console.log(S.step,"ROLL[]"),C.push(X),C.push(I),C.push(K)},function(S){var C=S.stack,I=C.pop(),X=C.pop();f.DEBUG&&console.log(S.step,"MAX[]",I,X),C.push(Math.max(X,I))},function(S){var C=S.stack,I=C.pop(),X=C.pop();f.DEBUG&&console.log(S.step,"MIN[]",I,X),C.push(Math.min(X,I))},function(S){var C=S.stack.pop();f.DEBUG&&console.log(S.step,"SCANTYPE[]",C)},function(S){var C=S.stack.pop(),I=S.stack.pop();switch(f.DEBUG&&console.log(S.step,"INSTCTRL[]",C,I),C){case 1:return void(S.inhibitGridFit=!!I);case 2:return void(S.ignoreCvt=!!I);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Wi.bind(void 0,1),Wi.bind(void 0,2),Wi.bind(void 0,3),Wi.bind(void 0,4),Wi.bind(void 0,5),Wi.bind(void 0,6),Wi.bind(void 0,7),Wi.bind(void 0,8),Xi.bind(void 0,1),Xi.bind(void 0,2),Xi.bind(void 0,3),Xi.bind(void 0,4),Xi.bind(void 0,5),Xi.bind(void 0,6),Xi.bind(void 0,7),Xi.bind(void 0,8),Pt.bind(void 0,0,0,0,0,0),Pt.bind(void 0,0,0,0,0,1),Pt.bind(void 0,0,0,0,0,2),Pt.bind(void 0,0,0,0,0,3),Pt.bind(void 0,0,0,0,1,0),Pt.bind(void 0,0,0,0,1,1),Pt.bind(void 0,0,0,0,1,2),Pt.bind(void 0,0,0,0,1,3),Pt.bind(void 0,0,0,1,0,0),Pt.bind(void 0,0,0,1,0,1),Pt.bind(void 0,0,0,1,0,2),Pt.bind(void 0,0,0,1,0,3),Pt.bind(void 0,0,0,1,1,0),Pt.bind(void 0,0,0,1,1,1),Pt.bind(void 0,0,0,1,1,2),Pt.bind(void 0,0,0,1,1,3),Pt.bind(void 0,0,1,0,0,0),Pt.bind(void 0,0,1,0,0,1),Pt.bind(void 0,0,1,0,0,2),Pt.bind(void 0,0,1,0,0,3),Pt.bind(void 0,0,1,0,1,0),Pt.bind(void 0,0,1,0,1,1),Pt.bind(void 0,0,1,0,1,2),Pt.bind(void 0,0,1,0,1,3),Pt.bind(void 0,0,1,1,0,0),Pt.bind(void 0,0,1,1,0,1),Pt.bind(void 0,0,1,1,0,2),Pt.bind(void 0,0,1,1,0,3),Pt.bind(void 0,0,1,1,1,0),Pt.bind(void 0,0,1,1,1,1),Pt.bind(void 0,0,1,1,1,2),Pt.bind(void 0,0,1,1,1,3),Pt.bind(void 0,1,0,0,0,0),Pt.bind(void 0,1,0,0,0,1),Pt.bind(void 0,1,0,0,0,2),Pt.bind(void 0,1,0,0,0,3),Pt.bind(void 0,1,0,0,1,0),Pt.bind(void 0,1,0,0,1,1),Pt.bind(void 0,1,0,0,1,2),Pt.bind(void 0,1,0,0,1,3),Pt.bind(void 0,1,0,1,0,0),Pt.bind(void 0,1,0,1,0,1),Pt.bind(void 0,1,0,1,0,2),Pt.bind(void 0,1,0,1,0,3),Pt.bind(void 0,1,0,1,1,0),Pt.bind(void 0,1,0,1,1,1),Pt.bind(void 0,1,0,1,1,2),Pt.bind(void 0,1,0,1,1,3),Pt.bind(void 0,1,1,0,0,0),Pt.bind(void 0,1,1,0,0,1),Pt.bind(void 0,1,1,0,0,2),Pt.bind(void 0,1,1,0,0,3),Pt.bind(void 0,1,1,0,1,0),Pt.bind(void 0,1,1,0,1,1),Pt.bind(void 0,1,1,0,1,2),Pt.bind(void 0,1,1,0,1,3),Pt.bind(void 0,1,1,1,0,0),Pt.bind(void 0,1,1,1,0,1),Pt.bind(void 0,1,1,1,0,2),Pt.bind(void 0,1,1,1,0,3),Pt.bind(void 0,1,1,1,1,0),Pt.bind(void 0,1,1,1,1,1),Pt.bind(void 0,1,1,1,1,2),Pt.bind(void 0,1,1,1,1,3)],Md=Array.from||function(S){return S.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Mr(S){(S=S||{}).empty||(hi(S.familyName,"When creating a new Font object, familyName is required."),hi(S.styleName,"When creating a new Font object, styleName is required."),hi(S.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),hi(S.ascender,"When creating a new Font object, ascender is required."),hi(S.descender,"When creating a new Font object, descender is required."),hi(S.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:S.familyName||" "},fontSubfamily:{en:S.styleName||" "},fullName:{en:S.fullName||S.familyName+" "+S.styleName},postScriptName:{en:S.postScriptName||(S.familyName+S.styleName).replace(/\s/g,"")},designer:{en:S.designer||" "},designerURL:{en:S.designerURL||" "},manufacturer:{en:S.manufacturer||" "},manufacturerURL:{en:S.manufacturerURL||" "},license:{en:S.license||" "},licenseURL:{en:S.licenseURL||" "},version:{en:S.version||"Version 0.1"},description:{en:S.description||" "},copyright:{en:S.copyright||" "},trademark:{en:S.trademark||" "}},this.unitsPerEm=S.unitsPerEm||1e3,this.ascender=S.ascender,this.descender=S.descender,this.createdTimestamp=S.createdTimestamp,this.tables={os2:{usWeightClass:S.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:S.widthClass||this.usWidthClasses.MEDIUM,fsSelection:S.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new Ge.GlyphSet(this,S.glyphs||[]),this.encoding=new ae(this),this.position=new Di(this),this.substitution=new $n(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new Pl(this):void 0)}})}Mr.prototype.hasChar=function(S){return this.encoding.charToGlyphIndex(S)!==null},Mr.prototype.charToGlyphIndex=function(S){return this.encoding.charToGlyphIndex(S)},Mr.prototype.charToGlyph=function(S){return S=this.charToGlyphIndex(S),this.glyphs.get(S)||this.glyphs.get(0)},Mr.prototype.stringToGlyphs=function(S,C){C=C||this.defaultRenderOptions;for(var I=Md(S),X=[],K=0;K<I.length;K+=1){var $=I[K];X.push(this.charToGlyphIndex($))}var ne=X.length;if(C.features){S=C.script||this.substitution.getDefaultScriptName();var we=[];C.features.liga&&(we=we.concat(this.substitution.getFeature("liga",S,C.language))),C.features.rlig&&(we=we.concat(this.substitution.getFeature("rlig",S,C.language)));for(var Ae=0;Ae<ne;Ae+=1)for(var De=0;De<we.length;De++){for(var Ve=we[De],Qe=Ve.sub,Je=Qe.length,Pe=0;Pe<Je&&Qe[Pe]===X[Ae+Pe];)Pe++;Pe===Je&&(X.splice(Ae,Je,Ve.by),ne=ne-Je+1)}}for(var St=new Array(ne),ut=this.glyphs.get(0),lt=0;lt<ne;lt+=1)St[lt]=this.glyphs.get(X[lt])||ut;return St},Mr.prototype.nameToGlyphIndex=function(S){return this.glyphNames.nameToGlyphIndex(S)},Mr.prototype.nameToGlyph=function(S){return S=this.nameToGlyphIndex(S),this.glyphs.get(S)||this.glyphs.get(0)},Mr.prototype.glyphIndexToName=function(S){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(S):""},Mr.prototype.getKerningValue=function(S,C){S=S.index||S,C=C.index||C;var I=this.position.defaultKerningTables;return I?this.position.getKerningValue(I,S,C):this.kerningPairs[S+","+C]||0},Mr.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Mr.prototype.forEachGlyph=function(S,C,I,X,K,$){C=C!==void 0?C:0,I=I!==void 0?I:0,K=K||this.defaultRenderOptions;var ne,we=1/this.unitsPerEm*(X=X!==void 0?X:72),Ae=this.stringToGlyphs(S,K);K.kerning&&(S=K.script||this.position.getDefaultScriptName(),ne=this.position.getKerningTables(S,K.language));for(var De=0;De<Ae.length;De+=1){var Ve=Ae[De];$.call(this,Ve,C,I,X,K),Ve.advanceWidth&&(C+=Ve.advanceWidth*we),K.kerning&&De<Ae.length-1&&(C+=(ne?this.position.getKerningValue(ne,Ve.index,Ae[De+1].index):this.getKerningValue(Ve,Ae[De+1]))*we),K.letterSpacing?C+=K.letterSpacing*X:K.tracking&&(C+=K.tracking/1e3*X)}return C},Mr.prototype.getPath=function(S,C,I,X,K){var $=new W;return this.forEachGlyph(S,C,I,X,K,function(ne,we,Ae,De){ne=ne.getPath(we,Ae,De,K,this),$.extend(ne)}),$},Mr.prototype.getPaths=function(S,C,I,X,K){var $=[];return this.forEachGlyph(S,C,I,X,K,function(ne,we,Ae,De){ne=ne.getPath(we,Ae,De,K,this),$.push(ne)}),$},Mr.prototype.getAdvanceWidth=function(S,C,I){return this.forEachGlyph(S,0,0,C,I,function(){})},Mr.prototype.draw=function(S,C,I,X,K,$){this.getPath(C,I,X,K,$).draw(S)},Mr.prototype.drawPoints=function(S,C,I,X,K,$){this.forEachGlyph(C,I,X,K,$,function(ne,we,Ae,De){ne.drawPoints(S,we,Ae,De)})},Mr.prototype.drawMetrics=function(S,C,I,X,K,$){this.forEachGlyph(C,I,X,K,$,function(ne,we,Ae,De){ne.drawMetrics(S,we,Ae,De)})},Mr.prototype.getEnglishName=function(S){if(S=this.names[S])return S.en},Mr.prototype.validate=function(){var S=this;function C(I){(I=S.getEnglishName(I))&&I.trim().length}C("fontFamily"),C("weightName"),C("manufacturer"),C("copyright"),C("version"),this.unitsPerEm},Mr.prototype.toTables=function(){return xd(this)},Mr.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Mr.prototype.toArrayBuffer=function(){for(var S=this.toTables().encode(),C=new ArrayBuffer(S.length),I=new Uint8Array(C),X=0;X<S.length;X++)I[X]=S[X];return C},Mr.prototype.download=function(S){var C=this.getEnglishName("fontFamily"),I=this.getEnglishName("fontSubfamily"),X=(S=S||C.replace(/\s/g,"")+"-"+I+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,X.byteLength,function(K){K.root.getFile(S,{create:!0},function($){$.createWriter(function(ne){var we=new DataView(X);we=new Blob([we],{type:"font/opentype"}),ne.write(we),ne.addEventListener("writeend",function(){location.href=$.toURL()},!1)})})},function(K){throw new Error(K.name+": "+K.message)})):(C=t("fs"),I=function(K){for(var $=new p(K.byteLength),ne=new Uint8Array(K),we=0;we<$.length;++we)$[we]=ne[we];return $}(X),C.writeFileSync(S,I))},Mr.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Mr.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Mr.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var bc=function(S,C,I){for(var X,K,$,ne,we=new Ie.Parser(S,C),Ae=we.parseULong(),De=(ee.argument(Ae===65536,"Unsupported fvar table version."),we.parseOffset16()),Ve=(we.skip("uShort",1),we.parseUShort()),Qe=we.parseUShort(),Je=we.parseUShort(),Pe=we.parseUShort(),St=[],ut=0;ut<Ve;ut++)St.push((X=S,K=C+De+ut*Qe,$=I,ne={},X=new Ie.Parser(X,K),ne.tag=X.parseTag(),ne.minValue=X.parseFixed(),ne.defaultValue=X.parseFixed(),ne.maxValue=X.parseFixed(),X.skip("uShort",1),ne.name=$[X.parseUShort()]||{},ne));for(var lt=[],ct=C+De+Ve*Qe,mt=0;mt<Je;mt++)lt.push(function(At,Et,jt,Jt){var ir={},dr=new Ie.Parser(At,Et);ir.name=Jt[dr.parseUShort()]||{},dr.skip("uShort",1),ir.coordinates={};for(var Rr=0;Rr<jt.length;++Rr)ir.coordinates[jt[Rr].tag]=dr.parseFixed();return ir}(S,ct+mt*Pe,St,I));return{axes:St,instances:lt}},Wn=new Array(10);Wn[1]=function(){var S=this.offset+this.relativeOffset,C=this.parseUShort();return C===1?{posFormat:1,coverage:this.parsePointer(me.coverage),value:this.parseValueRecord()}:C===2?{posFormat:2,coverage:this.parsePointer(me.coverage),values:this.parseValueRecordList()}:void ee.assert(!1,"0x"+S.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Wn[2]=function(){var S,C,I,X,K=this.offset+this.relativeOffset,$=this.parseUShort(),ne=(K=(ee.assert($===1||$===2,"0x"+K.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(me.coverage)),this.parseUShort()),we=this.parseUShort();return $===1?{posFormat:$,coverage:K,valueFormat1:ne,valueFormat2:we,pairSets:this.parseList(me.pointer(me.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(ne),value2:this.parseValueRecord(we)}})))}:$===2?(S=this.parsePointer(me.classDef),C=this.parsePointer(me.classDef),I=this.parseUShort(),X=this.parseUShort(),{posFormat:$,coverage:K,valueFormat1:ne,valueFormat2:we,classDef1:S,classDef2:C,class1Count:I,class2Count:X,classRecords:this.parseList(I,me.list(X,function(){return{value1:this.parseValueRecord(ne),value2:this.parseValueRecord(we)}}))}):void 0},Wn[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Wn[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Wn[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Wn[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Wn[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Wn[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Wn[9]=function(){return{error:"GPOS Lookup 9 not supported"}},new Array(10);var _c=function(S,C){return C=(S=new me(S,C=C||0)).parseVersion(1),ee.argument(C===1||C===1.1,"Unsupported GPOS table version "+C),C===1?{version:C,scripts:S.parseScriptList(),features:S.parseFeatureList(),lookups:S.parseLookupList(Wn)}:{version:C,scripts:S.parseScriptList(),features:S.parseFeatureList(),lookups:S.parseLookupList(Wn),variations:S.parseFeatureVariationsList()}},xc=function(S,C){if((C=(S=new Ie.Parser(S,C)).parseUShort())===0){var I=S,X={},K=(I.skip("uShort"),I.parseUShort()),$=(ee.argument(K===0,"Unsupported kern sub-table version."),I.skip("uShort",2),I.parseUShort());I.skip("uShort",3);for(var ne=0;ne<$;ne+=1){var we=I.parseUShort(),Ae=I.parseUShort(),De=I.parseShort();X[we+","+Ae]=De}return X}if(C!==1)throw new Error("Unsupported kern table version ("+C+").");var Ve=S,Qe={};if(Ve.skip("uShort"),1<Ve.parseULong()&&console.warn("Only the first kern subtable is supported."),Ve.skip("uLong"),K=255&Ve.parseUShort(),Ve.skip("uShort"),K==0){var Je=Ve.parseUShort();Ve.skip("uShort",3);for(var Pe=0;Pe<Je;Pe+=1){var St=Ve.parseUShort(),ut=Ve.parseUShort(),lt=Ve.parseShort();Qe[St+","+ut]=lt}}return Qe},zs=function(S,C,I,X){for(var K=new Ie.Parser(S,C),$=X?K.parseUShort:K.parseULong,ne=[],we=0;we<I+1;we+=1){var Ae=$.call(K);X&&(Ae*=2),ne.push(Ae)}return ne};function Ed(S,C){t("fs").readFile(S,function(I,X){if(I)return C(I.message);C(null,Dl(X))})}function Td(S,C){var I=new XMLHttpRequest;I.open("get",S,!0),I.responseType="arraybuffer",I.onload=function(){return I.response?C(null,I.response):C("Font could not be loaded: "+I.statusText)},I.onerror=function(){C("Font could not be loaded")},I.send()}function Sc(S,C){for(var I=[],X=12,K=0;K<C;K+=1){var $=Ie.getTag(S,X),ne=Ie.getULong(S,X+4),we=Ie.getULong(S,X+8),Ae=Ie.getULong(S,X+12);I.push({tag:$,checksum:ne,offset:we,length:Ae,compression:!1}),X+=16}return I}function Yr(S,C){if(C.compression!=="WOFF")return{data:S,offset:C.offset};S=new Uint8Array(S.buffer,C.offset+2,C.compressedLength-2);var I=new Uint8Array(C.length);if(function(X,K){var $,ne,we,Ae=new c(X,K);do{switch((ne=Ae).bitcount--||(ne.tag=ne.source[ne.sourceIndex++],ne.bitcount=7),we=1&ne.tag,ne.tag>>>=1,ne=we,L(Ae,2,0)){case 0:$=function(jt){for(var Jt,ir;8<jt.bitcount;)jt.sourceIndex--,jt.bitcount-=8;if((Jt=256*jt.source[jt.sourceIndex+1]+jt.source[jt.sourceIndex])!==(65535&~(256*jt.source[jt.sourceIndex+3]+jt.source[jt.sourceIndex+2])))return-3;for(jt.sourceIndex+=4,ir=Jt;ir;--ir)jt.dest[jt.destLen++]=jt.source[jt.sourceIndex++];return jt.bitcount=0,0}(Ae);break;case 1:$=N(Ae,l,o);break;case 2:At=mt=ct=Et=De=lt=void 0;for(var De,Ve=Ae,Qe=Ae.ltree,Je=Ae.dtree,Pe=L(Ve,5,257),St=L(Ve,5,1),ut=L(Ve,4,4),lt=0;lt<19;++lt)E[lt]=0;for(lt=0;lt<ut;++lt){var ct=L(Ve,3,0);E[v[lt]]=ct}for(P(x,E,0,19),De=0;De<Pe+St;){var mt=z(Ve,x);switch(mt){case 16:for(var At=E[De-1],Et=L(Ve,2,3);Et;--Et)E[De++]=At;break;case 17:for(Et=L(Ve,3,3);Et;--Et)E[De++]=0;break;case 18:for(Et=L(Ve,7,11);Et;--Et)E[De++]=0;break;default:E[De++]=mt}}P(Qe,E,0,Pe),P(Je,E,Pe,St),$=N(Ae,Ae.ltree,Ae.dtree);break;default:$=-3}if($!==0)throw new Error("Data error")}while(!ne);Ae.destLen<Ae.dest.length?typeof Ae.dest.slice=="function"?Ae.dest.slice(0,Ae.destLen):Ae.dest.subarray(0,Ae.destLen):Ae.dest}(S,I),I.byteLength!==C.length)throw new Error("Decompression error: "+C.tag+" decompressed length doesn't match recorded length");return{data:new DataView(I.buffer,0),offset:0}}function _o(S){var C,I,X,K,$,ne,we,Ae,De,Ve,Qe,Je,Pe,St,ut=new Mr({empty:!0}),lt=new DataView(S,0),ct=[];if((S=Ie.getTag(lt,0))==="\0\0\0"||S==="true"||S==="typ1")ut.outlinesFormat="truetype",ct=Sc(lt,X=Ie.getUShort(lt,4));else if(S==="OTTO")ut.outlinesFormat="cff",ct=Sc(lt,X=Ie.getUShort(lt,4));else{if(S!=="wOFF")throw new Error("Unsupported OpenType signature "+S);if((jt=Ie.getTag(lt,4))==="\0\0\0")ut.outlinesFormat="truetype";else{if(jt!=="OTTO")throw new Error("Unsupported OpenType flavor "+S);ut.outlinesFormat="cff"}ct=function(Er,Wr){for(var br=[],Fr=44,Zr=0;Zr<Wr;Zr+=1){var vn=Ie.getTag(Er,Fr),Dr=Ie.getULong(Er,Fr+4),on=Ie.getULong(Er,Fr+8),Ta=Ie.getULong(Er,Fr+12),Aa=on<Ta&&"WOFF";br.push({tag:vn,offset:Dr,compression:Aa,compressedLength:on,length:Ta}),Fr+=20}return br}(lt,X=Ie.getUShort(lt,12))}for(var mt=0;mt<X;mt+=1){var At=ct[mt],Et=void 0;switch(At.tag){case"cmap":Et=Yr(lt,At),ut.tables.cmap=Ye(Et.data,Et.offset),ut.encoding=new oe(ut.tables.cmap);break;case"cvt ":Et=Yr(lt,At),St=new Ie.Parser(Et.data,Et.offset),ut.tables.cvt=St.parseShortList(At.length/2);break;case"fvar":$=At;break;case"fpgm":Et=Yr(lt,At),St=new Ie.Parser(Et.data,Et.offset),ut.tables.fpgm=St.parseByteList(At.length);break;case"head":Et=Yr(lt,At),ut.tables.head=ci(Et.data,Et.offset),ut.unitsPerEm=ut.tables.head.unitsPerEm,C=ut.tables.head.indexToLocFormat;break;case"hhea":Et=Yr(lt,At),ut.tables.hhea=Hr(Et.data,Et.offset),ut.ascender=ut.tables.hhea.ascender,ut.descender=ut.tables.hhea.descender,ut.numberOfHMetrics=ut.tables.hhea.numberOfHMetrics;break;case"hmtx":De=At;break;case"ltag":Et=Yr(lt,At),I=Re(Et.data,Et.offset);break;case"maxp":Et=Yr(lt,At),ut.tables.maxp=Ke(Et.data,Et.offset),ut.numGlyphs=ut.tables.maxp.numGlyphs;break;case"name":Je=At;break;case"OS/2":Et=Yr(lt,At),ut.tables.os2=Xr(Et.data,Et.offset);break;case"post":Et=Yr(lt,At),ut.tables.post=Gi(Et.data,Et.offset),ut.glyphNames=new he(ut.tables.post);break;case"prep":Et=Yr(lt,At),St=new Ie.Parser(Et.data,Et.offset),ut.tables.prep=St.parseByteList(At.length);break;case"glyf":ne=At;break;case"loca":Qe=At;break;case"CFF ":K=At;break;case"kern":Ve=At;break;case"GPOS":we=At;break;case"GSUB":Ae=At;break;case"meta":Pe=At}}if(jt=Yr(lt,Je),ut.tables.name=Vt(jt.data,jt.offset,I),ut.names=ut.tables.name,ne&&Qe)S=C===0,jt=Yr(lt,Qe),jt=zs(jt.data,jt.offset,ut.numGlyphs,S),S=Yr(lt,ne),ut.glyphs=wa.parse(S.data,S.offset,jt,ut);else{if(!K)throw new Error("Font doesn't contain TrueType or CFF outlines.");S=Yr(lt,K),ar(S.data,S.offset,ut)}for(var jt=Yr(lt,De),Jt=(Le(jt.data,jt.offset,ut.numberOfHMetrics,ut.numGlyphs,ut.glyphs),ut),ir=Jt.tables.cmap.glyphIndexMap,dr=Object.keys(ir),Rr=0;Rr<dr.length;Rr+=1){var Sr,gr=dr[Rr],Zt=ir[gr];(Sr=Jt.glyphs.get(Zt)).addUnicode(parseInt(gr))}for(var Cr=0;Cr<Jt.glyphs.length;Cr+=1)Sr=Jt.glyphs.get(Cr),Jt.cffEncoding?Jt.isCIDFont?Sr.name="gid"+Cr:Sr.name=Jt.cffEncoding.charset[Cr]:Jt.glyphNames.names&&(Sr.name=Jt.glyphNames.glyphIndexToName(Cr));return Ve?(S=Yr(lt,Ve),ut.kerningPairs=xc(S.data,S.offset)):ut.kerningPairs={},we&&(jt=Yr(lt,we),ut.tables.gpos=_c(jt.data,jt.offset),ut.position.init()),Ae&&(S=Yr(lt,Ae),ut.tables.gsub=an(S.data,S.offset)),$&&(jt=Yr(lt,$),ut.tables.fvar=bc(jt.data,jt.offset,ut.names)),Pe&&(S=Yr(lt,Pe),ut.tables.meta=gn(S.data,S.offset),ut.metas=ut.tables.meta),ut}f.Font=Mr,f.Glyph=We,f.Path=W,f.BoundingBox=F,f._parse=Ie,f.parse=_o,f.load=function(S,C){(typeof window>"u"?Ed:Td)(S,function(I,X){if(I)return C(I);var K;try{K=_o(X)}catch($){return C($,null)}return C(null,K)})},f.loadSync=function(S){return _o(Dl(t("fs").readFileSync(S)))},Object.defineProperty(f,"__esModule",{value:!0})})(typeof M=="object"&&R!==void 0?M:this.opentype={})}).call(this,t("buffer").Buffer)},{buffer:4,fs:2}],248:[function(t,R,M){(function(p){function f(w,c){for(var l=0,o=w.length-1;0<=o;o--){var u=w[o];u==="."?w.splice(o,1):u===".."?(w.splice(o,1),l++):l&&(w.splice(o,1),l--)}if(c)for(;l--;)w.unshift("..");return w}function h(w,c){if(w.filter)return w.filter(c);for(var l=[],o=0;o<w.length;o++)c(w[o],o,w)&&l.push(w[o]);return l}M.resolve=function(){for(var w="",c=!1,l=arguments.length-1;-1<=l&&!c;l--){var o=0<=l?arguments[l]:p.cwd();if(typeof o!="string")throw new TypeError("Arguments to path.resolve must be strings");o&&(w=o+"/"+w,c=o.charAt(0)==="/")}return(c?"/":"")+(w=f(h(w.split("/"),function(u){return!!u}),!c).join("/"))||"."},M.normalize=function(w){var c=M.isAbsolute(w),l=b(w,-1)==="/";return(w=(w=f(h(w.split("/"),function(o){return!!o}),!c).join("/"))||c?w:".")&&l&&(w+="/"),(c?"/":"")+w},M.isAbsolute=function(w){return w.charAt(0)==="/"},M.join=function(){var w=Array.prototype.slice.call(arguments,0);return M.normalize(h(w,function(c,l){if(typeof c!="string")throw new TypeError("Arguments to path.join must be strings");return c}).join("/"))},M.relative=function(w,c){function l(x){for(var E=0;E<x.length&&x[E]==="";E++);for(var j=x.length-1;0<=j&&x[j]==="";j--);return j<E?[]:x.slice(E,j-E+1)}w=M.resolve(w).substr(1),c=M.resolve(c).substr(1);for(var o=l(w.split("/")),u=l(c.split("/")),m=Math.min(o.length,u.length),g=m,_=0;_<m;_++)if(o[_]!==u[_]){g=_;break}var v=[];for(_=g;_<o.length;_++)v.push("..");return(v=v.concat(u.slice(g))).join("/")},M.sep="/",M.delimiter=":",M.dirname=function(w){if(typeof w!="string"&&(w+=""),w.length===0)return".";for(var c=w.charCodeAt(0)===47,l=-1,o=!0,u=w.length-1;1<=u;--u)if(w.charCodeAt(u)===47){if(!o){l=u;break}}else o=!1;return l===-1?c?"/":".":c&&l===1?"/":w.slice(0,l)},M.basename=function(w,c){return w=function(l){typeof l!="string"&&(l+="");for(var o=0,u=-1,m=!0,g=l.length-1;0<=g;--g)if(l.charCodeAt(g)===47){if(!m){o=g+1;break}}else u===-1&&(m=!1,u=g+1);return u===-1?"":l.slice(o,u)}(w),c&&w.substr(-1*c.length)===c?w.substr(0,w.length-c.length):w},M.extname=function(w){typeof w!="string"&&(w+="");for(var c=-1,l=0,o=-1,u=!0,m=0,g=w.length-1;0<=g;--g){var _=w.charCodeAt(g);if(_===47){if(u)continue;l=g+1;break}o===-1&&(u=!1,o=g+1),_===46?c===-1?c=g:m!==1&&(m=1):c!==-1&&(m=-1)}return c===-1||o===-1||m===0||m===1&&c===o-1&&c===l+1?"":w.slice(c,o)};var b="ab".substr(-1)==="b"?function(w,c,l){return w.substr(c,l)}:function(w,c,l){return c<0&&(c=w.length+c),w.substr(c,l)}}).call(this,t("_process"))},{_process:249}],249:[function(t,R,M){var p,f;R=R.exports={};function h(){throw new Error("setTimeout has not been defined")}function b(){throw new Error("clearTimeout has not been defined")}try{p=typeof setTimeout=="function"?setTimeout:h}catch{p=h}try{f=typeof clearTimeout=="function"?clearTimeout:b}catch{f=b}function w(x){if(p===setTimeout)return setTimeout(x,0);if((p===h||!p)&&setTimeout)return(p=setTimeout)(x,0);try{return p(x,0)}catch{try{return p.call(null,x,0)}catch{return p.call(this,x,0)}}}var c,l=[],o=!1,u=-1;function m(){o&&c&&(o=!1,c.length?l=c.concat(l):u=-1,l.length&&g())}function g(){if(!o){for(var x=w(m),E=(o=!0,l.length);E;){for(c=l,l=[];++u<E;)c&&c[u].run();u=-1,E=l.length}c=null,o=!1,function(j){if(f===clearTimeout)return clearTimeout(j);if((f===b||!f)&&clearTimeout)return(f=clearTimeout)(j);try{f(j)}catch{try{return f.call(null,j)}catch{return f.call(this,j)}}}(x)}}function _(x,E){this.fun=x,this.array=E}function v(){}R.nextTick=function(x){var E=new Array(arguments.length-1);if(1<arguments.length)for(var j=1;j<arguments.length;j++)E[j-1]=arguments[j];l.push(new _(x,E)),l.length!==1||o||w(g)},_.prototype.run=function(){this.fun.apply(null,this.array)},R.title="browser",R.browser=!0,R.env={},R.argv=[],R.version="",R.versions={},R.on=v,R.addListener=v,R.once=v,R.off=v,R.removeListener=v,R.removeAllListeners=v,R.emit=v,R.prependListener=v,R.prependOnceListener=v,R.listeners=function(x){return[]},R.binding=function(x){throw new Error("process.binding is not supported")},R.cwd=function(){return"/"},R.chdir=function(x){throw new Error("process.chdir is not supported")},R.umask=function(){return 0}},{}],250:[function(t,R,M){R=function(p){var f,h=Object.prototype,b=h.hasOwnProperty,w=(P=typeof Symbol=="function"?Symbol:{}).iterator||"@@iterator",c=P.asyncIterator||"@@asyncIterator",l=P.toStringTag||"@@toStringTag";function o(Q,J,ee,te){var se,ce,q,Z;return J=J&&J.prototype instanceof E?J:E,J=Object.create(J.prototype),te=new G(te||[]),J._invoke=(se=Q,ce=ee,q=te,Z=m,function(ie,pe){if(Z===_)throw new Error("Generator is already running");if(Z===v){if(ie==="throw")throw pe;return W()}for(q.method=ie,q.arg=pe;;){var ge=q.delegate;if(ge&&(ge=function be(le,re){var Te=le.iterator[re.method];if(Te===f){if(re.delegate=null,re.method==="throw"){if(le.iterator.return&&(re.method="return",re.arg=f,be(le,re),re.method==="throw"))return x;re.method="throw",re.arg=new TypeError("The iterator does not provide a 'throw' method")}return x}return(Te=u(Te,le.iterator,re.arg)).type==="throw"?(re.method="throw",re.arg=Te.arg,re.delegate=null,x):(Te=Te.arg)?Te.done?(re[le.resultName]=Te.value,re.next=le.nextLoc,re.method!=="return"&&(re.method="next",re.arg=f),re.delegate=null,x):Te:(re.method="throw",re.arg=new TypeError("iterator result is not an object"),re.delegate=null,x)}(ge,q))){if(ge===x)continue;return ge}if(q.method==="next")q.sent=q._sent=q.arg;else if(q.method==="throw"){if(Z===m)throw Z=v,q.arg;q.dispatchException(q.arg)}else q.method==="return"&&q.abrupt("return",q.arg);if(Z=_,(ge=u(se,ce,q)).type==="normal"){if(Z=q.done?v:g,ge.arg!==x)return{value:ge.arg,done:q.done}}else ge.type==="throw"&&(Z=v,q.method="throw",q.arg=ge.arg)}}),J}function u(Q,J,ee){try{return{type:"normal",arg:Q.call(J,ee)}}catch(te){return{type:"throw",arg:te}}}p.wrap=o;var m="suspendedStart",g="suspendedYield",_="executing",v="completed",x={};function E(){}function j(){}function O(){}var P,L,z=((L=(L=((P={})[w]=function(){return this},Object.getPrototypeOf))&&L(L(F([]))))&&L!==h&&b.call(L,w)&&(P=L),O.prototype=E.prototype=Object.create(P));function N(Q){["next","throw","return"].forEach(function(J){Q[J]=function(ee){return this._invoke(J,ee)}})}function V(Q){var J;this._invoke=function(ee,te){function se(){return new Promise(function(ce,q){(function Z(ie,pe,ge,be){var le;if((ie=u(Q[ie],Q,pe)).type!=="throw")return(pe=(le=ie.arg).value)&&typeof pe=="object"&&b.call(pe,"__await")?Promise.resolve(pe.__await).then(function(re){Z("next",re,ge,be)},function(re){Z("throw",re,ge,be)}):Promise.resolve(pe).then(function(re){le.value=re,ge(le)},function(re){return Z("throw",re,ge,be)});be(ie.arg)})(ee,te,ce,q)})}return J=J?J.then(se,se):se()}}function k(Q){var J={tryLoc:Q[0]};1 in Q&&(J.catchLoc=Q[1]),2 in Q&&(J.finallyLoc=Q[2],J.afterLoc=Q[3]),this.tryEntries.push(J)}function H(Q){var J=Q.completion||{};J.type="normal",delete J.arg,Q.completion=J}function G(Q){this.tryEntries=[{tryLoc:"root"}],Q.forEach(k,this),this.reset(!0)}function F(Q){if(Q){var J,ee=Q[w];if(ee)return ee.call(Q);if(typeof Q.next=="function")return Q;if(!isNaN(Q.length))return J=-1,(ee=function te(){for(;++J<Q.length;)if(b.call(Q,J))return te.value=Q[J],te.done=!1,te;return te.value=f,te.done=!0,te}).next=ee}return{next:W}}function W(){return{value:f,done:!0}}return(j.prototype=z.constructor=O).constructor=j,O[l]=j.displayName="GeneratorFunction",p.isGeneratorFunction=function(Q){return!!(Q=typeof Q=="function"&&Q.constructor)&&(Q===j||(Q.displayName||Q.name)==="GeneratorFunction")},p.mark=function(Q){return Object.setPrototypeOf?Object.setPrototypeOf(Q,O):(Q.__proto__=O,l in Q||(Q[l]="GeneratorFunction")),Q.prototype=Object.create(z),Q},p.awrap=function(Q){return{__await:Q}},N(V.prototype),V.prototype[c]=function(){return this},p.AsyncIterator=V,p.async=function(Q,J,ee,te){var se=new V(o(Q,J,ee,te));return p.isGeneratorFunction(J)?se:se.next().then(function(ce){return ce.done?ce.value:se.next()})},N(z),z[l]="Generator",z[w]=function(){return this},z.toString=function(){return"[object Generator]"},p.keys=function(Q){var J,ee=[];for(J in Q)ee.push(J);return ee.reverse(),function te(){for(;ee.length;){var se=ee.pop();if(se in Q)return te.value=se,te.done=!1,te}return te.done=!0,te}},p.values=F,G.prototype={constructor:G,reset:function(Q){if(this.prev=0,this.next=0,this.sent=this._sent=f,this.done=!1,this.delegate=null,this.method="next",this.arg=f,this.tryEntries.forEach(H),!Q)for(var J in this)J.charAt(0)==="t"&&b.call(this,J)&&!isNaN(+J.slice(1))&&(this[J]=f)},stop:function(){this.done=!0;var Q=this.tryEntries[0].completion;if(Q.type==="throw")throw Q.arg;return this.rval},dispatchException:function(Q){if(this.done)throw Q;var J=this;function ee(ie,pe){return ce.type="throw",ce.arg=Q,J.next=ie,pe&&(J.method="next",J.arg=f),!!pe}for(var te=this.tryEntries.length-1;0<=te;--te){var se=this.tryEntries[te],ce=se.completion;if(se.tryLoc==="root")return ee("end");if(se.tryLoc<=this.prev){var q=b.call(se,"catchLoc"),Z=b.call(se,"finallyLoc");if(q&&Z){if(this.prev<se.catchLoc)return ee(se.catchLoc,!0);if(this.prev<se.finallyLoc)return ee(se.finallyLoc)}else if(q){if(this.prev<se.catchLoc)return ee(se.catchLoc,!0)}else{if(!Z)throw new Error("try statement without catch or finally");if(this.prev<se.finallyLoc)return ee(se.finallyLoc)}}}},abrupt:function(Q,J){for(var ee=this.tryEntries.length-1;0<=ee;--ee){var te=this.tryEntries[ee];if(te.tryLoc<=this.prev&&b.call(te,"finallyLoc")&&this.prev<te.finallyLoc){var se=te;break}}var ce=(se=se&&(Q==="break"||Q==="continue")&&se.tryLoc<=J&&J<=se.finallyLoc?null:se)?se.completion:{};return ce.type=Q,ce.arg=J,se?(this.method="next",this.next=se.finallyLoc,x):this.complete(ce)},complete:function(Q,J){if(Q.type==="throw")throw Q.arg;return Q.type==="break"||Q.type==="continue"?this.next=Q.arg:Q.type==="return"?(this.rval=this.arg=Q.arg,this.method="return",this.next="end"):Q.type==="normal"&&J&&(this.next=J),x},finish:function(Q){for(var J=this.tryEntries.length-1;0<=J;--J){var ee=this.tryEntries[J];if(ee.finallyLoc===Q)return this.complete(ee.completion,ee.afterLoc),H(ee),x}},catch:function(Q){for(var J=this.tryEntries.length-1;0<=J;--J){var ee,te,se=this.tryEntries[J];if(se.tryLoc===Q)return(ee=se.completion).type==="throw"&&(te=ee.arg,H(se)),te}throw new Error("illegal catch attempt")},delegateYield:function(Q,J,ee){return this.delegate={iterator:F(Q),resultName:J,nextLoc:ee},this.method==="next"&&(this.arg=f),x}},p}(typeof R=="object"?R.exports:{});try{regeneratorRuntime=R}catch{Function("r","regeneratorRuntime = r")(R)}},{}],251:[function(t,R,M){(function(p){var f,h,b,w,c,l,o,u,m,g;function _(H){if(typeof H!="string"&&(H=String(H)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(H))throw new TypeError("Invalid character in header field name");return H.toLowerCase()}function v(H){return typeof H!="string"?String(H):H}function x(H){var G={next:function(){var F=H.shift();return{done:F===void 0,value:F}}};return h&&(G[Symbol.iterator]=function(){return G}),G}function E(H){this.map={},H instanceof E?H.forEach(function(G,F){this.append(F,G)},this):Array.isArray(H)?H.forEach(function(G){this.append(G[0],G[1])},this):H&&Object.getOwnPropertyNames(H).forEach(function(G){this.append(G,H[G])},this)}function j(H){if(H.bodyUsed)return Promise.reject(new TypeError("Already read"));H.bodyUsed=!0}function O(H){return new Promise(function(G,F){H.onload=function(){G(H.result)},H.onerror=function(){F(H.error)}})}function P(H){var G=new FileReader,F=O(G);return G.readAsArrayBuffer(H),F}function L(H){var G;return H.slice?H.slice(0):((G=new Uint8Array(H.byteLength)).set(new Uint8Array(H)),G.buffer)}function z(){return this.bodyUsed=!1,this._initBody=function(H){if(this._bodyInit=H)if(typeof H=="string")this._bodyText=H;else if(b&&Blob.prototype.isPrototypeOf(H))this._bodyBlob=H;else if(w&&FormData.prototype.isPrototypeOf(H))this._bodyFormData=H;else if(f&&URLSearchParams.prototype.isPrototypeOf(H))this._bodyText=H.toString();else if(c&&b&&o(H))this._bodyArrayBuffer=L(H.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!c||!ArrayBuffer.prototype.isPrototypeOf(H)&&!u(H))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=L(H)}else this._bodyText="";this.headers.get("content-type")||(typeof H=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f&&URLSearchParams.prototype.isPrototypeOf(H)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b&&(this.blob=function(){var H=j(this);if(H)return H;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?j(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(P)}),this.text=function(){var H,G,F=j(this);if(F)return F;if(this._bodyBlob)return F=this._bodyBlob,G=O(H=new FileReader),H.readAsText(F),G;if(this._bodyArrayBuffer)return Promise.resolve(function(W){for(var Q=new Uint8Array(W),J=new Array(Q.length),ee=0;ee<Q.length;ee++)J[ee]=String.fromCharCode(Q[ee]);return J.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},w&&(this.formData=function(){return this.text().then(V)}),this.json=function(){return this.text().then(JSON.parse)},this}function N(H,G){var F,W=(G=G||{}).body;if(H instanceof N){if(H.bodyUsed)throw new TypeError("Already read");this.url=H.url,this.credentials=H.credentials,G.headers||(this.headers=new E(H.headers)),this.method=H.method,this.mode=H.mode,W||H._bodyInit==null||(W=H._bodyInit,H.bodyUsed=!0)}else this.url=String(H);if(this.credentials=G.credentials||this.credentials||"omit",!G.headers&&this.headers||(this.headers=new E(G.headers)),this.method=(F=(H=G.method||this.method||"GET").toUpperCase(),-1<m.indexOf(F)?F:H),this.mode=G.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&W)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(W)}function V(H){var G=new FormData;return H.trim().split("&").forEach(function(F){var W;F&&(W=(F=F.split("=")).shift().replace(/\+/g," "),F=F.join("=").replace(/\+/g," "),G.append(decodeURIComponent(W),decodeURIComponent(F)))}),G}function k(H,G){G=G||{},this.type="default",this.status=G.status===void 0?200:G.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in G?G.statusText:"OK",this.headers=new E(G.headers),this.url=G.url||"",this._initBody(H)}p.fetch||(f="URLSearchParams"in p,h="Symbol"in p&&"iterator"in Symbol,b="FileReader"in p&&"Blob"in p&&function(){try{return new Blob,!0}catch{return!1}}(),w="FormData"in p,(c="ArrayBuffer"in p)&&(l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=function(H){return H&&DataView.prototype.isPrototypeOf(H)},u=ArrayBuffer.isView||function(H){return H&&-1<l.indexOf(Object.prototype.toString.call(H))}),E.prototype.append=function(H,G){H=_(H),G=v(G);var F=this.map[H];this.map[H]=F?F+","+G:G},E.prototype.delete=function(H){delete this.map[_(H)]},E.prototype.get=function(H){return H=_(H),this.has(H)?this.map[H]:null},E.prototype.has=function(H){return this.map.hasOwnProperty(_(H))},E.prototype.set=function(H,G){this.map[_(H)]=v(G)},E.prototype.forEach=function(H,G){for(var F in this.map)this.map.hasOwnProperty(F)&&H.call(G,this.map[F],F,this)},E.prototype.keys=function(){var H=[];return this.forEach(function(G,F){H.push(F)}),x(H)},E.prototype.values=function(){var H=[];return this.forEach(function(G){H.push(G)}),x(H)},E.prototype.entries=function(){var H=[];return this.forEach(function(G,F){H.push([F,G])}),x(H)},h&&(E.prototype[Symbol.iterator]=E.prototype.entries),m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],N.prototype.clone=function(){return new N(this,{body:this._bodyInit})},z.call(N.prototype),z.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new E(this.headers),url:this.url})},k.error=function(){var H=new k(null,{status:0,statusText:""});return H.type="error",H},g=[301,302,303,307,308],k.redirect=function(H,G){if(g.indexOf(G)===-1)throw new RangeError("Invalid status code");return new k(null,{status:G,headers:{location:H}})},p.Headers=E,p.Request=N,p.Response=k,p.fetch=function(H,G){return new Promise(function(F,W){var Q=new N(H,G),J=new XMLHttpRequest;J.onload=function(){var ee,te={status:J.status,statusText:J.statusText,headers:(te=J.getAllResponseHeaders()||"",ee=new E,te.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(ce){var q=(ce=ce.split(":")).shift().trim();q&&(ce=ce.join(":").trim(),ee.append(q,ce))}),ee)},se=(te.url="responseURL"in J?J.responseURL:te.headers.get("X-Request-URL"),"response"in J?J.response:J.responseText);F(new k(se,te))},J.onerror=function(){W(new TypeError("Network request failed"))},J.ontimeout=function(){W(new TypeError("Network request failed"))},J.open(Q.method,Q.url,!0),Q.credentials==="include"?J.withCredentials=!0:Q.credentials==="omit"&&(J.withCredentials=!1),"responseType"in J&&b&&(J.responseType="blob"),Q.headers.forEach(function(ee,te){J.setRequestHeader(te,ee)}),J.send(Q._bodyInit===void 0?null:Q._bodyInit)})},p.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],252:[function(t,R,M){t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p,f=b(t("../core/main")),h=b(t("../color/color_conversion"));function b(l){return l&&l.__esModule?l:{default:l}}var w=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],c=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];f.default.prototype._rgbColorName=function(l){l=h.default._rgbaToHSBA(l);var o,u,m=[(p=l)[0],l[1],l[2]];m[0]!==0&&(m[0]=Math.round(100*m[0]),(l=m[0].toString().split(""))[u=l.length-1]=parseInt(l[u]),l[u]<2.5?l[u]=0:2.5<=l[u]&&l[u]<7.5&&(l[u]=5),l.length===2?(l[0]=parseInt(l[0]),7.5<=l[u]&&(l[u]=0,l[0]=l[0]+1),m[0]=10*l[0]+l[1]):7.5<=l[u]?m[0]=10:m[0]=l[u]),m[2]=m[2]/255;for(var g=m.length-1;1<=g;g--)m[g]<=.25?m[g]=0:.25<m[g]&&m[g]<.75?m[g]=.5:m[g]=1;if(m[0]===0&&m[1]===0&&m[2]===1){for(var _=2;0<=_;_--)p[_]=Math.round(1e4*p[_])/1e4;for(var v=0;v<w.length;v++){if(w[v].h===p[0]&&w[v].s===p[1]&&w[v].b===p[2]){o=w[v].name;break}o="white"}}else for(var x=0;x<c.length;x++)if(c[x].h===m[0]&&c[x].s===m[1]&&c[x].b===m[2]){o=c[x].name;break}return o},t=f.default,M.default=t},{"../color/color_conversion":258,"../core/main":273,"core-js/modules/es.function.name":167,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.split":196}],253:[function(t,R,M){t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(t=t("../core/main"))&&t.__esModule?t:{default:t},f="_Description",h="_fallbackDesc",b="_fallbackTable",w="_Label",c="_labelDesc",l="_labelTable";function o(u){if(u==="label"||u==="fallback")throw new Error("description should not be LABEL or FALLBACK");return u.endsWith(".")||u.endsWith(";")||u.endsWith(",")||u.endsWith("?")||u.endsWith("!")||(u+="."),u}p.default.prototype.describe=function(u,m){var g;p.default._validateParameters("describe",arguments),typeof u=="string"&&(g=this.canvas.id,u=o(u),this.dummyDOM||(this.dummyDOM=document.getElementById(g).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==u&&(this.descriptions.fallback.innerHTML=u):this._describeHTML("fallback",u),m===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==u&&(this.descriptions.label.innerHTML=u):this._describeHTML("label",u)))},p.default.prototype.describeElement=function(u,m,g){var _,v;p.default._validateParameters("describeElement",arguments),typeof m=="string"&&typeof u=="string"&&(_=this.canvas.id,m=o(m),v=function(x){if(x==="label"||x==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return x.endsWith(".")||x.endsWith(";")||x.endsWith(",")?x=x.replace(/.$/,":"):x.endsWith(":")||(x+=":"),x}(u),u=u.replace(/[^a-zA-Z0-9]/g,""),v='<th scope="row">'.concat(v,"</th><td>").concat(m,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(_).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[u]?this.descriptions.fallbackElements[u].innerHTML!==v&&(this.descriptions.fallbackElements[u].innerHTML=v):this._describeElementHTML("fallback",u,v),g===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[u]?this.descriptions.labelElements[u].innerHTML!==v&&(this.descriptions.labelElements[u].innerHTML=v):this._describeElementHTML("label",u,v)))},p.default.prototype._describeHTML=function(u,m){var g,_=this.canvas.id;u==="fallback"?(this.dummyDOM.querySelector("#".concat(_+f))?this.dummyDOM.querySelector("#"+_+b).insertAdjacentHTML("beforebegin",'<p id="'.concat(_+h,'"></p>')):(g='<div id="'.concat(_).concat(f,'" role="region" aria-label="Canvas Description"><p id="').concat(_).concat(h,'"></p></div>'),this.dummyDOM.querySelector("#".concat(_,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(_,"accessibleOutput")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#".concat(_)).innerHTML=g),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(_).concat(h)),this.descriptions.fallback.innerHTML=m):u==="label"&&(this.dummyDOM.querySelector("#".concat(_+w))?this.dummyDOM.querySelector("#".concat(_+l))&&this.dummyDOM.querySelector("#".concat(_+l)).insertAdjacentHTML("beforebegin",'<p id="'.concat(_).concat(c,'"></p>')):(g='<div id="'.concat(_).concat(w,'" class="p5Label"><p id="').concat(_).concat(c,'"></p></div>'),this.dummyDOM.querySelector("#".concat(_,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(_,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+_).insertAdjacentHTML("afterend",g)),this.descriptions.label=this.dummyDOM.querySelector("#"+_+c),this.descriptions.label.innerHTML=m)},p.default.prototype._describeElementHTML=function(u,m,g){var _,v=this.canvas.id;u==="fallback"?(this.dummyDOM.querySelector("#".concat(v+f))?this.dummyDOM.querySelector("#"+v+b)||this.dummyDOM.querySelector("#"+v+h).insertAdjacentHTML("afterend",'<table id="'.concat(v).concat(b,'"><caption>Canvas elements and their descriptions</caption></table>')):(_='<div id="'.concat(v).concat(f,'" role="region" aria-label="Canvas Description"><table id="').concat(v).concat(b,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(v,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(v,"accessibleOutput")).insertAdjacentHTML("beforebegin",_):this.dummyDOM.querySelector("#"+v).innerHTML=_),(_=document.createElement("tr")).id=v+"_fte_"+m,this.dummyDOM.querySelector("#"+v+b).appendChild(_),this.descriptions.fallbackElements[m]=this.dummyDOM.querySelector("#".concat(v).concat("_fte_").concat(m)),this.descriptions.fallbackElements[m].innerHTML=g):u==="label"&&(this.dummyDOM.querySelector("#".concat(v+w))?this.dummyDOM.querySelector("#".concat(v+l))||this.dummyDOM.querySelector("#"+v+c).insertAdjacentHTML("afterend",'<table id="'.concat(v+l,'"></table>')):(_='<div id="'.concat(v).concat(w,'" class="p5Label"><table id="').concat(v).concat(l,'"></table></div>'),this.dummyDOM.querySelector("#".concat(v,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(v,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",_):this.dummyDOM.querySelector("#"+v).insertAdjacentHTML("afterend",_)),(u=document.createElement("tr")).id=v+"_lte_"+m,this.dummyDOM.querySelector("#"+v+l).appendChild(u),this.descriptions.labelElements[m]=this.dummyDOM.querySelector("#".concat(v).concat("_lte_").concat(m)),this.descriptions.labelElements[m].innerHTML=g)},t=p.default,M.default=t},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.ends-with":188,"core-js/modules/es.string.replace":194}],254:[function(t,R,M){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0,(t=(t=t("../core/main"))&&t.__esModule?t:{default:t}).default.prototype._updateGridOutput=function(p){var f,h,b,w;this.dummyDOM.querySelector("#".concat(p,"_summary"))&&(f=this._accessibleOutputs[p],b=function(c,l,o,u){return l="".concat(l," canvas, ").concat(o," by ").concat(u," pixels, contains ").concat(c[0]),l=(c[0]===1?"".concat(l," shape: "):"".concat(l," shapes: ")).concat(c[1])}((h=function(c,l){var o,u="",m="",g=0;for(o in l){var _,v=0;for(_ in l[o]){var x='<li id="'.concat(c,"shape").concat(g,'">').concat(l[o][_].color," ").concat(o,",");o==="line"?x+=" location = ".concat(l[o][_].pos,", length = ").concat(l[o][_].length," pixels"):(x+=" location = ".concat(l[o][_].pos),o!=="point"&&(x+=", area = ".concat(l[o][_].area," %")),x+="</li>"),u+=x,v++,g++}m=1<v?"".concat(m," ").concat(v," ").concat(o,"s"):"".concat(m," ").concat(v," ").concat(o)}return{numShapes:[g,m],details:u}}(p,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),w=function(c,l){var o,u,m=0,g="",_=Array.from(Array(10),function(){return Array(10)});for(o in l)for(var v in l[o]){var x;x=o!=="line"?'<a href="#'.concat(c,"shape").concat(m,'">').concat(l[o][v].color," ").concat(o,"</a>"):'<a href="#'.concat(c,"shape").concat(m,'">').concat(l[o][v].color," ").concat(o," midpoint</a>"),_[l[o][v].loc.locY][l[o][v].loc.locX]?_[l[o][v].loc.locY][l[o][v].loc.locX]=_[l[o][v].loc.locY][l[o][v].loc.locX]+"  "+x:_[l[o][v].loc.locY][l[o][v].loc.locX]=x,m++}for(u in _){var E,j="<tr>";for(E in _[u])j+="<td>",_[u][E]!==void 0&&(j+=_[u][E]),j+="</td>";g=g+j+"</tr>"}return g}(p,this.ingredients.shapes),b!==f.summary.innerHTML&&(f.summary.innerHTML=b),w!==f.map.innerHTML&&(f.map.innerHTML=w),h.details!==f.shapeDetails.innerHTML&&(f.shapeDetails.innerHTML=h.details),this._accessibleOutputs[p]=f)},t=t.default,M.default=t},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.from":157,"core-js/modules/es.array.map":163,"core-js/modules/es.string.iterator":190}],255:[function(t,R,M){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(h,b,w){return(b=Math.floor(h[0]/b*10))===10&&(b-=1),(h=Math.floor(h[1]/w*10))===10&&(h-=1),{locX:b,locY:h}}p.default.prototype.textOutput=function(h){p.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),h===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},p.default.prototype.gridOutput=function(h){p.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),h===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},p.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},p.default.prototype._createOutput=function(h,b){var w,c,l,o=this.canvas.id,u=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(o).parentNode),"");b==="Fallback"?(w=o+h,this.dummyDOM.querySelector("#".concat(c=o+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(o,"_Description"))?this.dummyDOM.querySelector("#".concat(o,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(c,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(o)).innerHTML='<div id="'.concat(c,'" role="region" aria-label="Canvas Outputs"></div>'))):b==="Label"&&(w=o+h+(u=b),this.dummyDOM.querySelector("#".concat(c=o+"accessibleOutput"+b))||(this.dummyDOM.querySelector("#".concat(o,"_Label"))?this.dummyDOM.querySelector("#".concat(o,"_Label")):this.dummyDOM.querySelector("#".concat(o))).insertAdjacentHTML("afterend",'<div id="'.concat(c,'"></div>'))),this._accessibleOutputs[w]={},h==="textOutput"?(u="#".concat(o,"gridOutput").concat(u),l='<div id="'.concat(w,'">Text Output<div id="').concat(w,'Summary" aria-label="text output summary"><p id="').concat(w,'_summary"></p><ul id="').concat(w,'_list"></ul></div><table id="').concat(w,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(u)?this.dummyDOM.querySelector(u).insertAdjacentHTML("beforebegin",l):this.dummyDOM.querySelector("#".concat(c)).innerHTML=l,this._accessibleOutputs[w].list=this.dummyDOM.querySelector("#".concat(w,"_list"))):h==="gridOutput"&&(u="#".concat(o,"textOutput").concat(u),l='<div id="'.concat(w,'">Grid Output<p id="').concat(w,'_summary" aria-label="grid output summary"><table id="').concat(w,'_map" summary="grid output content"></table><ul id="').concat(w,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(u)?this.dummyDOM.querySelector(u).insertAdjacentHTML("afterend",l):this.dummyDOM.querySelector("#".concat(c)).innerHTML=l,this._accessibleOutputs[w].map=this.dummyDOM.querySelector("#".concat(w,"_map"))),this._accessibleOutputs[w].shapeDetails=this.dummyDOM.querySelector("#".concat(w,"_shapeDetails")),this._accessibleOutputs[w].summary=this.dummyDOM.querySelector("#".concat(w,"_summary"))},p.default.prototype._updateAccsOutput=function(){var h=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(h+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(h+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(h+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(h+"gridOutputLabel"))},p.default.prototype._accsBackground=function(h){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==h&&(this.ingredients.colors.backgroundRGBA=h,this.ingredients.colors.background=this._rgbColorName(h))},p.default.prototype._accsCanvasColors=function(h,b){h==="fill"?this.ingredients.colors.fillRGBA!==b&&(this.ingredients.colors.fillRGBA=b,this.ingredients.colors.fill=this._rgbColorName(b)):h==="stroke"&&this.ingredients.colors.strokeRGBA!==b&&(this.ingredients.colors.strokeRGBA=b,this.ingredients.colors.stroke=this._rgbColorName(b))},p.default.prototype._accsOutput=function(h,b){h==="ellipse"&&b[2]===b[3]?h="circle":h==="rectangle"&&b[2]===b[3]&&(h="square");var w,c,l={},o=!0,u=function(g,_){var v;return g=g==="rectangle"||g==="ellipse"||g==="arc"||g==="circle"||g==="square"?(v=Math.round(_[0]+_[2]/2),Math.round(_[1]+_[3]/2)):g==="triangle"?(v=(_[0]+_[2]+_[4])/3,(_[1]+_[3]+_[5])/3):g==="quadrilateral"?(v=(_[0]+_[2]+_[4]+_[6])/4,(_[1]+_[3]+_[5]+_[7])/4):g==="line"?(v=(_[0]+_[2])/2,(_[1]+_[3])/2):(v=_[0],_[1]),[v,g]}(h,b);if(h==="line"?(l.color=this.ingredients.colors.stroke,l.length=Math.round(this.dist(b[0],b[1],b[2],b[3])),w=this._getPos(b[0],[1]),c=this._getPos(b[2],[3]),l.loc=f(u,this.width,this.height),l.pos=w===c?"at ".concat(w):"from ".concat(w," to ").concat(c)):(h==="point"?l.color=this.ingredients.colors.stroke:(l.color=this.ingredients.colors.fill,l.area=this._getArea(h,b)),l.pos=this._getPos.apply(this,function(g){return function(_){if(Array.isArray(_)){for(var v=0,x=new Array(_.length);v<_.length;v++)x[v]=_[v];return x}}(g)||function(_){if(Symbol.iterator in Object(_)||Object.prototype.toString.call(_)==="[object Arguments]")return Array.from(_)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(u)),l.loc=f(u,this.width,this.height)),this.ingredients.shapes[h]){if(this.ingredients.shapes[h]!==[l]){for(var m in this.ingredients.shapes[h])JSON.stringify(this.ingredients.shapes[h][m])===JSON.stringify(l)&&(o=!1);o===!0&&this.ingredients.shapes[h].push(l)}}else this.ingredients.shapes[h]=[l]},p.default.prototype._getPos=function(h,b){h=new DOMPointReadOnly(h,b),b=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),b=(h=h.matrixTransform(b)).x,h=h.y;var w=this.width,c=this.height;return b<.4*w?h<.4*c?"top left":.6*c<h?"bottom left":"mid left":.6*w<b?h<.4*c?"top right":.6*c<h?"bottom right":"mid right":h<.4*c?"top middle":.6*c<h?"bottom middle":"middle"},p.default.prototype._getArea=function(h,b){var w,c,l=0,o=(h==="arc"?(l=(w=((b[5]-b[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*b[2]*b[3]/8,b[6]!=="open"&&b[6]!=="chord"||(c=b[0],_=b[1],o=b[0]+b[2]/2*Math.cos(b[4]).toFixed(2),v=b[1]+b[3]/2*Math.sin(b[4]).toFixed(2),m=b[0]+b[2]/2*Math.cos(b[5]).toFixed(2),u=b[1]+b[3]/2*Math.sin(b[5]).toFixed(2),c=Math.abs(c*(v-u)+o*(u-_)+m*(_-v))/2,w>Math.PI?l+=c:l-=c)):h==="ellipse"||h==="circle"?l=3.14*b[2]/2*b[3]/2:h==="line"||h==="point"?l=0:h==="quadrilateral"?l=Math.abs((b[6]+b[0])*(b[7]-b[1])+(b[0]+b[2])*(b[1]-b[3])+(b[2]+b[4])*(b[3]-b[5])+(b[4]+b[6])*(b[5]-b[7]))/2:h==="rectangle"||h==="square"?l=b[2]*b[3]:h==="triangle"&&(l=Math.abs(b[0]*(b[3]-b[5])+b[2]*(b[5]-b[1])+b[4]*(b[1]-b[3]))/2),this.width*this._pixelDensity),u=this.height*this._pixelDensity,m=[new DOMPoint(0,0),new DOMPoint(o,0),new DOMPoint(o,u),new DOMPoint(0,u)],g=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),_=m.map(function(x){return x.matrixTransform(g)}),v=Math.abs((_[3].x+_[0].x)*(_[3].y-_[0].y)+(_[0].x+_[1].x)*(_[0].y-_[1].y)+(_[1].x+_[2].x)*(_[1].y-_[2].y)+(_[2].x+_[3].x)*(_[2].y-_[3].y))/2;return Math.round(100*l/v)},t=p.default,M.default=t},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],256:[function(t,R,M){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.concat"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0,(t=(t=t("../core/main"))&&t.__esModule?t:{default:t}).default.prototype._updateTextOutput=function(p){var f,h,b,w;this.dummyDOM.querySelector("#".concat(p,"_summary"))&&(f=this._accessibleOutputs[p],b=function(c,l,o,u){return o="Your output is a, ".concat(o," by ").concat(u," pixels, ").concat(l," canvas containing the following"),o=c===1?"".concat(o," shape:"):"".concat(o," ").concat(c," shapes:")}((h=function(c,l){var o,u="",m=0;for(o in l)for(var g in l[o]){var _='<li><a href="#'.concat(c,"shape").concat(m,'">').concat(l[o][g].color," ").concat(o,"</a>");o==="line"?_+=", ".concat(l[o][g].pos,", ").concat(l[o][g].length," pixels long.</li>"):(_+=", at ".concat(l[o][g].pos),o!=="point"&&(_+=", covering ".concat(l[o][g].area,"% of the canvas")),_+=".</li>"),u+=_,m++}return{numShapes:m,listShapes:u}}(p,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),w=function(c,l){var o,u="",m=0;for(o in l)for(var g in l[o]){var _='<tr id="'.concat(c,"shape").concat(m,'"><th>').concat(l[o][g].color," ").concat(o,"</th>");o==="line"?_+="<td>location = ".concat(l[o][g].pos,"</td><td>length = ").concat(l[o][g].length," pixels</td></tr>"):(_+="<td>location = ".concat(l[o][g].pos,"</td>"),o!=="point"&&(_+="<td> area = ".concat(l[o][g].area,"%</td>")),_+="</tr>"),u+=_,m++}return u}(p,this.ingredients.shapes),b!==f.summary.innerHTML&&(f.summary.innerHTML=b),h.listShapes!==f.list.innerHTML&&(f.list.innerHTML=h.listShapes),w!==f.shapeDetails.innerHTML&&(f.shapeDetails.innerHTML=w),this._accessibleOutputs[p]=f)},t=t.default,M.default=t},{"../core/main":273,"core-js/modules/es.array.concat":151}],257:[function(t,R,M){var p=(p=t("./core/main"))&&p.__esModule?p:{default:p};t("./core/constants"),t("./core/environment"),t("./core/friendly_errors/stacktrace"),t("./core/friendly_errors/validate_params"),t("./core/friendly_errors/file_errors"),t("./core/friendly_errors/fes_core"),t("./core/friendly_errors/sketch_reader"),t("./core/helpers"),t("./core/legacy"),t("./core/preload"),t("./core/p5.Element"),t("./core/p5.Graphics"),t("./core/p5.Renderer"),t("./core/p5.Renderer2D"),t("./core/rendering"),t("./core/shim"),t("./core/structure"),t("./core/transform"),t("./core/shape/2d_primitives"),t("./core/shape/attributes"),t("./core/shape/curves"),t("./core/shape/vertex"),t("./accessibility/outputs"),t("./accessibility/textOutput"),t("./accessibility/gridOutput"),t("./accessibility/color_namer"),t("./color/color_conversion"),t("./color/creating_reading"),t("./color/p5.Color"),t("./color/setting"),t("./data/p5.TypedDict"),t("./data/local_storage.js"),t("./dom/dom"),t("./accessibility/describe"),t("./events/acceleration"),t("./events/keyboard"),t("./events/mouse"),t("./events/touch"),t("./image/filters"),t("./image/image"),t("./image/loading_displaying"),t("./image/p5.Image"),t("./image/pixels"),t("./io/files"),t("./io/p5.Table"),t("./io/p5.TableRow"),t("./io/p5.XML"),t("./math/calculation"),t("./math/math"),t("./math/noise"),t("./math/p5.Vector"),t("./math/random"),t("./math/trigonometry"),t("./typography/attributes"),t("./typography/loading_displaying"),t("./typography/p5.Font"),t("./utilities/array_functions"),t("./utilities/conversion"),t("./utilities/string_functions"),t("./utilities/time_date"),t("./webgl/3d_primitives"),t("./webgl/interaction"),t("./webgl/light"),t("./webgl/loading"),t("./webgl/material"),t("./webgl/p5.Camera"),t("./webgl/p5.Geometry"),t("./webgl/p5.Matrix"),t("./webgl/p5.RendererGL.Immediate"),t("./webgl/p5.RendererGL"),t("./webgl/p5.RendererGL.Retained"),t("./webgl/p5.Framebuffer"),t("./webgl/p5.Shader"),t("./webgl/p5.RenderBuffer"),t("./webgl/p5.Texture"),t("./webgl/text"),t("./core/init"),R.exports=p.default},{"./accessibility/color_namer":252,"./accessibility/describe":253,"./accessibility/gridOutput":254,"./accessibility/outputs":255,"./accessibility/textOutput":256,"./color/color_conversion":258,"./color/creating_reading":259,"./color/p5.Color":260,"./color/setting":261,"./core/constants":262,"./core/environment":263,"./core/friendly_errors/fes_core":264,"./core/friendly_errors/file_errors":265,"./core/friendly_errors/sketch_reader":266,"./core/friendly_errors/stacktrace":267,"./core/friendly_errors/validate_params":268,"./core/helpers":269,"./core/init":270,"./core/legacy":272,"./core/main":273,"./core/p5.Element":274,"./core/p5.Graphics":275,"./core/p5.Renderer":276,"./core/p5.Renderer2D":277,"./core/preload":278,"./core/rendering":279,"./core/shape/2d_primitives":280,"./core/shape/attributes":281,"./core/shape/curves":282,"./core/shape/vertex":283,"./core/shim":284,"./core/structure":285,"./core/transform":286,"./data/local_storage.js":287,"./data/p5.TypedDict":288,"./dom/dom":289,"./events/acceleration":290,"./events/keyboard":291,"./events/mouse":292,"./events/touch":293,"./image/filters":294,"./image/image":295,"./image/loading_displaying":296,"./image/p5.Image":297,"./image/pixels":298,"./io/files":299,"./io/p5.Table":300,"./io/p5.TableRow":301,"./io/p5.XML":302,"./math/calculation":303,"./math/math":304,"./math/noise":305,"./math/p5.Vector":306,"./math/random":307,"./math/trigonometry":308,"./typography/attributes":309,"./typography/loading_displaying":310,"./typography/p5.Font":311,"./utilities/array_functions":312,"./utilities/conversion":313,"./utilities/string_functions":314,"./utilities/time_date":315,"./webgl/3d_primitives":316,"./webgl/interaction":317,"./webgl/light":318,"./webgl/loading":319,"./webgl/material":320,"./webgl/p5.Camera":321,"./webgl/p5.Framebuffer":322,"./webgl/p5.Geometry":323,"./webgl/p5.Matrix":324,"./webgl/p5.RenderBuffer":325,"./webgl/p5.RendererGL":328,"./webgl/p5.RendererGL.Immediate":326,"./webgl/p5.RendererGL.Retained":327,"./webgl/p5.Shader":329,"./webgl/p5.Texture":330,"./webgl/text":331}],258:[function(t,R,M){Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0,(t=(t=t("../core/main"))&&t.__esModule?t:{default:t}).default.ColorConversion={_hsbaToHSLA:function(p){var f=p[0],h=p[1],b=p[2],w=(2-h)*b/2;return w!=0&&(w==1?h=0:w<.5?h/=2-h:h=h*b/(2-2*w)),[f,h,w,p[3]]},_hsbaToRGBA:function(p){var f,h,b,w,c,l=6*p[0],o=p[1],u=p[2];return o===0?[u,u,u,p[3]]:(h=u*(1-o),b=u*(1-o*(l-(f=Math.floor(l)))),o=u*(1-o*(1+f-l)),l=f===1?(w=b,c=u,h):f===2?(w=h,c=u,o):f===3?(w=h,c=b,u):f===4?(w=o,c=h,u):f===5?(w=u,c=h,b):(w=u,c=o,h),[w,c,l,p[3]])},_hslaToHSBA:function(p){var f=p[0],h=p[1],b=p[2],w=b<.5?(1+h)*b:b+h-b*h;return[f,h=2*(w-b)/w,w,p[3]]},_hslaToRGBA:function(p){var f,h=6*p[0],b=p[1],w=p[2];return b===0?[w,w,w,p[3]]:[(f=function(c,l,o){return c<0?c+=6:6<=c&&(c-=6),c<1?l+(o-l)*c:c<3?o:c<4?l+(o-l)*(4-c):l})(2+h,b=2*w-(w=w<.5?(1+b)*w:w+b-w*b),w),f(h,b,w),f(h-2,b,w),p[3]]},_rgbaToHSBA:function(p){var f,h,b=p[0],w=p[1],c=p[2],l=Math.max(b,w,c),o=l-Math.min(b,w,c);return o==0?h=f=0:(h=o/l,b===l?f=(w-c)/o:w===l?f=2+(c-b)/o:c===l&&(f=4+(b-w)/o),f<0?f+=6:6<=f&&(f-=6)),[f/6,h,l,p[3]]},_rgbaToHSLA:function(p){var f,h,b,w=p[0],c=p[1],l=p[2],o=Math.max(w,c,l),u=o+(b=Math.min(w,c,l));return(b=o-b)==0?h=f=0:(h=u<1?b/u:b/(2-u),w===o?f=(c-l)/b:c===o?f=2+(l-w)/b:l===o&&(f=4+(w-c)/b),f<0?f+=6:6<=f&&(f-=6)),[f/6,h,u/2,p[3]]}},t=t.default.ColorConversion,M.default=t},{"../core/main":273}],259:[function(t,R,M){function p(c){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}function f(c){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(l){return p(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":p(l)})(c)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.map"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var h=(w=t("../core/main"))&&w.__esModule?w:{default:w},b=function(c){if(c&&c.__esModule)return c;if(c===null||f(c)!=="object"&&typeof c!="function")return{default:c};var l=function(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,_)}();if(l&&l.has(c))return l.get(c);var o,u={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in c){var g;Object.prototype.hasOwnProperty.call(c,o)&&((g=m?Object.getOwnPropertyDescriptor(c,o):null)&&(g.get||g.set)?Object.defineProperty(u,o,g):u[o]=c[o])}return u.default=c,l&&l.set(c,u),u}(t("../core/constants"));t("./p5.Color"),t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),h.default.prototype.alpha=function(c){return h.default._validateParameters("alpha",arguments),this.color(c)._getAlpha()},h.default.prototype.blue=function(c){return h.default._validateParameters("blue",arguments),this.color(c)._getBlue()},h.default.prototype.brightness=function(c){return h.default._validateParameters("brightness",arguments),this.color(c)._getBrightness()},h.default.prototype.color=function(){var c;return h.default._validateParameters("color",arguments),arguments[0]instanceof h.default.Color?arguments[0]:(c=arguments[0]instanceof Array?arguments[0]:arguments,new h.default.Color(this,c))},h.default.prototype.green=function(c){return h.default._validateParameters("green",arguments),this.color(c)._getGreen()},h.default.prototype.hue=function(c){return h.default._validateParameters("hue",arguments),this.color(c)._getHue()},h.default.prototype.lerpColor=function(c,l,o){h.default._validateParameters("lerpColor",arguments);var u,m,g,_=this._colorMode,v=this._colorMaxes;if(_===b.RGB)m=c.levels.map(function(x){return x/255}),g=l.levels.map(function(x){return x/255});else if(_===b.HSB)c._getBrightness(),l._getBrightness(),m=c.hsba,g=l.hsba;else{if(_!==b.HSL)throw new Error("".concat(_,"cannot be used for interpolation."));c._getLightness(),l._getLightness(),m=c.hsla,g=l.hsla}return o=Math.max(Math.min(o,1),0),this.lerp===void 0&&(this.lerp=function(x,E,j){return j*(E-x)+x}),c=this.lerp(m[0],g[0],o),l=this.lerp(m[1],g[1],o),u=this.lerp(m[2],g[2],o),m=this.lerp(m[3],g[3],o),c*=v[_][0],l*=v[_][1],u*=v[_][2],m*=v[_][3],this.color(c,l,u,m)},h.default.prototype.lightness=function(c){return h.default._validateParameters("lightness",arguments),this.color(c)._getLightness()},h.default.prototype.red=function(c){return h.default._validateParameters("red",arguments),this.color(c)._getRed()},h.default.prototype.saturation=function(c){return h.default._validateParameters("saturation",arguments),this.color(c)._getSaturation()};var w=h.default;M.default=w},{"../core/constants":262,"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/main":273,"./p5.Color":260,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],260:[function(t,R,M){function p(v){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(v)}function f(v){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(x){return p(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":p(x)})(v)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.trim"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var h=c(t("../core/main")),b=function(v){if(v&&v.__esModule)return v;if(v===null||f(v)!=="object"&&typeof v!="function")return{default:v};var x=function(){var L;return typeof WeakMap!="function"?null:(L=new WeakMap,L)}();if(x&&x.has(v))return x.get(v);var E,j={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(E in v){var P;Object.prototype.hasOwnProperty.call(v,E)&&((P=O?Object.getOwnPropertyDescriptor(v,E):null)&&(P.get||P.set)?Object.defineProperty(j,E,P):j[E]=v[E])}return j.default=v,x&&x.set(v,j),j}(t("../core/constants")),w=c(t("./color_conversion"));function c(v){return v&&v.__esModule?v:{default:v}}function l(v,x){for(var E=0;E<x.length;E++){var j=x[E];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(v,j.key,j)}}var o={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},u=(t=/\s*/,/(\d{1,3})/),m=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,g=new RegExp("".concat(m.source,"%")),_={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",u.source,",",u.source,",",u.source,"\\)$"].join(t.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",g.source,",",g.source,",",g.source,"\\)$"].join(t.source),"i"),RGBA:new RegExp(["^rgba\\(",u.source,",",u.source,",",u.source,",",m.source,"\\)$"].join(t.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",g.source,",",g.source,",",g.source,",",m.source,"\\)$"].join(t.source),"i"),HSL:new RegExp(["^hsl\\(",u.source,",",g.source,",",g.source,"\\)$"].join(t.source),"i"),HSLA:new RegExp(["^hsla\\(",u.source,",",g.source,",",g.source,",",m.source,"\\)$"].join(t.source),"i"),HSB:new RegExp(["^hsb\\(",u.source,",",g.source,",",g.source,"\\)$"].join(t.source),"i"),HSBA:new RegExp(["^hsba\\(",u.source,",",g.source,",",g.source,",",m.source,"\\)$"].join(t.source),"i")};h.default.Color=function(){function v(O,P){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(O._colorMode,O._colorMaxes),![b.RGB,b.HSL,b.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=v._parseInputs.apply(this,P),this._calculateLevels()}var x,E,j;return x=v,j=[{key:"_parseInputs",value:function(O,P,L,z){var N,V=arguments.length,k=this.mode,H=this.maxes[k],G=[];if(3<=V){for(G[0]=O/H[0],G[1]=P/H[1],G[2]=L/H[2],G[3]=typeof z=="number"?z/H[3]:1,N=G.length-1;0<=N;--N){var F=G[N];F<0?G[N]=0:1<F&&(G[N]=1)}return k===b.HSL?w.default._hslaToRGBA(G):k===b.HSB?w.default._hsbaToRGBA(G):G}if(V===1&&typeof O=="string"){if(L=O.trim().toLowerCase(),o[L])return v._parseInputs.call(this,o[L]);if(_.HEX3.test(L))return(G=_.HEX3.exec(L).slice(1).map(function(W){return parseInt(W+W,16)/255}))[3]=1,G;if(_.HEX6.test(L))return(G=_.HEX6.exec(L).slice(1).map(function(W){return parseInt(W,16)/255}))[3]=1,G;if(_.HEX4.test(L))return _.HEX4.exec(L).slice(1).map(function(W){return parseInt(W+W,16)/255});if(_.HEX8.test(L))return _.HEX8.exec(L).slice(1).map(function(W){return parseInt(W,16)/255});if(_.RGB.test(L))return(G=_.RGB.exec(L).slice(1).map(function(W){return W/255}))[3]=1,G;if(_.RGB_PERCENT.test(L))return(G=_.RGB_PERCENT.exec(L).slice(1).map(function(W){return parseFloat(W)/100}))[3]=1,G;if(_.RGBA.test(L))return _.RGBA.exec(L).slice(1).map(function(W,Q){return Q===3?parseFloat(W):W/255});if(_.RGBA_PERCENT.test(L))return _.RGBA_PERCENT.exec(L).slice(1).map(function(W,Q){return Q===3?parseFloat(W):parseFloat(W)/100});if(_.HSL.test(L)?(G=_.HSL.exec(L).slice(1).map(function(W,Q){return Q===0?parseInt(W,10)/360:parseInt(W,10)/100}))[3]=1:_.HSLA.test(L)&&(G=_.HSLA.exec(L).slice(1).map(function(W,Q){return Q===0?parseInt(W,10)/360:Q===3?parseFloat(W):parseInt(W,10)/100})),(G=G.map(function(W){return Math.max(Math.min(W,1),0)})).length)return w.default._hslaToRGBA(G);if(_.HSB.test(L)?(G=_.HSB.exec(L).slice(1).map(function(W,Q){return Q===0?parseInt(W,10)/360:parseInt(W,10)/100}))[3]=1:_.HSBA.test(L)&&(G=_.HSBA.exec(L).slice(1).map(function(W,Q){return Q===0?parseInt(W,10)/360:Q===3?parseFloat(W):parseInt(W,10)/100})),G.length){for(N=G.length-1;0<=N;--N)G[N]=Math.max(Math.min(G[N],1),0);return w.default._hsbaToRGBA(G)}G=[1,1,1,1]}else{if(V!==1&&V!==2||typeof O!="number")throw new Error("".concat(arguments,"is not a valid color representation."));G[0]=O/H[2],G[1]=O/H[2],G[2]=O/H[2],G[3]=typeof P=="number"?P/H[3]:1,G=G.map(function(W){return Math.max(Math.min(W,1),0)})}return G}}],(E=[{key:"toString",value:function(O){var P=this.levels,L=this._array,z=L[3];switch(O){case"#rrggbb":return"#".concat(P[0]<16?"0".concat(P[0].toString(16)):P[0].toString(16),P[1]<16?"0".concat(P[1].toString(16)):P[1].toString(16),P[2]<16?"0".concat(P[2].toString(16)):P[2].toString(16));case"#rrggbbaa":return"#".concat(P[0]<16?"0".concat(P[0].toString(16)):P[0].toString(16),P[1]<16?"0".concat(P[1].toString(16)):P[1].toString(16),P[2]<16?"0".concat(P[2].toString(16)):P[2].toString(16),P[3]<16?"0".concat(P[3].toString(16)):P[3].toString(16));case"#rgb":return"#".concat(Math.round(15*L[0]).toString(16),Math.round(15*L[1]).toString(16),Math.round(15*L[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*L[0]).toString(16),Math.round(15*L[1]).toString(16),Math.round(15*L[2]).toString(16),Math.round(15*L[3]).toString(16));case"rgb":return"rgb(".concat(P[0],", ",P[1],", ",P[2],")");case"rgb%":return"rgb(".concat((100*L[0]).toPrecision(3),"%, ",(100*L[1]).toPrecision(3),"%, ",(100*L[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*L[0]).toPrecision(3),"%, ",(100*L[1]).toPrecision(3),"%, ",(100*L[2]).toPrecision(3),"%, ",(100*L[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=w.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[b.HSB][0],", ",this.hsba[1]*this.maxes[b.HSB][1],", ",this.hsba[2]*this.maxes[b.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=w.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=w.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[b.HSB][0],", ",this.hsba[1]*this.maxes[b.HSB][1],", ",this.hsba[2]*this.maxes[b.HSB][2],", ",z,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=w.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*z).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=w.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[b.HSL][0],", ",this.hsla[1]*this.maxes[b.HSL][1],", ",this.hsla[2]*this.maxes[b.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=w.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=w.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[b.HSL][0],", ",this.hsla[1]*this.maxes[b.HSL][1],", ",this.hsla[2]*this.maxes[b.HSL][2],", ",z,")");case"hsla%":return this.hsla||(this.hsla=w.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*z).toPrecision(3),"%)");default:return"rgba(".concat(P[0],",",P[1],",",P[2],",",z,")")}}},{key:"setRed",value:function(O){this._array[0]=O/this.maxes[b.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(O){this._array[1]=O/this.maxes[b.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(O){this._array[2]=O/this.maxes[b.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(O){this._array[3]=O/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var O=this._array,P=this.levels=new Array(O.length),L=O.length-1;0<=L;--L)P[L]=Math.round(255*O[L]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(O,P){this.mode=O,this.maxes=P}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[b.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=w.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[b.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[b.RGB][1]}},{key:"_getHue",value:function(){return this.mode===b.HSB?(this.hsba||(this.hsba=w.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[b.HSB][0]):(this.hsla||(this.hsla=w.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[b.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=w.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[b.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[b.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===b.HSB?(this.hsba||(this.hsba=w.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[b.HSB][1]):(this.hsla||(this.hsla=w.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[b.HSL][1])}}])&&l(x.prototype,E),j&&l(x,j),v}(),u=h.default.Color,M.default=u},{"../core/constants":262,"../core/main":273,"./color_conversion":258,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],261:[function(t,R,M){function p(c){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}function f(c){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(l){return p(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":p(l)})(c)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.fill"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var h=(w=t("../core/main"))&&w.__esModule?w:{default:w},b=function(c){if(c&&c.__esModule)return c;if(c===null||f(c)!=="object"&&typeof c!="function")return{default:c};var l=function(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,_)}();if(l&&l.has(c))return l.get(c);var o,u={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in c){var g;Object.prototype.hasOwnProperty.call(c,o)&&((g=m?Object.getOwnPropertyDescriptor(c,o):null)&&(g.get||g.set)?Object.defineProperty(u,o,g):u[o]=c[o])}return u.default=c,l&&l.set(c,u),u}(t("../core/constants"));t("./p5.Color"),h.default.prototype.background=function(){var c;return(c=this._renderer).background.apply(c,arguments),this},h.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},h.default.prototype.colorMode=function(c,l,o,u,m){return h.default._validateParameters("colorMode",arguments),c!==b.RGB&&c!==b.HSB&&c!==b.HSL||(this._colorMode=c,c=this._colorMaxes[c],arguments.length===2?(c[0]=l,c[1]=l,c[2]=l,c[3]=l):arguments.length===4?(c[0]=l,c[1]=o,c[2]=u):arguments.length===5&&(c[0]=l,c[1]=o,c[2]=u,c[3]=m)),this},h.default.prototype.fill=function(){var c;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(c=this._renderer).fill.apply(c,arguments),this},h.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},h.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},h.default.prototype.stroke=function(){var c;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(c=this._renderer).stroke.apply(c,arguments),this},h.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},h.default.prototype.noErase=function(){return this._renderer.noErase(),this};var w=h.default;M.default=w},{"../core/constants":262,"../core/main":273,"./p5.Color":260,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],262:[function(t,R,M){Object.defineProperty(M,"__esModule",{value:!0}),M.QUADRATIC=M.LINEAR=M._CTX_MIDDLE=M._DEFAULT_LEADMULT=M._DEFAULT_TEXT_FILL=M.WORD=M.CHAR=M.BOLDITALIC=M.BOLD=M.ITALIC=M.NORMAL=M.BLUR=M.ERODE=M.DILATE=M.POSTERIZE=M.INVERT=M.OPAQUE=M.GRAY=M.THRESHOLD=M.BURN=M.DODGE=M.SOFT_LIGHT=M.HARD_LIGHT=M.OVERLAY=M.REPLACE=M.SCREEN=M.MULTIPLY=M.EXCLUSION=M.SUBTRACT=M.DIFFERENCE=M.LIGHTEST=M.DARKEST=M.ADD=M.REMOVE=M.BLEND=M.UP_ARROW=M.TAB=M.SHIFT=M.RIGHT_ARROW=M.RETURN=M.OPTION=M.LEFT_ARROW=M.ESCAPE=M.ENTER=M.DOWN_ARROW=M.DELETE=M.CONTROL=M.BACKSPACE=M.ALT=M.AUTO=M.HSL=M.HSB=M.RGB=M.MITER=M.BEVEL=M.ROUND=M.SQUARE=M.PROJECT=M.PIE=M.CHORD=M.OPEN=M.CLOSE=M.TESS=M.QUAD_STRIP=M.QUADS=M.TRIANGLE_STRIP=M.TRIANGLE_FAN=M.TRIANGLES=M.LINE_LOOP=M.LINE_STRIP=M.LINES=M.POINTS=M.BASELINE=M.BOTTOM=M.TOP=M.CENTER=M.LEFT=M.RIGHT=M.RADIUS=M.CORNERS=M.CORNER=M.RAD_TO_DEG=M.DEG_TO_RAD=M.RADIANS=M.DEGREES=M.TWO_PI=M.TAU=M.QUARTER_PI=M.PI=M.HALF_PI=M.WAIT=M.TEXT=M.MOVE=M.HAND=M.CROSS=M.ARROW=M.WEBGL2=M.WEBGL=M.P2D=M.VERSION=void 0,M.RGBA=M.HALF_FLOAT=M.FLOAT=M.UNSIGNED_INT=M.UNSIGNED_BYTE=M.COVER=M.CONTAIN=M.FALLBACK=M.LABEL=M.AXES=M.GRID=M._DEFAULT_FILL=M._DEFAULT_STROKE=M.PORTRAIT=M.LANDSCAPE=M.MIRROR=M.CLAMP=M.REPEAT=M.NEAREST=M.IMAGE=M.IMMEDIATE=M.TEXTURE=M.FILL=M.STROKE=M.CURVE=M.BEZIER=void 0;var p=Math.PI,f=(M.VERSION="1.7.0",M.P2D="p2d",M.WEBGL="webgl",M.WEBGL2="webgl2",M.ARROW="default",M.CROSS="crosshair",M.HAND="pointer",M.MOVE="move",M.TEXT="text",M.WAIT="wait",p/2);M.HALF_PI=f,f=p,M.PI=f,f=p/4,M.QUARTER_PI=f,f=2*p,M.TAU=f,f=2*p,M.TWO_PI=f,M.DEGREES="degrees",M.RADIANS="radians",f=p/180,M.DEG_TO_RAD=f,f=180/p,M.RAD_TO_DEG=f,M.CORNER="corner",M.CORNERS="corners",M.RADIUS="radius",M.RIGHT="right",M.LEFT="left",M.CENTER="center",M.TOP="top",M.BOTTOM="bottom",M.BASELINE="alphabetic",M.POINTS=0,M.LINES=1,M.LINE_STRIP=3,M.LINE_LOOP=2,M.TRIANGLES=4,M.TRIANGLE_FAN=6,M.TRIANGLE_STRIP=5,M.QUADS="quads",M.QUAD_STRIP="quad_strip",M.TESS="tess",M.CLOSE="close",M.OPEN="open",M.CHORD="chord",M.PIE="pie",M.PROJECT="square",M.SQUARE="butt",M.ROUND="round",M.BEVEL="bevel",M.MITER="miter",M.RGB="rgb",M.HSB="hsb",M.HSL="hsl",M.AUTO="auto",M.ALT=18,M.BACKSPACE=8,M.CONTROL=17,M.DELETE=46,M.DOWN_ARROW=40,M.ENTER=13,M.ESCAPE=27,M.LEFT_ARROW=37,M.OPTION=18,M.RETURN=13,M.RIGHT_ARROW=39,M.SHIFT=16,M.TAB=9,M.UP_ARROW=38,M.BLEND="source-over",M.REMOVE="destination-out",M.ADD="lighter",M.DARKEST="darken",M.LIGHTEST="lighten",M.DIFFERENCE="difference",M.SUBTRACT="subtract",M.EXCLUSION="exclusion",M.MULTIPLY="multiply",M.SCREEN="screen",M.REPLACE="copy",M.OVERLAY="overlay",M.HARD_LIGHT="hard-light",M.SOFT_LIGHT="soft-light",M.DODGE="color-dodge",M.BURN="color-burn",M.THRESHOLD="threshold",M.GRAY="gray",M.OPAQUE="opaque",M.INVERT="invert",M.POSTERIZE="posterize",M.DILATE="dilate",M.ERODE="erode",M.BLUR="blur",M.NORMAL="normal",M.ITALIC="italic",M.BOLD="bold",M.BOLDITALIC="bold italic",M.CHAR="CHAR",M.WORD="WORD",M._DEFAULT_TEXT_FILL="#000000",M._DEFAULT_LEADMULT=1.25,M._CTX_MIDDLE="middle",M.LINEAR="linear",M.QUADRATIC="quadratic",M.BEZIER="bezier",M.CURVE="curve",M.STROKE="stroke",M.FILL="fill",M.TEXTURE="texture",M.IMMEDIATE="immediate",M.IMAGE="image",M.NEAREST="nearest",M.REPEAT="repeat",M.CLAMP="clamp",M.MIRROR="mirror",M.LANDSCAPE="landscape",M.PORTRAIT="portrait",M._DEFAULT_STROKE="#000000",M._DEFAULT_FILL="#FFFFFF",M.GRID="grid",M.AXES="axes",M.LABEL="label",M.FALLBACK="fallback",M.CONTAIN="contain",M.COVER="cover",M.UNSIGNED_BYTE="unsigned-byte",M.UNSIGNED_INT="unsigned-int",M.FLOAT="float",M.HALF_FLOAT="half-float",M.RGBA="rgba"},{}],263:[function(t,R,M){function p(u){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(u)}function f(u){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(m){return p(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":p(m)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var h=(b=t("./main"))&&b.__esModule?b:{default:b},b=function(u){if(u&&u.__esModule)return u;if(u===null||f(u)!=="object"&&typeof u!="function")return{default:u};var m=function(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,E)}();if(m&&m.has(u))return m.get(u);var g,_={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in u){var x;Object.prototype.hasOwnProperty.call(u,g)&&((x=v?Object.getOwnPropertyDescriptor(u,g):null)&&(x.get||x.set)?Object.defineProperty(_,g,x):_[g]=u[g])}return _.default=u,m&&m.set(u,_),_}(t("./constants")),w=[b.ARROW,b.CROSS,b.HAND,b.MOVE,b.TEXT,b.WAIT],c=(h.default.prototype._frameRate=0,h.default.prototype._lastFrameTime=window.performance.now(),h.default.prototype._targetFrameRate=60,window.print);function l(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function o(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}h.default.prototype.print=function(){var u;arguments.length?(u=console).log.apply(u,arguments):c()},h.default.prototype.frameCount=0,h.default.prototype.deltaTime=0,h.default.prototype.focused=document.hasFocus(),h.default.prototype.cursor=function(u,m,g){var _,v="auto",x=this._curElement.elt;w.includes(u)?v=u:typeof u=="string"&&(_="",m&&g&&typeof m=="number"&&typeof g=="number"&&(_="".concat(m," ").concat(g)),v=u.substring(0,7)==="http://"||u.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(u)?"url(".concat(u,") ").concat(_,", auto"):u),x.style.cursor=v},h.default.prototype.frameRate=function(u){return h.default._validateParameters("frameRate",arguments),typeof u!="number"||u<0?this._frameRate:(this._setProperty("_targetFrameRate",u),u===0&&this._setProperty("_frameRate",u),this)},h.default.prototype.getFrameRate=function(){return this.frameRate()},h.default.prototype.setFrameRate=function(u){return this.frameRate(u)},h.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},h.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},h.default.prototype.webglVersion=b.P2D,h.default.prototype.displayWidth=screen.width,h.default.prototype.displayHeight=screen.height,h.default.prototype.windowWidth=l(),h.default.prototype.windowHeight=o(),h.default.prototype._onresize=function(u){this._setProperty("windowWidth",l()),this._setProperty("windowHeight",o());var m=this._isGlobal?window:this;typeof m.windowResized!="function"||(m=m.windowResized(u))===void 0||m||u.preventDefault()},h.default.prototype.width=0,h.default.prototype.height=0,h.default.prototype.fullscreen=function(u){if(h.default._validateParameters("fullscreen",arguments),u===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(u){if(u=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");u.requestFullscreen?u.requestFullscreen():u.mozRequestFullScreen?u.mozRequestFullScreen():u.webkitRequestFullscreen?u.webkitRequestFullscreen():u.msRequestFullscreen&&u.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},h.default.prototype.pixelDensity=function(u){var m;return h.default._validateParameters("pixelDensity",arguments),typeof u=="number"?(u!==this._pixelDensity&&(this._pixelDensity=u),(m=this).resizeCanvas(this.width,this.height,!0)):m=this._pixelDensity,m},h.default.prototype.displayDensity=function(){return window.devicePixelRatio},h.default.prototype.getURL=function(){return location.href},h.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(u){return u!==""})},h.default.prototype.getURLParams=function(){for(var u,m=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,g={};(u=m.exec(location.search))!=null;)u.index===m.lastIndex&&m.lastIndex++,g[u[1]]=u[2];return g},t=h.default,M.default=t},{"./constants":262,"./main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.search":195,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],264:[function(t,R,M){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(c=t("../main"))&&c.__esModule?c:{default:c};function f(l,o){o=o||console.log.bind(console),h||b(),h.some(function(u){var m;if(l.message&&l.message.match("\\W?".concat(u.name,"\\W"))!==null)return m=u.type==="function"?"".concat(u.name,"()"):u.name,o("Did you just try to use p5.js's ".concat(m," ").concat(u.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(w)),!0})}t("../internationalization");var h=null,b=null,w=(p.default._friendlyError=p.default._checkForUserDefinedFunctions=p.default._fesErrorMonitor=function(){},h=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),c=(b=function(){function l(u){return Object.getOwnPropertyNames(u).filter(function(m){return m[0]!=="_"&&!(m in o)&&(o[m]=!0)}).map(function(m){var g=typeof u[m]=="function"?"function":m===m.toUpperCase()?"constant":"variable";return{name:m,type:g}})}var o={};(h=[].concat(l(p.default.prototype),l(t("../constants")))).sort(function(u,m){return m.name.length-u.name.length})},p.default.prototype._helpForMisusedAtTopLevelCode=f,document.readyState!=="complete"&&(window.addEventListener("error",f,!1),window.addEventListener("load",function(){window.removeEventListener("error",f,!1)})),p.default);M.default=c},{"../constants":262,"../internationalization":271,"../main":273,"./browser_errors":void 0,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.some":165,"core-js/modules/es.function.name":167,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.get-own-property-names":177,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.match":191,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.string.starts-with":197,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],265:[function(t,R,M){Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(p=t("../main"))&&p.__esModule?p:{default:p};t("../internationalization"),p.default._friendlyFileLoadError=function(){},t=p.default,M.default=t},{"../internationalization":271,"../main":273}],266:[function(t,R,M){function p(c){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}function f(c){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(l){return p(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":p(l)})(c)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var h=function(c){return c&&c.__esModule?c:{default:c}}(t("../main"));t("../internationalization"),function(c){if(c&&c.__esModule)return c;if(c===null||f(c)!=="object"&&typeof c!="function")return{default:c};var l=b();if(l&&l.has(c))return l.get(c);var o,u,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&((u=g?Object.getOwnPropertyDescriptor(c,o):null)&&(u.get||u.set)?Object.defineProperty(m,o,u):m[o]=c[o]);m.default=c,l&&l.set(c,m)}(t("../constants"));function b(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,b=function(){return c},c)}h.default._fesCodeReader=function(){};var w=h.default;M.default=w},{"../constants":262,"../internationalization":271,"../main":273,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.from":157,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.match":191,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],267:[function(t,R,M){function p(){var f=/(^|@)\S+:\d+/,h=/^\s*at .*(\S+:\d+|\(native\))/m,b=/^(eval@)?(\[native code])?$/;return{parse:function(w){return w.stacktrace!==void 0||w["opera#sourceloc"]!==void 0?this.parseOpera(w):w.stack&&w.stack.match(h)?this.parseV8OrIE(w):w.stack?this.parseFFOrSafari(w):void 0},extractLocation:function(w){return w.indexOf(":")===-1?[w]:[(w=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(w.replace(/[()]/g,"")))[1],w[2]||void 0,w[3]||void 0]},parseV8OrIE:function(w){return w.stack.split(`
`).filter(function(c){return!!c.match(h)},this).map(function(c){var l=(o=(c=-1<c.indexOf("(eval ")?c.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):c).replace(/^\s+/,"").replace(/\(eval code/g,"(")).match(/ (\((.+):(\d+):(\d+)\)$)/),o=(o=l?o.replace(l[0],""):o).split(/\s+/).slice(1);return l=this.extractLocation(l?l[1]:o.pop()),{functionName:o.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(l[0])?void 0:l[0],lineNumber:l[1],columnNumber:l[2],source:c}},this)},parseFFOrSafari:function(w){return w.stack.split(`
`).filter(function(c){return!c.match(b)},this).map(function(c){var l,o;return(c=-1<c.indexOf(" > eval")?c.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):c).indexOf("@")===-1&&c.indexOf(":")===-1?{functionName:c}:{functionName:(o=c.match(l=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&o[1]?o[1]:void 0,fileName:(o=this.extractLocation(c.replace(l,"")))[0],lineNumber:o[1],columnNumber:o[2],source:c}},this)},parseOpera:function(w){return!w.stacktrace||-1<w.message.indexOf(`
`)&&w.message.split(`
`).length>w.stacktrace.split(`
`).length?this.parseOpera9(w):w.stack?this.parseOpera11(w):this.parseOpera10(w)},parseOpera9:function(w){for(var c=/Line (\d+).*script (?:in )?(\S+)/i,l=w.message.split(`
`),o=[],u=2,m=l.length;u<m;u+=2){var g=c.exec(l[u]);g&&o.push({fileName:g[2],lineNumber:g[1],source:l[u]})}return o},parseOpera10:function(w){for(var c=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,l=w.stacktrace.split(`
`),o=[],u=0,m=l.length;u<m;u+=2){var g=c.exec(l[u]);g&&o.push({functionName:g[3]||void 0,fileName:g[2],lineNumber:g[1],source:l[u]})}return o},parseOpera11:function(w){return w.stack.split(`
`).filter(function(c){return!!c.match(f)&&!c.match(/^Error created at/)},this).map(function(c){var l,o=c.split("@"),u=this.extractLocation(o.pop());return{functionName:(o=o.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(l=o.match(/\(([^)]*)\)/)?o.replace(/^[^(]+\(([^)]*)\)$/,"$1"):l)===void 0||l==="[arguments not available]"?void 0:l.split(","),fileName:u[0],lineNumber:u[1],columnNumber:u[2],source:c}},this)}}}t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0,(t=(t=t("../main"))&&t.__esModule?t:{default:t}).default._getErrorStackParser=function(){return new p},t=t.default,M.default=t},{"../main":273,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.match":191,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196}],268:[function(t,R,M){function p(b){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var f=(f=t("../main"))&&f.__esModule?f:{default:f};function h(b){return(h=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(w){return p(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":p(w)})(b)}(function(b){if(!(b&&b.__esModule||b===null||h(b)!=="object"&&typeof b!="function")){var w=function(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,m)}();if(w&&w.has(b))return w.get(b);var c,l={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in b){var u;Object.prototype.hasOwnProperty.call(b,c)&&((u=o?Object.getOwnPropertyDescriptor(b,c):null)&&(u.get||u.set)?Object.defineProperty(l,c,u):l[c]=b[c])}l.default=b,w&&w.set(b,l)}})(t("../constants")),t("../internationalization"),f.default._validateParameters=f.default._clearValidateParamsCache=function(){},t=f.default,M.default=t},{"../../../docs/parameterData.json":void 0,"../constants":262,"../internationalization":271,"../main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.last-index-of":162,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.function.name":167,"core-js/modules/es.map":168,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.set":187,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],269:[function(t,R,M){function p(b){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(b)}function f(b){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(w){return p(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":p(w)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var h=function(b){if(b&&b.__esModule)return b;if(b===null||f(b)!=="object"&&typeof b!="function")return{default:b};var w=function(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,m)}();if(w&&w.has(b))return w.get(b);var c,l={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in b){var u;Object.prototype.hasOwnProperty.call(b,c)&&((u=o?Object.getOwnPropertyDescriptor(b,c):null)&&(u.get||u.set)?Object.defineProperty(l,c,u):l[c]=b[c])}return l.default=b,w&&w.set(b,l),l}(t("./constants"));M.default={modeAdjust:function(b,w,c,l,o){return o===h.CORNER?{x:b,y:w,w:c,h:l}:o===h.CORNERS?{x:b,y:w,w:c-b,h:l-w}:o===h.RADIUS?{x:b-c,y:w-l,w:2*c,h:2*l}:o===h.CENTER?{x:b-.5*c,y:w-.5*l,w:c,h:l}:void 0}}},{"./constants":262,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],270:[function(t,R,M){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var p=(f=t("../core/main"))&&f.__esModule?f:{default:f};t("./internationalization");var f=Promise.resolve();Promise.all([new Promise(function(h,b){document.readyState==="complete"?h():window.addEventListener("load",h,!1)}),f]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!p.default.instance&&new p.default})},{"../core/main":273,"./internationalization":271,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.string.iterator":190,"core-js/modules/web.dom-collections.iterator":236}],271:[function(t,R,M){t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.setTranslatorLanguage=M.currentTranslatorLanguage=M.availableTranslatorLanguages=M.initialize=M.translator=void 0;var p,f=b(t("i18next")),h=b(t("i18next-browser-languagedetector"));function b(l){return l&&l.__esModule?l:{default:l}}function w(l,o){for(var u=0;u<o.length;u++){var m=o[u];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(l,m.key,m)}}var c=function(){function l(m,g){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.init(m,g)}var o,u;return o=l,(u=[{key:"fetchWithTimeout",value:function(m,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(m,g),new Promise(function(v,x){return setTimeout(function(){return x(new Error("timeout"))},_)})])}},{key:"init",value:function(m){var g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=m,this.options=g}},{key:"read",value:function(m,g,_){var v=this.options.loadPath;m===this.options.fallback?_(null,p[m][g]):(void 0).includes(m)?(v=this.services.interpolator.interpolate(v,{lng:m,ns:g}),this.loadUrl(v,_)):_("Not found",!1)}},{key:"loadUrl",value:function(m,g){this.fetchWithTimeout(m).then(function(_){if(_.ok)return _.json();throw new Error("failed loading ".concat(m))},function(){throw new Error("failed loading ".concat(m))}).then(function(_){return g(null,_)}).catch(g)}}])&&w(o.prototype,u),l}();c.type="backend",M.translator=function(l,o){console.debug("p5.js translator called before translations were loaded"),f.default.t(l,o)},M.initialize=function(){return f.default.use(h.default).use(c).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:p}).then(function(l){M.translator=l},function(l){return console.debug("Translations failed to load (".concat(l,")"))})},M.availableTranslatorLanguages=function(){return f.default.languages},M.currentTranslatorLanguage=function(l){return f.default.language},M.setTranslatorLanguage=function(l){return f.default.changeLanguage(l||void 0,function(o){return console.debug("Translations failed to load (".concat(o,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/web.dom-collections.iterator":236,i18next:3,"i18next-browser-languagedetector":3}],272:[function(t,R,M){Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0,(t=(t=t("./main"))&&t.__esModule?t:{default:t}).default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},t.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},t.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},t.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},t=t.default,M.default=t},{"./main":273}],273:[function(t,R,M){function p(l){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(l)}function f(l){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(o){return p(o)}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":p(o)})(l)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0,t("./shim");var h=function(l){if(l&&l.__esModule)return l;if(l===null||f(l)!=="object"&&typeof l!="function")return{default:l};var o=function(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,v)}();if(o&&o.has(l))return o.get(l);var u,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in l){var _;Object.prototype.hasOwnProperty.call(l,u)&&((_=g?Object.getOwnPropertyDescriptor(l,u):null)&&(_.get||_.set)?Object.defineProperty(m,u,_):m[u]=l[u])}return m.default=l,o&&o.set(l,m),m}(t("./constants"));function b(l,o){for(var u=0;u<o.length;u++){var m=o[u];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(l,m.key,m)}}var w,c=function(){function l(m,g,_){var v=this;if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=g,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={},g=Object.getOwnPropertyNames(l.prototype._registeredMethods);var x=!0,E=!1,j=void 0;try{for(var O,P=g[Symbol.iterator]();!(x=(O=P.next()).done);x=!0){var L=O.value;this._registeredMethods[L]=l.prototype._registeredMethods[L].slice()}}catch(Q){E=!0,j=Q}finally{try{x||P.return==null||P.return()}finally{if(E)throw j}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){v._userNode&&typeof v._userNode=="string"&&(v._userNode=document.getElementById(v._userNode));var Q=v._isGlobal?window:v;if(Q.preload){var J,ee=document.getElementById(v._loadingScreenId),te=(ee||((ee=document.createElement("div")).innerHTML="Loading...",ee.style.position="absolute",ee.id=v._loadingScreenId,(v._userNode||document.body).appendChild(ee)),v._preloadMethods);for(J in te){te[J]=te[J]||l;var se=te[J];se!==l.prototype&&se!==l||(v._isGlobal&&(window[J]=v._wrapPreload(v,J)),se=v),v._registeredPreloadMethods[J]=se[J],se[J]=v._wrapPreload(se,J)}Q.preload(),v._runIfPreloadsAreDone()}else v._setup(),v._recording||v._draw()},this._runIfPreloadsAreDone=function(){var Q,J=this._isGlobal?window:this;J._preloadCount===0&&((Q=document.getElementById(J._loadingScreenId))&&Q.parentNode.removeChild(Q),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),J._setup(),this._recording||J._draw()))},this._decrementPreload=function(){var Q=this._isGlobal?window:this;Q._preloadDone||typeof Q.preload!="function"||(Q._setProperty("_preloadCount",Q._preloadCount-1),Q._runIfPreloadsAreDone())},this._wrapPreload=function(Q,J){var ee=this;return function(){ee._incrementPreload();for(var te=arguments.length,se=new Array(te),ce=0;ce<te;ce++)se[ce]=arguments[ce];return ee._registeredPreloadMethods[J].apply(Q,se)}},this._incrementPreload=function(){var Q=this._isGlobal?window:this;Q._preloadDone||Q._setProperty("_preloadCount",Q._preloadCount+1)},this._setup=function(){v.createCanvas(v._defaultCanvasSize.width,v._defaultCanvasSize.height,"p2d");var Q=v._isGlobal?window:v;if(typeof Q.preload=="function")for(var J in v._preloadMethods)Q[J]=v._preloadMethods[J][J],Q[J]&&v&&(Q[J]=Q[J].bind(v));v._millisStart=window.performance.now(),Q._preloadDone=!0,typeof Q.setup=="function"&&Q.setup();var ee=document.getElementsByTagName("canvas"),te=!0,se=!1,ce=void 0;try{for(var q,Z=ee[Symbol.iterator]();!(te=(q=Z.next()).done);te=!0){var ie=q.value;ie.dataset.hidden==="true"&&(ie.style.visibility="",delete ie.dataset.hidden)}}catch(pe){se=!0,ce=pe}finally{try{te||Z.return==null||Z.return()}finally{if(se)throw ce}}v._lastTargetFrameTime=window.performance.now(),v._lastRealFrameTime=window.performance.now(),v._setupDone=!0,(v._accessibleOutputs.grid||v._accessibleOutputs.text)&&v._updateAccsOutput()},this._draw=function(){var Q=window.performance.now(),J=Q-v._lastTargetFrameTime,ee=1e3/v._targetFrameRate;(!v._loop||ee-5<=J)&&(v.deltaTime=Q-v._lastRealFrameTime,v._setProperty("deltaTime",v.deltaTime),v._frameRate=1e3/v.deltaTime,v.redraw(),v._lastTargetFrameTime=Math.max(v._lastTargetFrameTime+ee,Q),v._lastRealFrameTime=Q,v._updateMouseCoords!==void 0&&(v._updateMouseCoords(),v._setProperty("movedX",0),v._setProperty("movedY",0))),v._loop&&(v._requestAnimId=window.requestAnimationFrame(v._draw))},this._setProperty=function(Q,J){v[Q]=J,v._isGlobal&&(window[Q]=J)},this.remove=function(){if((ee=document.getElementById(v._loadingScreenId))&&(ee.parentNode.removeChild(ee),v._incrementPreload()),v._curElement){for(var Q in v._loop=!1,v._requestAnimId&&window.cancelAnimationFrame(v._requestAnimId),v._events)window.removeEventListener(Q,v._events[Q]);var J=!0,ee=!1,te=void 0;try{for(var se,ce=v._elements[Symbol.iterator]();!(J=(se=ce.next()).done);J=!0){var q,Z=se.value;for(q in Z.elt&&Z.elt.parentNode&&Z.elt.parentNode.removeChild(Z.elt),Z._events)Z.elt.removeEventListener(q,Z._events[q])}}catch(be){ee=!0,te=be}finally{try{J||ce.return==null||ce.return()}finally{if(ee)throw te}}var ie=v;v._registeredMethods.remove.forEach(function(be){be!==void 0&&be.call(ie)})}if(v._isGlobal){for(var pe in l.prototype)try{delete window[pe]}catch{window[pe]=void 0}for(var ge in v)if(v.hasOwnProperty(ge))try{delete window[ge]}catch{window[ge]=void 0}l.instance=null}},this._registeredMethods.init.forEach(function(Q){Q!==void 0&&Q.call(this)},this),this._setupPromisePreloads();var z,N,V=this._createFriendlyGlobalFunctionBinder();if(m)m(this),l._checkForUserDefinedFunctions(this);else{for(var k in this._isGlobal=!0,l.instance=this,l.prototype)typeof l.prototype[k]=="function"?(z=k.substring(2),this._events.hasOwnProperty(z)||(Math.hasOwnProperty(k)&&Math[k]===l.prototype[k]?V(k,l.prototype[k]):V(k,l.prototype[k].bind(this)))):V(k,l.prototype[k]);for(var H in this)this.hasOwnProperty(H)&&V(H,this[H])}for(N in this._events){var G=this["_on".concat(N)];G&&(G=G.bind(this),window.addEventListener(N,G,{passive:!1}),this._events[N]=G)}function F(){v._setProperty("focused",!0)}function W(){v._setProperty("focused",!1)}window.addEventListener("focus",F),window.addEventListener("blur",W),this.registerMethod("remove",function(){window.removeEventListener("focus",F),window.removeEventListener("blur",W)}),document.readyState==="complete"?this._start():window.addEventListener("load",this._start.bind(this),!1)}var o,u;return o=l,(u=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=h.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(m,g){l.prototype._preloadMethods.hasOwnProperty(m)||(l.prototype._preloadMethods[m]=g)}},{key:"registerMethod",value:function(m,g){var _=this||l.prototype;_._registeredMethods.hasOwnProperty(m)||(_._registeredMethods[m]=[]),_._registeredMethods[m].push(g)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},g=m.globalObject||window;return m.log||console.log.bind(console),function(_,v){l.disableFriendlyErrors,g[_]=v}}}])&&b(o.prototype,u),l}();for(w in c.instance=null,c.disableFriendlyErrors=!1,h)c.prototype[w]=h[w];c.VERSION=h.VERSION,c.prototype._preloadMethods={loadJSON:c.prototype,loadImage:c.prototype,loadStrings:c.prototype,loadXML:c.prototype,loadBytes:c.prototype,loadTable:c.prototype,loadFont:c.prototype,loadModel:c.prototype,loadShader:c.prototype},c.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},c.prototype._registeredPreloadMethods={},M.default=c},{"./constants":262,"./shim":284,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-own-property-names":177,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],274:[function(t,R,M){Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(t=t("./main"))&&t.__esModule?t:{default:t};function f(h,b){for(var w=0;w<b.length;w++){var c=b[w];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,c.key,c)}}p.default.Element=function(){function h(l,o){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this.elt=l,this._pInst=this._pixelsState=o,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var b,w,c;return b=h,c=[{key:"_adjustListener",value:function(l,o,u){return o===!1?p.default.Element._detachListener(l,u):p.default.Element._attachListener(l,o,u),this}},{key:"_attachListener",value:function(l,o,u){u._events[l]&&p.default.Element._detachListener(l,u),o=o.bind(u),u.elt.addEventListener(l,o,!1),u._events[l]=o}},{key:"_detachListener",value:function(l,o){var u=o._events[l];o.elt.removeEventListener(l,u,!1),o._events[l]=null}}],(w=[{key:"parent",value:function(l){return l===void 0?this.elt.parentNode:(typeof l=="string"?(l[0]==="#"&&(l=l.substring(1)),l=document.getElementById(l)):l instanceof p.default.Element&&(l=l.elt),l.appendChild(this.elt),this)}},{key:"id",value:function(l){return l===void 0?this.elt.id:(this.elt.id=l,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(l){return l===void 0?this.elt.className:(this.elt.className=l,this)}},{key:"mousePressed",value:function(l){return p.default.Element._adjustListener("mousedown",function(o){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(o),l.call(this,o)},this),this}},{key:"doubleClicked",value:function(l){return p.default.Element._adjustListener("dblclick",l,this),this}},{key:"mouseWheel",value:function(l){return p.default.Element._adjustListener("wheel",l,this),this}},{key:"mouseReleased",value:function(l){return p.default.Element._adjustListener("mouseup",l,this),this}},{key:"mouseClicked",value:function(l){return p.default.Element._adjustListener("click",l,this),this}},{key:"mouseMoved",value:function(l){return p.default.Element._adjustListener("mousemove",l,this),this}},{key:"mouseOver",value:function(l){return p.default.Element._adjustListener("mouseover",l,this),this}},{key:"mouseOut",value:function(l){return p.default.Element._adjustListener("mouseout",l,this),this}},{key:"touchStarted",value:function(l){return p.default.Element._adjustListener("touchstart",l,this),this}},{key:"touchMoved",value:function(l){return p.default.Element._adjustListener("touchmove",l,this),this}},{key:"touchEnded",value:function(l){return p.default.Element._adjustListener("touchend",l,this),this}},{key:"dragOver",value:function(l){return p.default.Element._adjustListener("dragover",l,this),this}},{key:"dragLeave",value:function(l){return p.default.Element._adjustListener("dragleave",l,this),this}},{key:"_setProperty",value:function(l,o){this[l]=o}}])&&f(b.prototype,w),c&&f(b,c),h}(),t=p.default.Element,M.default=t},{"./main":273}],275:[function(t,R,M){function p(_){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(_)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var f=(g=t("./main"))&&g.__esModule?g:{default:g},h=function(_){if(_&&_.__esModule)return _;if(_===null||b(_)!=="object"&&typeof _!="function")return{default:_};var v=function(){var P;return typeof WeakMap!="function"?null:(P=new WeakMap,P)}();if(v&&v.has(_))return v.get(_);var x,E={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in _){var O;Object.prototype.hasOwnProperty.call(_,x)&&((O=j?Object.getOwnPropertyDescriptor(_,x):null)&&(O.get||O.set)?Object.defineProperty(E,x,O):E[x]=_[x])}return E.default=_,v&&v.set(_,E),E}(t("./constants"));function b(_){return(b=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(v){return p(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":p(v)})(_)}function w(_,v){for(var x=0;x<v.length;x++){var E=v[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}function c(_,v){return(c=Object.setPrototypeOf||function(x,E){return x.__proto__=E,x})(_,v)}function l(_){return function(){var v,x=m(_);return o(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(v=m(this).constructor,Reflect.construct(x,arguments,v)):x.apply(this,arguments))}}function o(_,v){return!v||b(v)!=="object"&&typeof v!="function"?u(_):v}function u(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function m(_){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)})(_)}f.default.Graphics=function(_){var v=E;if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(_&&_.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),_&&c(v,_);var x=l(E);function E(j,O,P,L,z){var N;if(!(this instanceof E))throw new TypeError("Cannot call a class as a function");k=z||document.createElement("canvas"),(N=x.call(this,k,L)).canvas=k;var V,k=P||h.P2D;P=L._userNode||document.body;for(V in z||P.appendChild(N.canvas),f.default.prototype)N[V]||(typeof f.default.prototype[V]=="function"?N[V]=f.default.prototype[V].bind(u(N)):N[V]=f.default.prototype[V]);return f.default.prototype._initializeInstanceVariables.apply(u(N)),N.width=j,N.height=O,N._pixelDensity=L._pixelDensity,k===h.WEBGL?N._renderer=new f.default.RendererGL(N.canvas,u(N),!1):N._renderer=new f.default.Renderer2D(N.canvas,u(N),!1),L._elements.push(u(N)),Object.defineProperty(u(N),"deltaTime",{get:function(){return this._pInst.deltaTime}}),N._renderer.resize(j,O),N._renderer._applyDefaults(),o(N,u(N))}return v=E,(_=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var j,O=this._pInst._elements.indexOf(this);for(j in O!==-1&&this._pInst._elements.splice(O,1),this._events)this.elt.removeEventListener(j,this._events[j])}},{key:"createFramebuffer",value:function(j){return new f.default.Framebuffer(this,j)}}])&&w(v.prototype,_),E}(f.default.Element);var g=f.default.Graphics;M.default=g},{"./constants":262,"./main":273,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.splice":166,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],276:[function(t,R,M){function p(_){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(_)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var f=(m=t("./main"))&&m.__esModule?m:{default:m},h=function(_){if(_&&_.__esModule)return _;if(_===null||b(_)!=="object"&&typeof _!="function")return{default:_};var v=function(){var P;return typeof WeakMap!="function"?null:(P=new WeakMap,P)}();if(v&&v.has(_))return v.get(_);var x,E={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in _){var O;Object.prototype.hasOwnProperty.call(_,x)&&((O=j?Object.getOwnPropertyDescriptor(_,x):null)&&(O.get||O.set)?Object.defineProperty(E,x,O):E[x]=_[x])}return E.default=_,v&&v.set(_,E),E}(t("../core/constants"));function b(_){return(b=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(v){return p(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":p(v)})(_)}function w(_,v){for(var x=0;x<v.length;x++){var E=v[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}function c(_,v){return(c=Object.setPrototypeOf||function(x,E){return x.__proto__=E,x})(_,v)}function l(_){return function(){var v,x,E=u(_);return v=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(v=u(this).constructor,Reflect.construct(E,arguments,v)):E.apply(this,arguments),E=this,!(x=v)||b(x)!=="object"&&typeof x!="function"?o(E):x}}function o(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function u(_){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)})(_)}var m=function(_){var v=E;if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(_&&_.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),_&&c(v,_);var x=l(E);function E(j,O,P){var L;if(this instanceof E)return(L=x.call(this,j,O)).canvas=j,L._pixelsState=O,P?(L._isMainCanvas=!0,L._pInst._setProperty("_curElement",o(L)),L._pInst._setProperty("canvas",L.canvas),L._pInst._setProperty("width",L.width),L._pInst._setProperty("height",L.height)):(L.canvas.style.display="none",L._styles=[]),L._textSize=12,L._textLeading=15,L._textFont="sans-serif",L._textStyle=h.NORMAL,L._textAscent=null,L._textDescent=null,L._textAlign=h.LEFT,L._textBaseline=h.BASELINE,L._textWrap=h.WORD,L._rectMode=h.CORNER,L._ellipseMode=h.CENTER,L._curveTightness=0,L._imageMode=h.CORNER,L._tint=null,L._doStroke=!0,L._doFill=!0,L._strokeSet=!1,L._fillSet=!1,L._leadingSet=!1,L;throw new TypeError("Cannot call a class as a function")}return v=E,(_=[{key:"push",value:function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(j){j.properties&&Object.assign(this,j.properties)}},{key:"resize",value:function(j,O){this.width=j,this.height=O,this.elt.width=j*this._pInst._pixelDensity,this.elt.height=O*this._pInst._pixelDensity,this.elt.style.width="".concat(j,"px"),this.elt.style.height="".concat(O,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(j,O,P,L){var z=this._pixelsState,N=z._pixelDensity,V=this.canvas;if(j===void 0&&O===void 0)j=O=0,P=z.width,L=z.height;else if(j*=N,O*=N,P===void 0&&L===void 0)return j<0||O<0||j>=V.width||O>=V.height?[0,0,0,0]:this._getPixel(j,O);return(z=new f.default.Image(P,L)).canvas.getContext("2d").drawImage(V,j,O,P*N,L*N,0,0,P,L),z}},{key:"textLeading",value:function(j){return typeof j=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",j),this._pInst):this._textLeading}},{key:"textStyle",value:function(j){return j?(j!==h.NORMAL&&j!==h.ITALIC&&j!==h.BOLD&&j!==h.BOLDITALIC||this._setProperty("_textStyle",j),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(j,O){return j!==void 0?(this._setProperty("_textAlign",j),O!==void 0&&this._setProperty("_textBaseline",O),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(j){return this._setProperty("_textWrap",j),this._textWrap}},{key:"text",value:function(j,O,P,L,z){var N,V,k,H,G=this._pInst,F=this._textWrap,W=Number.MAX_VALUE,Q=P;if((this._doFill||this._doStroke)&&j!==void 0){if(N=(j=(j=typeof j!="string"?j.toString():j).replace(/(\t)/g,"  ")).split(`
`),L!==void 0){switch(this._rectMode===h.CENTER&&(O-=L/2),this._textAlign){case h.CENTER:O+=L/2;break;case h.RIGHT:O+=L}if(z!==void 0){this._rectMode===h.CENTER&&(P-=z/2,Q-=z/2),j=P;var J=G.textAscent();switch(this._textBaseline){case h.BOTTOM:H=P+z,P=Math.max(H,P),Q+=J;break;case h.CENTER:H=P+z/2,P=Math.max(H,P),Q+=J/2}W=P+z-J,this._textBaseline===h.CENTER&&(W=j+z-J/2)}else this._textBaseline!==h.BOTTOM&&this._textBaseline!==h.CENTER||(Q=P-(j=G.textSize()*this._textLeading)/2,W=P+j/2);if(F===h.WORD){for(var ee=[],te=0;te<N.length;te++){for(var se="",ce=N[te].split(" "),q=0;q<ce.length;q++)V="".concat(se+ce[q])+" ",se=L<(k=this.textWidth(V))&&0<se.length?(ee.push(se),"".concat(ce[q])+" "):V;ee.push(se)}var Z=0;this._textBaseline===h.CENTER?Z=(ee.length-1)*G.textLeading()/2:this._textBaseline===h.BOTTOM&&(Z=(ee.length-1)*G.textLeading());for(var ie=0;ie<N.length;ie++){se="",ce=N[ie].split(" ");for(var pe=0;pe<ce.length;pe++)V="".concat(se+ce[pe])+" ",L<(k=this.textWidth(V))&&0<se.length?(this._renderText(G,se.trim(),O,P-Z,W,Q),se="".concat(ce[pe])+" ",P+=G.textLeading()):se=V;this._renderText(G,se.trim(),O,P-Z,W,Q),P+=G.textLeading()}}else{for(var ge=[],be=0;be<N.length;be++)for(var le=N[be].split(se=""),re=0;re<le.length;re++)V="".concat(se+le[re]),(k=this.textWidth(V))<=L?se+=le[re]:L<k&&0<se.length&&(ge.push(se),se="".concat(le[re]));ge.push(se);var Te=0;this._textBaseline===h.CENTER?Te=(ge.length-1)*G.textLeading()/2:this._textBaseline===h.BOTTOM&&(Te=(ge.length-1)*G.textLeading());for(var Ce=0;Ce<N.length;Ce++){le=N[Ce].split(se="");for(var Me=0;Me<le.length;Me++)V="".concat(se+le[Me]),(k=this.textWidth(V))<=L?se+=le[Me]:L<k&&0<se.length&&(this._renderText(G,se.trim(),O,P-Te,W,Q),P+=G.textLeading(),se="".concat(le[Me]))}this._renderText(G,se.trim(),O,P-Te,W,Q),P+=G.textLeading()}}else{var Se=0;this._textBaseline===h.CENTER?Se=(N.length-1)*G.textLeading()/2:this._textBaseline===h.BOTTOM&&(Se=(N.length-1)*G.textLeading());for(var Ue=0;Ue<N.length;Ue++)this._renderText(G,N[Ue],O,P-Se,W,Q-Se),P+=G.textLeading()}return G}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var j=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return b(j)==="object"&&j.font&&j.font.supported}},{key:"_updateTextMetrics",value:function(){var j,O,P,L,z,N;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((j=document.createElement("span")).style.fontFamily=this._textFont,j.style.fontSize="".concat(this._textSize,"px"),j.innerHTML="ABCjgq|",(N=document.createElement("div")).style.display="inline-block",N.style.width="1px",N.style.height="0px",(O=document.createElement("div")).appendChild(j),O.appendChild(N),O.style.height="0px",O.style.overflow="hidden",document.body.appendChild(O),N.style.verticalAlign="baseline",L=g(N),z=g(j),P=L[1]-z[1],N.style.verticalAlign="bottom",L=g(N),z=g(j),N=L[1]-z[1]-P,document.body.removeChild(O),this._setProperty("_textAscent",P),this._setProperty("_textDescent",N)),this}}])&&w(v.prototype,_),E}(f.default.Element);function g(_){var v=0,x=0;if(_.offsetParent)for(;v+=_.offsetLeft,x+=_.offsetTop,_=_.offsetParent;);else v+=_.offsetLeft,x+=_.offsetTop;return[v,x]}m.prototype.textSize=function(_){return typeof _=="number"?(this._setProperty("_textSize",_),this._leadingSet||this._setProperty("_textLeading",_*h._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},f.default.Renderer=m,t=f.default.Renderer,M.default=t},{"../core/constants":262,"./main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],277:[function(t,R,M){function p(g){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(g)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.reflect.get"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.reflect.get"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var f=(m=t("./main"))&&m.__esModule?m:{default:m},h=function(g){if(g&&g.__esModule)return g;if(g===null||b(g)!=="object"&&typeof g!="function")return{default:g};var _=function(){var O;return typeof WeakMap!="function"?null:(O=new WeakMap,O)}();if(_&&_.has(g))return _.get(g);var v,x={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in g){var j;Object.prototype.hasOwnProperty.call(g,v)&&((j=E?Object.getOwnPropertyDescriptor(g,v):null)&&(j.get||j.set)?Object.defineProperty(x,v,j):x[v]=g[v])}return x.default=g,_&&_.set(g,x),x}(t("./constants"));function b(g){return(b=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(_){return p(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":p(_)})(g)}function w(g,_){for(var v=0;v<_.length;v++){var x=_[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}function c(g,_,v){return(c=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(x,E,j){if(x=function(O,P){for(;!Object.prototype.hasOwnProperty.call(O,P)&&(O=o(O))!==null;);return O}(x,E))return(x=Object.getOwnPropertyDescriptor(x,E)).get?x.get.call(j):x.value})(g,_,v||g)}function l(g,_){return(l=Object.setPrototypeOf||function(v,x){return v.__proto__=x,v})(g,_)}function o(g){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(g)}t("./p5.Renderer");var u="rgba(0,0,0,0)",m=function(g){var _=x;if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(g&&g.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),g&&l(_,g);var v=function(E){return function(){var j,O=o(E);if(j=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(j=o(this).constructor,Reflect.construct(O,arguments,j)):O.apply(this,arguments),O=this,!j||b(j)!=="object"&&typeof j!="function"){if(O!==void 0)return O;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return j}}(x);function x(E,j,O){if(this instanceof x)return(E=v.call(this,E,j,O)).drawingContext=E.canvas.getContext("2d"),E._pInst._setProperty("drawingContext",E.drawingContext),E;throw new TypeError("Cannot call a class as a function")}return _=x,(g=[{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=h.BLEND,this._setFill(h._DEFAULT_FILL),this._setStroke(h._DEFAULT_STROKE),this.drawingContext.lineCap=h.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(E,j){c(o(x.prototype),"resize",this).call(this,E,j),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var E,j;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof f.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(E=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(E,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(E=this._getFill(),j=(j=this._pInst).color.apply(j,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(j.levels),j=j.toString(),this._setFill(j),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(E),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var E=(E=this._pInst).color.apply(E,arguments);this._setFill(E.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",E.levels)}},{key:"stroke",value:function(){var E=(E=this._pInst).color.apply(E,arguments);this._setStroke(E.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",E.levels)}},{key:"erase",value:function(E,j){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,E=this._pInst.color(255,E).toString(),this.drawingContext.fillStyle=E,this._cachedStrokeStyle=this.drawingContext.strokeStyle,E=this._pInst.color(255,j).toString(),this.drawingContext.strokeStyle=E,j=this._cachedBlendMode,this.blendMode(h.REMOVE),this._cachedBlendMode=j,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"image",value:function(E,j,O,P,L,z,N,V,k){E.gifProperties&&E._animateGif(this._pInst);try{f.default.MediaElement&&E instanceof f.default.MediaElement&&E._ensureCanvas();var H=(H=this._tint&&E.canvas?this._getTintedImageCanvas(E):H)||E.canvas||E.elt,G=1;E.width&&0<E.width&&(G=H.width/E.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(H,G*j,G*O,G*P,G*L,z,N,V,k),this._isErasing&&this._pInst.erase()}catch(F){if(F.name!=="NS_ERROR_NOT_AVAILABLE")throw F}}},{key:"_getTintedImageCanvas",value:function(E){if(!E.canvas)return E;E.tintCanvas||(E.tintCanvas=document.createElement("canvas")),E.tintCanvas.width!==E.canvas.width&&(E.tintCanvas.width=E.canvas.width),E.tintCanvas.height!==E.canvas.height&&(E.tintCanvas.height=E.canvas.height);var j=E.tintCanvas.getContext("2d");return j.save(),j.clearRect(0,0,E.canvas.width,E.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(j.drawImage(E.canvas,0,0),j.globalCompositeOperation="luminosity",j.drawImage(E.canvas,0,0),j.globalCompositeOperation="color",j.drawImage(E.canvas,0,0),j.globalCompositeOperation="multiply",j.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),j.fillRect(0,0,E.canvas.width,E.canvas.height),j.globalCompositeOperation="destination-in"),j.globalAlpha=this._tint[3]/255,j.drawImage(E.canvas,0,0),j.restore(),E.tintCanvas}},{key:"blendMode",value:function(E){if(E===h.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(E!==h.BLEND&&E!==h.REMOVE&&E!==h.DARKEST&&E!==h.LIGHTEST&&E!==h.DIFFERENCE&&E!==h.MULTIPLY&&E!==h.EXCLUSION&&E!==h.SCREEN&&E!==h.REPLACE&&E!==h.OVERLAY&&E!==h.HARD_LIGHT&&E!==h.SOFT_LIGHT&&E!==h.DODGE&&E!==h.BURN&&E!==h.ADD)throw new Error("Mode ".concat(E," not recognized."));this._cachedBlendMode=E,this.drawingContext.globalCompositeOperation=E}}},{key:"blend",value:function(){for(var E=this.drawingContext.globalCompositeOperation,j=arguments.length,O=new Array(j),P=0;P<j;P++)O[P]=arguments[P];var L=O[O.length-1],z=Array.prototype.slice.call(O,0,O.length-1);this.drawingContext.globalCompositeOperation=L,f.default.prototype.copy.apply(this,z),this.drawingContext.globalCompositeOperation=E}},{key:"_getPixel",value:function(E,j){return[(E=this.drawingContext.getImageData(E,j,1,1).data)[0],E[1],E[2],E[3]]}},{key:"loadPixels",value:function(){var E=this._pixelsState,j=E._pixelDensity,O=this.width*j;j=this.height*j,O=this.drawingContext.getImageData(0,0,O,j),E._setProperty("imageData",O),E._setProperty("pixels",O.data)}},{key:"set",value:function(E,j,O){E=Math.floor(E),j=Math.floor(j);var P=this._pixelsState;if(O instanceof f.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(P._pixelDensity,P._pixelDensity),this.drawingContext.clearRect(E,j,O.width,O.height),this.drawingContext.drawImage(O.canvas,E,j),this.drawingContext.restore();else{var L=0,z=0,N=0,V=0,k=4*(j*P._pixelDensity*(this.width*P._pixelDensity)+E*P._pixelDensity);if(P.imageData||P.loadPixels.call(P),typeof O=="number")k<P.pixels.length&&(N=z=L=O,V=255);else if(O instanceof Array){if(O.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");k<P.pixels.length&&(L=O[0],z=O[1],N=O[2],V=O[3])}else O instanceof f.default.Color&&k<P.pixels.length&&(L=O.levels[0],z=O.levels[1],N=O.levels[2],V=O.levels[3]);for(var H=0;H<P._pixelDensity;H++)for(var G=0;G<P._pixelDensity;G++)k=4*((j*P._pixelDensity+G)*this.width*P._pixelDensity+(E*P._pixelDensity+H)),P.pixels[k]=L,P.pixels[k+1]=z,P.pixels[k+2]=N,P.pixels[k+3]=V}}},{key:"updatePixels",value:function(E,j,O,P){var L=this._pixelsState,z=L._pixelDensity;E===void 0&&j===void 0&&O===void 0&&P===void 0&&(j=E=0,O=this.width,P=this.height),E*=z,j*=z,O*=z,P*=z,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=L.imageData),this.drawingContext.putImageData(L.imageData,E,j,0,0,O,P)}},{key:"_acuteArcToBezier",value:function(E,j){var O=j/2,P=Math.cos(O),L=Math.sin(O),z=1/Math.tan(O),N=(O=E+O,Math.cos(O)),V=(O=Math.sin(O),(4-P)/3);return L+=(P-V)*z,{ax:Math.cos(E).toFixed(7),ay:Math.sin(E).toFixed(7),bx:(V*N+L*O).toFixed(7),by:(V*O-L*N).toFixed(7),cx:(V*N-L*O).toFixed(7),cy:(V*O+L*N).toFixed(7),dx:Math.cos(E+j).toFixed(7),dy:Math.sin(E+j).toFixed(7)}}},{key:"arc",value:function(E,j,O,P,L,z,N){var V,k=this.drawingContext,H=O/2,G=P/2,F=[];for(E+=H,j+=G;1e-5<=z-L;)V=Math.min(z-L,h.HALF_PI),F.push(this._acuteArcToBezier(L,V)),L+=V;return this._doFill&&(k.beginPath(),F.forEach(function(W,Q){Q===0&&k.moveTo(E+W.ax*H,j+W.ay*G),k.bezierCurveTo(E+W.bx*H,j+W.by*G,E+W.cx*H,j+W.cy*G,E+W.dx*H,j+W.dy*G)}),N!==h.PIE&&N!=null||k.lineTo(E,j),k.closePath(),k.fill()),this._doStroke&&(k.beginPath(),F.forEach(function(W,Q){Q===0&&k.moveTo(E+W.ax*H,j+W.ay*G),k.bezierCurveTo(E+W.bx*H,j+W.by*G,E+W.cx*H,j+W.cy*G,E+W.dx*H,j+W.dy*G)}),N===h.PIE?(k.lineTo(E,j),k.closePath()):N===h.CHORD&&k.closePath(),k.stroke()),this}},{key:"ellipse",value:function(E){var j=this.drawingContext,O=this._doFill,P=this._doStroke,L=parseFloat(E[0]),z=parseFloat(E[1]),N=parseFloat(E[2]);if(E=parseFloat(E[3]),O&&!P){if(this._getFill()===u)return this}else if(!O&&P&&this._getStroke()===u)return this;var V=N/2*.5522847498,k=E/2*.5522847498,H=L+N,G=z+E;N=L+N/2,E=z+E/2,j.beginPath(),j.moveTo(L,E),j.bezierCurveTo(L,E-k,N-V,z,N,z),j.bezierCurveTo(N+V,z,H,E-k,H,E),j.bezierCurveTo(H,E+k,N+V,G,N,G),j.bezierCurveTo(N-V,G,L,E+k,L,E),O&&j.fill(),P&&j.stroke()}},{key:"line",value:function(E,j,O,P){var L=this.drawingContext;return this._doStroke&&this._getStroke()!==u&&(L.beginPath(),L.moveTo(E,j),L.lineTo(O,P),L.stroke()),this}},{key:"point",value:function(E,j){var O,P,L=this.drawingContext;return this._doStroke&&this._getStroke()!==u?(O=this._getStroke(),P=this._getFill(),this._setFill(O),L.beginPath(),L.arc(E,j,L.lineWidth/2,0,h.TWO_PI,!1),L.fill(),void this._setFill(P)):this}},{key:"quad",value:function(E,j,O,P,L,z,N,V){var k=this.drawingContext,H=this._doFill,G=this._doStroke;if(H&&!G){if(this._getFill()===u)return this}else if(!H&&G&&this._getStroke()===u)return this;return k.beginPath(),k.moveTo(E,j),k.lineTo(O,P),k.lineTo(L,z),k.lineTo(N,V),k.closePath(),H&&k.fill(),G&&k.stroke(),this}},{key:"rect",value:function(E){var j,O,P=E[0],L=E[1],z=E[2],N=E[3],V=E[4],k=E[5],H=E[6],G=(E=E[7],this.drawingContext),F=this._doFill,W=this._doStroke;if(F&&!W){if(this._getFill()===u)return this}else if(!F&&W&&this._getStroke()===u)return this;return G.beginPath(),V===void 0?G.rect(P,L,z,N):(k===void 0&&(k=V),H===void 0&&(H=k),E===void 0&&(E=H),W=(F=Math.abs(z))/2,O=(j=Math.abs(N))/2,j<2*(V=F<2*V?W:V)&&(V=O),j<2*(k=F<2*k?W:k)&&(k=O),j<2*(H=F<2*H?W:H)&&(H=O),j<2*(E=F<2*E?W:E)&&(E=O),G.beginPath(),G.moveTo(P+V,L),G.arcTo(P+z,L,P+z,L+N,k),G.arcTo(P+z,L+N,P,L+N,H),G.arcTo(P,L+N,P,L,E),G.arcTo(P,L,P+z,L,V),G.closePath()),this._doFill&&G.fill(),this._doStroke&&G.stroke(),this}},{key:"triangle",value:function(E){var j=this.drawingContext,O=this._doFill,P=this._doStroke,L=E[0],z=E[1],N=E[2],V=E[3],k=E[4];if(E=E[5],O&&!P){if(this._getFill()===u)return this}else if(!O&&P&&this._getStroke()===u)return this;j.beginPath(),j.moveTo(L,z),j.lineTo(N,V),j.lineTo(k,E),j.closePath(),O&&j.fill(),P&&j.stroke()}},{key:"endShape",value:function(E,j,O,P,L,z,N){if(j.length!==0&&(this._doStroke||this._doFill)){var V,k,H,G=E===h.CLOSE,F=(G&&!z&&j.push(j[0]),j.length);if(!O||N!==h.POLYGON&&N!==null)if(!P||N!==h.POLYGON&&N!==null)if(!L||N!==h.POLYGON&&N!==null)if(N===h.POINTS)for(k=0;k<F;k++)V=j[k],this._doStroke&&this._pInst.stroke(V[6]),this._pInst.point(V[0],V[1]);else if(N===h.LINES)for(k=0;k+1<F;k+=2)V=j[k],this._doStroke&&this._pInst.stroke(j[k+1][6]),this._pInst.line(V[0],V[1],j[k+1][0],j[k+1][1]);else if(N===h.TRIANGLES)for(k=0;k+2<F;k+=3)V=j[k],this.drawingContext.beginPath(),this.drawingContext.moveTo(V[0],V[1]),this.drawingContext.lineTo(j[k+1][0],j[k+1][1]),this.drawingContext.lineTo(j[k+2][0],j[k+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(j[k+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(j[k+2][6]),this.drawingContext.stroke());else if(N===h.TRIANGLE_STRIP)for(k=0;k+1<F;k++)V=j[k],this.drawingContext.beginPath(),this.drawingContext.moveTo(j[k+1][0],j[k+1][1]),this.drawingContext.lineTo(V[0],V[1]),this._doStroke&&this._pInst.stroke(j[k+1][6]),this._doFill&&this._pInst.fill(j[k+1][5]),k+2<F&&(this.drawingContext.lineTo(j[k+2][0],j[k+2][1]),this._doStroke&&this._pInst.stroke(j[k+2][6]),this._doFill&&this._pInst.fill(j[k+2][5])),this._doFillStrokeClose(G);else if(N===h.TRIANGLE_FAN){if(2<F){for(this.drawingContext.beginPath(),k=2;k<F;k++)V=j[k],this.drawingContext.moveTo(j[0][0],j[0][1]),this.drawingContext.lineTo(j[k-1][0],j[k-1][1]),this.drawingContext.lineTo(V[0],V[1]),this.drawingContext.lineTo(j[0][0],j[0][1]),k<F-1&&(this._doFill&&V[5]!==j[k+1][5]||this._doStroke&&V[6]!==j[k+1][6])&&(this._doFill&&(this._pInst.fill(V[5]),this.drawingContext.fill(),this._pInst.fill(j[k+1][5])),this._doStroke&&(this._pInst.stroke(V[6]),this.drawingContext.stroke(),this._pInst.stroke(j[k+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(G)}}else if(N===h.QUADS)for(k=0;k+3<F;k+=4){for(V=j[k],this.drawingContext.beginPath(),this.drawingContext.moveTo(V[0],V[1]),H=1;H<4;H++)this.drawingContext.lineTo(j[k+H][0],j[k+H][1]);this.drawingContext.lineTo(V[0],V[1]),this._doFill&&this._pInst.fill(j[k+3][5]),this._doStroke&&this._pInst.stroke(j[k+3][6]),this._doFillStrokeClose(G)}else if(N===h.QUAD_STRIP){if(3<F)for(k=0;k+1<F;k+=2)V=j[k],this.drawingContext.beginPath(),k+3<F?(this.drawingContext.moveTo(j[k+2][0],j[k+2][1]),this.drawingContext.lineTo(V[0],V[1]),this.drawingContext.lineTo(j[k+1][0],j[k+1][1]),this.drawingContext.lineTo(j[k+3][0],j[k+3][1]),this._doFill&&this._pInst.fill(j[k+3][5]),this._doStroke&&this._pInst.stroke(j[k+3][6])):(this.drawingContext.moveTo(V[0],V[1]),this.drawingContext.lineTo(j[k+1][0],j[k+1][1])),this._doFillStrokeClose(G)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(j[0][0],j[0][1]),k=1;k<F;k++)(V=j[k]).isVert&&(V.moveTo?this.drawingContext.moveTo(V[0],V[1]):this.drawingContext.lineTo(V[0],V[1]));this._doFillStrokeClose(G)}else{for(this.drawingContext.beginPath(),k=0;k<F;k++)j[k].isVert?j[k].moveTo?this.drawingContext.moveTo(j[k][0],j[k][1]):this.drawingContext.lineTo(j[k][0],j[k][1]):this.drawingContext.quadraticCurveTo(j[k][0],j[k][1],j[k][2],j[k][3]);this._doFillStrokeClose(G)}else{for(this.drawingContext.beginPath(),k=0;k<F;k++)j[k].isVert?j[k].moveTo?this.drawingContext.moveTo(j[k][0],j[k][1]):this.drawingContext.lineTo(j[k][0],j[k][1]):this.drawingContext.bezierCurveTo(j[k][0],j[k][1],j[k][2],j[k][3],j[k][4],j[k][5]);this._doFillStrokeClose(G)}else if(3<F){var W=[],Q=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(j[1][0],j[1][1]),k=1;k+2<F;k++)V=j[k],W[0]=[V[0],V[1]],W[1]=[V[0]+(Q*j[k+1][0]-Q*j[k-1][0])/6,V[1]+(Q*j[k+1][1]-Q*j[k-1][1])/6],W[2]=[j[k+1][0]+(Q*j[k][0]-Q*j[k+2][0])/6,j[k+1][1]+(Q*j[k][1]-Q*j[k+2][1])/6],W[3]=[j[k+1][0],j[k+1][1]],this.drawingContext.bezierCurveTo(W[1][0],W[1][1],W[2][0],W[2][1],W[3][0],W[3][1]);G&&this.drawingContext.lineTo(j[k+1][0],j[k+1][1]),this._doFillStrokeClose(G)}z=L=P=O=!1,G&&j.pop()}return this}},{key:"strokeCap",value:function(E){return E!==h.ROUND&&E!==h.SQUARE&&E!==h.PROJECT||(this.drawingContext.lineCap=E),this}},{key:"strokeJoin",value:function(E){return E!==h.ROUND&&E!==h.BEVEL&&E!==h.MITER||(this.drawingContext.lineJoin=E),this}},{key:"strokeWeight",value:function(E){return this.drawingContext.lineWidth=E===void 0||E===0?1e-4:E,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(E){E!==this._cachedFillStyle&&(this.drawingContext.fillStyle=E,this._cachedFillStyle=E)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(E){E!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=E,this._cachedStrokeStyle=E)}},{key:"bezier",value:function(E,j,O,P,L,z,N,V){return this._pInst.beginShape(),this._pInst.vertex(E,j),this._pInst.bezierVertex(O,P,L,z,N,V),this._pInst.endShape(),this}},{key:"curve",value:function(E,j,O,P,L,z,N,V){return this._pInst.beginShape(),this._pInst.curveVertex(E,j),this._pInst.curveVertex(O,P),this._pInst.curveVertex(L,z),this._pInst.curveVertex(N,V),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(E){E&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(E,j,O,P,L,z){this.drawingContext.transform(E,j,O,P,L,z)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(E){this.drawingContext.rotate(E)}},{key:"scale",value:function(E,j){return this.drawingContext.scale(E,j),this}},{key:"translate",value:function(E,j){return E instanceof f.default.Vector&&(j=E.y,E=E.x),this.drawingContext.translate(E,j),this}},{key:"_renderText",value:function(E,j,O,P,L,z){if(!(P<z||L<=P))return E.push(),this._isOpenType()?this._textFont._renderPath(j,O,P,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(j,O,P),this._doFill&&(this._fillSet||this._setFill(h._DEFAULT_TEXT_FILL),this.drawingContext.fillText(j,O,P))),E.pop(),E}},{key:"textWidth",value:function(E){return this._isOpenType()?this._textFont._textWidth(E,this._textSize):this.drawingContext.measureText(E).width}},{key:"_applyTextProperties",value:function(){var E,j=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),E=this._textFont,this._isOpenType()&&(E=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(E||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===h.CENTER?this.drawingContext.textBaseline=h._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,j}},{key:"push",value:function(){return this.drawingContext.save(),c(o(x.prototype),"push",this).call(this)}},{key:"pop",value:function(E){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,c(o(x.prototype),"pop",this).call(this,E)}}])&&w(_.prototype,g),x}(f.default.Renderer);m.prototype.text=function(g,_,v,x,E){x!==void 0&&this.drawingContext.textBaseline===h.BASELINE&&(j=!0,this.drawingContext.textBaseline=h.TOP);var j;return x=f.default.Renderer.prototype.text.apply(this,arguments),j&&(this.drawingContext.textBaseline=h.BASELINE),x},f.default.Renderer2D=m,t=f.default.Renderer2D,M.default=t},{"./constants":262,"./main":273,"./p5.Renderer":276,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.slice":164,"core-js/modules/es.function.name":167,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.reflect.get":183,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],278:[function(t,R,M){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var p=(t=t("./main"))&&t.__esModule?t:{default:t};function f(){return{}}p.default.prototype._promisePreloads=[];var h=!(p.default.prototype.registerPromisePreload=function(b){p.default.prototype._promisePreloads.push(b)});p.default.prototype._setupPromisePreloads=function(){var b=!0,w=!1,c=void 0;try{for(var l,o=this._promisePreloads[Symbol.iterator]();!(b=(l=o.next()).done);b=!0){var u=l.value,m=this,g=u.method,_=u.addCallbacks,v=u.legacyPreloadSetup,x=u.target||this,E=x[g].bind(x);if(x===p.default.prototype){if(h)continue;m=null,E=x[g]}x[g]=this._wrapPromisePreload(m,E,_),v&&(x[v.method]=this._legacyPreloadGenerator(m,v,x[g]))}}catch(j){w=!0,c=j}finally{try{b||o.return==null||o.return()}finally{if(w)throw c}}h=!0},p.default.prototype._wrapPromisePreload=function(b,w,c){var l=function(){for(var o=this,u=(this._incrementPreload(),null),m=null,g=arguments.length,_=new Array(g),v=0;v<g;v++)_[v]=arguments[v];if(c)for(var x=_.length-1;0<=x&&!m&&typeof _[x]=="function";x--)m=u,u=_.pop();var E=Promise.resolve(w.apply(this,_));return u&&E.then(u),m&&E.catch(m),E.then(function(){return o._decrementPreload()}),E};return b?l.bind(b):l},p.default.prototype._legacyPreloadGenerator=function(b,w,c){var l=w.createBaseObject||f;return w=function(){var o=this;this._incrementPreload();for(var u=arguments.length,m=new Array(u),g=0;g<u;g++)m[g]=arguments[g];var _=l.apply(this,m);return c.apply(this,m).then(function(v){Object.assign(_,v),o._decrementPreload()}),_},b?w.bind(b):w}},{"./main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],279:[function(t,R,M){function p(l){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(l)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var f=(c=t("./main"))&&c.__esModule?c:{default:c},h=function(l){if(l&&l.__esModule)return l;if(l===null||b(l)!=="object"&&typeof l!="function")return{default:l};var o=function(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,v)}();if(o&&o.has(l))return o.get(l);var u,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in l){var _;Object.prototype.hasOwnProperty.call(l,u)&&((_=g?Object.getOwnPropertyDescriptor(l,u):null)&&(_.get||_.set)?Object.defineProperty(m,u,_):m[u]=l[u])}return m.default=l,o&&o.set(l,m),m}(t("./constants"));function b(l){return(b=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(o){return p(o)}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":p(o)})(l)}t("./p5.Graphics"),t("./p5.Renderer2D"),t("../webgl/p5.RendererGL");var w="defaultCanvas0",c=(f.default.prototype.createCanvas=function(l,o,u,m){var g,_,v;if(f.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(u=h.P2D,m=arguments[2]):g=u||h.P2D,m)(v=document.getElementById(w))&&v.parentNode.removeChild(v),v=m,this._defaultGraphicsCreated=!1;else{if(g===h.WEBGL)(v=document.getElementById(w))&&(v.parentNode.removeChild(v),_=this._renderer,this._elements=this._elements.filter(function(E){return E!==_})),(v=document.createElement("canvas")).id=w,v.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)v=this.canvas;else{v=m||document.createElement("canvas");for(var x=0;document.getElementById("defaultCanvas".concat(x));)x++;w="defaultCanvas".concat(x),v.id=w,v.classList.add("p5Canvas")}this._setupDone||(v.dataset.hidden=!0,v.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(u=document.createElement("main"),document.body.appendChild(u)),document.getElementsByTagName("main")[0])).appendChild(v)}return g===h.WEBGL?(this._setProperty("_renderer",new f.default.RendererGL(v,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new f.default.Renderer2D(v,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(l,o),this._renderer._applyDefaults(),this._renderer},f.default.prototype.resizeCanvas=function(l,o,u){if(f.default._validateParameters("resizeCanvas",arguments),this._renderer){var m,g,_={};for(m in this.drawingContext){var v=this.drawingContext[m];b(v)!=="object"&&typeof v!="function"&&(_[m]=v)}for(g in this.width=l,this.height=o,this._renderer.resize(l,o),_)try{this.drawingContext[g]=_[g]}catch{}u||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},f.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},f.default.prototype.createGraphics=function(l,o,u,m){return arguments[2]instanceof HTMLCanvasElement&&(u=h.P2D,m=arguments[2]),f.default._validateParameters("createGraphics",arguments),new f.default.Graphics(l,o,u,this,m)},f.default.prototype.createFramebuffer=function(l){return new f.default.Framebuffer(this,l)},f.default.prototype.blendMode=function(l){f.default._validateParameters("blendMode",arguments),l===h.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),l=h.BLEND),this._renderer.blendMode(l)},f.default);M.default=c},{"../webgl/p5.RendererGL":328,"./constants":262,"./main":273,"./p5.Graphics":275,"./p5.Renderer2D":277,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],280:[function(t,R,M){function p(o){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(o)}function f(o){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(u){return p(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":p(u)})(o)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var h=c(t("../main")),b=function(o){if(o&&o.__esModule)return o;if(o===null||f(o)!=="object"&&typeof o!="function")return{default:o};var u=function(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,x)}();if(u&&u.has(o))return u.get(o);var m,g={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in o){var v;Object.prototype.hasOwnProperty.call(o,m)&&((v=_?Object.getOwnPropertyDescriptor(o,m):null)&&(v.get||v.set)?Object.defineProperty(g,m,v):g[m]=o[m])}return g.default=o,u&&u.set(o,g),g}(t("../constants")),w=c(t("../helpers"));function c(o){return o&&o.__esModule?o:{default:o}}function l(o){return function(u){if(Array.isArray(u)){for(var m=0,g=new Array(u.length);m<u.length;m++)g[m]=u[m];return g}}(o)||function(u){if(Symbol.iterator in Object(u)||Object.prototype.toString.call(u)==="[object Arguments]")return Array.from(u)}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),h.default.prototype._normalizeArcAngles=function(o,u,m,g,_){var v;return o-=b.TWO_PI*Math.floor(o/b.TWO_PI),u-=b.TWO_PI*Math.floor(u/b.TWO_PI),v=Math.min(Math.abs(o-u),b.TWO_PI-Math.abs(o-u)),_&&(o=o<=b.HALF_PI?Math.atan(m/g*Math.tan(o)):o>b.HALF_PI&&o<=3*b.HALF_PI?Math.atan(m/g*Math.tan(o))+b.PI:Math.atan(m/g*Math.tan(o))+b.TWO_PI,u=u<=b.HALF_PI?Math.atan(m/g*Math.tan(u)):u>b.HALF_PI&&u<=3*b.HALF_PI?Math.atan(m/g*Math.tan(u))+b.PI:Math.atan(m/g*Math.tan(u))+b.TWO_PI),u<o&&(u+=b.TWO_PI),{start:o,stop:u,correspondToSamePoint:v<1e-5}},h.default.prototype.arc=function(o,u,m,g,_,v,x,E){return h.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&_!==v&&(_=this._toRadians(_),v=this._toRadians(v),m=Math.abs(m),g=Math.abs(g),o=w.default.modeAdjust(o,u,m,g,this._renderer._ellipseMode),(u=this._normalizeArcAngles(_,v,o.w,o.h,!0)).correspondToSamePoint?this._renderer.ellipse([o.x,o.y,o.w,o.h,E]):(this._renderer.arc(o.x,o.y,o.w,o.h,u.start,u.stop,x,E),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[o.x,o.y,o.w,o.h,u.start,u.stop,x]))),this},h.default.prototype.ellipse=function(o,u,m,g,_){return h.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},h.default.prototype.circle=function(){h.default._validateParameters("circle",arguments);var o=Array.prototype.slice.call(arguments,0,2);return o.push(arguments[2]),o.push(arguments[2]),this._renderEllipse.apply(this,l(o))},h.default.prototype._renderEllipse=function(o,u,m,g,_){return(this._renderer._doStroke||this._renderer._doFill)&&(m<0&&(m=Math.abs(m)),g===void 0?g=m:g<0&&(g=Math.abs(g)),o=w.default.modeAdjust(o,u,m,g,this._renderer._ellipseMode),this._renderer.ellipse([o.x,o.y,o.w,o.h,_]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[o.x,o.y,o.w,o.h])),this},h.default.prototype.line=function(){for(var o,u=arguments.length,m=new Array(u),g=0;g<u;g++)m[g]=arguments[g];return h.default._validateParameters("line",m),this._renderer._doStroke&&(o=this._renderer).line.apply(o,m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",m),this},h.default.prototype.point=function(){for(var o,u=arguments.length,m=new Array(u),g=0;g<u;g++)m[g]=arguments[g];return h.default._validateParameters("point",m),this._renderer._doStroke&&(m.length===1&&m[0]instanceof h.default.Vector?this._renderer.point.call(this._renderer,m[0].x,m[0].y,m[0].z):((o=this._renderer).point.apply(o,m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",m))),this},h.default.prototype.quad=function(){for(var o,u=arguments.length,m=new Array(u),g=0;g<u;g++)m[g]=arguments[g];return h.default._validateParameters("quad",m),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&m.length<12?this._renderer.quad.call(this._renderer,m[0],m[1],0,m[2],m[3],0,m[4],m[5],0,m[6],m[7],0,m[8],m[9]):((o=this._renderer).quad.apply(o,m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",m))),this},h.default.prototype.rect=function(){for(var o=arguments.length,u=new Array(o),m=0;m<o;m++)u[m]=arguments[m];return h.default._validateParameters("rect",u),this._renderRect.apply(this,u)},h.default.prototype.square=function(o,u,m,g,_,v,x){return h.default._validateParameters("square",arguments),this._renderRect.call(this,o,u,m,m,g,_,v,x)},h.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var o=w.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),u=[o.x,o.y,o.w,o.h],m=4;m<arguments.length;m++)u[m]=arguments[m];this._renderer.rect(u),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[o.x,o.y,o.w,o.h])}return this},h.default.prototype.triangle=function(){for(var o=arguments.length,u=new Array(o),m=0;m<o;m++)u[m]=arguments[m];return h.default._validateParameters("triangle",u),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(u),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",u),this},t=h.default,M.default=t},{"../constants":262,"../friendly_errors/fes_core":264,"../friendly_errors/file_errors":265,"../friendly_errors/validate_params":268,"../helpers":269,"../main":273,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],281:[function(t,R,M){function p(c){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}function f(c){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(l){return p(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":p(l)})(c)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var h=(w=t("../main"))&&w.__esModule?w:{default:w},b=function(c){if(c&&c.__esModule)return c;if(c===null||f(c)!=="object"&&typeof c!="function")return{default:c};var l=function(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,_)}();if(l&&l.has(c))return l.get(c);var o,u={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in c){var g;Object.prototype.hasOwnProperty.call(c,o)&&((g=m?Object.getOwnPropertyDescriptor(c,o):null)&&(g.get||g.set)?Object.defineProperty(u,o,g):u[o]=c[o])}return u.default=c,l&&l.set(c,u),u}(t("../constants"));h.default.prototype.ellipseMode=function(c){return h.default._validateParameters("ellipseMode",arguments),c!==b.CORNER&&c!==b.CORNERS&&c!==b.RADIUS&&c!==b.CENTER||(this._renderer._ellipseMode=c),this},h.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},h.default.prototype.rectMode=function(c){return h.default._validateParameters("rectMode",arguments),c!==b.CORNER&&c!==b.CORNERS&&c!==b.RADIUS&&c!==b.CENTER||(this._renderer._rectMode=c),this},h.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},h.default.prototype.strokeCap=function(c){return h.default._validateParameters("strokeCap",arguments),c!==b.ROUND&&c!==b.SQUARE&&c!==b.PROJECT||this._renderer.strokeCap(c),this},h.default.prototype.strokeJoin=function(c){return h.default._validateParameters("strokeJoin",arguments),c!==b.ROUND&&c!==b.BEVEL&&c!==b.MITER||this._renderer.strokeJoin(c),this},h.default.prototype.strokeWeight=function(c){return h.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(c),this};var w=h.default;M.default=w},{"../constants":262,"../main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],282:[function(t,R,M){Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(f=t("../main"))&&f.__esModule?f:{default:f};t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),p.default.prototype.bezier=function(){for(var h,b=arguments.length,w=new Array(b),c=0;c<b;c++)w[c]=arguments[c];return p.default._validateParameters("bezier",w),(this._renderer._doStroke||this._renderer._doFill)&&(h=this._renderer).bezier.apply(h,w),this},p.default.prototype.bezierDetail=function(h){return p.default._validateParameters("bezierDetail",arguments),this._bezierDetail=h,this},p.default.prototype.bezierPoint=function(h,b,w,c,l){p.default._validateParameters("bezierPoint",arguments);var o=1-l;return Math.pow(o,3)*h+3*Math.pow(o,2)*l*b+3*o*Math.pow(l,2)*w+Math.pow(l,3)*c},p.default.prototype.bezierTangent=function(h,b,w,c,l){p.default._validateParameters("bezierTangent",arguments);var o=1-l;return 3*c*Math.pow(l,2)-3*w*Math.pow(l,2)+6*w*o*l-6*b*o*l+3*b*Math.pow(o,2)-3*h*Math.pow(o,2)},p.default.prototype.curve=function(){for(var h,b=arguments.length,w=new Array(b),c=0;c<b;c++)w[c]=arguments[c];return p.default._validateParameters("curve",w),this._renderer._doStroke&&(h=this._renderer).curve.apply(h,w),this},p.default.prototype.curveDetail=function(h){return p.default._validateParameters("curveDetail",arguments),this._curveDetail=h<3?3:h,this},p.default.prototype.curveTightness=function(h){return p.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=h,this},p.default.prototype.curvePoint=function(h,b,w,c,l){p.default._validateParameters("curvePoint",arguments);var o=this._renderer._curveTightness,u=l*l*l,m=l*l;return h*((o-1)/2*u+(1-o)*m+(o-1)/2*l)+b*((o+3)/2*u+(-5-o)/2*m+1)+w*((-3-o)/2*u+(o+2)*m+(1-o)/2*l)+c*((1-o)/2*u+(o-1)/2*m)},p.default.prototype.curveTangent=function(h,b,w,c,l){p.default._validateParameters("curveTangent",arguments);var o=this._renderer._curveTightness,u=l*l*3;return h*((o-1)/2*u+(1-o)*(l=2*l)+(o-1)/2)+b*((o+3)/2*u+(-5-o)/2*l)+w*((-3-o)/2*u+(o+2)*l+(1-o)/2)+c*((1-o)/2*u+(o-1)/2*l)};var f=p.default;M.default=f},{"../friendly_errors/fes_core":264,"../friendly_errors/file_errors":265,"../friendly_errors/validate_params":268,"../main":273}],283:[function(t,R,M){function p(x){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(x)}function f(x){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(E){return p(E)}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":p(E)})(x)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var h=(v=t("../main"))&&v.__esModule?v:{default:v},b=function(x){if(x&&x.__esModule)return x;if(x===null||f(x)!=="object"&&typeof x!="function")return{default:x};var E=function(){var z;return typeof WeakMap!="function"?null:(z=new WeakMap,z)}();if(E&&E.has(x))return E.get(x);var j,O={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in x){var L;Object.prototype.hasOwnProperty.call(x,j)&&((L=P?Object.getOwnPropertyDescriptor(x,j):null)&&(L.get||L.set)?Object.defineProperty(O,j,L):O[j]=x[j])}return O.default=x,E&&E.set(x,O),O}(t("../constants")),w=null,c=[],l=[],o=!1,u=!1,m=!1,g=!1,_=!0,v=(h.default.prototype.beginContour=function(){return l=[],g=!0,this},h.default.prototype.beginShape=function(x){var E;return h.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(E=this._renderer).beginShape.apply(E,arguments):(w=x===b.POINTS||x===b.LINES||x===b.TRIANGLES||x===b.TRIANGLE_FAN||x===b.TRIANGLE_STRIP||x===b.QUADS||x===b.QUAD_STRIP?x:null,c=[],l=[]),this},h.default.prototype.bezierVertex=function(){for(var x,E=arguments.length,j=new Array(E),O=0;O<E;O++)j[O]=arguments[O];if(h.default._validateParameters("bezierVertex",j),this._renderer.isP3D)(x=this._renderer).bezierVertex.apply(x,j);else if(c.length===0)h.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{o=!0;for(var P=[],L=0;L<j.length;L++)P[L]=j[L];P.isVert=!1,(g?l:c).push(P)}return this},h.default.prototype.curveVertex=function(){for(var x,E=arguments.length,j=new Array(E),O=0;O<E;O++)j[O]=arguments[O];return h.default._validateParameters("curveVertex",j),this._renderer.isP3D?(x=this._renderer).curveVertex.apply(x,j):(u=!0,this.vertex(j[0],j[1])),this},h.default.prototype.endContour=function(){var x=l[0].slice();x.isVert=l[0].isVert,x.moveTo=!1,l.push(x),_&&(c.push(c[0]),_=!1);for(var E=0;E<l.length;E++)c.push(l[E]);return this},h.default.prototype.endShape=function(x){if(h.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(x,u,o,m,g,w);else{if(c.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var E=x===b.CLOSE;E&&!g&&c.push(c[0]),this._renderer.endShape(x,c,u,o,m,g,w),_=!(g=m=o=u=!1),E&&c.pop()}return this},h.default.prototype.quadraticVertex=function(){for(var x,E=arguments.length,j=new Array(E),O=0;O<E;O++)j[O]=arguments[O];if(h.default._validateParameters("quadraticVertex",j),this._renderer.isP3D)(x=this._renderer).quadraticVertex.apply(x,j);else{if(this._contourInited)return(x={}).x=j[0],x.y=j[1],x.x3=j[2],x.y3=j[3],x.type=b.QUADRATIC,this._contourVertices.push(x),this;if(0<c.length){m=!0;for(var P=[],L=0;L<j.length;L++)P[L]=j[L];P.isVert=!1,(g?l:c).push(P)}else h.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},h.default.prototype.vertex=function(x,E,j,O,P){var L;return this._renderer.isP3D?(L=this._renderer).vertex.apply(L,arguments):((L=[]).isVert=!0,L[0]=x,L[1]=E,L[2]=0,L[3]=0,L[4]=0,L[5]=this._renderer._getFill(),L[6]=this._renderer._getStroke(),j&&(L.moveTo=j),(g?(l.length===0&&(L.moveTo=!0),l):c).push(L)),this},h.default.prototype.normal=function(x,E,j){var O;return this._assert3d("normal"),h.default._validateParameters("normal",arguments),(O=this._renderer).normal.apply(O,arguments),this},h.default);M.default=v},{"../constants":262,"../main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],284:[function(t,R,M){function p(l){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(l)}function f(l){return function(o){if(Array.isArray(o)){for(var u=0,m=new Array(o.length);u<o.length;u++)m[u]=o[u];return m}}(l)||function(o){if(Symbol.iterator in Object(o)||Object.prototype.toString.call(o)==="[object Arguments]")return Array.from(o)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(l){return(h=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(o){return p(o)}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":p(o)})(l)}var b,w,c;t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(l,o){window.setTimeout(l,1e3/60)},typeof Uint8ClampedArray>"u"||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),Object.assign||(b=Object.keys,t=Object.defineProperty,w=typeof Symbol=="function"&&h(Symbol())==="symbol",c=Object.prototype.propertyIsEnumerable,t(Object,"assign",{value:function(l,o){if(l==null)throw new TypeError("target must be an object");for(var u,m=Object(l),g=1;g<arguments.length;++g){var _=Object(arguments[g]),v=b(_);for(w&&Object.getOwnPropertySymbols&&v.push.apply(v,f(Object.getOwnPropertySymbols(_).filter(function(x){return function(E){return c.call(x,E)}}(_)))),u=0;u<v.length;++u)m[v[u]]=_[v[u]]}return m},configurable:!0,enumerable:!1,writable:!0}))},{"core-js/modules/es.array.filter":155,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-clamped-array":233,"core-js/modules/web.dom-collections.iterator":236}],285:[function(t,R,M){t("core-js/modules/es.array.for-each"),t("core-js/modules/es.object.assign"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.object.assign"),t("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0,(t=(t=t("./main"))&&t.__esModule?t:{default:t}).default.prototype.noLoop=function(){this._loop=!1},t.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},t.default.prototype.isLooping=function(){return this._loop},t.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},t.default.prototype.pop=function(){var p=this._styles.pop();p?(this._renderer.pop(p.renderer),Object.assign(this,p.props)):console.warn("pop() was called without matching push()")},t.default.prototype.redraw=function(p){if(!this._inUserDraw&&this._setupDone){var f=parseInt(p),h=((isNaN(f)||f<1)&&(f=1),this._isGlobal?window:this);if(typeof h.draw=="function"){h.setup===void 0&&h.scale(h._pixelDensity,h._pixelDensity);for(var b=function(c){c.call(h)},w=0;w<f;w++){h.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),h._renderer.isP3D&&h._renderer._update(),h._setProperty("frameCount",h.frameCount+1),h._registeredMethods.pre.forEach(b),this._inUserDraw=!0;try{h.draw()}finally{this._inUserDraw=!1}h._registeredMethods.post.forEach(b)}}}},t=t.default,M.default=t},{"./main":273,"core-js/modules/es.array.for-each":156,"core-js/modules/es.object.assign":174,"core-js/modules/web.dom-collections.for-each":235}],286:[function(t,R,M){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(t=t("./main"))&&t.__esModule?t:{default:t};function f(h){return function(b){if(Array.isArray(b)){for(var w=0,c=new Array(b.length);w<b.length;w++)c[w]=b[w];return c}}(h)||function(b){if(Symbol.iterator in Object(b)||Object.prototype.toString.call(b)==="[object Arguments]")return Array.from(b)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}p.default.prototype.applyMatrix=function(){var h=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||h?(h=this._renderer).applyMatrix.apply(h,f(arguments.length<=0?void 0:arguments[0])):(h=this._renderer).applyMatrix.apply(h,arguments),this},p.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},p.default.prototype.rotate=function(h,b){return p.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(h),b),this},p.default.prototype.rotateX=function(h){return this._assert3d("rotateX"),p.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(h)),this},p.default.prototype.rotateY=function(h){return this._assert3d("rotateY"),p.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(h)),this},p.default.prototype.rotateZ=function(h){return this._assert3d("rotateZ"),p.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(h)),this},p.default.prototype.scale=function(h,b,w){var c;return p.default._validateParameters("scale",arguments),h instanceof p.default.Vector?(h=(c=h).x,b=c.y,w=c.z):h instanceof Array&&(h=(c=h)[0],b=c[1],w=c[2]||1),isNaN(b)?b=w=h:isNaN(w)&&(w=1),this._renderer.scale.call(this._renderer,h,b,w),this},p.default.prototype.shearX=function(h){return p.default._validateParameters("shearX",arguments),h=this._toRadians(h),this._renderer.applyMatrix(1,0,Math.tan(h),1,0,0),this},p.default.prototype.shearY=function(h){return p.default._validateParameters("shearY",arguments),h=this._toRadians(h),this._renderer.applyMatrix(1,Math.tan(h),0,1,0,0),this},p.default.prototype.translate=function(h,b,w){return p.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(h,b,w):this._renderer.translate(h,b),this},t=p.default,M.default=t},{"./main":273,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/web.dom-collections.iterator":236}],287:[function(t,R,M){function p(w){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(w)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var f=(t=t("../core/main"))&&t.__esModule?t:{default:t};function h(w){return function(c){if(Array.isArray(c)){for(var l=0,o=new Array(c.length);l<c.length;l++)o[l]=c[l];return o}}(w)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(w)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(w){return(b=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(c){return p(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":p(c)})(w)}f.default.prototype.storeItem=function(w,c){typeof w!="string"&&console.log("The argument that you passed to storeItem() - ".concat(w," is not a string.")),w.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(w," must not end with 'p5TypeID'.")),c===void 0&&console.log("You cannot store undefined variables using storeItem().");var l=b(c);switch(l){case"number":case"boolean":c=c.toString();break;case"object":c instanceof f.default.Color?l="p5.Color":c instanceof f.default.Vector&&(l="p5.Vector",c=[c.x,c.y,c.z]),c=JSON.stringify(c)}localStorage.setItem(w,c),w="".concat(w,"p5TypeID"),localStorage.setItem(w,l)},f.default.prototype.getItem=function(w){var c=localStorage.getItem(w),l=localStorage.getItem("".concat(w,"p5TypeID"));if(l===void 0)console.log("Unable to determine type of item stored under ".concat(w,"in local storage. Did you save the item with something other than setItem()?"));else if(c!==null)switch(l){case"number":c=parseFloat(c);break;case"boolean":c=c==="true";break;case"object":c=JSON.parse(c);break;case"p5.Color":c=JSON.parse(c),c=this.color.apply(this,h(c.levels));break;case"p5.Vector":c=JSON.parse(c),c=this.createVector.apply(this,h(c))}return c},f.default.prototype.clearStorage=function(){localStorage.clear()},f.default.prototype.removeItem=function(w){typeof w!="string"&&console.log("The argument that you passed to removeItem() - ".concat(w," is not a string.")),localStorage.removeItem(w),localStorage.removeItem("".concat(w,"p5TypeID"))}},{"../core/main":273,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.ends-with":188,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],288:[function(t,R,M){function p(m){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var f=(t=t("../core/main"))&&t.__esModule?t:{default:t};function h(m){return(h=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(g){return p(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":p(g)})(m)}function b(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),g&&function(_,v){(Object.setPrototypeOf||function(x,E){return x.__proto__=E,x})(_,v)}(m,g)}function w(m){return function(){var g,_=c(m);if(g=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(g=c(this).constructor,Reflect.construct(_,arguments,g)):_.apply(this,arguments),_=this,!g||h(g)!=="object"&&typeof g!="function"){if(_!==void 0)return _;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return g}}function c(m){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)})(m)}function l(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function o(m,g){for(var _=0;_<g.length;_++){var v=g[_];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(m,v.key,v)}}function u(m,g,_){g&&o(m.prototype,g)}f.default.prototype.createStringDict=function(m,g){return f.default._validateParameters("createStringDict",arguments),new f.default.StringDict(m,g)},f.default.prototype.createNumberDict=function(m,g){return f.default._validateParameters("createNumberDict",arguments),new f.default.NumberDict(m,g)},f.default.TypedDict=function(){function m(g,_){return l(this,m),g instanceof Object?this.data=g:(this.data={},this.data[g]=_),this}return u(m,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(g){return this.data.hasOwnProperty(g)}},{key:"get",value:function(g){if(this.data.hasOwnProperty(g))return this.data[g];console.log("".concat(g," does not exist in this Dictionary"))}},{key:"set",value:function(g,_){this._validate(_)?this.data[g]=_:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(g){for(var _ in g)this.set(_,g[_])}},{key:"create",value:function(g,_){g instanceof Object&&_===void 0?this._addObj(g):g!==void 0?this.set(g,_):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(g){if(!this.data.hasOwnProperty(g))throw new Error("".concat(g," does not exist in this Dictionary"));delete this.data[g]}},{key:"print",value:function(){for(var g in this.data)console.log("key:".concat(g," value:").concat(this.data[g]))}},{key:"saveTable",value:function(g){var _,v="";for(_ in this.data)v+="".concat(_,",").concat(this.data[_],`
`);var x=new Blob([v],{type:"text/csv"});f.default.prototype.downloadFile(x,g||"mycsv","csv")}},{key:"saveJSON",value:function(g,_){f.default.prototype.saveJSON(this.data,g,_)}},{key:"_validate",value:function(g){return!0}}]),m}(),f.default.StringDict=function(){b(g,f.default.TypedDict);var m=w(g);function g(){l(this,g);for(var _=arguments.length,v=new Array(_),x=0;x<_;x++)v[x]=arguments[x];return m.call.apply(m,[this].concat(v))}return u(g,[{key:"_validate",value:function(_){return typeof _=="string"}}]),g}(),f.default.NumberDict=function(){b(g,f.default.TypedDict);var m=w(g);function g(){l(this,g);for(var _=arguments.length,v=new Array(_),x=0;x<_;x++)v[x]=arguments[x];return m.call.apply(m,[this].concat(v))}return u(g,[{key:"_validate",value:function(_){return typeof _=="number"}},{key:"add",value:function(_,v){this.data.hasOwnProperty(_)?this.data[_]+=v:console.log("The key - ".concat(_," does not exist in this dictionary."))}},{key:"sub",value:function(_,v){this.add(_,-v)}},{key:"mult",value:function(_,v){this.data.hasOwnProperty(_)?this.data[_]*=v:console.log("The key - ".concat(_," does not exist in this dictionary."))}},{key:"div",value:function(_,v){this.data.hasOwnProperty(_)?this.data[_]/=v:console.log("The key - ".concat(_," does not exist in this dictionary."))}},{key:"_valueTest",value:function(_){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var v,x=this.data[Object.keys(this.data)[0]];for(v in this.data)this.data[v]*_<x*_&&(x=this.data[v]);return x}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(_){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var v=Object.keys(this.data)[0],x=1;x<Object.keys(this.data).length;x++)Object.keys(this.data)[x]*_<v*_&&(v=Object.keys(this.data)[x]);return v}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),g}(),t=f.default.TypedDict,M.default=t},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],289:[function(t,R,M){function p(x){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(x)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var f=(t=t("../core/main"))&&t.__esModule?t:{default:t};function h(x,E){for(var j=0;j<E.length;j++){var O=E[j];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(x,O.key,O)}}function b(x,E,j){E&&h(x.prototype,E),j&&h(x,j)}function w(x,E){return(w=Object.setPrototypeOf||function(j,O){return j.__proto__=O,j})(x,E)}function c(x){return function(){var E,j,O=o(x);return E=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(E=o(this).constructor,Reflect.construct(O,arguments,E)):O.apply(this,arguments),O=this,!(j=E)||m(j)!=="object"&&typeof j!="function"?l(O):j}}function l(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function o(x){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)})(x)}function u(x,E){if(!(x instanceof E))throw new TypeError("Cannot call a class as a function")}function m(x){return(m=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(E){return p(E)}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":p(E)})(x)}function g(x,E,j){return(E._userNode||document.body).appendChild(x),j=new(j?f.default.MediaElement:f.default.Element)(x,E),E._elements.push(j),j}function _(x,E,j,O){var P=document.createElement(E),L=(typeof(j=j||"")=="string"&&(j=[j]),!0),z=(E=!1,void 0);try{for(var N,V=j[Symbol.iterator]();!(L=(N=V.next()).done);L=!0){var k=N.value,H=document.createElement("source");H.setAttribute("src",k),P.appendChild(H)}}catch(F){E=!0,z=F}finally{try{L||V.return==null||V.return()}finally{if(E)throw z}}typeof O=="function"&&P.addEventListener("canplaythrough",function F(){O(),P.removeEventListener("canplaythrough",F)});var G=g(P,x,!0);return G.loadedmetadata=!1,P.addEventListener("loadedmetadata",function(){G.width=P.videoWidth,G.height=P.videoHeight,G.elt.width===0&&(G.elt.width=P.videoWidth),G.elt.height===0&&(G.elt.height=P.videoHeight),G.presetPlaybackRate&&(G.elt.playbackRate=G.presetPlaybackRate,delete G.presetPlaybackRate),G.loadedmetadata=!0}),G}function v(x,E,j,O){u(this,v),this.callback=x,this.time=E,this.id=j,this.val=O}f.default.prototype.select=function(x,E){return f.default._validateParameters("select",arguments),(E=this._getContainer(E).querySelector(x))?this._wrapElement(E):null},f.default.prototype.selectAll=function(x,E){f.default._validateParameters("selectAll",arguments);var j=[],O=this._getContainer(E).querySelectorAll(x);if(O)for(var P=0;P<O.length;P++){var L=this._wrapElement(O[P]);j.push(L)}return j},f.default.prototype._getContainer=function(x){var E=document;return typeof x=="string"?E=document.querySelector(x)||document:x instanceof f.default.Element?E=x.elt:x instanceof HTMLElement&&(E=x),E},f.default.prototype._wrapElement=function(x){var E,j=Array.prototype.slice.call(x.children);return x.tagName==="INPUT"&&x.type==="checkbox"?((E=new f.default.Element(x,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},E):x.tagName==="VIDEO"||x.tagName==="AUDIO"?new f.default.MediaElement(x,this):x.tagName==="SELECT"?this.createSelect(new f.default.Element(x,this)):0<j.length&&j.every(function(O){return O.tagName==="INPUT"||O.tagName==="LABEL"})?this.createRadio(new f.default.Element(x,this)):new f.default.Element(x,this)},f.default.prototype.removeElements=function(x){f.default._validateParameters("removeElements",arguments),this._elements.filter(function(E){return!(E.elt instanceof HTMLCanvasElement)}).map(function(E){return E.remove()})},f.default.Element.prototype.changed=function(x){return f.default.Element._adjustListener("change",x,this),this},f.default.Element.prototype.input=function(x){return f.default.Element._adjustListener("input",x,this),this},f.default.prototype.createDiv=function(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",E=document.createElement("div");return E.innerHTML=x,g(E,this)},f.default.prototype.createP=function(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",E=document.createElement("p");return E.innerHTML=x,g(E,this)},f.default.prototype.createSpan=function(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",E=document.createElement("span");return E.innerHTML=x,g(E,this)},f.default.prototype.createImg=function(){f.default._validateParameters("createImg",arguments);var x,E=document.createElement("img"),j=arguments;return 1<j.length&&typeof j[1]=="string"&&(E.alt=j[1]),2<j.length&&typeof j[2]=="string"&&(E.crossOrigin=j[2]),E.src=j[0],x=g(E,this),E.addEventListener("load",function(){x.width=E.offsetWidth||E.width,x.height=E.offsetHeight||E.height;var O=j[j.length-1];typeof O=="function"&&O(x)}),x},f.default.prototype.createA=function(x,E,j){f.default._validateParameters("createA",arguments);var O=document.createElement("a");return O.href=x,O.innerHTML=E,j&&(O.target=j),g(O,this)},f.default.prototype.createSlider=function(x,E,j,O){f.default._validateParameters("createSlider",arguments);var P=document.createElement("input");return P.type="range",P.min=x,P.max=E,O===0?P.step=1e-18:O&&(P.step=O),typeof j=="number"&&(P.value=j),g(P,this)},f.default.prototype.createButton=function(x,E){f.default._validateParameters("createButton",arguments);var j=document.createElement("button");return j.innerHTML=x,E&&(j.value=E),g(j,this)},f.default.prototype.createCheckbox=function(){for(var x=arguments.length,E=new Array(x),j=0;j<x;j++)E[j]=arguments[j];f.default._validateParameters("createCheckbox",E);var O=document.createElement("div"),P=document.createElement("input"),L=(P.type="checkbox",document.createElement("label")),z=(L.appendChild(P),O.appendChild(L),g(O,this));return z.checked=function(){var N=z.elt.firstElementChild.getElementsByTagName("input")[0];if(N){if(arguments.length===0)return N.checked;N.checked=!(arguments.length<=0||!arguments[0])}return z},this.value=function(N){return z.value=N,this},E[0]&&(z.value(E[0]),(O=document.createElement("span")).innerHTML=E[0],L.appendChild(O)),E[1]&&(P.checked=!0),z},f.default.prototype.createSelect=function(){for(var x,E=arguments.length,j=new Array(E),O=0;O<E;O++)j[O]=arguments[O];f.default._validateParameters("createSelect",j);var P,L=j[0];return L instanceof f.default.Element&&L.elt instanceof HTMLSelectElement?this.elt=(x=L).elt:L instanceof HTMLSelectElement?(x=g(L,this),this.elt=L):(P=document.createElement("select"),L&&typeof L=="boolean"&&P.setAttribute("multiple","true"),x=g(P,this),this.elt=P),x.option=function(z,N){var V;if(z!==void 0){for(var k,H=0;H<this.elt.length;H+=1)if(this.elt[H].textContent===z){V=H;break}V!==void 0?N===!1?this.elt.remove(V):this.elt[V].value=N:((k=document.createElement("option")).textContent=z,k.value=N===void 0?z:N,this.elt.appendChild(k),this._pInst._elements.push(k))}},x.selected=function(z){if(z!==void 0){for(var N=0;N<this.elt.length;N+=1)this.elt[N].value.toString()===z.toString()&&(this.elt.selectedIndex=N);return this}if(this.elt.getAttribute("multiple")){var V=[],k=!0,H=!1,G=void 0;try{for(var F,W=this.elt.selectedOptions[Symbol.iterator]();!(k=(F=W.next()).done);k=!0){var Q=F.value;V.push(Q.value)}}catch(J){H=!0,G=J}finally{try{k||W.return==null||W.return()}finally{if(H)throw G}}return V}return this.elt.value},x.disable=function(z){if(typeof z=="string")for(var N=0;N<this.elt.length;N++)this.elt[N].value.toString()===z&&(this.elt[N].disabled=!0,this.elt[N].selected=!1);else this.elt.disabled=!0;return this},x.enable=function(z){if(typeof z=="string")for(var N=0;N<this.elt.length;N++)this.elt[N].value.toString()===z&&(this.elt[N].disabled=!1,this.elt[N].selected=!1);else{this.elt.disabled=!1;for(var V=0;V<this.elt.length;V++)this.elt[V].disabled=!1,this.elt[V].selected=!1}return this},x},f.default.prototype.createRadio=function(){function x(z){return z instanceof HTMLInputElement&&z.type==="radio"}function E(z){return z instanceof HTMLLabelElement}var j,O,P,L=arguments.length<=0?void 0:arguments[0];return L instanceof f.default.Element&&(L.elt instanceof HTMLDivElement||L.elt instanceof HTMLSpanElement)?(j=L,this.elt=L.elt):L instanceof HTMLDivElement||L instanceof HTMLSpanElement?(j=g(L,this),O=this.elt=L,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(P=arguments.length<=1?void 0:arguments[1])):(typeof L=="string"&&(P=L),O=document.createElement("div"),j=g(O,this),this.elt=O),j._name=P||"radioOption",j._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(z){return x(z)||E(z)&&x(z.firstElementChild)}).map(function(z){return x(z)?z:z.firstElementChild})},j.option=function(z,N){var V,k,H,G=!0,F=!1,W=void 0;try{for(var Q,J=j._getOptionsArray()[Symbol.iterator]();!(G=(Q=J.next()).done);G=!0){var ee=Q.value;if(ee.value===z){V=ee;break}}}catch(te){F=!0,W=te}finally{try{G||J.return==null||J.return()}finally{if(F)throw W}}return V===void 0&&((V=document.createElement("input")).setAttribute("type","radio"),V.setAttribute("value",z)),V.setAttribute("name",j._name),E(V.parentElement)?k=V.parentElement:(k=document.createElement("label")).insertAdjacentElement("afterbegin",V),k.lastElementChild instanceof HTMLSpanElement?H=k.lastElementChild:(H=document.createElement("span"),V.insertAdjacentElement("afterend",H)),H.innerHTML=N===void 0?z:N,this.elt.appendChild(k),V},j.remove=function(z){var N=!0,V=!1,k=void 0;try{for(var H,G=j._getOptionsArray()[Symbol.iterator]();!(N=(H=G.next()).done);N=!0){var F=H.value;if(F.value===z)return void(E(F.parentElement)?F.parentElement:F).remove()}}catch(W){V=!0,k=W}finally{try{N||G.return==null||G.return()}finally{if(V)throw k}}},j.value=function(){var z="",N=!0,V=!1,k=void 0;try{for(var H,G=j._getOptionsArray()[Symbol.iterator]();!(N=(H=G.next()).done);N=!0){var F=H.value;if(F.checked){z=F.value;break}}}catch(W){V=!0,k=W}finally{try{N||G.return==null||G.return()}finally{if(V)throw k}}return z},j.selected=function(z){var N=null;if(z===void 0){var V=!0,k=!1,H=void 0;try{for(var G,F=j._getOptionsArray()[Symbol.iterator]();!(V=(G=F.next()).done);V=!0){var W=G.value;if(W.checked){N=W;break}}}catch(se){k=!0,H=se}finally{try{V||F.return==null||F.return()}finally{if(k)throw H}}}else{j._getOptionsArray().forEach(function(se){se.checked=!1,se.removeAttribute("checked")});var Q=!0;k=!1,H=void 0;try{for(var J,ee=j._getOptionsArray()[Symbol.iterator]();!(Q=(J=ee.next()).done);Q=!0){var te=J.value;te.value===z&&(te.setAttribute("checked",!0),te.checked=!0,N=te)}}catch(se){k=!0,H=se}finally{try{Q||ee.return==null||ee.return()}finally{if(k)throw H}}}return N},j.disable=function(){var z=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],N=!0,V=!1,k=void 0;try{for(var H,G=j._getOptionsArray()[Symbol.iterator]();!(N=(H=G.next()).done);N=!0)H.value.setAttribute("disabled",z)}catch(F){V=!0,k=F}finally{try{N||G.return==null||G.return()}finally{if(V)throw k}}},j},f.default.prototype.createColorPicker=function(x){f.default._validateParameters("createColorPicker",arguments);var E=document.createElement("input");return E.type="color",x?x instanceof f.default.Color?E.value=x.toString("#rrggbb"):(f.default.prototype._colorMode="rgb",f.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},E.value=f.default.prototype.color(x).toString("#rrggbb")):E.value="#000000",(E=g(E,this)).color=function(){return x&&(x.mode&&(f.default.prototype._colorMode=x.mode),x.maxes&&(f.default.prototype._colorMaxes=x.maxes)),f.default.prototype.color(this.elt.value)},E},f.default.prototype.createInput=function(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",E=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",j=(f.default._validateParameters("createInput",arguments),document.createElement("input"));return j.setAttribute("value",x),j.setAttribute("type",E),g(j,this)},f.default.prototype.createFileInput=function(x){var E,j=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(f.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(E=document.createElement("input")).setAttribute("type","file"),j&&E.setAttribute("multiple",!0),E.addEventListener("change",function(O){var P=!0,L=!1,z=void 0;try{for(var N,V=O.target.files[Symbol.iterator]();!(P=(N=V.next()).done);P=!0){var k=N.value;f.default.File._load(k,x)}}catch(H){L=!0,z=H}finally{try{P||V.return==null||V.return()}finally{if(L)throw z}}},!1),g(E,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},f.default.prototype.createVideo=function(x,E){return f.default._validateParameters("createVideo",arguments),_(this,"video",x,E)},f.default.prototype.createAudio=function(x,E){return f.default._validateParameters("createAudio",arguments),_(this,"audio",x,E)},f.default.prototype.VIDEO="video",f.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(x){var E=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return E?new Promise(function(j,O){E.call(navigator,x,j,O)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),f.default.prototype.createCapture=function(){for(var x=arguments.length,E=new Array(x),j=0;j<x;j++)E[j]=arguments[j];if(f.default._validateParameters("createCapture",E),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var O,P=!0,L=!0,z=0,N=E;z<N.length;z++){var V=N[z];V===f.default.prototype.VIDEO?L=!1:V===f.default.prototype.AUDIO?P=!1:m(V)==="object"?k=V:typeof V=="function"&&(O=V)}var k=k||{video:P,audio:L},H=document.createElement("video"),G=(H.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(k).then(function(F){try{"srcObject"in H?H.srcObject=F:H.src=window.URL.createObjectURL(F)}catch{H.src=F}},console.log),g(H,this,!0));return G.loadedmetadata=!1,H.addEventListener("loadedmetadata",function(){H.play(),H.width?(G.width=H.width,G.height=H.height):(G.width=G.elt.width=H.videoWidth,G.height=G.elt.height=H.videoHeight),G.loadedmetadata=!0,O&&O(H.srcObject)}),G},f.default.prototype.createElement=function(x,E){return f.default._validateParameters("createElement",arguments),x=document.createElement(x),E!==void 0&&(x.innerHTML=E),g(x,this)},f.default.Element.prototype.addClass=function(x){return this.elt.className?this.hasClass(x)||(this.elt.className=this.elt.className+" "+x):this.elt.className=x,this},f.default.Element.prototype.removeClass=function(x){return this.elt.classList.remove(x),this},f.default.Element.prototype.hasClass=function(x){return this.elt.classList.contains(x)},f.default.Element.prototype.toggleClass=function(x){return this.elt.classList.contains(x)?this.elt.classList.remove(x):this.elt.classList.add(x),this},f.default.Element.prototype.child=function(x){return x===void 0?this.elt.childNodes:(typeof x=="string"?(x[0]==="#"&&(x=x.substring(1)),x=document.getElementById(x)):x instanceof f.default.Element&&(x=x.elt),x instanceof HTMLElement&&this.elt.appendChild(x),this)},f.default.Element.prototype.center=function(x){var E=this.elt.style.display,j=this.elt.style.display==="none",O=this.parent().style.display==="none",P={x:this.elt.offsetLeft,y:this.elt.offsetTop},L=(j&&this.show(),O&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),z=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return x==="both"||x===void 0?this.position(L/2+this.parent().offsetLeft,z/2+this.parent().offsetTop):x==="horizontal"?this.position(L/2+this.parent().offsetLeft,P.y):x==="vertical"&&this.position(P.x,z/2+this.parent().offsetTop),this.style("display",E),j&&this.hide(),O&&this.parent().hide(),this},f.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},f.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},f.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var x="";return this.elt.style.transform&&(x=(x=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=x,this},f.default.Element.prototype._rotate=function(){var x="";return this.elt.style.transform&&(x=(x=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=x,this},f.default.Element.prototype.style=function(x,E){if((E=E instanceof f.default.Color?"rgba("+E.levels[0]+","+E.levels[1]+","+E.levels[2]+","+E.levels[3]/255+")":E)===void 0){if(x.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(x);for(var j=x.split(";"),O=0;O<j.length;O++){var P=j[O].split(":");P[0]&&P[1]&&(this.elt.style[P[0].trim()]=P[1].trim())}}else this.elt.style[x]=E,x!=="width"&&x!=="height"&&x!=="left"&&x!=="top"||(E=window.getComputedStyle(this.elt).getPropertyValue(x).replace(/[^\d.]/g,""),this[x]=Math.round(parseFloat(E,10)));return this},f.default.Element.prototype.attribute=function(x,E){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return E===void 0?this.elt.getAttribute(x):(this.elt.setAttribute(x,E),this);if(E===void 0)return this.elt.firstChild.getAttribute(x);for(var j=0;j<this.elt.childNodes.length;j++)this.elt.childNodes[j].setAttribute(x,E)},f.default.Element.prototype.removeAttribute=function(x){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var E=0;E<this.elt.childNodes.length;E++)this.elt.childNodes[E].removeAttribute(x);return this.elt.removeAttribute(x),this},f.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},f.default.Element.prototype.show=function(){return this.elt.style.display="block",this},f.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},f.default.Element.prototype.size=function(x,E){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var j=x,O=E,P=f.default.prototype.AUTO;if(j!==P||O!==P){if(j===P?j=E*this.width/this.height:O===P&&(O=x*this.height/this.width),this.elt instanceof HTMLCanvasElement){var L,z={},N=this.elt.getContext("2d");for(L in N)z[L]=N[L];for(L in this.elt.setAttribute("width",j*this._pInst._pixelDensity),this.elt.setAttribute("height",O*this._pInst._pixelDensity),this.elt.style.width=j+"px",this.elt.style.height=O+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),z)this.elt.getContext("2d")[L]=z[L]}else this.elt.style.width=j+"px",this.elt.style.height=O+"px",this.elt.width=j,this.elt.height=O;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},f.default.Element.prototype.remove=function(){this instanceof f.default.MediaElement&&(this.stop(),(E=this.elt.srcObject)!==null&&E.getTracks().forEach(function(j){j.stop()}));var x,E=this._pInst._elements.indexOf(this);for(x in E!==-1&&this._pInst._elements.splice(E,1),this._events)this.elt.removeEventListener(x,this._events[x]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},f.default.Element.prototype.drop=function(x,E){var j;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",j=function(O){O.preventDefault()}),this.elt.addEventListener("dragleave",j)),f.default.Element._attachListener("drop",function(O){O.preventDefault(),typeof E=="function"&&E.call(this,O),O=O.dataTransfer.files;var P=!0,L=!1,z=void 0;try{for(var N,V=O[Symbol.iterator]();!(P=(N=V.next()).done);P=!0){var k=N.value;f.default.File._load(k,x)}}catch(H){L=!0,z=H}finally{try{P||V.return==null||V.return()}finally{if(L)throw z}}},this)):console.log("The File APIs are not fully supported in this browser."),this},t=function(x){var E=O;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(x&&x.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),x&&w(E,x);var j=c(O);function O(P,L){u(this,O);var z=l(L=j.call(this,P,L));return L.elt.crossOrigin="anonymous",L._prevTime=0,L._cueIDCounter=0,L._cues=[],L.pixels=[],L._pixelsState=l(L),L._pixelDensity=1,L._modified=!1,L._frameOnCanvas=-1,Object.defineProperty(z,"src",{get:function(){var N=z.elt.children[0].src,V=z.elt.src===window.location.href?"":z.elt.src;return N===window.location.href?V:N},set:function(N){for(var V=0;V<z.elt.children.length;V++)z.elt.removeChild(z.elt.children[V]);var k=document.createElement("source");k.src=N,P.appendChild(k),z.elt.src=N,z.modified=!0}}),z._onended=function(){},z.elt.onended=function(){z._onended(z)},L}return b(O,[{key:"play",value:function(){var P;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(P=this.elt.play())&&P.catch&&P.catch(function(L){L.name==="NotAllowedError"?console.error(L):console.error("Media play method encountered an unexpected error",L)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var P=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(P)},{passive:!0,once:!0})}},{key:"autoplay",value:function(P){var L=this,z=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",P),P&&!z&&(P=function(){return L._setupAutoplayFailDetection()},this.elt.readyState===4?P():this.elt.addEventListener("canplay",P,{passive:!0,once:!0})),this}},{key:"volume",value:function(P){if(P===void 0)return this.elt.volume;this.elt.volume=P}},{key:"speed",value:function(P){if(P===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=P:this.presetPlaybackRate=P}},{key:"time",value:function(P){return P===void 0?this.elt.currentTime:(this.elt.currentTime=P,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var P=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&P&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var P=arguments.length,L=new Array(P),z=0;z<P;z++)L[z]=arguments[z];return f.default.Renderer2D.prototype.loadPixels.apply(this,L)}},{key:"updatePixels",value:function(P,L,z,N){return this.loadedmetadata&&(this._ensureCanvas(),f.default.Renderer2D.prototype.updatePixels.call(this,P,L,z,N)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var P=arguments.length,L=new Array(P),z=0;z<P;z++)L[z]=arguments[z];return f.default.Renderer2D.prototype.get.apply(this,L)}},{key:"_getPixel",value:function(){this.loadPixels();for(var P=arguments.length,L=new Array(P),z=0;z<P;z++)L[z]=arguments[z];return f.default.Renderer2D.prototype._getPixel.apply(this,L)}},{key:"set",value:function(P,L,z){this.loadedmetadata&&(this._ensureCanvas(),f.default.Renderer2D.prototype.set.call(this,P,L,z),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var P=arguments.length,L=new Array(P),z=0;z<P;z++)L[z]=arguments[z];f.default.prototype.copy.apply(this,L)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var P=arguments.length,L=new Array(P),z=0;z<P;z++)L[z]=arguments[z];f.default.Image.prototype.mask.apply(this,L)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(P){this._modified=P}},{key:"onended",value:function(P){return this._onended=P,this}},{key:"connect",value:function(P){var L,z;if(typeof f.default.prototype.getAudioContext=="function")L=f.default.prototype.getAudioContext(),z=f.default.soundOut.input;else try{z=(L=P.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=L.createMediaElementSource(this.elt),this.audioSourceNode.connect(z)),P?P.input?this.audioSourceNode.connect(P.input):this.audioSourceNode.connect(P):this.audioSourceNode.connect(z)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(P,L,z){var N=this._cueIDCounter++;return L=new v(L,P,N,z),this._cues.push(L),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),N}},{key:"removeCue",value:function(P){for(var L=0;L<this._cues.length;L++)this._cues[L].id===P&&(console.log(P),this._cues.splice(L,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var P=this.time(),L=0;L<this._cues.length;L++){var z=this._cues[L].time,N=this._cues[L].val;this._prevTime<z&&z<=P&&this._cues[L].callback(N)}this._prevTime=P}}]),O}(f.default.Element),f.default.MediaElement=t,t=function(){function x(E,j){u(this,x),this.file=E,this._pInst=j,j=E.type.split("/"),this.type=j[0],this.subtype=j[1],this.name=E.name,this.size=E.size,this.data=void 0}return b(x,null,[{key:"_createLoader",value:function(E,j){var O=new FileReader;return O.onload=function(P){var L,z=new f.default.File(E);z.file.type==="application/json"?z.data=JSON.parse(P.target.result):z.file.type==="text/xml"?(L=new DOMParser().parseFromString(P.target.result,"text/xml"),z.data=new f.default.XML(L.documentElement)):z.data=P.target.result,j(z)},O}},{key:"_load",value:function(E,j){var O;/^text\//.test(E.type)||E.type==="application/json"?f.default.File._createLoader(E,j).readAsText(E):/^(video|audio)\//.test(E.type)?((O=new f.default.File(E)).data=URL.createObjectURL(E),j(O)):f.default.File._createLoader(E,j).readAsDataURL(E)}}]),x}(),f.default.File=t,t=f.default,M.default=t},{"../core/main":273,"core-js/modules/es.array.every":153,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.from":157,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.function.name":167,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236,"core-js/modules/web.url":238}],290:[function(t,R,M){function p(x){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(x)}function f(x){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(E){return p(E)}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":p(E)})(x)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var h=(v=t("../core/main"))&&v.__esModule?v:{default:v},b=function(x){if(x&&x.__esModule)return x;if(x===null||f(x)!=="object"&&typeof x!="function")return{default:x};var E=function(){var z;return typeof WeakMap!="function"?null:(z=new WeakMap,z)}();if(E&&E.has(x))return E.get(x);var j,O={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in x){var L;Object.prototype.hasOwnProperty.call(x,j)&&((L=P?Object.getOwnPropertyDescriptor(x,j):null)&&(L.get||L.set)?Object.defineProperty(O,j,L):O[j]=x[j])}return O.default=x,E&&E.set(x,O),O}(t("../core/constants"));h.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",h.default.prototype.accelerationX=0,h.default.prototype.accelerationY=0,h.default.prototype.accelerationZ=0,h.default.prototype.pAccelerationX=0,h.default.prototype.pAccelerationY=0,h.default.prototype.pAccelerationZ=0,h.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},h.default.prototype.rotationX=0,h.default.prototype.rotationY=0,h.default.prototype.rotationZ=0,h.default.prototype.pRotationX=0,h.default.prototype.pRotationY=0;var w=h.default.prototype.pRotationZ=0,c=0,l=0,o="clockwise",u="clockwise",m="clockwise",g=(h.default.prototype.pRotateDirectionX=void 0,h.default.prototype.pRotateDirectionY=void 0,h.default.prototype.pRotateDirectionZ=void 0,h.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},h.default.prototype.turnAxis=void 0,.5),_=30,v=(h.default.prototype.setMoveThreshold=function(x){h.default._validateParameters("setMoveThreshold",arguments),g=x},h.default.prototype.setShakeThreshold=function(x){h.default._validateParameters("setShakeThreshold",arguments),_=x},h.default.prototype._ondeviceorientation=function(x){this._updatePRotations(),this._angleMode===b.radians&&(x.beta=x.beta*(_PI/180),x.gamma=x.gamma*(_PI/180),x.alpha=x.alpha*(_PI/180)),this._setProperty("rotationX",x.beta),this._setProperty("rotationY",x.gamma),this._setProperty("rotationZ",x.alpha),this._handleMotion()},h.default.prototype._ondevicemotion=function(x){this._updatePAccelerations(),this._setProperty("accelerationX",2*x.acceleration.x),this._setProperty("accelerationY",2*x.acceleration.y),this._setProperty("accelerationZ",2*x.acceleration.z),this._handleMotion()},h.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var x,E,j,O,P,L=this._isGlobal?window:this;typeof L.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>g||Math.abs(this.accelerationY-this.pAccelerationY)>g||Math.abs(this.accelerationZ-this.pAccelerationZ)>g)&&L.deviceMoved(),typeof L.deviceTurned=="function"&&(E=this.rotationX+180,x=this.pRotationX+180,j=w+180,0<E-x&&E-x<270||E-x<-270?o="clockwise":(E-x<0||270<E-x)&&(o="counter-clockwise"),o!==this.pRotateDirectionX&&(j=E),90<Math.abs(E-j)&&Math.abs(E-j)<270&&(j=E,this._setProperty("turnAxis","X"),L.deviceTurned()),this.pRotateDirectionX=o,w=j-180,x=this.rotationY+180,E=this.pRotationY+180,j=c+180,0<x-E&&x-E<270||x-E<-270?u="clockwise":(x-E<0||270<x-this.pRotationY)&&(u="counter-clockwise"),u!==this.pRotateDirectionY&&(j=x),90<Math.abs(x-j)&&Math.abs(x-j)<270&&(j=x,this._setProperty("turnAxis","Y"),L.deviceTurned()),this.pRotateDirectionY=u,c=j-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?m="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(m="counter-clockwise"),m!==this.pRotateDirectionZ&&(l=this.rotationZ),90<Math.abs(this.rotationZ-l)&&Math.abs(this.rotationZ-l)<270&&(l=this.rotationZ,this._setProperty("turnAxis","Z"),L.deviceTurned()),this.pRotateDirectionZ=m,this._setProperty("turnAxis",void 0)),typeof L.deviceShaken=="function"&&(this.pAccelerationX!==null&&(O=Math.abs(this.accelerationX-this.pAccelerationX),P=Math.abs(this.accelerationY-this.pAccelerationY)),_<O+P&&L.deviceShaken())},h.default);M.default=v},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],291:[function(t,R,M){Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(t=t("../core/main"))&&t.__esModule?t:{default:t};p.default.prototype.isKeyPressed=!1,p.default.prototype.keyIsPressed=!1,p.default.prototype.key="",p.default.prototype.keyCode=0,p.default.prototype._onkeydown=function(f){var h;this._downKeys[f.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",f.which),this._downKeys[f.which]=!0,this._setProperty("key",f.key||String.fromCharCode(f.which)||f.which),typeof(h=this._isGlobal?window:this).keyPressed!="function"||f.charCode||h.keyPressed(f)===!1&&f.preventDefault())},p.default.prototype._onkeyup=function(f){this._downKeys[f.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",f.key||String.fromCharCode(f.which)||f.which),this._setProperty("keyCode",f.which);var h=this._isGlobal?window:this;typeof h.keyReleased=="function"&&h.keyReleased(f)===!1&&f.preventDefault()},p.default.prototype._onkeypress=function(f){var h;f.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",f.which),this._setProperty("key",f.key||String.fromCharCode(f.which)||f.which),typeof(h=this._isGlobal?window:this).keyTyped=="function"&&h.keyTyped(f)===!1&&f.preventDefault())},p.default.prototype._onblur=function(f){this._downKeys={}},p.default.prototype.keyIsDown=function(f){return p.default._validateParameters("keyIsDown",arguments),this._downKeys[f]||!1},p.default.prototype._areDownKeys=function(){for(var f in this._downKeys)if(this._downKeys.hasOwnProperty(f)&&this._downKeys[f]===!0)return!0;return!1},t=p.default,M.default=t},{"../core/main":273}],292:[function(t,R,M){function p(w){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(w)}function f(w){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(c){return p(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":p(c)})(w)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var h=(h=t("../core/main"))&&h.__esModule?h:{default:h},b=function(w){if(w&&w.__esModule)return w;if(w===null||f(w)!=="object"&&typeof w!="function")return{default:w};var c=function(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,g)}();if(c&&c.has(w))return c.get(w);var l,o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(l in w){var m;Object.prototype.hasOwnProperty.call(w,l)&&((m=u?Object.getOwnPropertyDescriptor(w,l):null)&&(m.get||m.set)?Object.defineProperty(o,l,m):o[l]=w[l])}return o.default=w,c&&c.set(w,o),o}(t("../core/constants"));h.default.prototype.movedX=0,h.default.prototype.movedY=0,h.default.prototype._hasMouseInteracted=!1,h.default.prototype.mouseX=0,h.default.prototype.mouseY=0,h.default.prototype.pmouseX=0,h.default.prototype.pmouseY=0,h.default.prototype.winMouseX=0,h.default.prototype.winMouseY=0,h.default.prototype.pwinMouseX=0,h.default.prototype.pwinMouseY=0,h.default.prototype.mouseButton=0,h.default.prototype.mouseIsPressed=!1,h.default.prototype._updateNextMouseCoords=function(w){var c,l,o,u,m;this._curElement!==null&&(!w.touches||0<w.touches.length)&&(c=this._curElement.elt,l=this.width,o=this.height,(u=w)&&!u.clientX&&(u.touches?u=u.touches[0]:u.changedTouches&&(u=u.changedTouches[0])),m=c.getBoundingClientRect(),l=c.scrollWidth/l||1,c=c.scrollHeight/o||1,o={x:(u.clientX-m.left)/l,y:(u.clientY-m.top)/c,winX:u.clientX,winY:u.clientY,id:u.identifier},this._setProperty("movedX",w.movementX),this._setProperty("movedY",w.movementY),this._setProperty("mouseX",o.x),this._setProperty("mouseY",o.y),this._setProperty("winMouseX",o.winX),this._setProperty("winMouseY",o.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},h.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},h.default.prototype._setMouseButton=function(w){w.button===1?this._setProperty("mouseButton",b.CENTER):w.button===2?this._setProperty("mouseButton",b.RIGHT):this._setProperty("mouseButton",b.LEFT)},h.default.prototype._onmousemove=function(w){var c=this._isGlobal?window:this;this._updateNextMouseCoords(w),this.mouseIsPressed?typeof c.mouseDragged=="function"?c.mouseDragged(w)===!1&&w.preventDefault():typeof c.touchMoved=="function"&&c.touchMoved(w)===!1&&w.preventDefault():typeof c.mouseMoved=="function"&&c.mouseMoved(w)===!1&&w.preventDefault()},h.default.prototype._onmousedown=function(w){var c=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(w),this._updateNextMouseCoords(w),typeof c.mousePressed=="function"?c.mousePressed(w)===!1&&w.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof c.touchStarted=="function"&&c.touchStarted(w)===!1&&w.preventDefault()},h.default.prototype._onmouseup=function(w){var c=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),typeof c.mouseReleased=="function"?c.mouseReleased(w)===!1&&w.preventDefault():typeof c.touchEnded=="function"&&c.touchEnded(w)===!1&&w.preventDefault()},h.default.prototype._ondragend=h.default.prototype._onmouseup,h.default.prototype._ondragover=h.default.prototype._onmousemove,h.default.prototype._onclick=function(w){var c=this._isGlobal?window:this;typeof c.mouseClicked=="function"&&c.mouseClicked(w)===!1&&w.preventDefault()},h.default.prototype._ondblclick=function(w){var c=this._isGlobal?window:this;typeof c.doubleClicked=="function"&&c.doubleClicked(w)===!1&&w.preventDefault()},h.default.prototype._mouseWheelDeltaY=0,h.default.prototype._pmouseWheelDeltaY=0,h.default.prototype._onwheel=function(w){var c=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",w.deltaY),typeof c.mouseWheel=="function"&&(w.delta=w.deltaY,c.mouseWheel(w)===!1&&w.preventDefault())},h.default.prototype.requestPointerLock=function(){var w=this._curElement.elt;return w.requestPointerLock=w.requestPointerLock||w.mozRequestPointerLock,w.requestPointerLock?(w.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},h.default.prototype.exitPointerLock=function(){document.exitPointerLock()},t=h.default,M.default=t},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],293:[function(t,R,M){t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.string.includes"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0,(t=(t=t("../core/main"))&&t.__esModule?t:{default:t}).default.prototype.touches=[],t.default.prototype._updateTouchCoords=function(p){if(this._curElement!==null){for(var f=[],h=0;h<p.touches.length;h++)f[h]=function(b,w,c,l){var o=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,u=b.getBoundingClientRect();return w=b.scrollWidth/w||1,b=b.scrollHeight/c||1,{x:((c=l.touches[o]||l.changedTouches[o]).clientX-u.left)/w,y:(c.clientY-u.top)/b,winX:c.clientX,winY:c.clientY,id:c.identifier}}(this._curElement.elt,this.width,this.height,p,h);this._setProperty("touches",f)}},t.default.prototype._ontouchstart=function(p){var f=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(p),this._updateNextMouseCoords(p),this._updateMouseCoords(),typeof f.touchStarted=="function"?f.touchStarted(p)===!1&&p.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof f.mousePressed=="function"&&f.mousePressed(p)===!1&&p.preventDefault()},t.default.prototype._ontouchmove=function(p){var f=this._isGlobal?window:this;this._updateTouchCoords(p),this._updateNextMouseCoords(p),typeof f.touchMoved=="function"?f.touchMoved(p)===!1&&p.preventDefault():typeof f.mouseDragged=="function"&&f.mouseDragged(p)===!1&&p.preventDefault()},t.default.prototype._ontouchend=function(p){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(p),this._updateNextMouseCoords(p);var f=this._isGlobal?window:this;typeof f.touchEnded=="function"?f.touchEnded(p)===!1&&p.preventDefault():typeof f.mouseReleased=="function"&&f.mouseReleased(p)===!1&&p.preventDefault()},t=t.default,M.default=t},{"../core/main":273,"core-js/modules/es.array.includes":158,"core-js/modules/es.string.includes":189}],294:[function(t,R,M){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p,f,h,b,w={_toPixels:function(c){var l,o;return c instanceof ImageData?c.data:c.getContext("2d")?c.getContext("2d").getImageData(0,0,c.width,c.height).data:c.getContext("webgl")?(o=(l=c.getContext("webgl")).drawingBufferWidth*l.drawingBufferHeight*4,o=new Uint8Array(o),l.readPixels(0,0,c.width,c.height,l.RGBA,l.UNSIGNED_BYTE,o),o):void 0},_getARGB:function(c,l){return c[3+(l*=4)]<<24&4278190080|c[l]<<16&16711680|c[1+l]<<8&65280|255&c[2+l]},_setPixels:function(c,l){for(var o,u=0,m=c.length;u<m;u++)c[0+(o=4*u)]=(16711680&l[u])>>>16,c[1+o]=(65280&l[u])>>>8,c[2+o]=255&l[u],c[3+o]=(4278190080&l[u])>>>24},_toImageData:function(c){return c instanceof ImageData?c:c.getContext("2d").getImageData(0,0,c.width,c.height)},_createImageData:function(c,l){return w._tmpCanvas=document.createElement("canvas"),w._tmpCtx=w._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(c,l)},apply:function(c,l,o){var u=c.getContext("2d"),m=u.getImageData(0,0,c.width,c.height);(l=l(m,o))instanceof ImageData?u.putImageData(l,0,0,0,0,c.width,c.height):u.putImageData(m,0,0,0,0,c.width,c.height)},threshold:function(c,l){for(var o=w._toPixels(c),u=(l===void 0&&(l=.5),Math.floor(255*l)),m=0;m<o.length;m+=4){var g=u<=.2126*o[m]+.7152*o[m+1]+.0722*o[m+2]?255:0;o[m]=o[m+1]=o[m+2]=g}},gray:function(c){for(var l=w._toPixels(c),o=0;o<l.length;o+=4){var u=l[o],m=l[o+1],g=l[o+2];l[o]=l[o+1]=l[o+2]=.2126*u+.7152*m+.0722*g}},opaque:function(c){for(var l=w._toPixels(c),o=0;o<l.length;o+=4)l[o+3]=255;return l},invert:function(c){for(var l=w._toPixels(c),o=0;o<l.length;o+=4)l[o]=255-l[o],l[o+1]=255-l[o+1],l[o+2]=255-l[o+2]},posterize:function(c,l){var o=w._toPixels(c);if(l<2||255<l)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var u=l-1,m=0;m<o.length;m+=4){var g=o[m],_=o[m+1],v=o[m+2];o[m]=255*(g*l>>8)/u,o[m+1]=255*(_*l>>8)/u,o[m+2]=255*(v*l>>8)/u}},dilate:function(c){for(var l,o,u,m,g,_,v,x,E,j=w._toPixels(c),O=0,P=j.length?j.length/4:0,L=new Int32Array(P);O<P;)for(o=(l=O)+c.width;O<o;)m=u=w._getARGB(j,O),(E=O-1)<l&&(E=O),o<=(x=O+1)&&(x=O),(g=O-c.width)<0&&(g=0),P<=(_=O+c.width)&&(_=O),g=w._getARGB(j,g),E=w._getARGB(j,E),_=w._getARGB(j,_),(m=77*(m>>16&255)+151*(m>>8&255)+28*(255&m))<(v=77*(E>>16&255)+151*(E>>8&255)+28*(255&E))&&(u=E,m=v),m<(v=77*((E=w._getARGB(j,x))>>16&255)+151*(E>>8&255)+28*(255&E))&&(u=E,m=v),m<(x=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(u=g,m=x),m<(E=77*(_>>16&255)+151*(_>>8&255)+28*(255&_))&&(u=_,m=E),L[O++]=u;w._setPixels(j,L)},erode:function(c){for(var l,o,u,m,g,_,v,x,E,j=w._toPixels(c),O=0,P=j.length?j.length/4:0,L=new Int32Array(P);O<P;)for(o=(l=O)+c.width;O<o;)m=u=w._getARGB(j,O),(E=O-1)<l&&(E=O),o<=(x=O+1)&&(x=O),(g=O-c.width)<0&&(g=0),P<=(_=O+c.width)&&(_=O),g=w._getARGB(j,g),E=w._getARGB(j,E),_=w._getARGB(j,_),(v=77*(E>>16&255)+151*(E>>8&255)+28*(255&E))<(m=77*(m>>16&255)+151*(m>>8&255)+28*(255&m))&&(u=E,m=v),(v=77*((E=w._getARGB(j,x))>>16&255)+151*(E>>8&255)+28*(255&E))<m&&(u=E,m=v),(x=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<m&&(u=g,m=x),(E=77*(_>>16&255)+151*(_>>8&255)+28*(255&_))<m&&(u=_,m=E),L[O++]=u;w._setPixels(j,L)},blur:function(c,l){for(var o,u,m,g,_,v,x,E,j,O,P=w._toPixels(c),L=c.width,z=c.height,N=L*z,V=new Int32Array(N),k=0;k<N;k++)V[k]=w._getARGB(P,k);var H,G,F,W,Q,J,ee,te,se=new Int32Array(N),ce=new Int32Array(N),q=new Int32Array(N),Z=new Int32Array(N),ie=0,pe=3.5*l|0;if(p!==(pe=pe<1?1:pe<248?pe:248)){f=1+(p=pe)<<1,h=new Int32Array(f),b=new Array(f);for(var ge=0;ge<f;ge++)b[ge]=new Int32Array(256);for(var be=1,le=pe-1;be<pe;be++){h[pe+be]=h[le]=J=le*le,ee=b[pe+be],te=b[le--];for(var re=0;re<256;re++)ee[re]=te[re]=J*re}Q=h[pe]=pe*pe,ee=b[pe];for(var Te=0;Te<256;Te++)ee[Te]=Q*Te}for(G=0;G<z;G++){for(H=0;H<L;H++){if(g=m=u=_=o=0,(v=H-p)<0)O=-v,v=0;else{if(L<=v)break;O=0}for(F=O;F<f&&!(L<=v);F++){var Ce=V[v+ie];_+=(W=b[F])[(-16777216&Ce)>>>24],u+=W[(16711680&Ce)>>16],m+=W[(65280&Ce)>>8],g+=W[255&Ce],o+=h[F],v++}se[x=ie+H]=_/o,ce[x]=u/o,q[x]=m/o,Z[x]=g/o}ie+=L}for(j=(E=-p)*L,G=ie=0;G<z;G++){for(H=0;H<L;H++){if(g=m=u=_=o=0,E<0)O=x=-E,v=H;else{if(z<=E)break;O=0,x=E,v=H+j}for(F=O;F<f&&!(z<=x);F++)_+=(W=b[F])[se[v]],u+=W[ce[v]],m+=W[q[v]],g+=W[Z[v]],o+=h[F],x++,v+=L;V[H+ie]=_/o<<24|u/o<<16|m/o<<8|g/o}ie+=L,j+=L,E++}w._setPixels(P,V)}};M.default=w},{"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.int32-array":215,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232}],295:[function(t,R,M){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=h(t("../core/main")),f=h(t("omggif"));function h(w){return w&&w.__esModule?w:{default:w}}function b(w){return function(c){if(Array.isArray(c)){for(var l=0,o=new Array(c.length);l<c.length;l++)o[l]=c[l];return o}}(w)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(w)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}p.default.prototype.createImage=function(w,c){return p.default._validateParameters("createImage",arguments),new p.default.Image(w,c)},p.default.prototype.saveCanvas=function(){p.default._validateParameters("saveCanvas",arguments);var w,c,l,o,u=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(w=arguments[0],u.shift()):arguments[0]instanceof p.default.Element?(w=arguments[0].elt,u.shift()):w=this._curElement&&this._curElement.elt,1<=u.length&&(c=u[0]),l=(l=2<=u.length?u[1]:l)||p.default.prototype._checkFileExtension(c,l)[1]||"png"){default:o="image/png";break;case"jpeg":case"jpg":o="image/jpeg"}w.toBlob(function(m){p.default.prototype.downloadFile(m,c,l)},o)},p.default.prototype.encodeAndDownloadGif=function(w,c){for(var l=w.gifProperties,o=((ee=l.loopLimit)===1?ee=null:ee===null&&(ee=0),new Uint8Array(w.width*w.height*l.numFrames)),u=[],m={},g=0;g<l.numFrames;g++){for(var _=new Set,v=l.frames[g].image.data,x=v.length,E=new Uint32Array(w.width*w.height),j=0,O=0;j<x;j+=4,O++){var P=v[j+0]<<16|v[j+1]<<8|v[j+2]<<0;_.add(P),E[O]=P}var L=b(_).sort().toString();m[L]===void 0?m[L]={freq:1,frames:[g]}:(m[L].freq+=1,m[L].frames.push(g)),u.push(E)}for(var z=[],N=Object.keys(m).sort(function(q,Z){return m[Z].freq-m[q].freq}),V=N[0].split(",").map(function(q){return parseInt(q)}),k=(z=z.concat(m[V].frames),new Set(V)),H=1;H<N.length;H++){var G=N[H].split(",").map(function(q){return parseInt(q)}).filter(function(q){return!k.has(q)});if(V.length+G.length<=256){for(var F=0;F<G.length;F++)V.push(G[F]),k.add(G[F]);z=z.concat(m[N[H]].frames)}}z=new Set(z);for(var W={},Q=0;Q<V.length;Q++)W[V[Q]]||(W[V[Q]]=Q);for(var J=1;J<V.length;)J<<=1;V.length=J;for(var ee={loop:ee,palette:new Uint32Array(V)},te=new f.default.GifWriter(o,w.width,w.height,ee),se={},ce=0;ce<l.numFrames;ce++)(function(q){var Z=!z.has(q),ie=Z?[]:V,pe=new Uint8Array(w.width*w.height),ge={},be=new Set,le=(u[q].forEach(function(Se,Ue){Z?(ge[Se]===void 0&&(ge[Se]=ie.length,ie.push(Se)),pe[Ue]=ge[Se]):pe[Ue]=W[Se],0<q&&u[q-1][Ue]!==Se&&be.add(Se)}),{});if(0<(re=ie.filter(function(Se){return!be.has(Se)})).length){var re=re[0],Te=(Z?ge:W)[re];if(0<q){for(var Ce=0;Ce<u[q].length;Ce++)u[q-1][Ce]===u[q][Ce]&&(pe[Ce]=Te);le.transparent=Te,se.frameOpts.disposal=1}}if(le.delay=l.frames[q].delay/10,Z){for(var Me=1;Me<ie.length;)Me<<=1;ie.length=Me,le.palette=new Uint32Array(ie)}0<q&&te.addFrame(0,0,w.width,w.height,se.pixelPaletteIndex,se.frameOpts),se={pixelPaletteIndex:pe,frameOpts:le}})(ce);se.frameOpts.disposal=1,te.addFrame(0,0,w.width,w.height,se.pixelPaletteIndex,se.frameOpts),ee=new Blob([o.slice(0,te.end())],{type:"image/gif"}),p.default.prototype.downloadFile(ee,c,"gif")},p.default.prototype.saveFrames=function(w,c,l,o,u){p.default._validateParameters("saveFrames",arguments),l=p.default.prototype.constrain(l=l||3,0,15),l*=1e3,o=p.default.prototype.constrain(o||15,0,22);var m=0,g=p.default.prototype._makeFrame,_=this._curElement.elt,v=[],x=setInterval(function(){v.push(g(w+m,c,_)),m++},1e3/o);setTimeout(function(){if(clearInterval(x),u)u(v);else{var E=!0,j=!1,O=void 0;try{for(var P,L=v[Symbol.iterator]();!(E=(P=L.next()).done);E=!0){var z=P.value;p.default.prototype.downloadFile(z.imageData,z.filename,z.ext)}}catch(N){j=!0,O=N}finally{try{E||L.return==null||L.return()}finally{if(j)throw O}}}v=[]},.01+l)},p.default.prototype._makeFrame=function(w,c,l){var o;if(l=this?this._curElement.elt:l,c)switch(c.toLowerCase()){case"png":o="image/png";break;case"jpeg":case"jpg":o="image/jpeg";break;default:o="image/png"}else c="png",o="image/png";l=(l=l.toDataURL(o)).replace(o,"image/octet-stream");var u={};return u.imageData=l,u.filename=w,u.ext=c,u},t=p.default,M.default=t},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.set":187,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint32-array":231,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236,omggif:246}],296:[function(t,R,M){function p(_){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(_)}function f(_){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(v){return p(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":p(v)})(_)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0,t("regenerator-runtime/runtime");var h=o(t("../core/main")),b=o(t("../core/helpers")),w=function(_){if(_&&_.__esModule)return _;if(_===null||f(_)!=="object"&&typeof _!="function")return{default:_};var v=function(){var P;return typeof WeakMap!="function"?null:(P=new WeakMap,P)}();if(v&&v.has(_))return v.get(_);var x,E={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in _){var O;Object.prototype.hasOwnProperty.call(_,x)&&((O=j?Object.getOwnPropertyDescriptor(_,x):null)&&(O.get||O.set)?Object.defineProperty(E,x,O):E[x]=_[x])}return E.default=_,v&&v.set(_,E),E}(t("../core/constants")),c=o(t("omggif")),l=t("gifenc");function o(_){return _&&_.__esModule?_:{default:_}}function u(_,v,x,E,j,O,P){try{var L=_[O](P),z=L.value}catch(N){return void x(N)}L.done?v(z):Promise.resolve(z).then(E,j)}function m(_,v,x,E,j,O,P,L,z,N,V){var k,H,G,F,W,Q,J,ee,te;return _===w.COVER&&(k=v,G=x,J=O,ee=P,Q=L,te=z,H=N,F=V,J/=W=Math.max(J/H,ee/F),ee/=W,W=Q,Q=te,k===w.CENTER?W+=(H-J)/2:k===w.RIGHT&&(W+=H-J),G===w.CENTER?Q+=(F-ee)/2:G===w.BOTTOM&&(Q+=F-ee),L=(te={x:W,y:Q,w:J,h:ee}).x,z=te.y,N=te.w,V=te.h),_===w.CONTAIN&&(k=v,H=x,G=E,F=j,W=O,Q=P,J=N,ee=V,J/=te=Math.max(J/W,ee/Q),ee/=te,te=G,G=F,k===w.CENTER?te+=(W-J)/2:k===w.RIGHT&&(te+=W-J),H===w.CENTER?G+=(Q-ee)/2:H===w.BOTTOM&&(G+=Q-ee),E=(_={x:te,y:G,w:J,h:ee}).x,j=_.y,O=_.w,P=_.h),{sx:L,sy:z,sw:N,sh:V,dx:E,dy:j,dw:O,dh:P}}function g(_,v){return 0<_&&_<v?_:v}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),h.default.prototype.loadImage=function(_,v,x){h.default._validateParameters("loadImage",arguments);var E=new h.default.Image(1,1,this),j=this,O=new Request(_,{method:"GET",mode:"cors"});return fetch(_,O).then(function(P){var L,z=P.headers.get("content-type");z===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),z&&z.includes("image/gif")?P.arrayBuffer().then(function(N){if(N){N=new Uint8Array(N);for(var V=E,k=v,H=x,G=(function(q){j._decrementPreload()}).bind(j),F=new c.default.GifReader(N),W=(V.width=V.canvas.width=F.width,V.height=V.canvas.height=F.height,[]),Q=F.numFrames(),J=new Uint8ClampedArray(V.width*V.height*4),ee=0;ee<Q;ee++){var te=F.frameInfo(ee),se=V.drawingContext.getImageData(0,0,V.width,V.height),ce=(J=se.data.slice(),function(q,Z){try{Z.decodeAndBlitFrameRGBA(q,J)}catch(ie){h.default._friendlyFileLoadError(8,V.src),typeof H=="function"?H(ie):console.error(ie)}}(ee,F),new ImageData(J,V.width,V.height));(ce=(V.drawingContext.putImageData(ce,0,0),te.delay))===0&&(ce=10),W.push({image:V.drawingContext.getImageData(0,0,V.width,V.height),delay:10*ce}),te.disposal===2?V.drawingContext.clearRect(te.x,te.y,te.width,te.height):te.disposal===3&&V.drawingContext.putImageData(se,0,0,te.x,te.y,te.width,te.height)}(N=F.loopCount())===null?N=1:N===0&&(N=null),V.drawingContext.putImageData(W[0].image,0,0),1<W.length&&(V.gifProperties={displayIndex:0,loopLimit:N,loopCount:0,frames:W,numFrames:Q,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof k=="function"&&k(V),G()}},function(N){typeof x=="function"?(x(N),j._decrementPreload()):console.error(N)}):((L=new Image).onload=function(){E.width=E.canvas.width=L.width,E.height=E.canvas.height=L.height,E.drawingContext.drawImage(L,0,0),E.modified=!0,typeof v=="function"&&v(E),j._decrementPreload()},L.onerror=function(N){h.default._friendlyFileLoadError(0,L.src),typeof x=="function"?(x(N),j._decrementPreload()):console.error(N)},_.indexOf("data:image/")!==0&&(L.crossOrigin="Anonymous"),L.src=_),E.modified=!0}).catch(function(P){h.default._friendlyFileLoadError(0,_),typeof x=="function"?(x(P),j._decrementPreload()):console.error(P)}),E},h.default.prototype.saveGif=function(){_=regeneratorRuntime.mark(function x(E,j){var O,P,L,z,N,V,k,H,G,F,W,Q,J,ee,te,se,ce,q,Z,ie,pe,ge,be,le,re,Te,Ce=arguments;return regeneratorRuntime.wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(O=2<Ce.length&&Ce[2]!==void 0?Ce[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof E!="string")throw TypeError("fileName parameter must be a string");Me.next=3;break;case 3:if(typeof j!="number")throw TypeError("Duration parameter must be a number");Me.next=5;break;case 5:if(P=O&&O.delay||0,L=O&&O.units||"seconds",z=O&&O.silent||!1,N=O&&O.notificationDuration||0,V=O&&O.notificationID||"progressBar",typeof P!="number")throw TypeError("Delay parameter must be a number");Me.next=12;break;case 12:if(L!=="seconds"&&L!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');Me.next=14;break;case 14:if(typeof z!="boolean")throw TypeError("Silent parameter must be a boolean");Me.next=16;break;case 16:if(typeof N!="number")throw TypeError("Notification duration parameter must be a number");Me.next=18;break;case 18:if(typeof V!="string")throw TypeError("Notification ID parameter must be a string");Me.next=20;break;case 20:return this._recording=!0,F=this._targetFrameRate,k=(k=1/(F=F!==1/0&&F!==void 0&&F!==0?F:60)*1e3)<20?20:k,G=(H=L==="seconds"?j*F:j)+(F=L==="seconds"?P*F:P),F=F,this.frameCount=F,W=this._pixelDensity,this.pixelDensity(1),Q=[],document.getElementById(V)!==null&&document.getElementById(V).remove(),z||((J=this.createP("")).id(V),J.style("font-size","16px"),J.style("font-family","Montserrat"),J.style("background-color","#ffffffa0"),J.style("padding","8px"),J.style("border-radius","10px"),J.position(0,0)),this._renderer instanceof h.default.RendererGL&&(te=this.drawingContext,ee=new Uint8Array(te.drawingBufferWidth*te.drawingBufferHeight*4)),this.noLoop(),Me.next=39,Promise.resolve();case 39:if(F<G)return this.redraw(),le=void 0,le=this._renderer instanceof h.default.RendererGL?(ee=new Uint8Array(te.drawingBufferWidth*te.drawingBufferHeight*4),te.readPixels(0,0,te.drawingBufferWidth,te.drawingBufferHeight,te.RGBA,te.UNSIGNED_BYTE,ee),function(Se){for(var Ue=parseInt(height/2),Fe=4*width,Be=new Uint8Array(4*width),st=0;st<Ue;++st){var ve=st*Fe,ue=(height-st-1)*Fe;Be.set(Se.subarray(ve,ve+Fe)),Se.copyWithin(ve,ue,ue+Fe),Se.set(Be,ue)}return Se}(ee)):this.drawingContext.getImageData(0,0,this.width,this.height).data,Q.push(le),F++,z||J.html("Saved frame <b>"+Q.length.toString()+"</b> out of "+H.toString()),Me.next=48,new Promise(function(Se){return setTimeout(Se,0)});Me.next=50;break;case 48:Me.next=39;break;case 50:z||J.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(W),se=(0,l.GIFEncoder)(),ce=function(Se){for(var Ue=new Uint8Array(Se.length*Se[0].length),Fe=0;Fe<Se.length;Fe++)Ue.set(Se[Fe],Fe*Se[0].length);var Be=(0,l.quantize)(Ue,256,{format:"rgba4444",oneBitAlpha:!0});return Be.length===256?Be[Be.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:Be.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),Be}(Q),q={},Z=function(Se){for(var Ue=Se.length/4,Fe=new Uint8Array(Ue),Be=0;Be<Ue;Be++){var st=Se[4*Be]<<24|Se[4*Be+1]<<16|Se[4*Be+2]<<8|Se[4*Be+3];q[st]===void 0&&(q[st]=(0,l.nearestColorIndex)(ce,Se.slice(4*Be,4*(Be+1)))),Fe[Be]=q[st]}return Fe},ie=ce.length-1,pe=[],ge=0;case 60:if(!(ge<Q.length)){Me.next=71;break}if(be=Z(Q[ge]),le=be.slice(),ge===0)se.writeFrame(be,this.width,this.height,{palette:ce,delay:k,dispose:1});else{for(re=0;re<be.length;re++)be[re]===pe[re]&&(be[re]=ie);se.writeFrame(be,this.width,this.height,{delay:k,transparent:!0,transparentIndex:ie,dispose:1})}return pe=le,z||J.html("Rendered frame <b>"+ge.toString()+"</b> out of "+H.toString()),Me.next=68,new Promise(function(Se){return setTimeout(Se,0)});case 68:ge++,Me.next=60;break;case 71:se.finish(),Te=se.bytesView(),Te=new Blob([Te],{type:"image/gif"}),Q=[],this._recording=!1,this.loop(),z||(J.html("Done. Downloading your gif!🌸"),0<N&&setTimeout(function(){return J.remove()},1e3*N)),h.default.prototype.downloadFile(Te,E,"gif");case 80:case"end":return Me.stop()}},x,this)});var _,v=function(){var x=this,E=arguments;return new Promise(function(j,O){var P=_.apply(x,E);function L(N){u(P,j,O,L,z,"next",N)}function z(N){u(P,j,O,L,z,"throw",N)}L(void 0)})};return function(x,E){return v.apply(this,arguments)}}(),h.default.prototype.image=function(_,v,x,E,j,O,P,L,z,N,V,k){h.default._validateParameters("image",arguments);var H=_.width,G=_.height,F=(k=k||w.CENTER,V=V||w.CENTER,_.elt&&_.elt.videoWidth&&!_.canvas&&(H=_.elt.videoWidth,G=_.elt.videoHeight),E||H);j=j||G,O=O||0,P=P||0,L=g(L||H,H),H=g(z||G,G),z=1,_.elt&&!_.canvas&&_.elt.style.width&&(z=_.elt.videoWidth&&!E?_.elt.videoWidth:_.elt.width,z/=parseInt(_.elt.style.width,10)),O*=z,P*=z,H*=z,L*=z,G=m(N,V,k,(G=b.default.modeAdjust(v,x,F,j,this._renderer._imageMode)).x,G.y,G.w,G.h,O,P,L,H),this._renderer.image(_,G.sx,G.sy,G.sw,G.sh,G.dx,G.dy,G.dw,G.dh)},h.default.prototype.tint=function(){for(var _=arguments.length,v=new Array(_),x=0;x<_;x++)v[x]=arguments[x];h.default._validateParameters("tint",v);var E=this.color.apply(this,v);this._renderer._tint=E.levels},h.default.prototype.noTint=function(){this._renderer._tint=null},h.default.prototype._getTintedImageCanvas=h.default.Renderer2D.prototype._getTintedImageCanvas,h.default.prototype.imageMode=function(_){h.default._validateParameters("imageMode",arguments),_!==w.CORNER&&_!==w.CORNERS&&_!==w.CENTER||(this._renderer._imageMode=_)},t=h.default,M.default=t},{"../core/constants":262,"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/helpers":269,"../core/main":273,"core-js/modules/es.array.copy-within":152,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/es.typed-array.uint8-clamped-array":233,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236,gifenc:243,omggif:246,"regenerator-runtime/runtime":250}],297:[function(t,R,M){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=h(t("../core/main")),f=h(t("./filters"));function h(w){return w&&w.__esModule?w:{default:w}}function b(w,c){for(var l=0;l<c.length;l++){var o=c[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(w,o.key,o)}}p.default.Image=function(){function w(o,u){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");this.width=o,this.height=u,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var c,l;return c=w,(l=[{key:"_animateGif",value:function(o){var u,m=this.gifProperties;o=o._lastRealFrameTime,m.lastChangeTime===0&&(m.lastChangeTime=o),m.playing&&(m.timeDisplayed=o-m.lastChangeTime,u=m.frames[m.displayIndex].delay,m.timeDisplayed>=u&&(u=Math.floor(m.timeDisplayed/u),m.timeDisplayed=0,m.lastChangeTime=o,m.displayIndex+=u,m.loopCount=Math.floor(m.displayIndex/m.numFrames),m.loopLimit!==null&&m.loopCount>=m.loopLimit?m.playing=!1:(o=m.displayIndex%m.numFrames,this.drawingContext.putImageData(m.frames[o].image,0,0),m.displayIndex=o,this.setModified(!0))))}},{key:"_setProperty",value:function(o,u){this[o]=u,this.setModified(!0)}},{key:"loadPixels",value:function(){p.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(o,u,m,g){p.default.Renderer2D.prototype.updatePixels.call(this,o,u,m,g),this.setModified(!0)}},{key:"get",value:function(o,u,m,g){return p.default._validateParameters("p5.Image.get",arguments),p.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var o=arguments.length,u=new Array(o),m=0;m<o;m++)u[m]=arguments[m];return p.default.Renderer2D.prototype._getPixel.apply(this,u)}},{key:"set",value:function(o,u,m){p.default.Renderer2D.prototype.set.call(this,o,u,m),this.setModified(!0)}},{key:"resize",value:function(o,u){o===0&&u===0?(o=this.canvas.width,u=this.canvas.height):o===0?o=this.canvas.width*u/this.canvas.height:u===0&&(u=this.canvas.height*o/this.canvas.width),o=Math.floor(o),u=Math.floor(u);var m=document.createElement("canvas");if(m.width=o,m.height=u,this.gifProperties)for(var g=this.gifProperties,_=0;_<g.numFrames;_++){for(var v=this.drawingContext.createImageData(o,u),x=(L=L=P=O=j=void 0,g.frames[_].image),E=v,j=0,O=0;O<E.height;O++)for(var P=0;P<E.width;P++){var L=Math.floor(P*x.width/E.width);L=4*(Math.floor(O*x.height/E.height)*x.width+L),E.data[j++]=x.data[L++],E.data[j++]=x.data[L++],E.data[j++]=x.data[L++],E.data[j++]=x.data[+L]}g.frames[_].image=v}m.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,m.width,m.height),this.canvas.width=this.width=o,this.canvas.height=this.height=u,this.drawingContext.drawImage(m,0,0,o,u,0,0,o,u),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var o=arguments.length,u=new Array(o),m=0;m<o;m++)u[m]=arguments[m];p.default.prototype.copy.apply(this,u)}},{key:"mask",value:function(o){var u=this.drawingContext.globalCompositeOperation,m=1,g=[o=o===void 0?this:o,0,0,(m=o instanceof p.default.Renderer?o._pInst._pixelDensity:m)*o.width,m*o.height,0,0,this.width,this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var _=0;_<this.gifProperties.frames.length;_++)this.drawingContext.putImageData(this.gifProperties.frames[_].image,0,0),this.copy.apply(this,g),this.gifProperties.frames[_].image=this.drawingContext.getImageData(0,0,this.width,this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,g);this.drawingContext.globalCompositeOperation=u,this.setModified(!0)}},{key:"filter",value:function(o,u){f.default.apply(this.canvas,f.default[o],u),this.setModified(!0)}},{key:"blend",value:function(){for(var o=arguments.length,u=new Array(o),m=0;m<o;m++)u[m]=arguments[m];p.default._validateParameters("p5.Image.blend",arguments),p.default.prototype.blend.apply(this,u),this.setModified(!0)}},{key:"setModified",value:function(o){this._modified=o}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(o,u){this.gifProperties?p.default.prototype.encodeAndDownloadGif(this,o):p.default.prototype.saveCanvas(this.canvas,o,u)}},{key:"reset",value:function(){var o;this.gifProperties&&((o=this.gifProperties).playing=!0,o.timeSinceStart=0,o.timeDisplayed=0,o.lastChangeTime=0,o.loopCount=0,o.displayIndex=0,this.drawingContext.putImageData(o.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var o;if(this.gifProperties)return(o=this.gifProperties).displayIndex%o.numFrames}},{key:"setFrame",value:function(o){var u;this.gifProperties&&(o<(u=this.gifProperties).numFrames&&0<=o?(u.timeDisplayed=0,u.lastChangeTime=0,u.displayIndex=o,this.drawingContext.putImageData(u.frames[o].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(o,u){if(this.gifProperties){var m=this.gifProperties;if(u<m.numFrames&&0<=u)m.frames[u].delay=o;else{var g=!0,_=(u=!1,void 0);try{for(var v,x=m.frames[Symbol.iterator]();!(g=(v=x.next()).done);g=!0)v.value.delay=o}catch(E){u=!0,_=E}finally{try{g||x.return==null||x.return()}finally{if(u)throw _}}}}}}])&&b(c.prototype,l),w}(),t=p.default.Image,M.default=t},{"../core/main":273,"./filters":294,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],298:[function(t,R,M){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.filter"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=h(t("../core/main")),f=h(t("./filters"));function h(b){return b&&b.__esModule?b:{default:b}}t("../color/p5.Color"),p.default.prototype.pixels=[],p.default.prototype.blend=function(){for(var b,w=arguments.length,c=new Array(w),l=0;l<w;l++)c[l]=arguments[l];p.default._validateParameters("blend",c),this._renderer?(b=this._renderer).blend.apply(b,c):p.default.Renderer2D.prototype.blend.apply(this,c)},p.default.prototype.copy=function(){for(var b,w,c,l,o,u,m,g,_,v=arguments.length,x=new Array(v),E=0;E<v;E++)x[E]=arguments[E];if(p.default._validateParameters("copy",x),x.length===9)b=x[0],w=x[1],c=x[2],l=x[3],o=x[4],u=x[5],m=x[6],g=x[7],_=x[8];else{if(x.length!==8)throw new Error("Signature not supported");b=this,w=x[0],c=x[1],l=x[2],o=x[3],u=x[4],m=x[5],g=x[6],_=x[7]}p.default.prototype._copyHelper(this,b,w,c,l,o,u,m,g,_)},p.default.prototype._copyHelper=function(b,w,c,l,o,u,m,g,_,v){w.loadPixels();var x=w.canvas.width/w.width,E=0,j=0;w._renderer&&w._renderer.isP3D&&(E=w.width/2,j=w.height/2),b._renderer&&b._renderer.isP3D?p.default.RendererGL.prototype.image.call(b._renderer,w,c+E,l+j,o,u,m,g,_,v):b.drawingContext.drawImage(w.canvas,x*(c+E),x*(l+j),x*o,x*u,m,g,_,v)},p.default.prototype.filter=function(b,w){p.default._validateParameters("filter",arguments),this.canvas!==void 0?f.default.apply(this.canvas,f.default[b],w):f.default.apply(this.elt,f.default[b],w)},p.default.prototype.get=function(b,w,c,l){var o;return p.default._validateParameters("get",arguments),(o=this._renderer).get.apply(o,arguments)},p.default.prototype.loadPixels=function(){for(var b=arguments.length,w=new Array(b),c=0;c<b;c++)w[c]=arguments[c];p.default._validateParameters("loadPixels",w),this._renderer.loadPixels()},p.default.prototype.set=function(b,w,c){this._renderer.set(b,w,c)},p.default.prototype.updatePixels=function(b,w,c,l){p.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(b,w,c,l)},t=p.default,M.default=t},{"../color/p5.Color":260,"../core/main":273,"./filters":294,"core-js/modules/es.array.filter":155}],299:[function(t,R,M){function p(u){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var f=w(t("../core/main")),h=(t("whatwg-fetch"),t("es6-promise/auto"),w(t("fetch-jsonp"))),b=w(t("file-saver"));function w(u){return u&&u.__esModule?u:{default:u}}function c(u){return(c=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(m){return p(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":p(m)})(u)}function l(u){return u.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function o(u,m){m&&m!==!0&&m!=="true"||(m="");var g="";return(u=u||"untitled")&&u.includes(".")&&(g=u.split(".").pop()),m&&g!==m&&(g=m,u="".concat(u,".").concat(g)),[u,g]}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),f.default.prototype.loadJSON=function(){for(var u=arguments.length,m=new Array(u),g=0;g<u;g++)m[g]=arguments[g];f.default._validateParameters("loadJSON",m);for(var _,v,x,E=m[0],j={},O="json",P=1;P<m.length;P++){var L=m[P];typeof L=="string"?L!=="jsonp"&&L!=="json"||(O=L):typeof L=="function"?_?v=L:_=L:c(L)==="object"&&(L.hasOwnProperty("jsonpCallback")||L.hasOwnProperty("jsonpCallbackFunction"))&&(O="jsonp",x=L)}var z=this;return this.httpDo(E,"GET",x,O,function(N){for(var V in N)j[V]=N[V];_!==void 0&&_(N),z._decrementPreload()},function(N){if(f.default._friendlyFileLoadError(5,E),!v)throw N;v(N)}),j},f.default.prototype.loadStrings=function(){for(var u=arguments.length,m=new Array(u),g=0;g<u;g++)m[g]=arguments[g];f.default._validateParameters("loadStrings",m);for(var _,v,x=[],E=1;E<m.length;E++){var j=m[E];typeof j=="function"&&(_===void 0?_=j:v===void 0&&(v=j))}var O=this;return f.default.prototype.httpDo.call(this,m[0],"GET","text",function(P){for(var L=P.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),z=0,N=L.length;z<N;z+=32768)Array.prototype.push.apply(x,L.slice(z,Math.min(z+32768,N)));_!==void 0&&_(x),O._decrementPreload()},function(P){if(f.default._friendlyFileLoadError(3,P),!v)throw P;v(P)}),x},f.default.prototype.loadTable=function(u){var m,g,_,v=!1,x=u.substring(u.lastIndexOf(".")+1,u.length);x==="csv"?_=",":x==="ssv"?_=";":x==="tsv"&&(_="	");for(var E=1;E<arguments.length;E++)typeof arguments[E]=="function"?m===void 0?m=arguments[E]:g===void 0&&(g=arguments[E]):typeof arguments[E]=="string"&&(arguments[E]==="header"&&(v=!0),arguments[E]==="csv"?_=",":arguments[E]==="ssv"?_=";":arguments[E]==="tsv"&&(_="	"));var j=new f.default.Table,O=this;return this.httpDo(u,"GET","table",function(P){for(var L,z,N={},V=[],k=0,H=null,G=function(){N.currentState=0,N.token=""},F=function(){H.push(N.token),G()},W=function(){N.currentState=4,V.push(H),H=null};;){if((L=P[k++])==null){if(N.escaped)throw new Error("Unclosed quote in file.");if(H){F(),W();break}}if(H===null&&(N.escaped=!1,H=[],G()),N.currentState===0){if(L==='"'){N.escaped=!0,N.currentState=1;continue}N.currentState=1}if(N.currentState===1&&N.escaped)if(L==='"')P[k]==='"'?(N.token+='"',k++):(N.escaped=!1,N.currentState=2);else{if(L==="\r")continue;N.token+=L}else L==="\r"?(P[k]===`
`&&k++,F(),W()):L===`
`?(F(),W()):L===_?F():N.currentState===1&&(N.token+=L)}if(v)j.columns=V.shift();else for(var Q=0;Q<V[0].length;Q++)j.columns[Q]="null";for(var J=0;J<V.length;J++)(V[J].length!==1||V[J][0]!=="undefined"&&V[J][0]!=="")&&((z=new f.default.TableRow).arr=V[J],z.obj=function(ee,te){if((te=te||[])===void 0)for(var se=0;se<ee.length;se++)te[se.toString()]=se;return Object.fromEntries(te.map(function(ce,q){return[ce,ee[q]]}))}(V[J],j.columns),j.addRow(z));typeof m=="function"&&m(j),O._decrementPreload()},function(P){f.default._friendlyFileLoadError(2,u),g?g(P):console.error(P)}),j},f.default.prototype.loadXML=function(){for(var u=arguments.length,m=new Array(u),g=0;g<u;g++)m[g]=arguments[g];for(var _,v,x=new f.default.XML,E=1;E<m.length;E++){var j=m[E];typeof j=="function"&&(_===void 0?_=j:v===void 0&&(v=j))}var O=this;return this.httpDo(m[0],"GET","xml",function(P){for(var L in P)x[L]=P[L];_!==void 0&&_(x),O._decrementPreload()},function(P){if(f.default._friendlyFileLoadError(1,P),!v)throw P;v(P)}),x},f.default.prototype.loadBytes=function(u,m,g){var _={},v=this;return this.httpDo(u,"GET","arrayBuffer",function(x){_.bytes=new Uint8Array(x),typeof m=="function"&&m(_),v._decrementPreload()},function(x){if(f.default._friendlyFileLoadError(6,u),!g)throw x;g(x)}),_},f.default.prototype.httpGet=function(){f.default._validateParameters("httpGet",arguments);var u=Array.prototype.slice.call(arguments);return u.splice(1,0,"GET"),f.default.prototype.httpDo.apply(this,u)},f.default.prototype.httpPost=function(){f.default._validateParameters("httpPost",arguments);var u=Array.prototype.slice.call(arguments);return u.splice(1,0,"POST"),f.default.prototype.httpDo.apply(this,u)},f.default.prototype.httpDo=function(){for(var u,m,g,_={},v=0,x="text/plain",E=arguments.length-1;0<E&&typeof(E<0||arguments.length<=E?void 0:arguments[E])=="function";E--)v++;var j=arguments.length<=0?void 0:arguments[0];if((V=arguments.length-v)==2&&typeof j=="string"&&c(arguments.length<=1?void 0:arguments[1])==="object")k=new Request(j,arguments.length<=1?void 0:arguments[1]),m=arguments.length<=2?void 0:arguments[2],g=arguments.length<=3?void 0:arguments[3];else{for(var O,P="GET",L=1;L<arguments.length;L++){var z=L<0||arguments.length<=L?void 0:arguments[L];if(typeof z=="string")z==="GET"||z==="POST"||z==="PUT"||z==="DELETE"?P=z:z==="json"||z==="jsonp"||z==="binary"||z==="arrayBuffer"||z==="xml"||z==="text"||z==="table"?u=z:O=z;else if(typeof z=="number")O=z.toString();else if(c(z)==="object")if(z.hasOwnProperty("jsonpCallback")||z.hasOwnProperty("jsonpCallbackFunction"))for(var N in z)_[N]=z[N];else x=z instanceof f.default.XML?(O=z.serialize(),"application/xml"):(O=JSON.stringify(z),"application/json");else typeof z=="function"&&(m?g=z:m=z)}var V=P==="GET"?new Headers:new Headers({"Content-Type":x}),k=new Request(j,{method:P,mode:"cors",body:O,headers:V})}return(V=(V=(u=u||(j.includes("json")?"json":j.includes("xml")?"xml":"text"))==="jsonp"?(0,h.default)(j,_):fetch(k)).then(function(H){if(!H.ok)throw(G=new Error(H.body)).status=H.status,G.ok=!1,G;var G=0;switch((G=u!=="jsonp"?H.headers.get("content-length"):G)&&64e6<G&&f.default._friendlyFileLoadError(7,j),u){case"json":case"jsonp":return H.json();case"binary":return H.blob();case"arrayBuffer":return H.arrayBuffer();case"xml":return H.text().then(function(F){return F=new DOMParser().parseFromString(F,"text/xml"),new f.default.XML(F.documentElement)});default:return H.text()}})).then(m||function(){}),V.catch(g||console.error),V},window.URL=window.URL||window.webkitURL,f.default.prototype._pWriters=[],f.default.prototype.createWriter=function(u,m){var g,_;for(_ in f.default.prototype._pWriters)if(f.default.prototype._pWriters[_].name===u)return g=new f.default.PrintWriter(u+this.millis(),m),f.default.prototype._pWriters.push(g),g;return g=new f.default.PrintWriter(u,m),f.default.prototype._pWriters.push(g),g},f.default.PrintWriter=function(u,m){var g=this;this.name=u,this.content="",this.write=function(_){this.content+=_},this.print=function(_){this.content+="".concat(_,`
`)},this.clear=function(){this.content=""},this.close=function(){var _,v=[];for(_ in v.push(this.content),f.default.prototype.writeFile(v,u,m),f.default.prototype._pWriters)f.default.prototype._pWriters[_].name===this.name&&f.default.prototype._pWriters.splice(_,1);g.clear(),g={}}},f.default.prototype.save=function(u,m,g){var _=arguments,v=(this._curElement||this).elt;if(_.length===0)f.default.prototype.saveCanvas(v);else if(_[0]instanceof f.default.Renderer||_[0]instanceof f.default.Graphics)f.default.prototype.saveCanvas(_[0].elt,_[1],_[2]);else if(_.length===1&&typeof _[0]=="string")f.default.prototype.saveCanvas(v,_[0]);else switch(o(_[1],_[2])[1]){case"json":return void f.default.prototype.saveJSON(_[0],_[1],_[2]);case"txt":return void f.default.prototype.saveStrings(_[0],_[1],_[2]);default:_[0]instanceof Array?f.default.prototype.saveStrings(_[0],_[1],_[2]):_[0]instanceof f.default.Table?f.default.prototype.saveTable(_[0],_[1],_[2]):_[0]instanceof f.default.Image?f.default.prototype.saveCanvas(_[0].canvas,_[1]):_[0]instanceof f.default.SoundFile&&f.default.prototype.saveSound(_[0],_[1],_[2],_[3])}},f.default.prototype.saveJSON=function(u,m,g){f.default._validateParameters("saveJSON",arguments),g=g?JSON.stringify(u):JSON.stringify(u,void 0,2),this.saveStrings(g.split(`
`),m,"json")},f.default.prototype.saveJSONObject=f.default.prototype.saveJSON,f.default.prototype.saveJSONArray=f.default.prototype.saveJSON,f.default.prototype.saveStrings=function(u,m,g,_){f.default._validateParameters("saveStrings",arguments);for(var v=this.createWriter(m,g||"txt"),x=0;x<u.length;x++)_?v.write(u[x]+`\r
`):v.write(u[x]+`
`);v.close(),v.clear()},f.default.prototype.saveTable=function(u,m,g){f.default._validateParameters("saveTable",arguments),_=g===void 0?m.substring(m.lastIndexOf(".")+1,m.length):g;var _,v=this.createWriter(m,_),x=u.columns,E=_==="tsv"?"	":",";if(_!=="html"){if(x[0]!=="0"){for(var j=0;j<x.length;j++)j<x.length-1?v.write(x[j]+E):v.write(x[j]);v.write(`
`)}for(var O=0;O<u.rows.length;O++){var P=void 0;for(P=0;P<u.rows[O].arr.length;P++)P<u.rows[O].arr.length-1?_==="csv"&&String(u.rows[O].arr[P]).includes(",")?v.write('"'+u.rows[O].arr[P]+'"'+E):v.write(u.rows[O].arr[P]+E):_==="csv"&&String(u.rows[O].arr[P]).includes(",")?v.write('"'+u.rows[O].arr[P]+'"'):v.write(u.rows[O].arr[P]);v.write(`
`)}}else{if(v.print("<html>"),v.print("<head>"),v.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),v.print("</head>"),v.print("<body>"),v.print("  <table>"),x[0]!=="0"){v.print("    <tr>");for(var L=0;L<x.length;L++){var z=l(x[L]);v.print("      <td>".concat(z)),v.print("      </td>")}v.print("    </tr>")}for(var N=0;N<u.rows.length;N++){v.print("    <tr>");for(var V=0;V<u.columns.length;V++){var k=l(u.rows[N].getString(V));v.print("      <td>".concat(k)),v.print("      </td>")}v.print("    </tr>")}v.print("  </table>"),v.print("</body>"),v.print("</html>")}v.close(),v.clear()},f.default.prototype.writeFile=function(u,m,g){var _="application/octet-stream";f.default.prototype._isSafari()&&(_="text/plain"),u=new Blob(u,{type:_}),f.default.prototype.downloadFile(u,m,g)},f.default.prototype.downloadFile=function(u,m,g){var _;g=(m=o(m,g))[0],u instanceof Blob?b.default.saveAs(u,g):((_=document.createElement("a")).href=u,_.download=g,_.onclick=function(v){document.body.removeChild(v.target),v.stopPropagation()},_.style.display="none",document.body.appendChild(_),f.default.prototype._isSafari()&&(u=(u=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(m[1],'"'),alert(u)),_.click())},f.default.prototype._checkFileExtension=o,f.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")},t=f.default,M.default=t},{"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.last-index-of":162,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.function.name":167,"core-js/modules/es.object.from-entries":175,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/web.dom-collections.iterator":236,"core-js/modules/web.url":238,"es6-promise/auto":239,"fetch-jsonp":241,"file-saver":242,"whatwg-fetch":251}],300:[function(t,R,M){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(h,b){for(var w=0;w<b.length;w++){var c=b[w];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,c.key,c)}}p.default.Table=function(){function h(c){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=[]}var b,w;return b=h,(w=[{key:"addRow",value:function(c){if((c=c||new p.default.TableRow).arr===void 0||c.obj===void 0)throw new Error("invalid TableRow: ".concat(c));return(c.table=this).rows.push(c),c}},{key:"removeRow",value:function(c){this.rows[c].table=null,c=this.rows.splice(c+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(c)}},{key:"getRow",value:function(c){return this.rows[c]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(c,l){if(typeof l=="string"){for(var o=0;o<this.rows.length;o++)if(this.rows[o].obj[l]===c)return this.rows[o]}else for(var u=0;u<this.rows.length;u++)if(this.rows[u].arr[l]===c)return this.rows[u];return null}},{key:"findRows",value:function(c,l){var o=[];if(typeof l=="string")for(var u=0;u<this.rows.length;u++)this.rows[u].obj[l]===c&&o.push(this.rows[u]);else for(var m=0;m<this.rows.length;m++)this.rows[m].arr[l]===c&&o.push(this.rows[m]);return o}},{key:"matchRow",value:function(c,l){if(typeof l=="number"){for(var o=0;o<this.rows.length;o++)if(this.rows[o].arr[l].match(c))return this.rows[o]}else for(var u=0;u<this.rows.length;u++)if(this.rows[u].obj[l].match(c))return this.rows[u];return null}},{key:"matchRows",value:function(c,l){var o=[];if(typeof l=="number")for(var u=0;u<this.rows.length;u++)this.rows[u].arr[l].match(c)&&o.push(this.rows[u]);else for(var m=0;m<this.rows.length;m++)this.rows[m].obj[l].match(c)&&o.push(this.rows[m]);return o}},{key:"getColumn",value:function(c){var l=[];if(typeof c=="string")for(var o=0;o<this.rows.length;o++)l.push(this.rows[o].obj[c]);else for(var u=0;u<this.rows.length;u++)l.push(this.rows[u].arr[c]);return l}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(c){this.columns.push(c||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(c,l){for(var o=[],u=0;u<c.length;u++)o.push(c.charAt(u).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var m=new RegExp(o.join("|"),"g");if(l===void 0)for(var g=0;g<this.columns.length;g++)for(var _=0;_<this.rows.length;_++){var v=(v=this.rows[_].arr[g]).replace(m,"");this.rows[_].arr[g]=v,this.rows[_].obj[this.columns[g]]=v}else if(typeof l=="string")for(var x=0;x<this.rows.length;x++){var E=(E=this.rows[x].obj[l]).replace(m,""),j=(this.rows[x].obj[l]=E,this.columns.indexOf(l));this.rows[x].arr[j]=E}else for(var O=0;O<this.rows.length;O++){var P=(P=this.rows[O].arr[l]).replace(m,"");this.rows[O].arr[l]=P,this.rows[O].obj[this.columns[l]]=P}}},{key:"trim",value:function(c){var l=new RegExp(" ","g");if(c===void 0)for(var o=0;o<this.columns.length;o++)for(var u=0;u<this.rows.length;u++){var m=(m=this.rows[u].arr[o]).replace(l,"");this.rows[u].arr[o]=m,this.rows[u].obj[this.columns[o]]=m}else if(typeof c=="string")for(var g=0;g<this.rows.length;g++){var _=(_=this.rows[g].obj[c]).replace(l,""),v=(this.rows[g].obj[c]=_,this.columns.indexOf(c));this.rows[g].arr[v]=_}else for(var x=0;x<this.rows.length;x++){var E=(E=this.rows[x].arr[c]).replace(l,"");this.rows[x].arr[c]=E,this.rows[x].obj[this.columns[c]]=E}}},{key:"removeColumn",value:function(c){typeof c=="string"?o=this.columns.indexOf(l=c):l=this.columns[o=c];var l,o;c=this.columns.splice(o+1,this.columns.length),this.columns.pop(),this.columns=this.columns.concat(c);for(var u=0;u<this.rows.length;u++){var m=this.rows[u].arr,g=m.splice(o+1,m.length);m.pop(),this.rows[u].arr=m.concat(g),delete this.rows[u].obj[l]}}},{key:"set",value:function(c,l,o){this.rows[c].set(l,o)}},{key:"setNum",value:function(c,l,o){this.rows[c].setNum(l,o)}},{key:"setString",value:function(c,l,o){this.rows[c].setString(l,o)}},{key:"get",value:function(c,l){return this.rows[c].get(l)}},{key:"getNum",value:function(c,l){return this.rows[c].getNum(l)}},{key:"getString",value:function(c,l){return this.rows[c].getString(l)}},{key:"getObject",value:function(c){for(var l,o={},u=0;u<this.rows.length;u++)if(l=this.rows[u].obj,typeof c=="string"){if(!(0<=this.columns.indexOf(c)))throw new Error('This table has no column named "'.concat(c,'"'));o[l[c]]=l}else o[u]=this.rows[u].obj;return o}},{key:"getArray",value:function(){for(var c=[],l=0;l<this.rows.length;l++)c.push(this.rows[l].arr);return c}}])&&f(b.prototype,w),h}(),t=p.default,M.default=t},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.join":161,"core-js/modules/es.array.splice":166,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.match":191,"core-js/modules/es.string.replace":194}],301:[function(t,R,M){function p(f,h){for(var b=0;b<h.length;b++){var w=h[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(f,w.key,w)}}t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0,(t=(t=t("../core/main"))&&t.__esModule?t:{default:t}).default.TableRow=function(){function f(w,c){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");var l=[];w&&(l=w.split(c=c||",")),this.arr=l,this.obj=Object.fromEntries(l.entries()),this.table=null}var h,b;return h=f,(b=[{key:"set",value:function(w,c){if(typeof w=="string"){var l=this.table.columns.indexOf(w);if(!(0<=l))throw new Error('This table has no column named "'.concat(w,'"'));this.obj[w]=c,this.arr[l]=c}else{if(!(w<this.table.columns.length))throw new Error("Column #".concat(w," is out of the range of this table"));this.arr[w]=c,l=this.table.columns[w],this.obj[l]=c}}},{key:"setNum",value:function(w,c){c=parseFloat(c),this.set(w,c)}},{key:"setString",value:function(w,c){c=c.toString(),this.set(w,c)}},{key:"get",value:function(w){return(typeof w=="string"?this.obj:this.arr)[w]}},{key:"getNum",value:function(w){var c=parseFloat(typeof w=="string"?this.obj[w]:this.arr[w]);if(c.toString()==="NaN")throw"Error: ".concat(this.obj[w]," is NaN (Not a Number)");return c}},{key:"getString",value:function(w){return(typeof w=="string"?this.obj:this.arr)[w].toString()}}])&&p(h.prototype,b),f}(),t=t.default,M.default=t},{"../core/main":273,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.from-entries":175,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.split":196,"core-js/modules/web.dom-collections.iterator":236}],302:[function(t,R,M){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(h,b){for(var w=0;w<b.length;w++){var c=b[w];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,c.key,c)}}p.default.XML=function(){function h(c){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");c?this.DOM=c:(c=document.implementation.createDocument(null,"doc"),this.DOM=c.createElement("root"))}var b,w;return b=h,(w=[{key:"getParent",value:function(){return new p.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(c){var l=this.DOM.innerHTML,o=this.DOM.attributes,u=document.implementation.createDocument(null,"default").createElement(c);u.innerHTML=l;for(var m=0;m<o.length;m++)u.setAttribute(o[m].nodeName,o.nodeValue);this.DOM=u}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var c=[],l=0;l<this.DOM.childNodes.length;l++)c.push(this.DOM.childNodes[l].nodeName);return c}},{key:"getChildren",value:function(c){return function(l){for(var o=[],u=0;u<l.length;u++)o.push(new p.default.XML(l[u]));return o}(c?this.DOM.getElementsByTagName(c):this.DOM.children)}},{key:"getChild",value:function(c){if(typeof c!="string")return new p.default.XML(this.DOM.children[c]);var l=!0,o=!1,u=void 0;try{for(var m,g=this.DOM.children[Symbol.iterator]();!(l=(m=g.next()).done);l=!0){var _=m.value;if(_.tagName===c)return new p.default.XML(_)}}catch(v){o=!0,u=v}finally{try{l||g.return==null||g.return()}finally{if(o)throw u}}}},{key:"addChild",value:function(c){c instanceof p.default.XML&&this.DOM.appendChild(c.DOM)}},{key:"removeChild",value:function(c){var l=-1;if(typeof c=="string"){for(var o=0;o<this.DOM.children.length;o++)if(this.DOM.children[o].tagName===c){l=o;break}}else l=c;l!==-1&&this.DOM.removeChild(this.DOM.children[l])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var c=[],l=!0,o=!1,u=void 0;try{for(var m,g=this.DOM.attributes[Symbol.iterator]();!(l=(m=g.next()).done);l=!0){var _=m.value;c.push(_.nodeName)}}catch(v){o=!0,u=v}finally{try{l||g.return==null||g.return()}finally{if(o)throw u}}return c}},{key:"hasAttribute",value:function(c){var l={},o=!0,u=!1,m=void 0;try{for(var g,_=this.DOM.attributes[Symbol.iterator]();!(o=(g=_.next()).done);o=!0){var v=g.value;l[v.nodeName]=v.nodeValue}}catch(x){u=!0,m=x}finally{try{o||_.return==null||_.return()}finally{if(u)throw m}}return!!l[c]}},{key:"getNum",value:function(c,l){var o={},u=!0,m=!1,g=void 0;try{for(var _,v=this.DOM.attributes[Symbol.iterator]();!(u=(_=v.next()).done);u=!0){var x=_.value;o[x.nodeName]=x.nodeValue}}catch(E){m=!0,g=E}finally{try{u||v.return==null||v.return()}finally{if(m)throw g}}return Number(o[c])||l||0}},{key:"getString",value:function(c,l){var o={},u=!0,m=!1,g=void 0;try{for(var _,v=this.DOM.attributes[Symbol.iterator]();!(u=(_=v.next()).done);u=!0){var x=_.value;o[x.nodeName]=x.nodeValue}}catch(E){m=!0,g=E}finally{try{u||v.return==null||v.return()}finally{if(m)throw g}}return o[c]?String(o[c]):l||null}},{key:"setAttribute",value:function(c,l){this.DOM.setAttribute(c,l)}},{key:"getContent",value:function(c){var l=this.DOM.textContent;return(l=l.replace(/\s\s+/g,","))||c||null}},{key:"setContent",value:function(c){this.DOM.children.length||(this.DOM.textContent=c)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&f(b.prototype,w),h}(),t=p.default,M.default=t},{"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],303:[function(t,R,M){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(){if(typeof Math.hypot=="function")return Math.hypot.apply(null,arguments);for(var h=arguments.length,b=[],w=0,c=0;c<h;c++){var l=arguments[c];if((l=+l)==1/0||l===-1/0)return 1/0;w<(l=Math.abs(l))&&(w=l),b[c]=l}w===0&&(w=1);for(var o=0,u=0,m=0;m<h;m++){var g,_=o+(g=(g=b[m]/w)*g-u);u=_-o-g,o=_}return Math.sqrt(o)*w}p.default.prototype.abs=Math.abs,p.default.prototype.ceil=Math.ceil,p.default.prototype.constrain=function(h,b,w){return p.default._validateParameters("constrain",arguments),Math.max(Math.min(h,w),b)},p.default.prototype.dist=function(){for(var h=arguments.length,b=new Array(h),w=0;w<h;w++)b[w]=arguments[w];return p.default._validateParameters("dist",b),b.length===4?f(b[2]-b[0],b[3]-b[1]):b.length===6?f(b[3]-b[0],b[4]-b[1],b[5]-b[2]):void 0},p.default.prototype.exp=Math.exp,p.default.prototype.floor=Math.floor,p.default.prototype.lerp=function(h,b,w){return p.default._validateParameters("lerp",arguments),w*(b-h)+h},p.default.prototype.log=Math.log,p.default.prototype.mag=function(h,b){return p.default._validateParameters("mag",arguments),f(h,b)},p.default.prototype.map=function(h,b,w,c,l,o){return p.default._validateParameters("map",arguments),h=(h-b)/(w-b)*(l-c)+c,o?c<l?this.constrain(h,c,l):this.constrain(h,l,c):h},p.default.prototype.max=function(){for(var h=function(l){var o=-1/0,u=!0,m=!1,g=void 0;try{for(var _,v=l[Symbol.iterator]();!(u=(_=v.next()).done);u=!0){var x=_.value;o=o<x?x:o}}catch(E){m=!0,g=E}finally{try{u||v.return==null||v.return()}finally{if(m)throw g}}return o},b=arguments.length,w=new Array(b),c=0;c<b;c++)w[c]=arguments[c];return w[0]instanceof Array?h(w[0]):h(w)},p.default.prototype.min=function(){for(var h=function(l){var o=1/0,u=!0,m=!1,g=void 0;try{for(var _,v=l[Symbol.iterator]();!(u=(_=v.next()).done);u=!0){var x=_.value;o=x<o?x:o}}catch(E){m=!0,g=E}finally{try{u||v.return==null||v.return()}finally{if(m)throw g}}return o},b=arguments.length,w=new Array(b),c=0;c<b;c++)w[c]=arguments[c];return w[0]instanceof Array?h(w[0]):h(w)},p.default.prototype.norm=function(h,b,w){return p.default._validateParameters("norm",arguments),this.map(h,b,w,0,1)},p.default.prototype.pow=Math.pow,p.default.prototype.round=function(h,b){return b?(b=Math.pow(10,b),Math.round(h*b)/b):Math.round(h)},p.default.prototype.sq=function(h){return h*h},p.default.prototype.sqrt=Math.sqrt,p.default.prototype.fract=function(h){p.default._validateParameters("fract",arguments);var b,w=0;return h=Number(h),isNaN(h)||Math.abs(h)===1/0?h:(h<0&&(h=-h,w=1),String(h).includes(".")&&!String(h).includes("e")?(b=String(h),b=+("0"+b.slice(b.indexOf("."))),Math.abs(w-b)):h<1?Math.abs(w-h):0)},t=p.default,M.default=t},{"../core/main":273,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.math.hypot":169,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],304:[function(t,R,M){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(b,w,c){return(f=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(l,o,u){var m=[null];return m.push.apply(m,o),o=new(Function.bind.apply(l,m)),u&&h(o,u.prototype),o}).apply(null,arguments)}function h(b,w){return(h=Object.setPrototypeOf||function(c,l){return c.__proto__=l,c})(b,w)}p.default.prototype.createVector=function(b,w,c){return this instanceof p.default?f(p.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new p.default.Vector(b,w,c)},t=p.default,M.default=t},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.to-string":186}],305:[function(t,R,M){function p(c){return .5*(1-Math.cos(c*Math.PI))}Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};var f,h=4095,b=4,w=.5;t.default.prototype.noise=function(c){var l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(f==null){f=new Array(4096);for(var u=0;u<4096;u++)f[u]=Math.random()}c<0&&(c=-c),l<0&&(l=-l),o<0&&(o=-o);for(var m,g,_=Math.floor(c),v=Math.floor(l),x=Math.floor(o),E=c-_,j=l-v,O=o-x,P=0,L=.5,z=0;z<b;z++){var N=_+(v<<4)+(x<<8),V=p(E),k=p(j),H=f[N&h];H+=V*(f[N+1&h]-H),m=f[N+16&h],H+=k*((m+=V*(f[N+16+1&h]-m))-H),m=f[(N+=256)&h],m+=V*(f[N+1&h]-m),g=f[N+16&h],m+=k*((g+=V*(f[N+16+1&h]-g))-m),P+=(H+=p(O)*(m-H))*L,L*=w,_<<=1,v<<=1,x<<=1,1<=(E*=2)&&(_++,E--),1<=(j*=2)&&(v++,j--),1<=(O*=2)&&(x++,O--)}return P},t.default.prototype.noiseDetail=function(c,l){0<c&&(b=c),0<l&&(w=l)},t.default.prototype.noiseSeed=function(c){o=4294967296;var l,o,u=function(){return(l=(1664525*l+1013904223)%o)/o};(function(g){l=(g??Math.random()*o)>>>0})(c),f=new Array(4096);for(var m=0;m<4096;m++)f[m]=u()},t=t.default,M.default=t},{"../core/main":273}],306:[function(t,R,M){function p(u){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(u)}function f(u){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(m){return p(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":p(m)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.string.sub"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var h=(o=t("../core/main"))&&o.__esModule?o:{default:o},b=function(u){if(u&&u.__esModule)return u;if(u===null||f(u)!=="object"&&typeof u!="function")return{default:u};var m=function(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,E)}();if(m&&m.has(u))return m.get(u);var g,_={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in u){var x;Object.prototype.hasOwnProperty.call(u,g)&&((x=v?Object.getOwnPropertyDescriptor(u,g):null)&&(x.get||x.set)?Object.defineProperty(_,g,x):_[g]=u[g])}return _.default=u,m&&m.set(u,_),_}(t("../core/constants"));function w(u,m){for(var g=0;g<m.length;g++){var _=m[g];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(u,_.key,_)}}function c(u,m){return u!==0&&(this.x=this.x%u),m!==0&&(this.y=this.y%m),this}function l(u,m,g){return u!==0&&(this.x=this.x%u),m!==0&&(this.y=this.y%m),g!==0&&(this.z=this.z%g),this}h.default.Vector=function(){function u(){var v=u;if(!((j=this)instanceof v))throw new TypeError("Cannot call a class as a function");var x,E,j=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],x=(arguments.length<=2?void 0:arguments[2])||0,E=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(x=(arguments.length<=0?void 0:arguments[0])||0,E=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=x,this.y=E,this.z=j}var m,g,_;return m=u,_=[{key:"fromAngle",value:function(v,x){return new h.default.Vector((x=x===void 0?1:x)*Math.cos(v),x*Math.sin(v),0)}},{key:"fromAngles",value:function(v,x,E){E===void 0&&(E=1);var j=Math.cos(x),O=(x=Math.sin(x),Math.cos(v));return v=Math.sin(v),new h.default.Vector(E*v*x,-E*O,E*v*j)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*b.TWO_PI)}},{key:"random3D",value:function(){var v=Math.random()*b.TWO_PI,x=2*Math.random()-1,E=(j=Math.sqrt(1-x*x))*Math.cos(v),j=j*Math.sin(v);return new h.default.Vector(E,j,x)}},{key:"copy",value:function(v){return v.copy(v)}},{key:"add",value:function(v,x,E){return E?E.set(v):(E=v.copy(),arguments.length===3&&h.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),E.add(x),E}},{key:"rem",value:function(v,x){if(v instanceof h.default.Vector&&x instanceof h.default.Vector)return(v=v.copy()).rem(x),v}},{key:"sub",value:function(v,x,E){return E?E.set(v):(E=v.copy(),arguments.length===3&&h.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),E.sub(x),E}},{key:"mult",value:function(v,x,E){return E?E.set(v):(E=v.copy(),arguments.length===3&&h.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),E.mult(x),E}},{key:"rotate",value:function(v,x,E){return arguments.length===2?E=v.copy():(E instanceof h.default.Vector||h.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),E.set(v)),E.rotate(x),E}},{key:"div",value:function(v,x,E){return E?E.set(v):(E=v.copy(),arguments.length===3&&h.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),E.div(x),E}},{key:"dot",value:function(v,x){return v.dot(x)}},{key:"cross",value:function(v,x){return v.cross(x)}},{key:"dist",value:function(v,x){return v.dist(x)}},{key:"lerp",value:function(v,x,E,j){return j?j.set(v):(j=v.copy(),arguments.length===4&&h.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),j.lerp(x,E),j}},{key:"slerp",value:function(v,x,E,j){return j?j.set(v):(j=v.copy(),arguments.length===4&&h.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),j.slerp(x,E),j}},{key:"mag",value:function(v){return v.mag()}},{key:"magSq",value:function(v){return v.magSq()}},{key:"normalize",value:function(v,x){return arguments.length<2?x=v.copy():(x instanceof h.default.Vector||h.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),x.set(v)),x.normalize()}},{key:"limit",value:function(v,x,E){return arguments.length<3?E=v.copy():(E instanceof h.default.Vector||h.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),E.set(v)),E.limit(x)}},{key:"setMag",value:function(v,x,E){return arguments.length<3?E=v.copy():(E instanceof h.default.Vector||h.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),E.set(v)),E.setMag(x)}},{key:"heading",value:function(v){return v.heading()}},{key:"angleBetween",value:function(v,x){return v.angleBetween(x)}},{key:"reflect",value:function(v,x,E){return arguments.length<3?E=v.copy():(E instanceof h.default.Vector||h.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),E.set(v)),E.reflect(x)}},{key:"array",value:function(v){return v.array()}},{key:"equals",value:function(v,x){var E;return v instanceof h.default.Vector?E=v:v instanceof Array?E=new h.default.Vector().set(v):h.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),E.equals(x)}}],(g=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(v,x,E){return v instanceof h.default.Vector?(this.x=v.x||0,this.y=v.y||0,this.z=v.z||0):Array.isArray(v)?(this.x=v[0]||0,this.y=v[1]||0,this.z=v[2]||0):(this.x=v||0,this.y=x||0,this.z=E||0),this}},{key:"copy",value:function(){return this.isPInst?new h.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new h.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(v,x,E){return v instanceof h.default.Vector?(this.x+=v.x||0,this.y+=v.y||0,this.z+=v.z||0):Array.isArray(v)?(this.x+=v[0]||0,this.y+=v[1]||0,this.z+=v[2]||0):(this.x+=v||0,this.y+=x||0,this.z+=E||0),this}},{key:"rem",value:function(v,x,E){var j;if(v instanceof h.default.Vector){if([v.x,v.y,v.z].every(Number.isFinite))return O=parseFloat(v.x),P=parseFloat(v.y),j=parseFloat(v.z),l.call(this,O,P,j)}else if(Array.isArray(v)){if(v.every(function(L){return Number.isFinite(L)}))return v.length===2?c.call(this,v[0],v[1]):v.length===3?l.call(this,v[0],v[1],v[2]):void 0}else if(arguments.length===1){if(Number.isFinite(v)&&v!==0)return this.x=this.x%v,this.y=this.y%v,this.z=this.z%v,this}else if(arguments.length===2){var O=Array.prototype.slice.call(arguments);if(O.every(function(L){return Number.isFinite(L)})&&O.length===2)return c.call(this,O[0],O[1])}else if(arguments.length===3){var P=Array.prototype.slice.call(arguments);if(P.every(function(L){return Number.isFinite(L)})&&P.length===3)return l.call(this,P[0],P[1],P[2])}}},{key:"sub",value:function(v,x,E){return v instanceof h.default.Vector?(this.x-=v.x||0,this.y-=v.y||0,this.z-=v.z||0):Array.isArray(v)?(this.x-=v[0]||0,this.y-=v[1]||0,this.z-=v[2]||0):(this.x-=v||0,this.y-=x||0,this.z-=E||0),this}},{key:"mult",value:function(v,x,E){var j;return v instanceof h.default.Vector?Number.isFinite(v.x)&&Number.isFinite(v.y)&&Number.isFinite(v.z)&&typeof v.x=="number"&&typeof v.y=="number"&&typeof v.z=="number"?(this.x*=v.x,this.y*=v.y,this.z*=v.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(v)?v.every(function(O){return Number.isFinite(O)})&&v.every(function(O){return typeof O=="number"})?v.length===1?(this.x*=v[0],this.y*=v[0],this.z*=v[0]):v.length===2?(this.x*=v[0],this.y*=v[1]):v.length===3&&(this.x*=v[0],this.y*=v[1],this.z*=v[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(j=Array.prototype.slice.call(arguments)).every(function(O){return Number.isFinite(O)})&&j.every(function(O){return typeof O=="number"})?(arguments.length===1&&(this.x*=v,this.y*=v,this.z*=v),arguments.length===2&&(this.x*=v,this.y*=x),arguments.length===3&&(this.x*=v,this.y*=x,this.z*=E)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(v,x,E){if(v instanceof h.default.Vector)if(Number.isFinite(v.x)&&Number.isFinite(v.y)&&Number.isFinite(v.z)&&typeof v.x=="number"&&typeof v.y=="number"&&typeof v.z=="number"){var j=v.z===0&&this.z===0;if(v.x===0||v.y===0||!j&&v.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=v.x,this.y/=v.y,j||(this.z/=v.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(v))if(v.every(function(O){return Number.isFinite(O)})&&v.every(function(O){return typeof O=="number"})){if(v.some(function(O){return O===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;v.length===1?(this.x/=v[0],this.y/=v[0],this.z/=v[0]):v.length===2?(this.x/=v[0],this.y/=v[1]):v.length===3&&(this.x/=v[0],this.y/=v[1],this.z/=v[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if((j=Array.prototype.slice.call(arguments)).every(function(O){return Number.isFinite(O)})&&j.every(function(O){return typeof O=="number"})){if(j.some(function(O){return O===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;arguments.length===1&&(this.x/=v,this.y/=v,this.z/=v),arguments.length===2&&(this.x/=v,this.y/=x),arguments.length===3&&(this.x/=v,this.y/=x,this.z/=E)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var v=this.x,x=this.y,E=this.z;return v*v+x*x+E*E}},{key:"dot",value:function(v,x,E){return v instanceof h.default.Vector?this.dot(v.x,v.y,v.z):this.x*(v||0)+this.y*(x||0)+this.z*(E||0)}},{key:"cross",value:function(v){var x=this.y*v.z-this.z*v.y,E=this.z*v.x-this.x*v.z;return v=this.x*v.y-this.y*v.x,this.isPInst?new h.default.Vector(this._fromRadians,this._toRadians,x,E,v):new h.default.Vector(x,E,v)}},{key:"dist",value:function(v){return v.copy().sub(this).mag()}},{key:"normalize",value:function(){var v=this.mag();return v!==0&&this.mult(1/v),this}},{key:"limit",value:function(v){var x=this.magSq();return v*v<x&&this.div(Math.sqrt(x)).mult(v),this}},{key:"setMag",value:function(v){return this.normalize().mult(v)}},{key:"heading",value:function(){var v=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(v):v}},{key:"setHeading",value:function(v){this.isPInst&&(v=this._toRadians(v));var x=this.mag();return this.x=x*Math.cos(v),this.y=x*Math.sin(v),this}},{key:"rotate",value:function(v){v=this.heading()+v;var x=(this.isPInst&&(v=this._toRadians(v)),this.mag());return this.x=Math.cos(v)*x,this.y=Math.sin(v)*x,this}},{key:"angleBetween",value:function(v){var x;return this.magSq()*v.magSq()==0?NaN:(x=this.cross(v),v=Math.atan2(x.mag(),this.dot(v))*Math.sign(x.z||1),this.isPInst?this._fromRadians(v):v)}},{key:"lerp",value:function(v,x,E,j){return v instanceof h.default.Vector?this.lerp(v.x,v.y,v.z,x):(this.x+=(v-this.x)*j||0,this.y+=(x-this.y)*j||0,this.z+=(E-this.z)*j||0,this)}},{key:"slerp",value:function(v,x){if(x!==0){if(x===1)return this.set(v);var E=this.mag(),j=v.mag();if(E*j==0)this.mult(1-x).add(v.x*x,v.y*x,v.z*x);else{var O=this.cross(v),P=O.mag(),L=Math.atan2(P,this.dot(v));if(0<P)O.x/=P,O.y/=P,O.z/=P;else{if(L<.5*Math.PI)return this.mult(1-x).add(v.x*x,v.y*x,v.z*x),this;this.z===0&&v.z===0?O.set(0,0,1):this.x!==0?O.set(this.y,-this.x,0).normalize():O.set(1,0,0)}P=O.cross(this),O=(v=1-x+x*j/E)*Math.cos(x*L),j=v*Math.sin(x*L),this.x=this.x*O+P.x*j,this.y=this.y*O+P.y*j,this.z=this.z*O+P.z*j}}return this}},{key:"reflect",value:function(v){return v.normalize(),this.sub(v.mult(2*this.dot(v)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(v,x,E){var j,O;return v=v instanceof h.default.Vector?(j=v.x||0,O=v.y||0,v.z||0):Array.isArray(v)?(j=v[0]||0,O=v[1]||0,v[2]||0):(j=v||0,O=x||0,E||0),this.x===j&&this.y===O&&this.z===v}}])&&w(m.prototype,g),_&&w(m,_),u}();var o=h.default.Vector;M.default=o},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.every":153,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.some":165,"core-js/modules/es.math.sign":170,"core-js/modules/es.number.constructor":171,"core-js/modules/es.number.is-finite":172,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.sub":198,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],307:[function(t,R,M){Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(t=t("../core/main"))&&t.__esModule?t:{default:t},f="_lcg_random_state",h=4294967296,b=0;p.default.prototype._lcg=function(w){return this[w]=(1664525*this[w]+1013904223)%h,this[w]/h},p.default.prototype._lcgSetSeed=function(w,c){this[w]=(c??Math.random()*h)>>>0},p.default.prototype.randomSeed=function(w){this._lcgSetSeed(f,w),this._gaussian_previous=!1},p.default.prototype.random=function(w,c){var l,o;return p.default._validateParameters("random",arguments),l=this[f]!=null?this._lcg(f):Math.random(),w===void 0?l:c===void 0?w instanceof Array?w[Math.floor(l*w.length)]:l*w:(c<w&&(o=w,w=c,c=o),l*(c-w)+w)},p.default.prototype.randomGaussian=function(w){var c,l,o,u,m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)c=b,this._gaussian_previous=!1;else{for(;1<=(u=(l=this.random(2)-1)*l+(o=this.random(2)-1)*o););c=l*(u=Math.sqrt(-2*Math.log(u)/u)),b=o*u,this._gaussian_previous=!0}return c*m+(w||0)},t=p.default,M.default=t},{"../core/main":273}],308:[function(t,R,M){function p(c){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}function f(c){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(l){return p(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":p(l)})(c)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var h=(w=t("../core/main"))&&w.__esModule?w:{default:w},b=function(c){if(c&&c.__esModule)return c;if(c===null||f(c)!=="object"&&typeof c!="function")return{default:c};var l=function(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,_)}();if(l&&l.has(c))return l.get(c);var o,u={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in c){var g;Object.prototype.hasOwnProperty.call(c,o)&&((g=m?Object.getOwnPropertyDescriptor(c,o):null)&&(g.get||g.set)?Object.defineProperty(u,o,g):u[o]=c[o])}return u.default=c,l&&l.set(c,u),u}(t("../core/constants"));h.default.prototype._angleMode=b.RADIANS,h.default.prototype.acos=function(c){return this._fromRadians(Math.acos(c))},h.default.prototype.asin=function(c){return this._fromRadians(Math.asin(c))},h.default.prototype.atan=function(c){return this._fromRadians(Math.atan(c))},h.default.prototype.atan2=function(c,l){return this._fromRadians(Math.atan2(c,l))},h.default.prototype.cos=function(c){return Math.cos(this._toRadians(c))},h.default.prototype.sin=function(c){return Math.sin(this._toRadians(c))},h.default.prototype.tan=function(c){return Math.tan(this._toRadians(c))},h.default.prototype.degrees=function(c){return c*b.RAD_TO_DEG},h.default.prototype.radians=function(c){return c*b.DEG_TO_RAD},h.default.prototype.angleMode=function(c){if(h.default._validateParameters("angleMode",arguments),c===void 0)return this._angleMode;c!==b.DEGREES&&c!==b.RADIANS||(this._angleMode=c)},h.default.prototype._toRadians=function(c){return this._angleMode===b.DEGREES?c*b.DEG_TO_RAD:c},h.default.prototype._toDegrees=function(c){return this._angleMode===b.RADIANS?c*b.RAD_TO_DEG:c},h.default.prototype._fromRadians=function(c){return this._angleMode===b.DEGREES?c*b.RAD_TO_DEG:c};var w=h.default;M.default=w},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],309:[function(t,R,M){Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(t=t("../core/main"))&&t.__esModule?t:{default:t};p.default.prototype.textAlign=function(f,h){var b;return p.default._validateParameters("textAlign",arguments),(b=this._renderer).textAlign.apply(b,arguments)},p.default.prototype.textLeading=function(f){var h;return p.default._validateParameters("textLeading",arguments),(h=this._renderer).textLeading.apply(h,arguments)},p.default.prototype.textSize=function(f){var h;return p.default._validateParameters("textSize",arguments),(h=this._renderer).textSize.apply(h,arguments)},p.default.prototype.textStyle=function(f){var h;return p.default._validateParameters("textStyle",arguments),(h=this._renderer).textStyle.apply(h,arguments)},p.default.prototype.textWidth=function(){for(var f,h=arguments.length,b=new Array(h),w=0;w<h;w++)b[w]=arguments[w];return b[0]+="",p.default._validateParameters("textWidth",b),b[0].length===0?0:(f=this._renderer).textWidth.apply(f,b)},p.default.prototype.textAscent=function(){for(var f=arguments.length,h=new Array(f),b=0;b<f;b++)h[b]=arguments[b];return p.default._validateParameters("textAscent",h),this._renderer.textAscent()},p.default.prototype.textDescent=function(){for(var f=arguments.length,h=new Array(f),b=0;b<f;b++)h[b]=arguments[b];return p.default._validateParameters("textDescent",h),this._renderer.textDescent()},p.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},p.default.prototype.textWrap=function(f){if(f!=="WORD"&&f!=="CHAR")throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(f)},t=p.default,M.default=t},{"../core/main":273}],310:[function(t,R,M){function p(u){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(u)}function f(u){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(m){return p(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":p(m)})(u)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.split"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var h=(o=t("../core/main"))&&o.__esModule?o:{default:o},b=l(t("../core/constants")),w=l(t("opentype.js"));function c(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,c=function(){return u},u)}function l(u){if(u&&u.__esModule)return u;if(u===null||f(u)!=="object"&&typeof u!="function")return{default:u};var m=c();if(m&&m.has(u))return m.get(u);var g,_,v={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in u)Object.prototype.hasOwnProperty.call(u,g)&&((_=x?Object.getOwnPropertyDescriptor(u,g):null)&&(_.get||_.set)?Object.defineProperty(v,g,_):v[g]=u[g]);return v.default=u,m&&m.set(u,v),v}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),h.default.prototype.loadFont=function(u,m,g){h.default._validateParameters("loadFont",arguments);var _=new h.default.Font(this),v=this;return w.load(u,function(x,E){if(x)return h.default._friendlyFileLoadError(4,u),g!==void 0?g(x):void console.error(x,u);_.font=E,m!==void 0&&m(_),v._decrementPreload();var j=(E=(x=u.split("\\").pop().split("/").pop()).lastIndexOf("."))<1?null:x.slice(E+1);["ttf","otf","woff","woff2"].includes(j)&&(j=x.slice(0,E!==-1?E:0),(x=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(j,`;
src: url(`).concat(u,`);
}
`))),document.head.appendChild(x))}),_},h.default.prototype.text=function(u,m,g,_,v){var x;return h.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(x=this._renderer).text.apply(x,arguments):this},h.default.prototype.textFont=function(u,m){if(h.default._validateParameters("textFont",arguments),arguments.length){if(u)return this._renderer._setProperty("_textFont",u),m&&(this._renderer._setProperty("_textSize",m),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",m*b._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var o=h.default;M.default=o},{"../core/constants":262,"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.last-index-of":162,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236,"opentype.js":247}],311:[function(t,R,M){function p(P){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(P)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var f=(f=t("../core/main"))&&f.__esModule?f:{default:f},h=function(P){if(P&&P.__esModule)return P;if(P===null||b(P)!=="object"&&typeof P!="function")return{default:P};var L=function(){var H;return typeof WeakMap!="function"?null:(H=new WeakMap,H)}();if(L&&L.has(P))return L.get(P);var z,N={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(z in P){var k;Object.prototype.hasOwnProperty.call(P,z)&&((k=V?Object.getOwnPropertyDescriptor(P,z):null)&&(k.get||k.set)?Object.defineProperty(N,z,k):N[z]=P[z])}return N.default=P,L&&L.set(P,N),N}(t("../core/constants"));function b(P){return(b=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(L){return p(L)}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":p(L)})(P)}function w(P,L){for(var z=0;z<L.length;z++){var N=L[z];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(P,N.key,N)}}function c(P,L){var z=P.length;return P[L<0?L%z+z:L%z]}function l(P,L,z,N){var V,k,H;return N?(l.tmpPoint1===void 0&&(l.tmpPoint1=[],l.tmpPoint2=[]),k=l.tmpPoint1,H=l.tmpPoint2,k.x=L.x-P.x,k.y=L.y-P.y,H.x=z.x-L.x,H.y=z.y-L.y,V=k.x*H.x+k.y*H.y,k=Math.sqrt(k.x*k.x+k.y*k.y),H=Math.sqrt(H.x*H.x+H.y*H.y),Math.acos(V/(k*H))<N):(L[0]-P[0])*(z[1]-P[1])-(z[0]-P[0])*(L[1]-P[1])==0}function o(P,L,z,N,V,k,H,G,F){var W=1-F,Q=(J=Math.pow(W,3))*P+3*(ee=Math.pow(W,2))*F*z+3*W*F*F*V+(te=(ce=F*F)*F)*H,J=J*L+3*ee*F*N+3*W*F*F*k+te*G,ee=P+2*F*(z-P)+ce*(V-2*z+P),te=L+2*F*(N-L)+ce*(k-2*N+L),se=z+2*F*(V-z)+ce*(H-2*V+z),ce=N+2*F*(k-N)+ce*(G-2*k+N);return P=W*P+F*z,z=W*L+F*N,L=W*V+F*H,N=W*k+F*G,V=90-180*Math.atan2(ee-se,te-ce)/Math.PI,(se<ee||te<ce)&&(V+=180),{x:Q,y:J,m:{x:ee,y:te},n:{x:se,y:ce},start:{x:P,y:z},end:{x:L,y:N},alpha:V}}function u(P,L,z,N,V,k,H,G,F){return F==null?j(P,L,z,N,V,k,H,G):o(P,L,z,N,V,k,H,G,function(W,Q,J,ee,te,se,ce,q,Z){if(!(Z<0||j(W,Q,J,ee,te,se,ce,q)<Z)){var ie,pe=.5,ge=1-pe;for(ie=j(W,Q,J,ee,te,se,ce,q,ge);.01<Math.abs(ie-Z);)ie=j(W,Q,J,ee,te,se,ce,q,ge+=(ie<Z?1:-1)*(pe/=2));return ge}}(P,L,z,N,V,k,H,G,F))}function m(P,L,z){for(var N,V,k,H,G,F=0,W=0,Q=(P=function(J,ee){function te(Se,Ue,Fe){var Be,st;if(!Se)return["C",Ue.x,Ue.y,Ue.x,Ue.y,Ue.x,Ue.y];switch(Se[0]in{T:1,Q:1}||(Ue.qx=Ue.qy=null),Se[0]){case"M":Ue.X=Se[1],Ue.Y=Se[2];break;case"A":Se=["C"].concat(_.apply(0,[Ue.x,Ue.y].concat(Se.slice(1))));break;case"S":st=Fe==="C"||Fe==="S"?(Be=2*Ue.x-Ue.bx,2*Ue.y-Ue.by):(Be=Ue.x,Ue.y),Se=["C",Be,st].concat(Se.slice(1));break;case"T":Fe==="Q"||Fe==="T"?(Ue.qx=2*Ue.x-Ue.qx,Ue.qy=2*Ue.y-Ue.qy):(Ue.qx=Ue.x,Ue.qy=Ue.y),Se=["C"].concat(E(Ue.x,Ue.y,Ue.qx,Ue.qy,Se[1],Se[2]));break;case"Q":Ue.qx=Se[1],Ue.qy=Se[2],Se=["C"].concat(E(Ue.x,Ue.y,Se[1],Se[2],Se[3],Se[4]));break;case"L":Se=["C"].concat(x(Ue.x,Ue.y,Se[1],Se[2]));break;case"H":Se=["C"].concat(x(Ue.x,Ue.y,Se[1],Ue.y));break;case"V":Se=["C"].concat(x(Ue.x,Ue.y,Ue.x,Se[1]));break;case"Z":Se=["C"].concat(x(Ue.x,Ue.y,Ue.X,Ue.Y))}return Se}function se(Se,Ue){if(7<Se[Ue].length){Se[Ue].shift();for(var Fe=Se[Ue];Fe.length;)be[Ue]="A",Se.splice(Ue++,0,["C"].concat(Fe.splice(0,6)));Se.splice(Ue,1),q=Math.max(Z.length,0)}}function ce(Se,Ue,Fe,Be,st){Se&&Ue&&Se[st][0]==="M"&&Ue[st][0]!=="M"&&(Ue.splice(st,0,["M",Be.x,Be.y]),Fe.bx=0,Fe.by=0,Fe.x=Se[st][1],Fe.y=Se[st][2],q=Math.max(Z.length,0))}var q,Z=g(J),ie=ee,pe={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ge={x:0,y:0,bx:0,by:0},be=[],le="",re="";q=Math.max(Z.length,0);for(var Te=0;Te<q;Te++){(le=Z[Te]?Z[Te][0]:le)!=="C"&&(be[Te]=le,Te&&(re=be[Te-1])),Z[Te]=te(Z[Te],pe,re),be[Te]!=="A"&&le==="C"&&(be[Te]="C"),se(Z,Te),ce(Z,ie,pe,ge,Te),ce(ie,Z,ge,pe,Te);var Ce=Z[Te],Me=Ce.length;pe.x=Ce[Me-2],pe.y=Ce[Me-1],pe.bx=parseFloat(Ce[Me-4])||pe.x,pe.by=parseFloat(Ce[Me-3])||pe.y,ge.bx=ie,ge.by=ie,ge.x=ie,ge.y=ie}return ie?[Z,ie]:Z}(P)).length;W<Q;W++){if((k=P[W])[0]==="M")N=+k[1],V=+k[2];else{if(L<F+(H=u(N,V,k[1],k[2],k[3],k[4],k[5],k[6]))&&!z)return{x:(G=u(N,V,k[1],k[2],k[3],k[4],k[5],k[6],L-F)).x,y:G.y,alpha:G.alpha};F+=H,N=+k[5],V=+k[6]}k.shift()}return(G=z?F:o(N,V,k[0],k[1],k[2],k[3],k[4],k[5],1)).alpha?{x:G.x,y:G.y,alpha:G.alpha}:G}function g(P){var L=[],z=0,N=0,V=0,k=0,H=0;if(P){P[0][0]==="M"&&(V=z=+P[0][1],k=N=+P[0][2],H++,L[0]=["M",z,N]);for(var G,F,W=P.length===3&&P[0][0]==="M"&&P[1][0].toUpperCase()==="R"&&P[2][0].toUpperCase()==="Z",Q=H,J=P.length;Q<J;Q++){if(L.push(G=[]),(F=P[Q])[0]!==String.prototype.toUpperCase.call(F[0]))switch(G[0]=String.prototype.toUpperCase.call(F[0]),G[0]){case"A":G[1]=F[1],G[2]=F[2],G[3]=F[3],G[4]=F[4],G[5]=F[5],G[6]=+(F[6]+z),G[7]=+(F[7]+N);break;case"V":G[1]=+F[1]+N;break;case"H":G[1]=+F[1]+z;break;case"R":for(var ee,te=2,se=(ee=[z,N].concat(F.slice(1))).length;te<se;te++)ee[te]=+ee[te]+z,ee[++te]=+ee[te]+N;L.pop(),L=L.concat(v(ee,W));break;case"M":V=+F[1]+z,k=+F[2]+N;break;default:for(var ce=1,q=F.length;ce<q;ce++)G[ce]=+F[ce]+(ce%2?z:N)}else if(F[0]==="R")ee=[z,N].concat(F.slice(1)),L.pop(),L=L.concat(v(ee,W)),G=["R"].concat(F.slice(-2));else for(var Z=0,ie=F.length;Z<ie;Z++)G[Z]=F[Z];switch(G[0]){case"Z":z=V,N=k;break;case"H":z=G[1];break;case"V":N=G[1];break;case"M":V=G[G.length-2],k=G[G.length-1];break;default:z=G[G.length-2],N=G[G.length-1]}}}return L}function _(P,L,z,N,V,k,H,G,F,W){function Q(Me,Se,Ue){return{x:Me*Math.cos(Ue)-Se*Math.sin(Ue),y:Me*Math.sin(Ue)+Se*Math.cos(Ue)}}var J,ee=120*(Z=Math.PI)/180,te=Z/180*(+V||0),se=[],ce=(W?(le=W[0],J=W[1],ge=W[2],be=W[3]):(P=(ie=Q(P,L,-te)).x,L=ie.y,1<(ce=(q=(P-(G=(ie=Q(G,F,-te)).x))/2)*q/(z*z)+(ie=(L-(F=ie.y))/2)*ie/(N*N))&&(z*=ce=Math.sqrt(ce),N*=ce),ce=z*z,pe=N*N,ge=(k=(k===H?-1:1)*Math.sqrt(Math.abs((ce*pe-ce*ie*ie-pe*q*q)/(ce*ie*ie+pe*q*q))))*z*ie/N+(P+G)/2,be=k*-N*q/z+(L+F)/2,le=Math.asin(((L-be)/N).toFixed(9)),J=Math.asin(((F-be)/N).toFixed(9)),(le=P<ge?Z-le:le)<0&&(le=2*Z+le),(J=G<ge?Z-J:J)<0&&(J=2*Z+J),H&&J<le&&(le-=2*Z),!H&&le<J&&(J-=2*Z)),J-le),q=(Math.abs(ce)>ee&&(pe=J,ie=G,k=F,J=le+ee*(H&&le<J?1:-1),se=_(G=ge+z*Math.cos(J),F=be+N*Math.sin(J),z,N,V,0,H,ie,k,[J,pe,ge,be])),ce=J-le,Math.cos(le)),Z=Math.sin(le),ie=(ee=Math.cos(J),V=Math.sin(J),4/3*z*(H=Math.tan(ce/4))),pe=[P,L],ge=[P+ie*Z,L-(k=4/3*N*H)*q],be=[G+ie*V,F-k*ee],le=[G,F];if(ge[0]=2*pe[0]-ge[0],ge[1]=2*pe[1]-ge[1],W)return[ge,be,le].concat(se);for(var re=[],Te=0,Ce=(se=[ge,be,le].concat(se).join().split(",")).length;Te<Ce;Te++)re[Te]=Te%2?Q(se[Te-1],se[Te],te).y:Q(se[Te],se[Te+1],te).x;return re}function v(P,L){for(var z=[],N=0,V=P.length;N<V-2*!L;N+=2){var k=[{x:+P[N-2],y:+P[N-1]},{x:+P[N],y:+P[N+1]},{x:+P[N+2],y:+P[N+3]},{x:+P[N+4],y:+P[N+5]}];L?N?V-4===N?k[3]={x:+P[0],y:+P[1]}:V-2===N&&(k[2]={x:+P[0],y:+P[1]},k[3]={x:+P[2],y:+P[3]}):k[0]={x:+P[V-2],y:+P[V-1]}:V-4===N?k[3]=k[2]:N||(k[0]={x:+P[N],y:+P[N+1]}),z.push(["C",(-k[0].x+6*k[1].x+k[2].x)/6,(-k[0].y+6*k[1].y+k[2].y)/6,(k[1].x+6*k[2].x-k[3].x)/6,(k[1].y+6*k[2].y-k[3].y)/6,k[2].x,k[2].y])}return z}function x(P,L,z,N){return[P,L,z,N,z,N]}function E(P,L,z,N,V,k){return[1/3*P+2/3*z,1/3*L+2/3*N,1/3*V+2/3*z,1/3*k+2/3*N,V,k]}function j(P,L,z,N,V,k,H,G,F){for(var W=(F=1<(F=F??1)?1:F<0?0:F)/2,Q=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],J=0,ee=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],te=0;te<12;te++){var se=O(ce=W*Q[te]+W,P,z,V,H),ce=O(ce,L,N,k,G);J+=ee[te]*Math.sqrt(se*se+ce*ce)}return W*J}function O(P,L,z,N,V){return P*(P*(-3*L+9*z-9*N+3*V)+6*L-12*z+6*N)-3*L+3*z}f.default.Font=function(){function P(N){if(!(this instanceof P))throw new TypeError("Cannot call a class as a function");this.parent=N,this.cache={},this.font=void 0}var L,z;return L=P,(z=[{key:"textBounds",value:function(N){var V=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,H=3<arguments.length?arguments[3]:void 0,G=4<arguments.length?arguments[4]:void 0,F=G&&G.renderer&&G.renderer._pInst||this.parent;if((pe=F._renderer.drawingContext).textAlign||h.LEFT,pe.textBaseline||h.BASELINE,H=H||F._renderer._textSize,!ge){for(var W=[],Q=[],J=[],ee=(J[0]=[],[]),te=this._scale(H),se=F._renderer.textLeading(),ce=0,q=(this.font.forEachGlyph(N,V,k,H,G,function(be,le,re,Te){var Ce=be.getMetrics();be.index===0||be.index===10?J[ce+=1]=[]:(J[ce].push(le+Ce.xMin*te),J[ce].push(le+Ce.xMax*te),ee.push(re+ce*se+-Ce.yMin*te),ee.push(re+ce*se+-Ce.yMax*te))}),0<J[ce].length&&(W[ce]=Math.min.apply(null,J[ce]),Q[ce]=Math.max.apply(null,J[ce])),0),Z=0;Z<=ce;Z++){W[Z]=Math.min.apply(null,J[Z]),Q[Z]=Math.max.apply(null,J[Z]);var ie=Q[Z]-W[Z];q<ie&&(q=ie)}var pe,ge={x:pe=Math.min.apply(null,W),y:k=Math.min.apply(null,ee),h:Math.max.apply(null,ee)-k,w:q,advance:pe-V};H=this._handleAlignment(F._renderer,N,ge.x,ge.y,ge.w+ge.advance),ge.x=H.x,ge.y=H.y}return ge}},{key:"textToPoints",value:function(N,V,k,H,G){var F=0,W=[],Q=this._getGlyphs(N);H=H||this.parent._renderer._textSize;for(var J,ee=0;ee<Q.length;ee++){if(!(Q[J=ee].name&&Q[J].name==="space"||N.length===Q.length&&N[J]===" "))for(var te=function(Z){for(var ie,pe=[],ge=0;ge<Z.length;ge++)Z[ge].type==="M"&&(ie&&pe.push(ie),ie=[]),ie.push(function(be){var le=[be.type];return be.type==="M"||be.type==="L"?le.push(be.x,be.y):be.type==="C"?le.push(be.x1,be.y1,be.x2,be.y2,be.x,be.y):be.type==="Q"&&le.push(be.x1,be.y1,be.x,be.y),le}(Z[ge]));return pe.push(ie),pe}(Q[ee].getPath(V,k,H).commands),se=0;se<te.length;se++)for(var ce=function(Z,ie){ie=function(re,Te){if(b(re)!=="object")re=Te;else for(var Ce in Te)re[Ce]===void 0&&(re[Ce]=Te[Ce]);return re}(ie,{sampleFactor:.1,simplifyThreshold:0});for(var pe=m(Z,0,1),ge=pe/(pe*ie.sampleFactor),be=[],le=0;le<pe;le+=ge)be.push(m(Z,le));return ie.simplifyThreshold&&function(re){for(var Te=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,Ce=re.length-1;3<re.length&&0<=Ce;--Ce)l(c(re,Ce-1),c(re,Ce),c(re,Ce+1),Te)&&re.splice(Ce%re.length,1)}(be,ie.simplifyThreshold),be}(te[se],G),q=0;q<ce.length;q++)ce[q].x+=F,W.push(ce[q]);F+=Q[ee].advanceWidth*this._scale(H)}return W}},{key:"_getGlyphs",value:function(N){return this.font.stringToGlyphs(N)}},{key:"_getPath",value:function(N,V,k,H){var G=(H&&H.renderer&&H.renderer._pInst||this.parent)._renderer;return V=this._handleAlignment(G,N,V,k),this.font.getPath(N,V.x,V.y,G._textSize,H)}},{key:"_getPathData",value:function(N,V,k,H){var G=3;return typeof N=="string"&&2<arguments.length?N=this._getPath(N,V,k,H):b(V)==="object"&&(H=V),H&&typeof H.decimals=="number"&&(G=H.decimals),N.toPathData(G)}},{key:"_getSVG",value:function(N,V,k,H){var G=3;return typeof N=="string"&&2<arguments.length?N=this._getPath(N,V,k,H):b(V)==="object"&&(H=V),H&&(typeof H.decimals=="number"&&(G=H.decimals),typeof H.strokeWidth=="number"&&(N.strokeWidth=H.strokeWidth),H.fill!==void 0&&(N.fill=H.fill),H.stroke!==void 0&&(N.stroke=H.stroke)),N.toSVG(G)}},{key:"_renderPath",value:function(N,V,k,H){var G=H&&H.renderer||this.parent._renderer,F=G.drawingContext,W=(N=(b(N)==="object"&&N.commands?N:this._getPath(N,V,k,H)).commands,F.beginPath(),!0);V=!1,k=void 0;try{for(var Q,J=N[Symbol.iterator]();!(W=(Q=J.next()).done);W=!0){var ee=Q.value;ee.type==="M"?F.moveTo(ee.x,ee.y):ee.type==="L"?F.lineTo(ee.x,ee.y):ee.type==="C"?F.bezierCurveTo(ee.x1,ee.y1,ee.x2,ee.y2,ee.x,ee.y):ee.type==="Q"?F.quadraticCurveTo(ee.x1,ee.y1,ee.x,ee.y):ee.type==="Z"&&F.closePath()}}catch(te){V=!0,k=te}finally{try{W||J.return==null||J.return()}finally{if(V)throw k}}return G._doStroke&&G._strokeSet&&F.stroke(),G._doFill&&(G._fillSet||G._setFill(h._DEFAULT_TEXT_FILL),F.fill()),this}},{key:"_textWidth",value:function(N,V){return this.font.getAdvanceWidth(N,V)}},{key:"_textAscent",value:function(N){return this.font.ascender*this._scale(N)}},{key:"_textDescent",value:function(N){return-this.font.descender*this._scale(N)}},{key:"_scale",value:function(N){return 1/this.font.unitsPerEm*(N||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(N,V,k,H,G){var F=N._textSize;switch(G===void 0&&(G=this._textWidth(V,F)),N._textAlign){case h.CENTER:k-=G/2;break;case h.RIGHT:k-=G}switch(N._textBaseline){case h.TOP:H+=this._textAscent(F);break;case h.CENTER:H+=this._textAscent(F)/2;break;case h.BOTTOM:H-=this._textDescent(F)}return{x:k,y:H}}}])&&w(L.prototype,z),P}(),t=f.default,M.default=t},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.function.name":167,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],312:[function(t,R,M){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0,(t=(t=t("../core/main"))&&t.__esModule?t:{default:t}).default.prototype.append=function(p,f){return p.push(f),p},t.default.prototype.arrayCopy=function(p,f,h,b,w){var c,l;p=w!==void 0?(l=Math.min(w,p.length),c=b,p.slice(f,l+f)):(l=h!==void 0?(l=h,Math.min(l,p.length)):p.length,h=f,p.slice(c=0,l)),Array.prototype.splice.apply(h,[c,l].concat(p))},t.default.prototype.concat=function(p,f){return p.concat(f)},t.default.prototype.reverse=function(p){return p.reverse()},t.default.prototype.shorten=function(p){return p.pop(),p},t.default.prototype.shuffle=function(p,f){for(var h,b,w=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(p),c=(p=f||w?p:p.slice()).length;1<c;)h=this.random(0,1)*c|0,b=p[--c],p[c]=p[h],p[h]=b;return p},t.default.prototype.sort=function(p,f){var h=f?p.slice(0,Math.min(f,p.length)):p;return f=f?p.slice(Math.min(f,p.length)):[],(h=typeof h[0]=="string"?h.sort():h.sort(function(b,w){return b-w})).concat(f)},t.default.prototype.splice=function(p,f,h){return Array.prototype.splice.apply(p,[h,0].concat(f)),p},t.default.prototype.subset=function(p,f,h){return h!==void 0?p.slice(f,f+h):p.slice(f,p.length)},t=t.default,M.default=t},{"../core/main":273,"core-js/modules/es.array-buffer.constructor":150,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.object.to-string":180}],313:[function(t,R,M){t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(t=t("../core/main"))&&t.__esModule?t:{default:t};p.default.prototype.float=function(f){return f instanceof Array?f.map(parseFloat):parseFloat(f)},p.default.prototype.int=function(f){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return f===1/0||f==="Infinity"?1/0:f===-1/0||f==="-Infinity"?-1/0:typeof f=="string"?parseInt(f,h):typeof f=="number"?0|f:typeof f=="boolean"?f?1:0:f instanceof Array?f.map(function(b){return p.default.prototype.int(b,h)}):void 0},p.default.prototype.str=function(f){return f instanceof Array?f.map(p.default.prototype.str):String(f)},p.default.prototype.boolean=function(f){return typeof f=="number"?f!==0:typeof f=="string"?f.toLowerCase()==="true":typeof f=="boolean"?f:f instanceof Array?f.map(p.default.prototype.boolean):void 0},p.default.prototype.byte=function(f){return typeof(f=p.default.prototype.int(f,10))=="number"?(f+128)%256-128:f instanceof Array?f.map(p.default.prototype.byte):void 0},p.default.prototype.char=function(f){return typeof f!="number"||isNaN(f)?f instanceof Array?f.map(p.default.prototype.char):typeof f=="string"?p.default.prototype.char(parseInt(f,10)):void 0:String.fromCharCode(f)},p.default.prototype.unchar=function(f){return typeof f=="string"&&f.length===1?f.charCodeAt(0):f instanceof Array?f.map(p.default.prototype.unchar):void 0},p.default.prototype.hex=function(f,h){if(h=h??8,f instanceof Array)return f.map(function(w){return p.default.prototype.hex(w,h)});if(f===1/0||f===-1/0)return(f===1/0?"F":"0").repeat(h);if(typeof f=="number"){f<0&&(f=4294967295+f+1);for(var b=Number(f).toString(16).toUpperCase();b.length<h;)b="0".concat(b);return b.length>=h?b.substring(b.length-h,b.length):b}},p.default.prototype.unhex=function(f){return f instanceof Array?f.map(p.default.prototype.unhex):parseInt("0x".concat(f),16)},t=p.default,M.default=t},{"../core/main":273,"core-js/modules/es.array.map":163,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.repeat":193}],314:[function(t,R,M){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(l=t("../core/main"))&&l.__esModule?l:{default:l};function f(o,u){return function(m){if(Array.isArray(m))return m}(o)||function(m,g){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]"){var _=[],v=!0,x=!1,E=void 0;try{for(var j,O=m[Symbol.iterator]();!(v=(j=O.next()).done)&&(_.push(j.value),!g||_.length!==g);v=!0);}catch(P){x=!0,E=P}finally{try{v||O.return==null||O.return()}finally{if(x)throw E}}return _}}(o,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(o,u,m){var g=(_=f(o.toString().split("."),2))[0],_=_[1];return m===void 0?(g=g.padStart(u,"0"),_?g+"."+_:g):(g=(o=f(o.toFixed(m).toString().split("."),2))[0],_=o[1],(g=g.padStart(u,"0"))+"."+_)}function b(o,u){var m=(o=o.toString()).indexOf("."),g=m!==-1?o.substring(m):"";if(o=(o=m!==-1?o.substring(0,m):o).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),u===0)g="";else if(u!==void 0)if(u>g.length)for(var _=u-(g+=m===-1?".":"").length+1,v=0;v<_;v++)g+="0";else g=g.substring(0,u+1);return o+g}function w(o){return 0<parseFloat(o)?"+".concat(o.toString()):o.toString()}function c(o){return 0<=parseFloat(o)?" ".concat(o.toString()):o.toString()}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),p.default.prototype.join=function(o,u){return p.default._validateParameters("join",arguments),o.join(u)},p.default.prototype.match=function(o,u){return p.default._validateParameters("match",arguments),o.match(u)},p.default.prototype.matchAll=function(o,u){p.default._validateParameters("matchAll",arguments);for(var m=new RegExp(u,"g"),g=m.exec(o),_=[];g!==null;)_.push(g),g=m.exec(o);return _},p.default.prototype.nf=function(o,u,m){return p.default._validateParameters("nf",arguments),o instanceof Array?o.map(function(g){return h(g,u,m)}):Object.prototype.toString.call(o)==="[object Arguments]"?o.length===3?this.nf(o[0],o[1],o[2]):o.length===2?this.nf(o[0],o[1]):this.nf(o[0]):h(o,u,m)},p.default.prototype.nfc=function(o,u){return p.default._validateParameters("nfc",arguments),o instanceof Array?o.map(function(m){return b(m,u)}):b(o,u)},p.default.prototype.nfp=function(){for(var o=arguments.length,u=new Array(o),m=0;m<o;m++)u[m]=arguments[m];p.default._validateParameters("nfp",u);var g=p.default.prototype.nf.apply(this,u);return g instanceof Array?g.map(w):w(g)},p.default.prototype.nfs=function(){for(var o=arguments.length,u=new Array(o),m=0;m<o;m++)u[m]=arguments[m];p.default._validateParameters("nfs",u);var g=p.default.prototype.nf.apply(this,u);return g instanceof Array?g.map(c):c(g)},p.default.prototype.split=function(o,u){return p.default._validateParameters("split",arguments),o.split(u)},p.default.prototype.splitTokens=function(o,u){var m,g;return p.default._validateParameters("splitTokens",arguments),g=u!==void 0?(g=/\]/g.exec(u=u),(m=/\[/g.exec(u))&&g?(u=u.slice(0,g.index)+u.slice(g.index+1),m=/\[/g.exec(u),u=u.slice(0,m.index)+u.slice(m.index+1),new RegExp("[\\[".concat(u,"\\]]"),"g")):g?(u=u.slice(0,g.index)+u.slice(g.index+1),new RegExp("[".concat(u,"\\]]"),"g")):m?(u=u.slice(0,m.index)+u.slice(m.index+1),new RegExp("[".concat(u,"\\[]"),"g")):new RegExp("[".concat(u,"]"),"g")):/\s/g,o.split(g).filter(function(_){return _})},p.default.prototype.trim=function(o){return p.default._validateParameters("trim",arguments),o instanceof Array?o.map(this.trim):o.trim()};var l=p.default;M.default=l},{"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/main":273,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.match":191,"core-js/modules/es.string.pad-start":192,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],315:[function(t,R,M){Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0,(t=(t=t("../core/main"))&&t.__esModule?t:{default:t}).default.prototype.day=function(){return new Date().getDate()},t.default.prototype.hour=function(){return new Date().getHours()},t.default.prototype.minute=function(){return new Date().getMinutes()},t.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},t.default.prototype.month=function(){return new Date().getMonth()+1},t.default.prototype.second=function(){return new Date().getSeconds()},t.default.prototype.year=function(){return new Date().getFullYear()},t=t.default,M.default=t},{"../core/main":273}],316:[function(t,R,M){function p(l){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(l)}function f(l){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(o){return p(o)}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":p(o)})(l)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var h=(c=t("../core/main"))&&c.__esModule?c:{default:c},b=(t("./p5.Geometry"),function(l){if(l&&l.__esModule)return l;if(l===null||f(l)!=="object"&&typeof l!="function")return{default:l};var o=function(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,v)}();if(o&&o.has(l))return o.get(l);var u,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in l){var _;Object.prototype.hasOwnProperty.call(l,u)&&((_=g?Object.getOwnPropertyDescriptor(l,u):null)&&(_.get||_.set)?Object.defineProperty(m,u,_):m[u]=l[u])}return m.default=l,o&&o.set(l,m),m}(t("../core/constants")));function w(l,o,u,m,g,_,v){l=l<=0?1:l,o=o<0?0:o,u=u<=0?l:u,m=m<3?3:m;for(var x,E,j=(_=_===void 0||_)?-2:0,O=(g=g<1?1:g)+((v=v===void 0?o!==0:v)?2:0),P=Math.atan2(l-o,u),L=Math.sin(P),z=Math.cos(P),N=j;N<=O;++N){var V=N/g,k=u*V,H=void 0;for(H=N<0?(V=k=0,l):g<N?(k=u,V=1,o):l+(o-l)*V,N!==-2&&N!==g+2||(H=0),k-=u/2,x=0;x<m;++x){var G=x/(m-1),F=2*Math.PI*G,W=Math.sin(F),Q=(F=Math.cos(F),this.vertices.push(new h.default.Vector(W*H,k,F*H)));Q=N<0?new h.default.Vector(0,-1,0):g<N&&o?new h.default.Vector(0,1,0):new h.default.Vector(W*z,L,F*z),this.vertexNormals.push(Q),this.uvs.push(G,V)}}var J=0;if(_){for(E=0;E<m;++E)this.faces.push([J+E,J+m+(E+1)%m,J+m+E]);J+=2*m}for(N=0;N<g;++N){for(x=0;x<m;++x){var ee=(x+1)%m;this.faces.push([J+x,J+ee,J+m+ee]),this.faces.push([J+x,J+m+ee,J+m+x])}J+=m}if(v)for(J+=m,x=0;x<m;++x)this.faces.push([J+x,J+(x+1)%m,J+m])}h.default.prototype.plane=function(l,o,u,m){this._assert3d("plane"),h.default._validateParameters("plane",arguments),l===void 0&&(l=50),o===void 0&&(o=l),m===void 0&&(m=1);var g,_="plane|".concat(u=u===void 0?1:u,"|").concat(m);return this._renderer.geometryInHash(_)||((g=new h.default.Geometry(u,m,function(){for(var v,x,E=0;E<=this.detailY;E++)for(var j=E/this.detailY,O=0;O<=this.detailX;O++)v=O/this.detailX,x=new h.default.Vector(v-.5,j-.5,0),this.vertices.push(x),this.uvs.push(v,j)})).computeFaces().computeNormals(),u<=1&&m<=1?g._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(_,g)),this._renderer.drawBuffersScaled(_,l,o,1),this},h.default.prototype.box=function(l,o,u,m,g){this._assert3d("box"),h.default._validateParameters("box",arguments),l===void 0&&(l=50),o===void 0&&(o=l),u===void 0&&(u=o);var _,v=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;return g===void 0&&(g=v?1:4),v="box|".concat(m=m===void 0?v?1:4:m,"|").concat(g),this._renderer.geometryInHash(v)||((_=new h.default.Geometry(m,g,function(){var x=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(E,j){j*=4;for(var O=0;O<4;O++){var P=E[O];P=new h.default.Vector((2*(1&P)-1)/2,((2&P)-1)/2,((4&P)/2-1)/2),x.vertices.push(P),x.uvs.push(1&O,(2&O)/2)}x.faces.push([j,1+j,2+j]),x.faces.push([2+j,1+j,3+j])})})).computeNormals(),m<=4&&g<=4?_._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(v,_)),this._renderer.drawBuffersScaled(v,l,o,u),this},h.default.prototype.sphere=function(l,o,u){return this._assert3d("sphere"),h.default._validateParameters("sphere",arguments),this.ellipsoid(l=l===void 0?50:l,l,l,o=o===void 0?24:o,u=u===void 0?16:u),this},h.default.prototype.cylinder=function(l,o,u,m,g,_){this._assert3d("cylinder"),h.default._validateParameters("cylinder",arguments),l===void 0&&(l=50),o===void 0&&(o=l),m===void 0&&(m=1),_===void 0&&(_=!0),g===void 0&&(g=!0);var v,x="cylinder|".concat(u=u===void 0?24:u,"|").concat(m,"|").concat(g,"|").concat(_);return this._renderer.geometryInHash(x)||(v=new h.default.Geometry(u,m),w.call(v,1,1,1,u,m,g,_),u<=24&&m<=16?v._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(x,v)),this._renderer.drawBuffersScaled(x,l,o,l),this},h.default.prototype.cone=function(l,o,u,m,g){this._assert3d("cone"),h.default._validateParameters("cone",arguments),l===void 0&&(l=50),o===void 0&&(o=l),m===void 0&&(m=1),g===void 0&&(g=!0);var _,v="cone|".concat(u=u===void 0?24:u,"|").concat(m,"|").concat(g);return this._renderer.geometryInHash(v)||(_=new h.default.Geometry(u,m),w.call(_,1,0,1,u,m,g,!1),u<=24&&m<=16?_._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(v,_)),this._renderer.drawBuffersScaled(v,l,o,l),this},h.default.prototype.ellipsoid=function(l,o,u,m,g){this._assert3d("ellipsoid"),h.default._validateParameters("ellipsoid",arguments),l===void 0&&(l=50),o===void 0&&(o=l),u===void 0&&(u=l),g===void 0&&(g=16);var _,v="ellipsoid|".concat(m=m===void 0?24:m,"|").concat(g);return this._renderer.geometryInHash(v)||((_=new h.default.Geometry(m,g,function(){for(var x=0;x<=this.detailY;x++)for(var E=x/this.detailY,j=Math.PI*E-Math.PI/2,O=Math.cos(j),P=Math.sin(j),L=0;L<=this.detailX;L++){var z=L/this.detailX,N=2*Math.PI*z,V=Math.cos(N);N=Math.sin(N),N=new h.default.Vector(O*N,P,O*V),this.vertices.push(N),this.vertexNormals.push(N),this.uvs.push(z,E)}})).computeFaces(),m<=24&&g<=24?_._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(v,_)),this._renderer.drawBuffersScaled(v,l,o,u),this},h.default.prototype.torus=function(l,o,u,m){if(this._assert3d("torus"),h.default._validateParameters("torus",arguments),l===void 0)l=50;else if(!l)return;if(o===void 0)o=10;else if(!o)return;u===void 0&&(u=24),m===void 0&&(m=16);var g,_=(o/l).toPrecision(4);return o="torus|".concat(_,"|").concat(u,"|").concat(m),this._renderer.geometryInHash(o)||((g=new h.default.Geometry(u,m,function(){for(var v=0;v<=this.detailY;v++)for(var x=v/this.detailY,E=2*Math.PI*x,j=Math.cos(E),O=Math.sin(E),P=1+_*j,L=0;L<=this.detailX;L++){var z=L/this.detailX,N=2*Math.PI*z,V=Math.cos(N),k=(N=Math.sin(N),new h.default.Vector(P*V,P*N,_*O));V=new h.default.Vector(j*V,j*N,O),this.vertices.push(k),this.vertexNormals.push(V),this.uvs.push(z,x)}})).computeFaces(),u<=24&&m<=16?g._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(o,g)),this._renderer.drawBuffersScaled(o,l,l,l),this},h.default.RendererGL.prototype.point=function(l,o,u){var m=[];return m.push(new h.default.Vector(l,o,u=u===void 0?0:u)),this._drawPoints(m,this.immediateMode.buffers.point),this},h.default.RendererGL.prototype.triangle=function(l){var o=l[0],u=l[1],m=l[2],g=l[3],_=l[4],v=(l=l[5],this.geometryInHash("tri")||((v=new h.default.Geometry(1,1,function(){var j=[];j.push(new h.default.Vector(0,0,0)),j.push(new h.default.Vector(1,0,0)),j.push(new h.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=j,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),v.computeNormals(),this.createBuffers("tri",v)),this.uMVMatrix.copy());try{var x=Math.sign(o*g-m*u+m*l-_*g+_*u-o*l),E=new h.default.Matrix([m-o,g-u,0,0,_-o,l-u,0,0,0,0,x,0,o,u,0,1]).mult(this.uMVMatrix);this.uMVMatrix=E,this.drawBuffers("tri")}finally{this.uMVMatrix=v}return this},h.default.RendererGL.prototype.ellipse=function(l){this.arc(l[0],l[1],l[2],l[3],0,b.TWO_PI,b.OPEN,l[4])},h.default.RendererGL.prototype.arc=function(l){var o,u=arguments[1],m=arguments[2],g=arguments[3],_=arguments[4],v=arguments[5],x=arguments[6],E=arguments[7]||25,j=(Math.abs(v-_)>=b.TWO_PI?"".concat(O="ellipse","|"):"".concat(O="arc","|").concat(_,"|").concat(v,"|").concat(x,"|")).concat(E,"|"),O=(this.geometryInHash(j)||((o=new h.default.Geometry(E,1,function(){if(_.toFixed(10)!==v.toFixed(10)){x!==b.PIE&&x!==void 0||(this.vertices.push(new h.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var P=0;P<=E;P++){var L=P/E*(v-_)+_,z=.5+Math.cos(L)/2;L=.5+Math.sin(L)/2,this.vertices.push(new h.default.Vector(z,L,0)),this.uvs.push([z,L]),P<E-1&&(this.faces.push([0,P+1,P+2]),this.edges.push([P+1,P+2]))}switch(x){case b.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case b.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case b.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),E<=50?o._edgesToVertices(o):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(O," with more than 50 detail")),this.createBuffers(j,o)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([l,u,0]),this.uMVMatrix.scale(m,g,1),this.drawBuffers(j)}finally{this.uMVMatrix=O}return this},h.default.RendererGL.prototype.rect=function(l){var o=l[0],u=l[1],m=l[2],g=l[3];if(l[4]===void 0){var _=this._pInst._glAttributes.perPixelLighting,v=l[4]||(_?1:24),x=l[5]||(_?1:16),E=(_="rect|".concat(v,"|").concat(x),this.geometryInHash(_)||((E=new h.default.Geometry(v,x,function(){for(var Q=0;Q<=this.detailY;Q++)for(var J=Q/this.detailY,ee=0;ee<=this.detailX;ee++){var te=ee/this.detailX,se=new h.default.Vector(te,J,0);this.vertices.push(se),this.uvs.push(te,J)}0<v&&0<x&&(this.edges=[[0,v],[v,(v+1)*(x+1)-1],[(v+1)*(x+1)-1,(v+1)*x],[(v+1)*x,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(_,E)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([o,u,0]),this.uMVMatrix.scale(m,g,1),this.drawBuffers(_)}finally{this.uMVMatrix=E}}else{_=l[4],E=l[5]===void 0?_:l[5];var j=l[6]===void 0?E:l[6],O=(l=l[7]===void 0?j:l[7],m),P=g,L=((N=((O+=o)<o&&(N=o,o=O,O=N),(P+=u)<u&&(N=u,u=P,P=N),Math.min((O-o)/2,(P-u)/2)))<_&&(_=N),N<E&&(E=N),N<j&&(j=N),N<l&&(l=N),o),z=u,N=O,V=(o=P,this.beginShape(),E!==0?(this.vertex(N-E,z),this.quadraticVertex(N,z,N,z+E)):this.vertex(N,z),j!==0?(this.vertex(N,o-j),this.quadraticVertex(N,o,N-j,o)):this.vertex(N,o),l!==0?(this.vertex(L+l,o),this.quadraticVertex(L,o,L,o-l)):this.vertex(L,o),_!==0?(this.vertex(L,z+_),this.quadraticVertex(L,z,L+_,z)):this.vertex(L,z),!(this.immediateMode.geometry.uvs.length=0));u=!1,O=void 0;try{for(var k,H=this.immediateMode.geometry.vertices[Symbol.iterator]();!(V=(k=H.next()).done);V=!0){var G=k.value,F=(G.x-L)/m,W=(G.y-z)/g;this.immediateMode.geometry.uvs.push(F,W)}}catch(Q){u=!0,O=Q}finally{try{V||H.return==null||H.return()}finally{if(u)throw O}}this.endShape(b.CLOSE)}return this},h.default.RendererGL.prototype.quad=function(l,o,u,m,g,_,v,x,E,j,O,P,L,z){L===void 0&&(L=2),z===void 0&&(z=2);var N="quad|".concat(l,"|").concat(o,"|").concat(u,"|").concat(m,"|").concat(g,"|").concat(_,"|").concat(v,"|").concat(x,"|").concat(E,"|").concat(j,"|").concat(O,"|").concat(P,"|").concat(L,"|").concat(z);if(!this.geometryInHash(N)){var V=new h.default.Geometry(L,z,function(){for(var Q=1/(this.detailX-1),J=1/(this.detailY-1),ee=0;ee<this.detailY;ee++)for(var te=0;te<this.detailX;te++){var se=te*Q,ce=ee*J;this.vertices.push(new h.default.Vector((1-se)*((1-ce)*l+ce*j)+se*((1-ce)*m+ce*v),(1-se)*((1-ce)*o+ce*O)+se*((1-ce)*g+ce*x),(1-se)*((1-ce)*u+ce*P)+se*((1-ce)*_+ce*E))),this.uvs.push([se,ce])}});V.faces=[];for(var k=0;k<z-1;k++)for(var H=0;H<L-1;H++){var G=H+k*L,F=H+1+(k+1)*L,W=H+(k+1)*L;V.faces.push([G,H+1+k*L,F]),V.faces.push([G,F,W])}V.computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(N,V)}return this.drawBuffers(N),this},h.default.RendererGL.prototype.bezier=function(l,o,u,m,g,_,v,x,E,j,O,P){arguments.length===8&&(O=x,j=v,x=_,v=g,g=m,m=u,u=_=E=P=0);var L=this._pInst._bezierDetail||20;this.beginShape();for(var z=0;z<=L;z++){var N=Math.pow(1-z/L,3),V=z/L*3*Math.pow(1-z/L,2),k=3*Math.pow(z/L,2)*(1-z/L),H=Math.pow(z/L,3);this.vertex(l*N+m*V+v*k+j*H,o*N+g*V+x*k+O*H,u*N+_*V+E*k+P*H)}return this.endShape(),this},h.default.RendererGL.prototype.curve=function(l,o,u,m,g,_,v,x,E,j,O,P){arguments.length===8&&(j=v,O=x,v=g,x=m,g=m=u,u=_=E=P=0);var L=this._pInst._curveDetail;this.beginShape();for(var z=0;z<=L;z++){var N=.5*Math.pow(z/L,3),V=.5*Math.pow(z/L,2),k=z/L*.5;this.vertex(N*(3*m-l-3*v+j)+V*(2*l-5*m+4*v-j)+k*(-l+v)+2*m*.5,N*(3*g-o-3*x+O)+V*(2*o-5*g+4*x-O)+k*(-o+x)+2*g*.5,N*(3*_-u-3*E+P)+V*(2*u-5*_+4*E-P)+k*(-u+E)+2*_*.5)}return this.endShape(),this},h.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(b.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(b.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},h.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var l,o,u,m,g,_,v=[],x=[],E=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var j=1/this._lutBezierDetail,O=0,P=1,L=0;O<1;){if(_=parseFloat(O.toFixed(6)),this._lookUpTableBezier[L]=this._bezierCoefficients(_),P.toFixed(6)===j.toFixed(6)){_=parseFloat(P.toFixed(6))+parseFloat(O.toFixed(6)),++L,this._lookUpTableBezier[L]=this._bezierCoefficients(_);break}O+=j,P-=j,++L}}for(var z=this._lookUpTableBezier.length,N=[],V=0;V<4;V++)N.push([]);N[0]=this.immediateMode.geometry.vertexColors.slice(-4),N[3]=this.curFillColor.slice();var k=[];for(V=0;V<4;V++)k.push([]);if(k[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),k[3]=this.curStrokeColor.slice(),E===6){this.isBezier=!0,v=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],x=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]];var H=Math.hypot(v[0]-v[1],x[0]-x[1]),G=Math.hypot(v[1]-v[2],x[1]-x[2]),F=Math.hypot(v[2]-v[3],x[2]-x[3]);for(H/=G=H+G+F,F/=G,g=0;g<4;g++)N[1].push(N[0][g]*(1-H)+N[3][g]*H),N[2].push(N[0][g]*F+N[3][g]*(1-F)),k[1].push(k[0][g]*(1-H)+k[3][g]*H),k[2].push(k[0][g]*F+k[3][g]*(1-F));for(m=0;m<z;m++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],V=l=o=0;V<4;V++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableBezier[m][V]*N[V][g],this.curStrokeColor[g]+=this._lookUpTableBezier[m][V]*k[V][g];l+=v[V]*this._lookUpTableBezier[m][V],o+=x[V]*this._lookUpTableBezier[m][V]}this.vertex(l,o)}this.curFillColor=N[3],this.curStrokeColor=k[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(E===9){this.isBezier=!0,v=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],x=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var W=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],Q=Math.hypot(v[0]-v[1],x[0]-x[1],W[0]-W[1]),J=(G=Math.hypot(v[1]-v[2],x[1]-x[2],W[1]-W[2]),Math.hypot(v[2]-v[3],x[2]-x[3],W[2]-W[3]));for(Q/=E=Q+G+J,J/=E,g=0;g<4;g++)N[1].push(N[0][g]*(1-Q)+N[3][g]*Q),N[2].push(N[0][g]*J+N[3][g]*(1-J)),k[1].push(k[0][g]*(1-Q)+k[3][g]*Q),k[2].push(k[0][g]*J+k[3][g]*(1-J));for(m=0;m<z;m++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],V=l=o=u=0;V<4;V++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableBezier[m][V]*N[V][g],this.curStrokeColor[g]+=this._lookUpTableBezier[m][V]*k[V][g];l+=v[V]*this._lookUpTableBezier[m][V],o+=x[V]*this._lookUpTableBezier[m][V],u+=W[V]*this._lookUpTableBezier[m][V]}this.vertex(l,o,u)}this.curFillColor=N[3],this.curStrokeColor=k[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},h.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var l,o,u,m,g,_,v=[],x=[],E=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var j=1/this._lutQuadraticDetail,O=0,P=1,L=0;O<1;){if(_=parseFloat(O.toFixed(6)),this._lookUpTableQuadratic[L]=this._quadraticCoefficients(_),P.toFixed(6)===j.toFixed(6)){_=parseFloat(P.toFixed(6))+parseFloat(O.toFixed(6)),++L,this._lookUpTableQuadratic[L]=this._quadraticCoefficients(_);break}O+=j,P-=j,++L}}for(var z=this._lookUpTableQuadratic.length,N=[],V=0;V<3;V++)N.push([]);N[0]=this.immediateMode.geometry.vertexColors.slice(-4),N[2]=this.curFillColor.slice();var k=[];for(V=0;V<3;V++)k.push([]);if(k[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),k[2]=this.curStrokeColor.slice(),E===4){this.isQuadratic=!0,v=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],x=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]];var H=Math.hypot(v[0]-v[1],x[0]-x[1]);for(H/=H+Math.hypot(v[1]-v[2],x[1]-x[2]),g=0;g<4;g++)N[1].push(N[0][g]*(1-H)+N[2][g]*H),k[1].push(k[0][g]*(1-H)+k[2][g]*H);for(m=0;m<z;m++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],V=l=o=0;V<3;V++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableQuadratic[m][V]*N[V][g],this.curStrokeColor[g]+=this._lookUpTableQuadratic[m][V]*k[V][g];l+=v[V]*this._lookUpTableQuadratic[m][V],o+=x[V]*this._lookUpTableQuadratic[m][V]}this.vertex(l,o)}this.curFillColor=N[2],this.curStrokeColor=k[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(E===6){this.isQuadratic=!0,v=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],x=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var G=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],F=Math.hypot(v[0]-v[1],x[0]-x[1],G[0]-G[1]);for(F/=F+Math.hypot(v[1]-v[2],x[1]-x[2],G[1]-G[2]),g=0;g<4;g++)N[1].push(N[0][g]*(1-F)+N[2][g]*F),k[1].push(k[0][g]*(1-F)+k[2][g]*F);for(m=0;m<z;m++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],V=l=o=u=0;V<3;V++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableQuadratic[m][V]*N[V][g],this.curStrokeColor[g]+=this._lookUpTableQuadratic[m][V]*k[V][g];l+=v[V]*this._lookUpTableQuadratic[m][V],o+=x[V]*this._lookUpTableQuadratic[m][V],u+=G[V]*this._lookUpTableQuadratic[m][V]}this.vertex(l,o,u)}this.curFillColor=N[2],this.curStrokeColor=k[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},h.default.RendererGL.prototype.curveVertex=function(){var l,o,u,m,g,_,v=[],x=[],E=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var j=1/this._lutBezierDetail,O=0,P=1,L=0;O<1;){if(_=parseFloat(O.toFixed(6)),this._lookUpTableBezier[L]=this._bezierCoefficients(_),P.toFixed(6)===j.toFixed(6)){_=parseFloat(P.toFixed(6))+parseFloat(O.toFixed(6)),++L,this._lookUpTableBezier[L]=this._bezierCoefficients(_);break}O+=j,P-=j,++L}}var z=this._lookUpTableBezier.length;if(E===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,v=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),x=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),g=0;g<z;g++)o=v[0]*this._lookUpTableBezier[g][0]+v[1]*this._lookUpTableBezier[g][1]+v[2]*this._lookUpTableBezier[g][2]+v[3]*this._lookUpTableBezier[g][3],u=x[0]*this._lookUpTableBezier[g][0]+x[1]*this._lookUpTableBezier[g][1]+x[2]*this._lookUpTableBezier[g][2]+x[3]*this._lookUpTableBezier[g][3],this.vertex(o,u);for(g=0;g<E;g++)this.immediateMode._curveVertex.shift()}}else if(E===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,v=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),x=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),l=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),g=0;g<z;g++)o=v[0]*this._lookUpTableBezier[g][0]+v[1]*this._lookUpTableBezier[g][1]+v[2]*this._lookUpTableBezier[g][2]+v[3]*this._lookUpTableBezier[g][3],u=x[0]*this._lookUpTableBezier[g][0]+x[1]*this._lookUpTableBezier[g][1]+x[2]*this._lookUpTableBezier[g][2]+x[3]*this._lookUpTableBezier[g][3],m=l[0]*this._lookUpTableBezier[g][0]+l[1]*this._lookUpTableBezier[g][1]+l[2]*this._lookUpTableBezier[g][2]+l[3]*this._lookUpTableBezier[g][3],this.vertex(o,u,m);for(g=0;g<E;g++)this.immediateMode._curveVertex.shift()}},h.default.RendererGL.prototype.image=function(l,o,u,m,g,_,v,x,E){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(l),this._pInst.textureMode(b.NORMAL);var j=0,O=(o<=l.width&&(j=o/l.width),1);o+m<=l.width&&(O=(o+m)/l.width),o=0,u<=l.height&&(o=u/l.height),m=1,u+g<=l.height&&(m=(u+g)/l.height),this.beginShape(),this.vertex(_,v,0,j,o),this.vertex(_+x,v,0,O,o),this.vertex(_+x,v+E,0,O,m),this.vertex(_,v+E,0,j,m),this.endShape(b.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(b.REMOVE)};var c=h.default;M.default=c},{"../core/constants":262,"../core/main":273,"./p5.Geometry":323,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.math.hypot":169,"core-js/modules/es.math.sign":170,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],317:[function(t,R,M){function p(c){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var f=(w=t("../core/main"))&&w.__esModule?w:{default:w},h=function(c){if(c&&c.__esModule)return c;if(c===null||b(c)!=="object"&&typeof c!="function")return{default:c};var l=function(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,_)}();if(l&&l.has(c))return l.get(c);var o,u={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in c){var g;Object.prototype.hasOwnProperty.call(c,o)&&((g=m?Object.getOwnPropertyDescriptor(c,o):null)&&(g.get||g.set)?Object.defineProperty(u,o,g):u[o]=c[o])}return u.default=c,l&&l.set(c,u),u}(t("../core/constants"));function b(c){return(b=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(l){return p(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":p(l)})(c)}f.default.prototype.orbitControl=function(c,l,o,u){var m=this,g=(this._assert3d("orbitControl"),f.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);c===void 0&&(c=1),l===void 0&&(l=c),o===void 0&&(o=1),b(u)!=="object"&&(u={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var _=u.disableTouchActions;this.touchActionsDisabled===!0||_!==void 0&&!_||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0)),u=(_=u.freeRotation)!==void 0&&_;var v,x,E,j=[],O=(_=(this.touches.forEach(function(k){m._renderer.prevTouches.forEach(function(H){k.id===H.id&&(H={x:k.x,y:k.y,px:H.x,py:H.y},j.push(H))})}),this._renderer.prevTouches=this.touches,0),0),P=0,L=0,z=0,N=this.height<this.width?this.height:this.width,V=!1;return 0<j.length?(V=0<j[0].x&&j[0].x<this.width&&0<j[0].y&&j[0].y<this.height,j.length===1?(O=-c*((v=j[0]).x-v.px)/N,P=l*(v.y-v.py)/N):(v=j[0],x=j[1],_=-(Math.hypot(v.x-x.x,v.y-x.y)-Math.hypot(v.px-x.px,v.py-x.py))*o*4e-4,L=.5*(v.x+x.x)-.5*(v.px+x.px),z=.5*(v.y+x.y)-.5*(v.py+x.py)),0<this.touches.length?V&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(V=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(_=Math.sign(this._mouseWheelDeltaY)*o,_*=.01,this._mouseWheelDeltaY=0,V&&(this._renderer.executeZoom=!0)):this._renderer.zoomFlag=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(O=-c*this.movedX/N,P=l*this.movedY/N):this.mouseButton===this.RIGHT&&(L=this.movedX,z=this.movedY),V&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),_!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=_),.001<Math.abs(this._renderer.zoomVelocity)?(u?g._orbitFree(0,0,this._renderer.zoomVelocity):g._orbit(0,0,this._renderer.zoomVelocity),g.projMatrix.mat4[15]!==0&&(g.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),g.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=g.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=g.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,O===0&&P===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*O,.6*P),1e-6<this._renderer.rotateVelocity.magSq()?(u?g._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):g._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),L===0&&z===0||!this._renderer.executeRotateAndMove||(v=2*L/this.width,x=2*-z/this.height,this._renderer.moveVelocity.add(.15*v,.15*x)),1e-6<this._renderer.moveVelocity.magSq()?(o=g._getLocalAxes(),c=g.eyeX-g.centerX,l=g.eyeY-g.centerY,N=g.eyeZ-g.centerZ,V=Math.sqrt(c*c+l*l+N*N),_=new f.default.Vector(g.centerX,g.centerY,g.centerZ),_=g.cameraMatrix.multiplyPoint(_),(_=this._renderer.uPMatrix.multiplyAndNormalizePoint(_)).x-=this._renderer.moveVelocity.x,_.y-=this._renderer.moveVelocity.y,P=(O=this._renderer.uPMatrix.mat4)[15]===0?(E=(O[8]+_.x)/O[0]*V,(O[9]+_.y)/O[5]*V):(E=(_.x-O[12])/O[0],(_.y-O[13])/O[5]),g.setPosition(g.eyeX+E*o.x[0]+P*o.y[0],g.eyeY+E*o.x[1]+P*o.y[1],g.eyeZ+E*o.x[2]+P*o.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},f.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var c=arguments.length,l=new Array(c),o=0;o<c;o++)l[o]=arguments[o];f.default._validateParameters("debugMode",l);for(var u=this._registeredMethods.post.length-1;0<=u;u--)this._registeredMethods.post[u].toString()!==this._grid().toString()&&this._registeredMethods.post[u].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(u,1);l[0]===h.GRID?this.registerMethod("post",this._grid.call(this,l[1],l[2],l[3],l[4],l[5])):l[0]===h.AXES?this.registerMethod("post",this._axesIcon.call(this,l[1],l[2],l[3],l[4])):(this.registerMethod("post",this._grid.call(this,l[0],l[1],l[2],l[3],l[4])),this.registerMethod("post",this._axesIcon.call(this,l[5],l[6],l[7],l[8])))},f.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var c=this._registeredMethods.post.length-1;0<=c;c--)this._registeredMethods.post[c].toString()!==this._grid().toString()&&this._registeredMethods.post[c].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(c,1)},f.default.prototype._grid=function(c,l,o,u,m){c===void 0&&(c=this.width/2),l===void 0&&(l=Math.round(c/30)<4?4:Math.round(c/30)),o===void 0&&(o=0),u===void 0&&(u=0),m===void 0&&(m=0);var g=c/l,_=c/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var v=0;v<=l;v++)this.beginShape(this.LINES),this.vertex(-_+o,u,v*g-_+m),this.vertex(_+o,u,v*g-_+m),this.endShape();for(var x=0;x<=l;x++)this.beginShape(this.LINES),this.vertex(x*g-_+o,u,-_+m),this.vertex(x*g-_+o,u,_+m),this.endShape();this.pop()}},f.default.prototype._axesIcon=function(c,l,o,u){return c===void 0&&(c=40<this.width/20?this.width/20:40),l===void 0&&(l=-this.width/4),o===void 0&&(o=l),u===void 0&&(u=l),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(l,o,u),this.vertex(l+c,o,u),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(l,o,u),this.vertex(l,o+c,u),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(l,o,u),this.vertex(l,o,u+c),this.endShape(),this.pop()}};var w=f.default;M.default=w},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.splice":166,"core-js/modules/es.math.hypot":169,"core-js/modules/es.math.sign":170,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],318:[function(t,R,M){Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(t=t("../core/main"))&&t.__esModule?t:{default:t};p.default.prototype.ambientLight=function(f,h,b,w){this._assert3d("ambientLight"),p.default._validateParameters("ambientLight",arguments);var c=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(c._array[0],c._array[1],c._array[2]),this._renderer._enableLighting=!0,this},p.default.prototype.specularColor=function(f,h,b){this._assert3d("specularColor"),p.default._validateParameters("specularColor",arguments);var w=this.color.apply(this,arguments);return this._renderer.specularColors=[w._array[0],w._array[1],w._array[2]],this},p.default.prototype.directionalLight=function(f,h,b,w,c,l){this._assert3d("directionalLight"),p.default._validateParameters("directionalLight",arguments),f=f instanceof p.default.Color?f:this.color(f,h,b);var o,u;return b=typeof(h=arguments[arguments.length-1])=="number"?(o=arguments[arguments.length-3],u=arguments[arguments.length-2],arguments[arguments.length-1]):(o=h.x,u=h.y,h.z),h=Math.sqrt(o*o+u*u+b*b),this._renderer.directionalLightDirections.push(o/h,u/h,b/h),this._renderer.directionalLightDiffuseColors.push(f._array[0],f._array[1],f._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},p.default.prototype.pointLight=function(f,h,b,w,c,l){this._assert3d("pointLight"),p.default._validateParameters("pointLight",arguments),f=f instanceof p.default.Color?f:this.color(f,h,b);var o,u;return b=typeof(h=arguments[arguments.length-1])=="number"?(o=arguments[arguments.length-3],u=arguments[arguments.length-2],arguments[arguments.length-1]):(o=h.x,u=h.y,h.z),this._renderer.pointLightPositions.push(o,u,b),this._renderer.pointLightDiffuseColors.push(f._array[0],f._array[1],f._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},p.default.prototype.lights=function(){this._assert3d("lights");var f=this.color("rgb(128,128,128)");return this.ambientLight(f),this.directionalLight(f,0,0,-1),this},p.default.prototype.lightFalloff=function(f,h,b){return this._assert3d("lightFalloff"),p.default._validateParameters("lightFalloff",arguments),f<0&&(f=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),h<0&&(h=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),b<0&&(b=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),f===0&&h===0&&b===0&&(f=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=f,this._renderer.linearAttenuation=h,this._renderer.quadraticAttenuation=b,this},p.default.prototype.spotLight=function(f,h,b,w,c,l,o,u,m,g,_){this._assert3d("spotLight"),p.default._validateParameters("spotLight",arguments);var v,x,E,j=arguments.length;switch(j){case 11:case 10:v=this.color(f,h,b),x=new p.default.Vector(w,c,l),E=new p.default.Vector(o,u,m);break;case 9:f instanceof p.default.Color?(v=f,x=new p.default.Vector(h,b,w),E=new p.default.Vector(c,l,o),g=u,_=m):w instanceof p.default.Vector?(v=this.color(f,h,b),x=w,E=new p.default.Vector(c,l,o),g=u,_=m):o instanceof p.default.Vector?(v=this.color(f,h,b),x=new p.default.Vector(w,c,l),E=o,g=u,_=m):(v=this.color(f,h,b),x=new p.default.Vector(w,c,l),E=new p.default.Vector(o,u,m));break;case 8:E=f instanceof p.default.Color?(v=f,x=new p.default.Vector(h,b,w),new p.default.Vector(c,l,o)):w instanceof p.default.Vector?(v=this.color(f,h,b),x=w,new p.default.Vector(c,l,o)):(v=this.color(f,h,b),x=new p.default.Vector(w,c,l),o),g=u;break;case 7:f instanceof p.default.Color&&h instanceof p.default.Vector?(v=f,x=h,E=new p.default.Vector(b,w,c),g=l,_=o):f instanceof p.default.Color&&c instanceof p.default.Vector?(v=f,x=new p.default.Vector(h,b,w),E=c,g=l,_=o):w instanceof p.default.Vector&&c instanceof p.default.Vector?(v=this.color(f,h,b),x=w,E=c,g=l,_=o):E=f instanceof p.default.Color?(v=f,x=new p.default.Vector(h,b,w),new p.default.Vector(c,l,o)):w instanceof p.default.Vector?(v=this.color(f,h,b),x=w,new p.default.Vector(c,l,o)):(v=this.color(f,h,b),x=new p.default.Vector(w,c,l),o);break;case 6:w instanceof p.default.Vector&&c instanceof p.default.Vector?(v=this.color(f,h,b),x=w,E=c,g=l):f instanceof p.default.Color&&c instanceof p.default.Vector?(v=f,x=new p.default.Vector(h,b,w),E=c,g=l):f instanceof p.default.Color&&h instanceof p.default.Vector&&(v=f,x=h,E=new p.default.Vector(b,w,c),g=l);break;case 5:f instanceof p.default.Color&&h instanceof p.default.Vector&&b instanceof p.default.Vector?(v=f,x=h,E=b,g=w,_=c):w instanceof p.default.Vector&&c instanceof p.default.Vector?(v=this.color(f,h,b),x=w,E=c):f instanceof p.default.Color&&c instanceof p.default.Vector?(v=f,x=new p.default.Vector(h,b,w),E=c):f instanceof p.default.Color&&h instanceof p.default.Vector&&(v=f,x=h,E=new p.default.Vector(b,w,c));break;case 4:v=f,x=h,E=b,g=w;break;case 3:v=f,x=h,E=b;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(j<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(v._array[0],v._array[1],v._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(x.x,x.y,x.z),E.normalize(),this._renderer.spotLightDirections.push(E.x,E.y,E.z),g===void 0&&(g=Math.PI/3),_!==void 0&&_<1?(_=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):_===void 0&&(_=100),g=this._renderer._pInst._toRadians(g),this._renderer.spotLightAngle.push(Math.cos(g)),this._renderer.spotLightConc.push(_),this._renderer._enableLighting=!0,this},p.default.prototype.noLights=function(){this._assert3d("noLights");for(var f=arguments.length,h=new Array(f),b=0;b<f;b++)h[b]=arguments[b];return p.default._validateParameters("noLights",h),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this},t=p.default,M.default=t},{"../core/main":273}],319:[function(t,R,M){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(f=t("../core/main"))&&f.__esModule?f:{default:f};t("./p5.Geometry"),p.default.prototype.loadModel=function(h){p.default._validateParameters("loadModel",arguments);var b,w,c,l=h.slice(-4),o=(typeof arguments[1]=="boolean"?(b=arguments[1],w=arguments[2],c=arguments[3],arguments[4]!==void 0&&(l=arguments[4])):(b=!1,w=arguments[1],c=arguments[2],arguments[3]!==void 0&&(l=arguments[3])),new p.default.Geometry),u=(o.gid="".concat(h,"|").concat(b),this);return l.match(/\.stl$/i)?this.httpDo(h,"GET","arrayBuffer",function(m){(function(g,_){if(function(v){for(var x=new DataView(v),E=[115,111,108,105,100],j=0;j<5;j++)if(function(O,P,L){for(var z=0,N=O.length;z<N;z++)if(O[z]!==P.getUint8(L+z,!1))return;return 1}(E,x,j))return;return 1}(_))(function(v,x){for(var E,j,O,P,L,z,N,V=new DataView(x),k=V.getUint32(80,!0),H=!1,G=0;G<70;G++)V.getUint32(G,!1)===1129270351&&V.getUint8(G+4)===82&&V.getUint8(G+5)===61&&(H=!0,P=[],L=V.getUint8(G+6)/255,z=V.getUint8(G+7)/255,N=V.getUint8(G+8)/255);for(var F=0;F<k;F++){for(var W,Q=84+50*F,J=V.getFloat32(Q,!0),ee=V.getFloat32(4+Q,!0),te=V.getFloat32(8+Q,!0),se=(H&&(O=(32768&(W=V.getUint16(48+Q,!0)))==0?(E=(31&W)/31,j=(W>>5&31)/31,(W>>10&31)/31):(E=L,j=z,N)),new p.default.Vector(J,ee,te)),ce=1;ce<=3;ce++){var q=Q+12*ce;q=new p.default.Vector(V.getFloat32(q,!0),V.getFloat32(4+q,!0),V.getFloat32(8+q,!0)),v.vertices.push(q),v.vertexNormals.push(se),H&&P.push(E,j,O)}v.faces.push([3*F,3*F+1,3*F+2]),v.uvs.push([0,0],[0,0],[0,0])}})(g,_);else{if(_=new DataView(_),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");(function(v,x){for(var E,j,O="",P=[],L=0;L<x.length;++L){for(var z=x[L].trim(),N=z.split(" "),V=0;V<N.length;++V)N[V]===""&&N.splice(V,1);if(N.length!==0)switch(O){case"":if(N[0]!=="solid")return console.error(z),console.error('Invalid state "'.concat(N[0],'", should be "solid"'));O="solid";break;case"solid":if(N[0]!=="facet"||N[1]!=="normal")return console.error(z),console.error('Invalid state "'.concat(N[0],'", should be "facet normal"'));E=new p.default.Vector(parseFloat(N[2]),parseFloat(N[3]),parseFloat(N[4])),v.vertexNormals.push(E,E,E),O="facet normal";break;case"facet normal":if(N[0]!=="outer"||N[1]!=="loop")return console.error(z),console.error('Invalid state "'.concat(N[0],'", should be "outer loop"'));O="vertex";break;case"vertex":if(N[0]==="vertex")j=new p.default.Vector(parseFloat(N[1]),parseFloat(N[2]),parseFloat(N[3])),v.vertices.push(j),v.uvs.push([0,0]),P.push(v.vertices.indexOf(j));else{if(N[0]!=="endloop")return console.error(z),console.error('Invalid state "'.concat(N[0],'", should be "vertex" or "endloop"'));v.faces.push(P),P=[],O="endloop"}break;case"endloop":if(N[0]!=="endfacet")return console.error(z),console.error('Invalid state "'.concat(N[0],'", should be "endfacet"'));O="endfacet";break;case"endfacet":if(N[0]!=="endsolid"){if(N[0]!=="facet"||N[1]!=="normal")return console.error(z),console.error('Invalid state "'.concat(N[0],'", should be "endsolid" or "facet normal"'));E=new p.default.Vector(parseFloat(N[2]),parseFloat(N[3]),parseFloat(N[4])),v.vertexNormals.push(E,E,E),O="facet normal"}break;default:console.error('Invalid state "'.concat(O,'"'))}}})(g,_=new TextDecoder("utf-8").decode(_).split(`
`))}})(o,m),b&&o.normalize(),u._decrementPreload(),typeof w=="function"&&w(o)},c):l.match(/\.obj$/i)?this.loadStrings(h,function(m){for(var g=o,_=m,v={v:[],vt:[],vn:[]},x={},E=0;E<_.length;++E){var j=_[E].trim().split(/\b\s+/);if(0<j.length){if(j[0]==="v"||j[0]==="vn"){var O=new p.default.Vector(parseFloat(j[1]),parseFloat(j[2]),parseFloat(j[3]));v[j[0]].push(O)}else if(j[0]==="vt")O=[parseFloat(j[1]),1-parseFloat(j[2])],v[j[0]].push(O);else if(j[0]==="f")for(var P=3;P<j.length;++P){for(var L=[],z=[1,P-1,P],N=0;N<z.length;++N){var V=j[z[N]],k=0;if(x[V]!==void 0)k=x[V];else{for(var H=V.split("/"),G=0;G<H.length;G++)H[G]=parseInt(H[G])-1;k=x[V]=g.vertices.length,g.vertices.push(v.v[H[0]].copy()),v.vt[H[1]]?g.uvs.push(v.vt[H[1]].slice()):g.uvs.push([0,0]),v.vn[H[2]]&&g.vertexNormals.push(v.vn[H[2]].copy())}L.push(k)}L[0]!==L[1]&&L[0]!==L[2]&&L[1]!==L[2]&&g.faces.push(L)}}}g.vertexNormals.length===0&&g.computeNormals(),b&&o.normalize(),u._decrementPreload(),typeof w=="function"&&w(o)},c):(p.default._friendlyFileLoadError(3,h),c?c():p.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),o},p.default.prototype.model=function(h){this._assert3d("model"),p.default._validateParameters("model",arguments),0<h.vertices.length&&(this._renderer.geometryInHash(h.gid)||(h.edges.length===0&&h._makeTriangleEdges(),h._edgesToVertices(),this._renderer.createBuffers(h.gid,h)),this._renderer.drawBuffers(h.gid))};var f=p.default;M.default=f},{"../core/main":273,"./p5.Geometry":323,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.match":191,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199}],320:[function(t,R,M){function p(c){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}function f(c){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(l){return p(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":p(l)})(c)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var h=(w=t("../core/main"))&&w.__esModule?w:{default:w},b=function(c){if(c&&c.__esModule)return c;if(c===null||f(c)!=="object"&&typeof c!="function")return{default:c};var l=function(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,_)}();if(l&&l.has(c))return l.get(c);var o,u={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in c){var g;Object.prototype.hasOwnProperty.call(c,o)&&((g=m?Object.getOwnPropertyDescriptor(c,o):null)&&(g.get||g.set)?Object.defineProperty(u,o,g):u[o]=c[o])}return u.default=c,l&&l.set(c,u),u}(t("../core/constants"));t("./p5.Texture"),h.default.prototype.loadShader=function(c,l,o,u){function m(){_._decrementPreload(),o&&o(g)}h.default._validateParameters("loadShader",arguments),u=u||console.error;var g=new h.default.Shader,_=this,v=!1,x=!1;return this.loadStrings(c,function(E){g._vertSrc=E.join(`
`),x=!0,v&&m()},u),this.loadStrings(l,function(E){g._fragSrc=E.join(`
`),v=!0,x&&m()},u),g},h.default.prototype.createShader=function(c,l){return this._assert3d("createShader"),h.default._validateParameters("createShader",arguments),new h.default.Shader(this._renderer,c,l)},h.default.prototype.shader=function(c){return this._assert3d("shader"),h.default._validateParameters("shader",arguments),c._renderer===void 0&&(c._renderer=this._renderer),c.init(),c.isStrokeShader()?this._renderer.userStrokeShader=c:(this._renderer.userFillShader=c,this._renderer._useNormalMaterial=!1),this},h.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},h.default.prototype.texture=function(c){return this._assert3d("texture"),h.default._validateParameters("texture",arguments),c.gifProperties&&c._animateGif(this),this._renderer.drawMode=b.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=c,this._renderer._setProperty("_doFill",!0),this},h.default.prototype.textureMode=function(c){c!==b.IMAGE&&c!==b.NORMAL?console.warn("You tried to set ".concat(c," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=c},h.default.prototype.textureWrap=function(c){var l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:c,o=(this._renderer.textureWrapX=c,this._renderer.textureWrapY=l,!0),u=!1,m=void 0;try{for(var g,_=this._renderer.textures.values()[Symbol.iterator]();!(o=(g=_.next()).done);o=!0)g.value.setWrapMode(c,l)}catch(v){u=!0,m=v}finally{try{o||_.return==null||_.return()}finally{if(u)throw m}}},h.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var c=arguments.length,l=new Array(c),o=0;o<c;o++)l[o]=arguments[o];return h.default._validateParameters("normalMaterial",l),this._renderer.drawMode=b.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},h.default.prototype.ambientMaterial=function(c,l,o){this._assert3d("ambientMaterial"),h.default._validateParameters("ambientMaterial",arguments);var u=h.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=u._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},h.default.prototype.emissiveMaterial=function(c,l,o,u){this._assert3d("emissiveMaterial"),h.default._validateParameters("emissiveMaterial",arguments);var m=h.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=m._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},h.default.prototype.specularMaterial=function(c,l,o,u){this._assert3d("specularMaterial"),h.default._validateParameters("specularMaterial",arguments);var m=h.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=m._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},h.default.prototype.shininess=function(c){return this._assert3d("shininess"),h.default._validateParameters("shininess",arguments),this._renderer._useShininess=c=c<1?1:c,this},h.default.RendererGL.prototype._applyColorBlend=function(c){var l=this.GL,o=this.drawMode===b.TEXTURE;return(o=this.userFillShader||this.userStrokeShader||this.userPointShader||o||this.curBlendMode!==b.BLEND||c[c.length-1]<1||this._isErasing)!==this._isBlending&&(o||this.curBlendMode!==b.BLEND&&this.curBlendMode!==b.ADD?l.enable(l.BLEND):l.disable(l.BLEND),l.depthMask(!0),this._isBlending=o),this._applyBlendMode(),c},h.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var c=this.GL;switch(this.curBlendMode){case b.BLEND:c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case b.ADD:c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ONE,c.ONE);break;case b.REMOVE:c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ZERO,c.ONE_MINUS_SRC_ALPHA);break;case b.MULTIPLY:c.blendEquation(c.FUNC_ADD),c.blendFunc(c.DST_COLOR,c.ONE_MINUS_SRC_ALPHA);break;case b.SCREEN:c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_COLOR);break;case b.EXCLUSION:c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD),c.blendFuncSeparate(c.ONE_MINUS_DST_COLOR,c.ONE_MINUS_SRC_COLOR,c.ONE,c.ONE);break;case b.REPLACE:c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ONE,c.ZERO);break;case b.SUBTRACT:c.blendEquationSeparate(c.FUNC_REVERSE_SUBTRACT,c.FUNC_ADD),c.blendFuncSeparate(c.ONE,c.ONE,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case b.DARKEST:this.blendExt?(c.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,c.FUNC_ADD),c.blendFuncSeparate(c.ONE,c.ONE,c.ONE,c.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case b.LIGHTEST:this.blendExt?(c.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,c.FUNC_ADD),c.blendFuncSeparate(c.ONE,c.ONE,c.ONE,c.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var w=h.default;M.default=w},{"../core/constants":262,"../core/main":273,"./p5.Texture":330,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],321:[function(t,R,M){t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(h,b){for(var w=0;w<b.length;w++){var c=b[w];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,c.key,c)}}p.default.prototype.camera=function(){var h;this._assert3d("camera");for(var b=arguments.length,w=new Array(b),c=0;c<b;c++)w[c]=arguments[c];return p.default._validateParameters("camera",w),(h=this._renderer._curCamera).camera.apply(h,w),this},p.default.prototype.perspective=function(){var h;this._assert3d("perspective");for(var b=arguments.length,w=new Array(b),c=0;c<b;c++)w[c]=arguments[c];return p.default._validateParameters("perspective",w),(h=this._renderer._curCamera).perspective.apply(h,w),this},p.default.prototype.ortho=function(){var h;this._assert3d("ortho");for(var b=arguments.length,w=new Array(b),c=0;c<b;c++)w[c]=arguments[c];return p.default._validateParameters("ortho",w),(h=this._renderer._curCamera).ortho.apply(h,w),this},p.default.prototype.frustum=function(){var h;this._assert3d("frustum");for(var b=arguments.length,w=new Array(b),c=0;c<b;c++)w[c]=arguments[c];return p.default._validateParameters("frustum",w),(h=this._renderer._curCamera).frustum.apply(h,w),this},p.default.prototype.createCamera=function(){this._assert3d("createCamera");var h=new p.default.Camera(this._renderer);return h._computeCameraDefaultSettings(),h._setDefaultCamera(),this._renderer._curCamera=h},p.default.Camera=function(){function h(c){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this._renderer=c,this.cameraType="default",this.cameraMatrix=new p.default.Matrix,this.projMatrix=new p.default.Matrix,this.yScale=1}var b,w;return b=h,(w=[{key:"perspective",value:function(c,l,o,u){this.cameraType=0<arguments.length?"custom":"default",c===void 0?(c=this.defaultCameraFOV,this.cameraFOV=c):this.cameraFOV=this._renderer._pInst._toRadians(c),l===void 0&&(l=this.defaultAspectRatio),o===void 0&&(o=this.defaultCameraNear),u===void 0&&(u=this.defaultCameraFar),o<=1e-4&&(o=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),u<o&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=l,this.cameraNear=o,this.cameraFar=u,this.projMatrix=p.default.Matrix.identity(),c=1/Math.tan(this.cameraFOV/2);var m=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(c/l,0,0,0,0,-c*this.yScale,0,0,0,0,(u+o)*m,-1,0,0,2*u*o*m,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])}},{key:"ortho",value:function(c,l,o,u,m,g){c===void 0&&(c=-this._renderer.width/2),l===void 0&&(l=+this._renderer.width/2),o===void 0&&(o=-this._renderer.height/2),u===void 0&&(u=+this._renderer.height/2),m===void 0&&(m=0),g===void 0&&(g=Math.max(this._renderer.width,this._renderer.height)),this.cameraNear=m;var _=l-c,v=u-o,x=(this.cameraFar=g)-m,E=2/_,j=2/v*this.yScale,O=-2/x;l=-(l+c)/_,c=-(u+o)/v,_=-(g+m)/x,this.projMatrix=p.default.Matrix.identity(),this.projMatrix.set(E,0,0,0,0,-j,0,0,0,0,O,0,l,c,_,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"}},{key:"frustum",value:function(c,l,o,u,m,g){c===void 0&&(c=.05*-this._renderer.width),l===void 0&&(l=.05*+this._renderer.width),o===void 0&&(o=.05*+this._renderer.height),u===void 0&&(u=.05*-this._renderer.height),m===void 0&&(m=this.defaultCameraNear),g===void 0&&(g=this.defaultCameraFar),this.cameraNear=m;var _=l-c,v=u-o,x=(this.cameraFar=g)-m,E=2*m/_,j=2*m/v*this.yScale,O=-2*g*m/x;l=(l+c)/_,c=(u+o)/v,_=-(g+m)/x,this.projMatrix=p.default.Matrix.identity(),this.projMatrix.set(E,0,0,0,0,-j,0,0,l,c,_,-1,0,0,O,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"}},{key:"_rotateView",value:function(c,l,o,u){var m=this.centerX,g=this.centerY,_=this.centerZ,v=(m-=this.eyeX,g-=this.eyeY,_-=this.eyeZ,p.default.Matrix.identity(this._renderer._pInst));(c=(v.rotate(this._renderer._pInst._toRadians(c),l,o,u),[m*v.mat4[0]+g*v.mat4[4]+_*v.mat4[8],m*v.mat4[1]+g*v.mat4[5]+_*v.mat4[9],m*v.mat4[2]+g*v.mat4[6]+_*v.mat4[10]]))[0]+=this.eyeX,c[1]+=this.eyeY,c[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,c[0],c[1],c[2],this.upX,this.upY,this.upZ)}},{key:"pan",value:function(c){var l=this._getLocalAxes();this._rotateView(c,l.y[0],l.y[1],l.y[2])}},{key:"tilt",value:function(c){var l=this._getLocalAxes();this._rotateView(c,l.x[0],l.x[1],l.x[2])}},{key:"lookAt",value:function(c,l,o){this.camera(this.eyeX,this.eyeY,this.eyeZ,c,l,o,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(c,l,o,u,m,g,_,v,x){return c===void 0&&(c=this.defaultEyeX,l=this.defaultEyeY,o=this.defaultEyeZ,u=c,m=l,v=1,x=_=g=0),this.eyeX=c,this.eyeY=l,this.eyeZ=o,u!==void 0&&(this.centerX=u,this.centerY=m,this.centerZ=g),_!==void 0&&(this.upX=_,this.upY=v,this.upZ=x),u=this._getLocalAxes(),this.cameraMatrix.set(u.x[0],u.y[0],u.z[0],0,u.x[1],u.y[1],u.z[1],0,u.x[2],u.y[2],u.z[2],0,0,0,0,1),m=-c,this.cameraMatrix.translate([m,-l,-o]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this}},{key:"move",value:function(c,l,o){c=[(u=this._getLocalAxes()).x[0]*c,u.x[1]*c,u.x[2]*c],l=[u.y[0]*l,u.y[1]*l,u.y[2]*l];var u=[u.z[0]*o,u.z[1]*o,u.z[2]*o];this.camera(this.eyeX+c[0]+l[0]+u[0],this.eyeY+c[1]+l[1]+u[1],this.eyeZ+c[2]+l[2]+u[2],this.centerX+c[0]+l[0]+u[0],this.centerY+c[1]+l[1]+u[1],this.centerZ+c[2]+l[2]+u[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(c,l,o){var u=c-this.eyeX,m=l-this.eyeY,g=o-this.eyeZ;this.camera(c,l,o,this.centerX+u,this.centerY+m,this.centerZ+g,this.upX,this.upY,this.upZ)}},{key:"set",value:function(c){for(var l=0,o=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType"];l<o.length;l++){var u=o[l];this[u]=c[u]}this.cameraMatrix=c.cameraMatrix.copy(),this.projMatrix=c.projMatrix.copy(),this._isActive()&&(this._renderer.uMVMatrix.mat4=this.cameraMatrix.mat4.slice(),this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())}},{key:"slerp",value:function(c,l,o){var u,m,g,_,v,x,E,j,O,P,L,z,N,V,k,H,G,F;o===0?this.set(c):o===1?this.set(l):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=c.projMatrix.mat4[0]*Math.pow(l.projMatrix.mat4[0]/c.projMatrix.mat4[0],o),this.projMatrix.mat4[5]=c.projMatrix.mat4[5]*Math.pow(l.projMatrix.mat4[5]/c.projMatrix.mat4[5],o),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),_=new p.default.Vector(c.eyeX,c.eyeY,c.eyeZ),v=new p.default.Vector(l.eyeX,l.eyeY,l.eyeZ),H=new p.default.Vector(c.centerX,c.centerY,c.centerZ),F=new p.default.Vector(l.centerX,l.centerY,l.centerZ),g=p.default.Vector.dist(_,H),u=p.default.Vector.dist(v,F),u=g*Math.pow(u/g,o),g=p.default.Vector.sub(_,v),m=1,1e-6<(G=(V=_.copy().sub(v).sub(H).add(F)).magSq())&&(m=p.default.Vector.dot(g,V)/G,m=Math.max(0,Math.min(m,1))),g=p.default.Vector.lerp(p.default.Vector.lerp(_,H,m),p.default.Vector.lerp(v,F,m),o),V=c.cameraMatrix.createSubMatrix3x3(),G=l.cameraMatrix.createSubMatrix3x3(),_=V.column(2),H=G.column(2),v=V.column(1),F=G.column(1),c=new p.default.Vector,l=new p.default.Vector,x=new p.default.Vector,E=new p.default.Vector,1-(j=.5*((V=(G=G.mult3x3(V.copy().transpose3x3())).diagonal())[0]+V[1]+V[2]-1))<1e-7?(c.set(p.default.Vector.lerp(_,H,o)).normalize(),x.set(c).mult(m*u).add(g),E.set(c).mult((m-1)*u).add(g),l.set(p.default.Vector.lerp(v,F,o)).normalize()):(H=1/(1-j),F=Math.max(V[0],V[1],V[2]),z=G.mat3[1]+G.mat3[3],N=G.mat3[2]+G.mat3[6],k=G.mat3[5]+G.mat3[7],F=F===V[0]?(P=.5*z*(H/=O=Math.sqrt((V[0]-j)*H)),L=.5*N*H,.5*(G.mat3[7]-G.mat3[5])/O):F===V[1]?(L=.5*k*(H/=P=Math.sqrt((V[1]-j)*H)),O=.5*z*H,.5*(G.mat3[2]-G.mat3[6])/P):(O=.5*N*(H/=L=Math.sqrt((V[2]-j)*H)),P=.5*k*H,.5*(G.mat3[3]-G.mat3[1])/L),z=o*Math.atan2(F,j),N=Math.cos(z),V=Math.sin(z),(F=new p.default.Matrix("mat3",[N+(k=1-N)*O*O,k*(H=O*P)-V*L,k*(G=L*O)+V*P,k*H+V*L,N+k*P*P,k*(o=P*L)-V*O,k*G-V*P,k*o+V*O,N+k*L*L])).multiplyVec3(_,c),x.set(c).mult(m*u).add(g),E.set(c).mult((m-1)*u).add(g),F.multiplyVec3(v,l)),this.camera(x.x,x.y,x.z,E.x,E.y,E.z,l.x,l.y,l.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)}},{key:"copy",value:function(){var c=new p.default.Camera(this._renderer);return c.cameraFOV=this.cameraFOV,c.aspectRatio=this.aspectRatio,c.eyeX=this.eyeX,c.eyeY=this.eyeY,c.eyeZ=this.eyeZ,c.centerX=this.centerX,c.centerY=this.centerY,c.centerZ=this.centerZ,c.upX=this.upX,c.upY=this.upY,c.upZ=this.upZ,c.cameraNear=this.cameraNear,c.cameraFar=this.cameraFar,c.cameraType=this.cameraType,c.cameraMatrix=this.cameraMatrix.copy(),c.projMatrix=this.projMatrix.copy(),c}},{key:"_getLocalAxes",value:function(){var c,l=this.eyeX-this.centerX,o=this.eyeY-this.centerY,u=this.eyeZ-this.centerZ,m=((m=Math.sqrt(l*l+o*o+u*u))!==0&&(l/=m,o/=m,u/=m),this.upX),g=(x=this.upY)*u-(E=this.upZ)*o,_=-m*u+E*l,v=m*o-x*l,x=(m=o*v-u*_,-l*v+u*g),E=l*_-o*g;return(c=((c=Math.sqrt(g*g+_*_+v*v))!==0&&(g/=c,_/=c,v/=c),Math.sqrt(m*m+x*x+E*E)))!==0&&(m/=c,x/=c,E/=c),{x:[g,_,v],y:[m,x,E],z:[l,o,u]}}},{key:"_orbit",value:function(c,l,o){var u=this.eyeX-this.centerX,m=this.eyeY-this.centerY,g=this.eyeZ-this.centerZ,_=Math.hypot(u,m,g),v=(u=new p.default.Vector(u,m,g).normalize(),m=new p.default.Vector(this.upX,this.upY,this.upZ).normalize(),g=new p.default.Vector.cross(m,u).normalize(),new p.default.Vector.cross(g,m));(_=(_*=Math.pow(10,o))<this.cameraNear?this.cameraNear:_)>this.cameraFar&&(_=this.cameraFar),o=Math.acos(Math.max(-1,Math.min(1,p.default.Vector.dot(u,m))))+l,l=c,(o<=0||o>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),m.mult(Math.cos(o)),v.mult(Math.cos(l)*Math.sin(o)),g.mult(Math.sin(l)*Math.sin(o)),u.set(m).add(v).add(g),this.eyeX=_*u.x+this.centerX,this.eyeY=_*u.y+this.centerY,this.eyeZ=_*u.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(c,l,o){var u=this.eyeX-this.centerX,m=this.eyeY-this.centerY,g=this.eyeZ-this.centerZ,_=Math.hypot(u,m,g),v=(u=new p.default.Vector(u,m,g).normalize(),m=new p.default.Vector(this.upX,this.upY,this.upZ),g=new p.default.Vector.cross(m,u).normalize(),new p.default.Vector.cross(u,g)),x=Math.atan2(l,c),E=(x=(v.mult(Math.sin(x)),g.mult(Math.cos(x)).add(v),Math.sqrt(c*c+l*l)),v=new p.default.Vector.cross(u,g),c=((_=(_*=Math.pow(10,o))<this.cameraNear?this.cameraNear:_)>this.cameraFar&&(_=this.cameraFar),Math.cos(x)),l=Math.sin(x),(o=m.dot(u))*c+(x=m.dot(g))*l);o=-o*l+x*c,x=m.dot(v),m.x=E*u.x+o*g.x+x*v.x,m.y=E*u.y+o*g.y+x*v.y,m.z=E*u.z+o*g.z+x*v.z,g.mult(-l),u.mult(c).add(g).mult(_),this.camera(u.x+this.centerX,u.y+this.centerY,u.z+this.centerZ,this.centerX,this.centerY,this.centerZ,m.x,m.y,m.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&f(b.prototype,w),h}(),p.default.prototype.setCamera=function(h){this._renderer._curCamera=h,this._renderer.uPMatrix.set(h.projMatrix.mat4[0],h.projMatrix.mat4[1],h.projMatrix.mat4[2],h.projMatrix.mat4[3],h.projMatrix.mat4[4],h.projMatrix.mat4[5],h.projMatrix.mat4[6],h.projMatrix.mat4[7],h.projMatrix.mat4[8],h.projMatrix.mat4[9],h.projMatrix.mat4[10],h.projMatrix.mat4[11],h.projMatrix.mat4[12],h.projMatrix.mat4[13],h.projMatrix.mat4[14],h.projMatrix.mat4[15])},t=p.default.Camera,M.default=t},{"../core/main":273,"core-js/modules/es.array.slice":164,"core-js/modules/es.math.hypot":169,"core-js/modules/es.string.sub":198}],322:[function(t,R,M){function p(P){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(P)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.reflect.get"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.reflect.get"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var f=(O=t("../core/main"))&&O.__esModule?O:{default:O},h=function(P){if(P&&P.__esModule)return P;if(P===null||o(P)!=="object"&&typeof P!="function")return{default:P};var L=function(){var H;return typeof WeakMap!="function"?null:(H=new WeakMap,H)}();if(L&&L.has(P))return L.get(P);var z,N={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(z in P){var k;Object.prototype.hasOwnProperty.call(P,z)&&((k=V?Object.getOwnPropertyDescriptor(P,z):null)&&(k.get||k.set)?Object.defineProperty(N,z,k):N[z]=P[z])}return N.default=P,L&&L.set(P,N),N}(t("../core/constants")),b=t("./p5.Texture"),w=t("./p5.RendererGL");function c(P,L){return function(z){if(Array.isArray(z))return z}(P)||function(z,N){if(Symbol.iterator in Object(z)||Object.prototype.toString.call(z)==="[object Arguments]"){var V=[],k=!0,H=!1,G=void 0;try{for(var F,W=z[Symbol.iterator]();!(k=(F=W.next()).done)&&(V.push(F.value),!N||V.length!==N);k=!0);}catch(Q){H=!0,G=Q}finally{try{k||W.return==null||W.return()}finally{if(H)throw G}}return V}}(P,L)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(P,L,z){return L in P?Object.defineProperty(P,L,{value:z,enumerable:!0,configurable:!0,writable:!0}):P[L]=z,P}function o(P){return(o=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(L){return p(L)}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":p(L)})(P)}function u(P,L){if(!(P instanceof L))throw new TypeError("Cannot call a class as a function")}function m(P,L){for(var z=0;z<L.length;z++){var N=L[z];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(P,N.key,N)}}function g(P,L,z){L&&m(P.prototype,L)}function _(P,L,z){return(_=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(N,V,k){if(N=function(H,G){for(;!Object.prototype.hasOwnProperty.call(H,G)&&(H=x(H))!==null;);return H}(N,V))return(N=Object.getOwnPropertyDescriptor(N,V)).get?N.get.call(k):N.value})(P,L,z||P)}function v(P,L){return(v=Object.setPrototypeOf||function(z,N){return z.__proto__=N,z})(P,L)}function x(P){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(L){return L.__proto__||Object.getPrototypeOf(L)})(P)}var E=function(P){var L=N;if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(P&&P.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),P&&v(L,P);var z=function(V){return function(){var k,H=x(V);if(k=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(k=x(this).constructor,Reflect.construct(H,arguments,k)):H.apply(this,arguments),H=this,!k||o(k)!=="object"&&typeof k!="function"){if(H!==void 0)return H;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return k}}(N);function N(V){var k;return u(this,N),(k=z.call(this,V.target._renderer)).fbo=V,k.yScale=-1,k}return g(N,[{key:"_computeCameraDefaultSettings",value:function(){_(x(N.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultEyeZ=this.fbo.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_resize",value:function(){this.cameraType==="default"?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this.fbo.width/this.fbo.height)}}]),N}(f.default.Camera),j=(f.default.FramebufferCamera=E,function(){function P(L,z){u(this,P),this.framebuffer=L,this.property=z}return g(P,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),P}()),O=(f.default.FramebufferTexture=j,function(){function P(L){var z=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(u(this,P),this.target=L,this.target._renderer.framebuffers.add(this),this.pixels=[],this.format=z.format||h.UNSIGNED_BYTE,this.channels=z.channels||(L._renderer._pInst._glAttributes.alpha?h.RGBA:h.RGB),this.useDepth=z.depth===void 0||z.depth,this.depthFormat=z.depthFormat||h.FLOAT,this.textureFiltering=z.textureFiltering||h.LINEAR,z.antialias===void 0?this.antialiasSamples=L._renderer._pInst._glAttributes.antialias?2:0:typeof z.antialias=="number"?this.antialiasSamples=z.antialias:this.antialiasSamples=z.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&L.webglVersion!==h.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),z.width&&z.height?(this.width=z.width,this.height=z.height,this.autoSized=!1):(z.width===void 0!=(z.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=L.width,this.height=L.height,this.autoSized=!0),this.density=z.density||L.pixelDensity(),z=L._renderer.GL,this.gl=z,this._checkIfFormatsAvailable(),this.framebuffer=z.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=z.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures(),L=this.target._renderer._curCamera,this.defaultCamera=this.createCamera(),this.target._renderer._curCamera=L}return g(P,[{key:"resize",value:function(L,z){this.autoSized=!1,this.width=L,this.height=z,this._handleResize()}},{key:"pixelDensity",value:function(L){if(!L)return this.density;this.autoSized=!1,this.density=L,this._handleResize()}},{key:"autoSized",value:function(L){if(L===void 0)return this.autoSized;this.autoSized=L,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var L=this.gl;(L=(this.useDepth&&this.target.webglVersion===h.WEBGL&&!L.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===h.WEBGL&&this.depthFormat===h.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=h.UNSIGNED_INT),[h.UNSIGNED_BYTE,h.FLOAT,h.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=h.UNSIGNED_BYTE),this.useDepth&&![h.UNSIGNED_INT,h.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=h.FLOAT),(0,b.checkWebGLCapabilities)(this.target._renderer))).float||this.format!==h.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=h.UNSIGNED_BYTE),this.useDepth&&!L.float&&this.depthFormat===h.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=h.UNSIGNED_INT),L.halfFloat||this.format!==h.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=h.UNSIGNED_BYTE),this.channels===h.RGB&&[h.FLOAT,h.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=h.RGBA)}},{key:"_recreateTextures",value:function(){var L=this.gl,z=(this._updateSize(),L.getParameter(L.TEXTURE_BINDING_2D)),N=L.getParameter(L.FRAMEBUFFER_BINDING);if(!(k=L.createTexture()))throw new Error("Unable to create color texture");L.bindTexture(L.TEXTURE_2D,k);var V=this._glColorFormat();if(L.texImage2D(L.TEXTURE_2D,0,V.internalFormat,this.width*this.density,this.height*this.density,0,V.format,V.type,null),this.colorTexture=k,L.bindFramebuffer(L.FRAMEBUFFER,this.framebuffer),L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,k,0),this.useDepth){var k;if(!(k=L.createTexture()))throw new Error("Unable to create depth texture");var H=this._glDepthFormat();L.bindTexture(L.TEXTURE_2D,k),L.texImage2D(L.TEXTURE_2D,0,H.internalFormat,this.width*this.density,this.height*this.density,0,H.format,H.type,null),L.framebufferTexture2D(L.FRAMEBUFFER,L.DEPTH_ATTACHMENT,L.TEXTURE_2D,k,0),this.depthTexture=k}this.antialias&&(this.colorRenderbuffer=L.createRenderbuffer(),L.bindRenderbuffer(L.RENDERBUFFER,this.colorRenderbuffer),L.renderbufferStorageMultisample(L.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,L.getParameter(L.MAX_SAMPLES))),V.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(H=this._glDepthFormat(),this.depthRenderbuffer=L.createRenderbuffer(),L.bindRenderbuffer(L.RENDERBUFFER,this.depthRenderbuffer),L.renderbufferStorageMultisample(L.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,L.getParameter(L.MAX_SAMPLES))),H.internalFormat,this.width*this.density,this.height*this.density)),L.bindFramebuffer(L.FRAMEBUFFER,this.aaFramebuffer),L.framebufferRenderbuffer(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&L.framebufferRenderbuffer(L.FRAMEBUFFER,L.DEPTH_ATTACHMENT,L.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new j(this,"depthTexture"),k=L.NEAREST,this.depthP5Texture=new f.default.Texture(this.target._renderer,this.depth,{minFilter:k,magFilter:k}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new j(this,"colorTexture"),V=this.textureFiltering===h.LINEAR?L.LINEAR:L.NEAREST,this.colorP5Texture=new f.default.Texture(this.target._renderer,this.color,{glMinFilter:V,glMagFilter:V}),this.target._renderer.textures.set(this.color,this.colorP5Texture),L.bindTexture(L.TEXTURE_2D,z),L.bindFramebuffer(L.FRAMEBUFFER,N)}},{key:"_glColorFormat",value:function(){var L,z,N=this.gl,V=this.format===h.FLOAT?N.FLOAT:this.format===h.HALF_FLOAT?this.target.webglVersion===h.WEBGL2?N.HALF_FLOAT:N.getExtension("OES_texture_half_float").HALF_FLOAT_OES:N.UNSIGNED_BYTE,k=this.channels===h.RGBA?N.RGBA:N.RGB;return{internalFormat:this.target.webglVersion===h.WEBGL2?(l(z={},N.FLOAT,l({},N.RGBA,N.RGBA32F)),l(z,N.HALF_FLOAT,l({},N.RGBA,N.RGBA16F)),l(z,N.UNSIGNED_BYTE,(l(L={},N.RGBA,N.RGBA8),l(L,N.RGB,N.RGB8),L)),z[V][k]):this.format===h.HALF_FLOAT?N.RGBA:k,format:k,type:V}}},{key:"_glDepthFormat",value:function(){var L=this.gl,z=this.depthFormat===h.FLOAT?L.FLOAT:L.UNSIGNED_INT,N=L.DEPTH_COMPONENT;return{internalFormat:L=this.target.webglVersion===h.WEBGL2?this.depthFormat===h.FLOAT?L.DEPTH_COMPONENT32F:L.DEPTH_COMPONENT24:L.DEPTH_COMPONENT,format:N,type:z}}},{key:"_updateSize",value:function(){this.autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this.autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var L=this.color,z=this.depth,N=this.colorRenderbuffer,V=this.depthRenderbuffer;this._deleteTexture(L),z&&this._deleteTexture(z),L=this.gl,N&&L.deleteRenderbuffer(N),V&&L.deleteRenderbuffer(V),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var L=new E(this);return L._computeCameraDefaultSettings(),L._setDefaultCamera(),this.target._renderer._curCamera=L}},{key:"_deleteTexture",value:function(L){this.gl.deleteTexture(L.rawTexture()),this.target._renderer.textures.delete(L)}},{key:"remove",value:function(){var L=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),L.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&L.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&L.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&L.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){var L=this.gl;this.prevFramebuffer=L.getParameter(L.FRAMEBUFFER_BINDING),this.antialias?L.bindFramebuffer(L.FRAMEBUFFER,this.aaFramebuffer):L.bindFramebuffer(L.FRAMEBUFFER,this.framebuffer),this.prevViewport=L.getParameter(L.VIEWPORT),L.viewport(0,0,this.width*this.density,this.height*this.density),this.target.push(),this.target.setCamera(this.defaultCamera),this.target._renderer.uMVMatrix.set(this.target._renderer._curCamera.cameraMatrix.mat4[0],this.target._renderer._curCamera.cameraMatrix.mat4[1],this.target._renderer._curCamera.cameraMatrix.mat4[2],this.target._renderer._curCamera.cameraMatrix.mat4[3],this.target._renderer._curCamera.cameraMatrix.mat4[4],this.target._renderer._curCamera.cameraMatrix.mat4[5],this.target._renderer._curCamera.cameraMatrix.mat4[6],this.target._renderer._curCamera.cameraMatrix.mat4[7],this.target._renderer._curCamera.cameraMatrix.mat4[8],this.target._renderer._curCamera.cameraMatrix.mat4[9],this.target._renderer._curCamera.cameraMatrix.mat4[10],this.target._renderer._curCamera.cameraMatrix.mat4[11],this.target._renderer._curCamera.cameraMatrix.mat4[12],this.target._renderer._curCamera.cameraMatrix.mat4[13],this.target._renderer._curCamera.cameraMatrix.mat4[14],this.target._renderer._curCamera.cameraMatrix.mat4[15])}},{key:"end",value:function(){var L=this.gl;if(this.antialias){L.bindFramebuffer(L.READ_FRAMEBUFFER,this.aaFramebuffer),L.bindFramebuffer(L.DRAW_FRAMEBUFFER,this.framebuffer);var z=[[L.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]];this.useDepth&&z.push([L.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var N=0,V=z;N<V.length;N++){var k=(H=c(V[N],2))[0],H=H[1];L.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,k,H)}}L.bindFramebuffer(L.FRAMEBUFFER,this.prevFramebuffer),L.viewport.apply(L,function(G){return function(F){if(Array.isArray(F)){for(var W=0,Q=new Array(F.length);W<F.length;W++)Q[W]=F[W];return Q}}(G)||function(F){if(Symbol.iterator in Object(F)||Object.prototype.toString.call(F)==="[object Arguments]")return Array.from(F)}(G)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(this.prevViewport)),this.target.pop()}},{key:"draw",value:function(L){this.begin(),L(),this.end()}},{key:"loadPixels",value:function(){var L=this.gl,z=L.getParameter(L.FRAMEBUFFER_BINDING),N=(L.bindFramebuffer(L.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,w.readPixelsWebGL)(this.pixels,L,this.framebuffer,0,0,this.width*this.density,this.height*this.density,N.format,N.type),L.bindFramebuffer(L.FRAMEBUFFER,z)}},{key:"get",value:function(L,z,N,V){f.default._validateParameters("p5.Framebuffer.get",arguments);var k=this._glColorFormat();if(L===void 0&&z===void 0)z=L=0,N=this.width,V=this.height;else if(N===void 0&&V===void 0)return(L<0||z<0||L>=this.width||z>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),L=this.target.constrain(L,0,this.width-1),z=this.target.constrain(z,0,this.height-1)),(0,w.readPixelWebGL)(this.gl,this.framebuffer,L*this.density,z*this.density,k.format,k.type);L=this.target.constrain(L,0,this.width-1),z=this.target.constrain(z,0,this.height-1),N=this.target.constrain(N,1,this.width-L),V=this.target.constrain(V,1,this.height-z);for(var H=(0,w.readPixelsWebGL)(void 0,this.gl,this.framebuffer,L*this.density,z*this.density,N*this.density,V*this.density,k.format,k.type),G=new Uint8ClampedArray(N*V*this.density*this.density*4),F=(G.fill(255),k.type===this.gl.RGB?3:4),W=0;W<V*this.density;W++)for(var Q=0;Q<N*this.density;Q++)for(var J=0;J<4;J++){var ee,te=4*(W*N*this.density+Q)+J;J<F&&(ee=F==4?te:(W*N*this.density+Q)*F+J,G[te]=H[ee])}return(L=new f.default.Image(N*this.density,V*this.density)).imageData=L.canvas.getContext("2d").createImageData(L.width,L.height),L.imageData.data.set(G),L.pixels=L.imageData.data,L.updatePixels(),this.density!==1&&L.resize(N,V),L}},{key:"updatePixels",value:function(){var L=this.gl,z=(this.colorP5Texture.bindTexture(),this._glColorFormat()),N=z.format===L.RGBA?4:3,V=(N=this.width*this.height*this.density*this.density*N,z.type===L.UNSIGNED_BYTE?Uint8Array:Float32Array);if(!(this.pixels instanceof V)||this.pixels.length!==N)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");L.texImage2D(L.TEXTURE_2D,0,z.internalFormat,this.width*this.density,this.height*this.density,0,z.format,z.type,this.pixels),this.colorP5Texture.unbindTexture(),this.prevFramebuffer=L.getParameter(L.FRAMEBUFFER_BINDING),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(L.clearDepth(1),L.clear(L.DEPTH_BUFFER_BIT)),this.end()):(L.bindFramebuffer(L.FRAMEBUFFER,this.framebuffer),this.useDepth&&(L.clearDepth(1),L.clear(L.DEPTH_BUFFER_BIT)),L.bindFramebuffer(L.FRAMEBUFFER,this.prevFramebuffer))}}]),P}());t=f.default.Framebuffer=O,M.default=t},{"../core/constants":262,"../core/main":273,"./p5.RendererGL":328,"./p5.Texture":330,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":157,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.reflect.get":183,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.float32-array":209,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/es.typed-array.uint8-clamped-array":233,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],323:[function(t,R,M){t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(h,b){for(var w=0;w<b.length;w++){var c=b[w];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,c.key,c)}}p.default.Geometry=function(){function h(c,l,o){if(this instanceof h)return this.vertices=[],this.lineVertices=[],this.lineTangentsIn=[],this.lineTangentsOut=[],this.lineSides=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=[],this.detailX=c!==void 0?c:1,this.detailY=l!==void 0?l:1,this.dirtyFlags={},o instanceof Function&&o.call(this),this;throw new TypeError("Cannot call a class as a function")}var b,w;return b=h,(w=[{key:"reset",value:function(){this.lineVertices.length=0,this.lineTangentsIn.length=0,this.lineTangentsOut.length=0,this.lineSides.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"computeFaces",value:function(){this.faces.length=0;for(var c,l,o,u=this.detailX+1,m=0;m<this.detailY;m++)for(var g=0;g<this.detailX;g++)l=(m+1)*u+g+1,this.faces.push([m*u+g,c=m*u+g+1,o=(m+1)*u+g]),this.faces.push([o,c,l]);return this}},{key:"_getFaceNormal",value:function(c){c=this.faces[c];var l=this.vertices[c[0]],o=this.vertices[c[1]],u=(c=this.vertices[c[2]],o=p.default.Vector.sub(o,l),c=p.default.Vector.sub(c,l),l=p.default.Vector.cross(o,c),p.default.Vector.mag(l));return(o=u/(p.default.Vector.mag(o)*p.default.Vector.mag(c)))===0||isNaN(o)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),l):(1<o&&(o=1),l.mult(Math.asin(o)/u))}},{key:"computeNormals",value:function(){for(var c=this,l=this.vertexNormals,o=this.vertices,u=this.faces,m=l.length=0;m<o.length;++m)l.push(new p.default.Vector);for(u.forEach(function(g,_){for(var v=c._getFaceNormal(_),x=0;x<3;++x){var E=g[x];l[E].add(v)}}),m=0;m<o.length;++m)l[m].normalize();return this}},{key:"averageNormals",value:function(){for(var c=0;c<=this.detailY;c++){var l=this.detailX+1,o=p.default.Vector.add(this.vertexNormals[c*l],this.vertexNormals[c*l+this.detailX]);o=p.default.Vector.div(o,2),this.vertexNormals[c*l]=o,this.vertexNormals[c*l+this.detailX]=o}return this}},{key:"averagePoleNormals",value:function(){for(var c=new p.default.Vector(0,0,0),l=0;l<this.detailX;l++)c.add(this.vertexNormals[l]);c=p.default.Vector.div(c,this.detailX);for(var o=0;o<this.detailX;o++)this.vertexNormals[o]=c;c=new p.default.Vector(0,0,0);for(var u=this.vertices.length-1;u>this.vertices.length-1-this.detailX;u--)c.add(this.vertexNormals[u]);c=p.default.Vector.div(c,this.detailX);for(var m=this.vertices.length-1;m>this.vertices.length-1-this.detailX;m--)this.vertexNormals[m]=c;return this}},{key:"_makeTriangleEdges",value:function(){for(var c=this.edges.length=0;c<this.faces.length;c++)this.edges.push([this.faces[c][0],this.faces[c][1]]),this.edges.push([this.faces[c][1],this.faces[c][2]]),this.edges.push([this.faces[c][2],this.faces[c][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.length=0,this.lineTangentsIn.length=0,this.lineTangentsOut.length=0,this.lineSides.length=0;for(var c,l=1<this.edges.length&&this.edges[0][0]===this.edges[this.edges.length-1][1],o=!1,u=0;u<this.edges.length;u++){var m=this.edges[u-1],g=this.edges[u],_=this.vertices[g[0]],v=this.vertices[g[1]],x=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*g[0],4*(g[0]+1)):[0,0,0,0],E=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*g[1],4*(g[1]+1)):[0,0,0,0],j=v.copy().sub(_).normalize(),O=0<j.magSq();O&&this._addSegment(_,v,x,E,j),0<u&&m[1]===g[0]?(c&&O&&j.dot(c)<1-1e-8&&this._addJoin(_,c,j,x),!O||o||l||(this._addCap(_,j.copy().mult(-1),x),o=!0)):(o=!1,O&&(!l||0<u)&&(this._addCap(_,j.copy().mult(-1),x),o=!0),c&&(!l||u<this.edges.length-1)&&(this._addCap(this.vertices[m[1]],c,x),c=void 0)),u===this.edges.length-1&&(l?this._addJoin(v,j,this.vertices[this.edges[0][1]].copy().sub(v).normalize(),E):this._addCap(v,j,E)),O&&(c=j)}return this}},{key:"_addSegment",value:function(c,l,o,u,m){c=c.array(),l=l.array();var g=m.array();this.lineSides.push(1,-1,1,1,-1,-1);for(var _=0,v=[this.lineTangentsIn,this.lineTangentsOut];_<v.length;_++)v[_].push(g,g,g,g,g,g);return this.lineVertices.push(c,c,l,l,c,l),this.lineVertexColors.push(o,o,u,u,o,u),this}},{key:"_addCap",value:function(c,l,o){for(var u=c.array(),m=l.array(),g=[0,0,0],_=0;_<6;_++)this.lineVertices.push(u),this.lineTangentsIn.push(m),this.lineTangentsOut.push(g),this.lineVertexColors.push(o);return this.lineSides.push(-1,-2,2,2,1,-1),this}},{key:"_addJoin",value:function(c,l,o,u){for(var m=c.array(),g=l.array(),_=o.array(),v=0;v<12;v++)this.lineVertices.push(m),this.lineTangentsIn.push(g),this.lineTangentsOut.push(_),this.lineVertexColors.push(u);for(var x=0,E=[-1,1];x<E.length;x++){var j=E[x];this.lineSides.push(j,2*j,3*j,j,3*j,0)}return this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var c=this.vertices[0].copy(),l=this.vertices[0].copy(),o=0;o<this.vertices.length;o++)c.x=Math.max(c.x,this.vertices[o].x),l.x=Math.min(l.x,this.vertices[o].x),c.y=Math.max(c.y,this.vertices[o].y),l.y=Math.min(l.y,this.vertices[o].y),c.z=Math.max(c.z,this.vertices[o].z),l.z=Math.min(l.z,this.vertices[o].z);for(var u=p.default.Vector.lerp(c,l,.5),m=p.default.Vector.sub(c,l),g=200/Math.max(Math.max(m.x,m.y),m.z),_=0;_<this.vertices.length;_++)this.vertices[_].sub(u),this.vertices[_].mult(g)}return this}}])&&f(b.prototype,w),h}(),t=p.default.Geometry,M.default=t},{"../core/main":273,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.slice":164,"core-js/modules/es.string.sub":198,"core-js/modules/web.dom-collections.for-each":235}],324:[function(t,R,M){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(w,c){for(var l=0;l<c.length;l++){var o=c[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(w,o.key,o)}}var h=Array,b=function(w){return Array.isArray(w)};typeof Float32Array<"u"&&(h=Float32Array,b=function(w){return Array.isArray(w)||w instanceof Float32Array}),p.default.Matrix=function(){function w(){var u=this,m=w;if(u instanceof m)return arguments.length&&((u=arguments.length-1)<0||arguments.length<=u?void 0:arguments[u])instanceof p.default&&(this.p5=(m=arguments.length-1)<0||arguments.length<=m?void 0:arguments[m]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new h([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new h([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var c,l,o;return c=w,o=[{key:"identity",value:function(u){return new p.default.Matrix(u)}}],(l=[{key:"set",value:function(u){return u instanceof p.default.Matrix?this.mat4=u.mat4:b(u)?this.mat4=u:arguments.length===16&&(this.mat4[0]=u,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this}},{key:"get",value:function(){return new p.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var u;return this.mat3!==void 0?((u=new p.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],u.mat3[1]=this.mat3[1],u.mat3[2]=this.mat3[2],u.mat3[3]=this.mat3[3],u.mat3[4]=this.mat3[4],u.mat3[5]=this.mat3[5],u.mat3[6]=this.mat3[6],u.mat3[7]=this.mat3[7],u.mat3[8]=this.mat3[8]):((u=new p.default.Matrix(this.p5)).mat4[0]=this.mat4[0],u.mat4[1]=this.mat4[1],u.mat4[2]=this.mat4[2],u.mat4[3]=this.mat4[3],u.mat4[4]=this.mat4[4],u.mat4[5]=this.mat4[5],u.mat4[6]=this.mat4[6],u.mat4[7]=this.mat4[7],u.mat4[8]=this.mat4[8],u.mat4[9]=this.mat4[9],u.mat4[10]=this.mat4[10],u.mat4[11]=this.mat4[11],u.mat4[12]=this.mat4[12],u.mat4[13]=this.mat4[13],u.mat4[14]=this.mat4[14],u.mat4[15]=this.mat4[15]),u}},{key:"transpose",value:function(u){var m,g,_,v,x,E;return u instanceof p.default.Matrix?(m=u.mat4[1],g=u.mat4[2],_=u.mat4[3],v=u.mat4[6],x=u.mat4[7],E=u.mat4[11],this.mat4[0]=u.mat4[0],this.mat4[1]=u.mat4[4],this.mat4[2]=u.mat4[8],this.mat4[3]=u.mat4[12],this.mat4[4]=m,this.mat4[5]=u.mat4[5],this.mat4[6]=u.mat4[9],this.mat4[7]=u.mat4[13],this.mat4[8]=g,this.mat4[9]=v,this.mat4[10]=u.mat4[10],this.mat4[11]=u.mat4[14],this.mat4[12]=_,this.mat4[13]=x,this.mat4[14]=E,this.mat4[15]=u.mat4[15]):b(u)&&(m=u[1],g=u[2],_=u[3],v=u[6],x=u[7],E=u[11],this.mat4[0]=u[0],this.mat4[1]=u[4],this.mat4[2]=u[8],this.mat4[3]=u[12],this.mat4[4]=m,this.mat4[5]=u[5],this.mat4[6]=u[9],this.mat4[7]=u[13],this.mat4[8]=g,this.mat4[9]=v,this.mat4[10]=u[10],this.mat4[11]=u[14],this.mat4[12]=_,this.mat4[13]=x,this.mat4[14]=E,this.mat4[15]=u[15]),this}},{key:"invert",value:function(u){u instanceof p.default.Matrix?(m=u.mat4[0],g=u.mat4[1],_=u.mat4[2],v=u.mat4[3],x=u.mat4[4],E=u.mat4[5],j=u.mat4[6],O=u.mat4[7],P=u.mat4[8],L=u.mat4[9],z=u.mat4[10],N=u.mat4[11],V=u.mat4[12],k=u.mat4[13],H=u.mat4[14],G=u.mat4[15]):b(u)&&(m=u[0],g=u[1],_=u[2],v=u[3],x=u[4],E=u[5],j=u[6],O=u[7],P=u[8],L=u[9],z=u[10],N=u[11],V=u[12],k=u[13],H=u[14],G=u[15]);var m,g,_,v,x,E,j,O,P,L,z,N,V,k,H,G,F=m*j-_*x,W=m*O-v*x,Q=g*j-_*E,J=g*O-v*E,ee=_*O-v*j,te=P*k-L*V,se=P*H-z*V,ce=P*G-N*V,q=L*H-z*k,Z=L*G-N*k,ie=z*G-N*H,pe=(u=m*E-g*x)*ie-F*Z+W*q+Q*ce-J*se+ee*te;return pe?(this.mat4[0]=(E*ie-j*Z+O*q)*(pe=1/pe),this.mat4[1]=(_*Z-g*ie-v*q)*pe,this.mat4[2]=(k*ee-H*J+G*Q)*pe,this.mat4[3]=(z*J-L*ee-N*Q)*pe,this.mat4[4]=(j*ce-x*ie-O*se)*pe,this.mat4[5]=(m*ie-_*ce+v*se)*pe,this.mat4[6]=(H*W-V*ee-G*F)*pe,this.mat4[7]=(P*ee-z*W+N*F)*pe,this.mat4[8]=(x*Z-E*ce+O*te)*pe,this.mat4[9]=(g*ce-m*Z-v*te)*pe,this.mat4[10]=(V*J-k*W+G*u)*pe,this.mat4[11]=(L*W-P*J-N*u)*pe,this.mat4[12]=(E*se-x*q-j*te)*pe,this.mat4[13]=(m*q-g*se+_*te)*pe,this.mat4[14]=(k*F-V*Q-H*u)*pe,this.mat4[15]=(P*Q-L*F+z*u)*pe,this):null}},{key:"invert3x3",value:function(){var u=this.mat3[0],m=this.mat3[1],g=this.mat3[2],_=this.mat3[3],v=this.mat3[4],x=this.mat3[5],E=this.mat3[6],j=this.mat3[7],O=this.mat3[8],P=O*v-x*j,L=-O*_+x*E,z=j*_-v*E,N=u*P+m*L+g*z;return N?(this.mat3[0]=P*(N=1/N),this.mat3[1]=(-O*m+g*j)*N,this.mat3[2]=(x*m-g*v)*N,this.mat3[3]=L*N,this.mat3[4]=(O*u-g*E)*N,this.mat3[5]=(-x*u+g*_)*N,this.mat3[6]=z*N,this.mat3[7]=(-j*u+m*E)*N,this.mat3[8]=(v*u-m*_)*N,this):null}},{key:"transpose3x3",value:function(u){var m=(u=u===void 0?this.mat3:u)[1],g=u[2],_=u[5];return this.mat3[0]=u[0],this.mat3[1]=u[3],this.mat3[2]=u[6],this.mat3[3]=m,this.mat3[4]=u[4],this.mat3[5]=u[7],this.mat3[6]=g,this.mat3[7]=_,this.mat3[8]=u[8],this}},{key:"inverseTranspose",value:function(u){if(u=u.mat4,this.mat3===void 0?p.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=u[0],this.mat3[1]=u[1],this.mat3[2]=u[2],this.mat3[3]=u[4],this.mat3[4]=u[5],this.mat3[5]=u[6],this.mat3[6]=u[8],this.mat3[7]=u[9],this.mat3[8]=u[10]),u=this.invert3x3())u.transpose3x3(this.mat3);else for(var m=0;m<9;m++)this.mat3[m]=0;return this}},{key:"determinant",value:function(){var u=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],m=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],g=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],_=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],v=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],x=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],E=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],j=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],O=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],P=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],L=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return u*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-m*L+g*P+_*O-v*j+x*E}},{key:"mult",value:function(u){var m;if(u===this||u===this.mat4)m=this.copy().mat4;else if(u instanceof p.default.Matrix)m=u.mat4;else if(b(u))m=u;else{if(arguments.length!==16)return;m=arguments}u=this.mat4[0];var g=this.mat4[1],_=this.mat4[2],v=this.mat4[3];return this.mat4[0]=u*m[0]+g*m[4]+_*m[8]+v*m[12],this.mat4[1]=u*m[1]+g*m[5]+_*m[9]+v*m[13],this.mat4[2]=u*m[2]+g*m[6]+_*m[10]+v*m[14],this.mat4[3]=u*m[3]+g*m[7]+_*m[11]+v*m[15],u=this.mat4[4],g=this.mat4[5],_=this.mat4[6],v=this.mat4[7],this.mat4[4]=u*m[0]+g*m[4]+_*m[8]+v*m[12],this.mat4[5]=u*m[1]+g*m[5]+_*m[9]+v*m[13],this.mat4[6]=u*m[2]+g*m[6]+_*m[10]+v*m[14],this.mat4[7]=u*m[3]+g*m[7]+_*m[11]+v*m[15],u=this.mat4[8],g=this.mat4[9],_=this.mat4[10],v=this.mat4[11],this.mat4[8]=u*m[0]+g*m[4]+_*m[8]+v*m[12],this.mat4[9]=u*m[1]+g*m[5]+_*m[9]+v*m[13],this.mat4[10]=u*m[2]+g*m[6]+_*m[10]+v*m[14],this.mat4[11]=u*m[3]+g*m[7]+_*m[11]+v*m[15],u=this.mat4[12],g=this.mat4[13],_=this.mat4[14],v=this.mat4[15],this.mat4[12]=u*m[0]+g*m[4]+_*m[8]+v*m[12],this.mat4[13]=u*m[1]+g*m[5]+_*m[9]+v*m[13],this.mat4[14]=u*m[2]+g*m[6]+_*m[10]+v*m[14],this.mat4[15]=u*m[3]+g*m[7]+_*m[11]+v*m[15],this}},{key:"apply",value:function(u){var m;if(u===this||u===this.mat4)m=this.copy().mat4;else if(u instanceof p.default.Matrix)m=u.mat4;else if(b(u))m=u;else{if(arguments.length!==16)return;m=arguments}var g=(u=this.mat4)[0],_=u[4],v=u[8],x=u[12];return u[0]=m[0]*g+m[1]*_+m[2]*v+m[3]*x,u[4]=m[4]*g+m[5]*_+m[6]*v+m[7]*x,u[8]=m[8]*g+m[9]*_+m[10]*v+m[11]*x,u[12]=m[12]*g+m[13]*_+m[14]*v+m[15]*x,g=u[1],_=u[5],v=u[9],x=u[13],u[1]=m[0]*g+m[1]*_+m[2]*v+m[3]*x,u[5]=m[4]*g+m[5]*_+m[6]*v+m[7]*x,u[9]=m[8]*g+m[9]*_+m[10]*v+m[11]*x,u[13]=m[12]*g+m[13]*_+m[14]*v+m[15]*x,g=u[2],_=u[6],v=u[10],x=u[14],u[2]=m[0]*g+m[1]*_+m[2]*v+m[3]*x,u[6]=m[4]*g+m[5]*_+m[6]*v+m[7]*x,u[10]=m[8]*g+m[9]*_+m[10]*v+m[11]*x,u[14]=m[12]*g+m[13]*_+m[14]*v+m[15]*x,g=u[3],_=u[7],v=u[11],x=u[15],u[3]=m[0]*g+m[1]*_+m[2]*v+m[3]*x,u[7]=m[4]*g+m[5]*_+m[6]*v+m[7]*x,u[11]=m[8]*g+m[9]*_+m[10]*v+m[11]*x,u[15]=m[12]*g+m[13]*_+m[14]*v+m[15]*x,this}},{key:"scale",value:function(u,m,g){return u instanceof p.default.Vector?(m=u.y,g=u.z,u=u.x):u instanceof Array&&(m=u[1],g=u[2],u=u[0]),this.mat4[0]*=u,this.mat4[1]*=u,this.mat4[2]*=u,this.mat4[3]*=u,this.mat4[4]*=m,this.mat4[5]*=m,this.mat4[6]*=m,this.mat4[7]*=m,this.mat4[8]*=g,this.mat4[9]*=g,this.mat4[10]*=g,this.mat4[11]*=g,this}},{key:"rotate",value:function(u,m,g,_){m instanceof p.default.Vector?(g=m.y,_=m.z,m=m.x):m instanceof Array&&(g=m[1],_=m[2],m=m[0]);var v=(m*=1/(v=Math.sqrt(m*m+g*g+_*_)),g*=1/v,_*=1/v,this.mat4[0]),x=this.mat4[1],E=this.mat4[2],j=this.mat4[3],O=this.mat4[4],P=this.mat4[5],L=this.mat4[6],z=this.mat4[7],N=this.mat4[8],V=this.mat4[9],k=this.mat4[10],H=this.mat4[11],G=Math.sin(u),F=1-(u=Math.cos(u)),W=m*m*F+u,Q=g*m*F+_*G,J=_*m*F-g*G,ee=m*g*F-_*G,te=g*g*F+u,se=_*g*F+m*G,ce=m*_*F+g*G;return g=g*_*F-m*G,m=_*_*F+u,this.mat4[0]=v*W+O*Q+N*J,this.mat4[1]=x*W+P*Q+V*J,this.mat4[2]=E*W+L*Q+k*J,this.mat4[3]=j*W+z*Q+H*J,this.mat4[4]=v*ee+O*te+N*se,this.mat4[5]=x*ee+P*te+V*se,this.mat4[6]=E*ee+L*te+k*se,this.mat4[7]=j*ee+z*te+H*se,this.mat4[8]=v*ce+O*g+N*m,this.mat4[9]=x*ce+P*g+V*m,this.mat4[10]=E*ce+L*g+k*m,this.mat4[11]=j*ce+z*g+H*m,this}},{key:"translate",value:function(u){var m=u[0],g=u[1];u=u[2]||0,this.mat4[12]+=this.mat4[0]*m+this.mat4[4]*g+this.mat4[8]*u,this.mat4[13]+=this.mat4[1]*m+this.mat4[5]*g+this.mat4[9]*u,this.mat4[14]+=this.mat4[2]*m+this.mat4[6]*g+this.mat4[10]*u,this.mat4[15]+=this.mat4[3]*m+this.mat4[7]*g+this.mat4[11]*u}},{key:"rotateX",value:function(u){this.rotate(u,1,0,0)}},{key:"rotateY",value:function(u){this.rotate(u,0,1,0)}},{key:"rotateZ",value:function(u){this.rotate(u,0,0,1)}},{key:"perspective",value:function(u,m,g,_){u=1/Math.tan(u/2);var v=1/(g-_);return this.mat4[0]=u/m,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=u,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(_+g)*v,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*_*g*v,this.mat4[15]=0,this}},{key:"ortho",value:function(u,m,g,_,v,x){var E=1/(u-m),j=1/(g-_),O=1/(v-x);return this.mat4[0]=-2*E,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*j,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*O,this.mat4[11]=0,this.mat4[12]=(u+m)*E,this.mat4[13]=(_+g)*j,this.mat4[14]=(x+v)*O,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(u,m,g,_){var v=new Array(4),x=this.mat4;return v[0]=x[0]*u+x[4]*m+x[8]*g+x[12]*_,v[1]=x[1]*u+x[5]*m+x[9]*g+x[13]*_,v[2]=x[2]*u+x[6]*m+x[10]*g+x[14]*_,v[3]=x[3]*u+x[7]*m+x[11]*g+x[15]*_,v}},{key:"multiplyPoint",value:function(u){var m=u.x,g=u.y;return u=u.z,m=this.multiplyVec4(m,g,u,1),new p.default.Vector(m[0],m[1],m[2])}},{key:"multiplyAndNormalizePoint",value:function(u){var m=u.x,g=u.y;return u=u.z,(m=this.multiplyVec4(m,g,u,1))[0]/=m[3],m[1]/=m[3],m[2]/=m[3],new p.default.Vector(m[0],m[1],m[2])}},{key:"multiplyDirection",value:function(u){var m=u.x,g=u.y;return u=u.z,m=this.multiplyVec4(m,g,u,0),new p.default.Vector(m[0],m[1],m[2])}},{key:"mult3x3",value:function(u){var m;if(u===this||u===this.mat3)m=this.copy().mat3;else if(u instanceof p.default.Matrix)m=u.mat3;else if(b(u))m=u;else{if(arguments.length!==9)return;m=arguments}u=this.mat3[0];var g=this.mat3[1],_=this.mat3[2];return this.mat3[0]=u*m[0]+g*m[3]+_*m[6],this.mat3[1]=u*m[1]+g*m[4]+_*m[7],this.mat3[2]=u*m[2]+g*m[5]+_*m[8],u=this.mat3[3],g=this.mat3[4],_=this.mat3[5],this.mat3[3]=u*m[0]+g*m[3]+_*m[6],this.mat3[4]=u*m[1]+g*m[4]+_*m[7],this.mat3[5]=u*m[2]+g*m[5]+_*m[8],u=this.mat3[6],g=this.mat3[7],_=this.mat3[8],this.mat3[6]=u*m[0]+g*m[3]+_*m[6],this.mat3[7]=u*m[1]+g*m[4]+_*m[7],this.mat3[8]=u*m[2]+g*m[5]+_*m[8],this}},{key:"column",value:function(u){return new p.default.Vector(this.mat3[u],this.mat3[u+3],this.mat3[u+6])}},{key:"row",value:function(u){return new p.default.Vector(this.mat3[3*u],this.mat3[3*u+1],this.mat3[3*u+2])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(u,m){return(m=m===void 0?u.copy():m).x=this.row(0).dot(u),m.y=this.row(1).dot(u),m.z=this.row(2).dot(u),m}},{key:"createSubMatrix3x3",value:function(){var u=new p.default.Matrix("mat3");return u.mat3[0]=this.mat4[0],u.mat3[1]=this.mat4[1],u.mat3[2]=this.mat4[2],u.mat3[3]=this.mat4[4],u.mat3[4]=this.mat4[5],u.mat3[5]=this.mat4[6],u.mat3[6]=this.mat4[8],u.mat3[7]=this.mat4[9],u.mat3[8]=this.mat4[10],u}}])&&f(c.prototype,l),o&&f(c,o),w}(),t=p.default.Matrix,M.default=t},{"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.float32-array":209,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229}],325:[function(t,R,M){function p(f,h){for(var b=0;b<h.length;b++){var w=h[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(f,w.key,w)}}t("core-js/modules/es.array.map"),t("core-js/modules/es.array.map"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0,(t=(t=t("../core/main"))&&t.__esModule?t:{default:t}).default.RenderBuffer=function(){function f(w,c,l,o,u,m){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.size=w,this.src=c,this.dst=l,this.attr=o,this._renderer=u,this.map=m}var h,b;return h=f,(b=[{key:"_prepareBuffer",value:function(w,c){var l,o,u,m=c.attributes,g=this._renderer.GL,_=w.model||w;(m=m[this.attr])&&(l=w[this.dst],0<(o=_[this.src]).length?((u=!l)&&(w[this.dst]=l=g.createBuffer()),g.bindBuffer(g.ARRAY_BUFFER,l),!u&&_.dirtyFlags[this.src]===!1||(u=(w=this.map)?w(o):o,this._renderer._bindBuffer(l,g.ARRAY_BUFFER,u),_.dirtyFlags[this.src]=!1),c.enableAttrib(m,this.size)):(w=m.location)!==-1&&this._renderer.registerEnabled[w]&&(g.disableVertexAttribArray(w),this._renderer.registerEnabled[w]=!1))}}])&&p(h.prototype,b),f}(),t=t.default.RenderBuffer,M.default=t},{"../core/main":273,"core-js/modules/es.array.map":163}],326:[function(t,R,M){function p(o){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(o)}function f(o){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(u){return p(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":p(u)})(o)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var h=(l=t("../core/main"))&&l.__esModule?l:{default:l},b=function(o){if(o&&o.__esModule)return o;if(o===null||f(o)!=="object"&&typeof o!="function")return{default:o};var u=function(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,x)}();if(u&&u.has(o))return u.get(o);var m,g={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in o){var v;Object.prototype.hasOwnProperty.call(o,m)&&((v=_?Object.getOwnPropertyDescriptor(o,m):null)&&(v.get||v.set)?Object.defineProperty(g,m,v):g[m]=o[m])}return g.default=o,u&&u.set(o,g),g}(t("../core/constants"));function w(o){return function(u){if(Array.isArray(u)){for(var m=0,g=new Array(u.length);m<u.length;m++)g[m]=u[m];return g}}(o)||function(u){if(Symbol.iterator in Object(u)||Object.prototype.toString.call(u)==="[object Arguments]")return Array.from(u)}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("./p5.RenderBuffer"),h.default.RendererGL.prototype.beginShape=function(o){return this.immediateMode.shapeMode=o!==void 0?o:b.TESS,this.immediateMode.geometry.reset(),this};var c={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},l=(h.default.RendererGL.prototype.vertex=function(o,u){if(this.immediateMode.shapeMode===b.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var m in c){var g=c[m];(m=this.immediateMode.geometry[m]).push.apply(m,w(m.slice(m.length-3*g,m.length-2*g)).concat(w(m.slice(m.length-g,m.length))))}var _,v,x=_=v=0,E=(arguments.length===3?x=arguments[2]:arguments.length===4?(_=arguments[2],v=arguments[3]):arguments.length===5&&(x=arguments[2],_=arguments[3],v=arguments[4]),new h.default.Vector(o,u,x));return this.immediateMode.geometry.vertices.push(E),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),E=this.curFillColor||[.5,.5,.5,1],this.immediateMode.geometry.vertexColors.push(E[0],E[1],E[2],E[3]),E=this.curStrokeColor||[.5,.5,.5,1],this.immediateMode.geometry.vertexStrokeColors.push(E[0],E[1],E[2],E[3]),this.textureMode===b.IMAGE&&(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(_/=this._tex.width,v/=this._tex.height):!this.isProcessingVertices&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(_,v),this.immediateMode._bezierVertex[0]=o,this.immediateMode._bezierVertex[1]=u,this.immediateMode._bezierVertex[2]=x,this.immediateMode._quadraticVertex[0]=o,this.immediateMode._quadraticVertex[1]=u,this.immediateMode._quadraticVertex[2]=x,this},h.default.RendererGL.prototype.normal=function(o,u,m){return o instanceof h.default.Vector?this._currentNormal=o:this._currentNormal=new h.default.Vector(o,u,m),this},h.default.RendererGL.prototype.endShape=function(o,u,m,g,_,v){return this.immediateMode.shapeMode===b.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),this.isProcessingVertices=!1,this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},h.default.RendererGL.prototype._processVertices=function(o){var u;this.immediateMode.geometry.vertices.length!==0&&(u=this._doStroke,o=o===b.CLOSE,u&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,o),this.immediateMode.geometry._edgesToVertices()),u=this.immediateMode.shapeMode===b.TESS,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||u)&&this.immediateMode.shapeMode!==b.LINES&&this._tesselateShape())},h.default.RendererGL.prototype._calculateEdges=function(o,u,m){var g=[],_=0;switch(o){case b.TRIANGLE_STRIP:for(_=0;_<u.length-2;_++)g.push([_,_+1]),g.push([_,_+2]);g.push([_,_+1]);break;case b.TRIANGLE_FAN:for(_=1;_<u.length-1;_++)g.push([0,_]),g.push([_,_+1]);g.push([0,u.length-1]);break;case b.TRIANGLES:for(_=0;_<u.length-2;_+=3)g.push([_,_+1]),g.push([_+1,_+2]),g.push([_+2,_]);break;case b.LINES:for(_=0;_<u.length-1;_+=2)g.push([_,_+1]);break;case b.QUADS:for(_=0;_<u.length-5;_+=6)g.push([_,_+1]),g.push([_+1,_+2]),g.push([_+3,_+5]),g.push([_+4,_+5]);break;case b.QUAD_STRIP:for(_=0;_<u.length-2;_+=2)g.push([_,_+1]),g.push([_,_+2]),g.push([_+1,_+3]);g.push([_,_+1]);break;default:for(_=0;_<u.length-1;_++)g.push([_,_+1])}return m&&g.push([u.length-1,0]),g},h.default.RendererGL.prototype._tesselateShape=function(){for(var o=this,u=(this.immediateMode.shapeMode=b.TRIANGLES,[this._flatten(this.immediateMode.geometry.vertices.map(function(x,E){return[x.x,x.y,x.z,o.immediateMode.geometry.uvs[2*E],o.immediateMode.geometry.uvs[2*E+1],o.immediateMode.geometry.vertexColors[4*E],o.immediateMode.geometry.vertexColors[4*E+1],o.immediateMode.geometry.vertexColors[4*E+2],o.immediateMode.geometry.vertexColors[4*E+3],o.immediateMode.geometry.vertexNormals[E].x,o.immediateMode.geometry.vertexNormals[E].y,o.immediateMode.geometry.vertexNormals[E].z]}))]),m=this._triangulate(u),g=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),_=0,v=m.length;_<v;_+=h.default.RendererGL.prototype.tessyVertexSize)g.push.apply(g,w(m.slice(_+5,_+9))),this.normal.apply(this,w(m.slice(_+9,_+12))),this.vertex.apply(this,w(m.slice(_,_+5)));this.immediateMode.geometry.vertexColors=g},h.default.RendererGL.prototype._drawImmediateFill=function(){var o=this.GL,u=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,this._getImmediateFillShader()),m=(this._setFillUniforms(u),!0),g=!1,_=void 0;try{for(var v,x=this.immediateMode.buffers.fill[Symbol.iterator]();!(m=(v=x.next()).done);m=!0)v.value._prepareBuffer(this.immediateMode.geometry,u)}catch(E){g=!0,_=E}finally{try{m||x.return==null||x.return()}finally{if(g)throw _}}this.immediateMode.shapeMode!==b.LINE_STRIP&&this.immediateMode.shapeMode!==b.LINES||(this.immediateMode.shapeMode=b.TRIANGLE_FAN),this.immediateMode.shapeMode===b.QUADS?this.immediateMode.shapeMode=b.TRIANGLES:this.immediateMode.shapeMode===b.QUAD_STRIP&&(this.immediateMode.shapeMode=b.TRIANGLE_STRIP),this._applyColorBlend(this.curFillColor),o.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),u.unbindShader()},h.default.RendererGL.prototype._drawImmediateStroke=function(){var o=this.GL,u=o.isEnabled(o.CULL_FACE),m=(o.disable(o.CULL_FACE),this._getImmediateStrokeShader()),g=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._setStrokeUniforms(m),!0),_=!1,v=void 0;try{for(var x,E=this.immediateMode.buffers.stroke[Symbol.iterator]();!(g=(x=E.next()).done);g=!0)x.value._prepareBuffer(this.immediateMode.geometry,m)}catch(j){_=!0,v=j}finally{try{g||E.return==null||E.return()}finally{if(_)throw v}}this._applyColorBlend(this.curStrokeColor),o.drawArrays(o.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),u&&o.enable(o.CULL_FACE),m.unbindShader()},h.default.RendererGL);M.default=l},{"../core/constants":262,"../core/main":273,"./p5.RenderBuffer":325,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],327:[function(t,R,M){function p(l){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(l)}function f(l){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(o){return p(o)}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":p(o)})(l)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var h=(c=t("../core/main"))&&c.__esModule?c:{default:c},b=(t("./p5.RendererGL"),t("./p5.RenderBuffer"),function(l){if(l&&l.__esModule)return l;if(l===null||f(l)!=="object"&&typeof l!="function")return{default:l};var o=function(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,v)}();if(o&&o.has(l))return o.get(l);var u,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in l){var _;Object.prototype.hasOwnProperty.call(l,u)&&((_=g?Object.getOwnPropertyDescriptor(l,u):null)&&(_.get||_.set)?Object.defineProperty(m,u,_):m[u]=l[u])}return m.default=l,o&&o.set(l,m),m}(t("../core/constants"))),w=0,c=(h.default.RendererGL.prototype._initBufferDefaults=function(l){var o;return this._freeBuffers(l),1e3<++w&&(o=Object.keys(this.retainedMode.geometry)[0],delete this.retainedMode.geometry[o],w--),this.retainedMode.geometry[l]={}},h.default.RendererGL.prototype._freeBuffers=function(l){var o,u=this.retainedMode.geometry[l];function m(g){var _=!0,v=!1,x=void 0;try{for(var E,j=g[Symbol.iterator]();!(_=(E=j.next()).done);_=!0){var O=E.value;u[O.dst]&&(o.deleteBuffer(u[O.dst]),u[O.dst]=null)}}catch(P){v=!0,x=P}finally{try{_||j.return==null||j.return()}finally{if(v)throw x}}}u&&(delete this.retainedMode.geometry[l],w--,o=this.GL,u.indexBuffer&&o.deleteBuffer(u.indexBuffer),m(this.retainedMode.buffers.stroke),m(this.retainedMode.buffers.fill))},h.default.RendererGL.prototype.createBuffers=function(l,o){var u,m,g,_=this.GL,v=((l=this._initBufferDefaults(l)).model=o,l.indexBuffer);return o.faces.length?(v=v||(l.indexBuffer=_.createBuffer()),g=(m=(u=h.default.RendererGL.prototype._flatten(o.faces)).some(function(x){return 65535<x}))?Uint32Array:Uint16Array,this._bindBuffer(v,_.ELEMENT_ARRAY_BUFFER,u,g),l.indexBufferType=m?_.UNSIGNED_INT:_.UNSIGNED_SHORT,l.vertexCount=3*o.faces.length):(v&&(_.deleteBuffer(v),l.indexBuffer=null),l.vertexCount=o.vertices?o.vertices.length:0),l.lineVertexCount=o.lineVertices?o.lineVertices.length:0,l},h.default.RendererGL.prototype.drawBuffers=function(l){var o=this.GL,u=this.retainedMode.geometry[l];if(this._doFill){this._useVertexColor=0<u.model.vertexColors.length;var m=this._getRetainedFillShader(),g=(this._setFillUniforms(m),!0),_=!1,v=void 0;try{for(var x,E=this.retainedMode.buffers.fill[Symbol.iterator]();!(g=(x=E.next()).done);g=!0)x.value._prepareBuffer(u,m)}catch(N){_=!0,v=N}finally{try{g||E.return==null||E.return()}finally{if(_)throw v}}u.indexBuffer&&this._bindBuffer(u.indexBuffer,o.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(o.TRIANGLES,l),m.unbindShader()}if(this._doStroke&&0<u.lineVertexCount){_=o.isEnabled(o.CULL_FACE);var j=(o.disable(o.CULL_FACE),this._getRetainedStrokeShader()),O=(this._useLineColor=0<u.model.vertexStrokeColors.length,this._setStrokeUniforms(j),!0),P=(v=!1,void 0);try{for(var L,z=this.retainedMode.buffers.stroke[Symbol.iterator]();!(O=(L=z.next()).done);O=!0)L.value._prepareBuffer(u,j)}catch(N){v=!0,P=N}finally{try{O||z.return==null||z.return()}finally{if(v)throw P}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(o.TRIANGLES,l),_&&o.enable(o.CULL_FACE),j.unbindShader()}return this},h.default.RendererGL.prototype.drawBuffersScaled=function(l,o,u,m){var g=this.uMVMatrix.copy();try{this.uMVMatrix.scale(o,u,m),this.drawBuffers(l)}finally{this.uMVMatrix=g}},h.default.RendererGL.prototype._drawArrays=function(l,o){return this.GL.drawArrays(l,0,this.retainedMode.geometry[o].lineVertexCount),this},h.default.RendererGL.prototype._drawElements=function(l,o){o=this.retainedMode.geometry[o];var u=this.GL;if(o.indexBuffer){if(this._pInst.webglVersion!==b.WEBGL2&&o.indexBufferType===u.UNSIGNED_INT&&!u.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");u.drawElements(u.TRIANGLES,o.vertexCount,o.indexBufferType,0)}else u.drawArrays(l||u.TRIANGLES,0,o.vertexCount)},h.default.RendererGL.prototype._drawPoints=function(l,o){var u=this.GL,m=this._getImmediatePointShader();this._setPointUniforms(m),this._bindBuffer(o,u.ARRAY_BUFFER,this._vToNArray(l),Float32Array,u.STATIC_DRAW),m.enableAttrib(m.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),u.drawArrays(u.Points,0,l.length),m.unbindShader()},h.default.RendererGL);M.default=c},{"../core/constants":262,"../core/main":273,"./p5.RenderBuffer":325,"./p5.RendererGL":328,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.some":165,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.float32-array":209,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint16-array":230,"core-js/modules/es.typed-array.uint32-array":231,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],328:[function(t,R,M){function p(V){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(V)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.map"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.float64-array"),t("core-js/modules/es.typed-array.int16-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.map"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.float64-array"),t("core-js/modules/es.typed-array.int16-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.readPixelsWebGL=z,M.readPixelWebGL=N,M.default=void 0;var f=w(t("../core/main")),h=function(V){if(V&&V.__esModule)return V;if(V===null||c(V)!=="object"&&typeof V!="function")return{default:V};var k=function(){var Q;return typeof WeakMap!="function"?null:(Q=new WeakMap,Q)}();if(k&&k.has(V))return k.get(V);var H,G={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(H in V){var W;Object.prototype.hasOwnProperty.call(V,H)&&((W=F?Object.getOwnPropertyDescriptor(V,H):null)&&(W.get||W.set)?Object.defineProperty(G,H,W):G[H]=V[H])}return G.default=V,k&&k.set(V,G),G}(t("../core/constants")),b=w(t("libtess"));function w(V){return V&&V.__esModule?V:{default:V}}function c(V){return(c=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(k){return p(k)}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":p(k)})(V)}function l(V){return function(k){if(Array.isArray(k)){for(var H=0,G=new Array(k.length);H<k.length;H++)G[H]=k[H];return G}}(V)||function(k){if(Symbol.iterator in Object(k)||Object.prototype.toString.call(k)==="[object Arguments]")return Array.from(k)}(V)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(V,k){for(var H=0;H<k.length;H++){var G=k[H];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(V,G.key,G)}}function u(V,k){return(u=Object.setPrototypeOf||function(H,G){return H.__proto__=G,H})(V,k)}function m(V){return function(){var k,H,G=_(V);return k=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(k=_(this).constructor,Reflect.construct(G,arguments,k)):G.apply(this,arguments),G=this,!(H=k)||c(H)!=="object"&&typeof H!="function"?g(G):H}}function g(V){if(V===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V}function _(V){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(V)}function v(V,k){O+="#define STROKE_CAP_".concat(V," ").concat(k,`
`),E[h[V]]=k}function x(V,k){O+="#define STROKE_JOIN_".concat(V," ").concat(k,`
`),j[h[V]]=k}t("./p5.Shader"),t("./p5.Camera"),t("../core/p5.Renderer"),t("./p5.Matrix"),t("path");var E={},j={},O="",P=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`,L={immediateVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

varying vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

varying vec3 vVertexNormal;
varying highp vec2 vVertTexCoord;
varying vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,normalFrag:`precision mediump float;
varying vec3 vVertexNormal;
void main(void) {
  gl_FragColor = vec4(vVertexNormal, 1.0);
}`,basicFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;
}
`,lightVert:(t=(v("ROUND",0),v("PROJECT",1),v("SQUARE",2),x("ROUND",0),x("MITER",1),x("BEVEL",2),`precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];

uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  if (uSpecular)
    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);
  lr.diffuse = _lambertDiffuse(lightDir, normal);
  return lr;
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`))+`// include lighting.glgl

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;
varying vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`precision highp float;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;
varying vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    gl_FragColor = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? texture2D(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    gl_FragColor = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp float;
precision highp int;

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;
attribute vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;
varying vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,phongFrag:t+`// include lighting.glsl
precision highp float;
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;
varying vec4 vColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec4 baseColor = isTexture
    // Textures come in with premultiplied alpha. To apply tint and still have
    // premultiplied alpha output, we need to multiply the RGB channels by the
    // tint RGB, and all channels by the tint alpha.
    ? texture2D(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
    // Colors come in with unmultiplied alpha, so we need to multiply the RGB
    // channels by alpha to convert it to premultiplied alpha.
    : vec4(vColor.rgb * vColor.a, vColor.a);
  gl_FragColor = vec4(diffuse * baseColor.rgb + 
                    vAmbientColor * (
                      uHasSetAmbient ? uAmbientMatColor.rgb : baseColor.rgb
                    ) + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb, baseColor.a);
}
`,fontVert:P+`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec2 pixelScale = vec2(
    1. / uModelViewMatrix[0][0],
    1. / uModelViewMatrix[1][1]
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:P+`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:O+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump float;
precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

attribute vec4 aPosition;
attribute vec3 aTangentIn;
attribute vec3 aTangentOut;
attribute float aSide;
attribute vec4 aVertexColor;

varying vec4 vColor;
varying vec2 vTangent;
varying vec2 vCenter;
varying vec2 vPosition;
varying float vMaxDist;
varying float vCap;
varying float vJoin;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));
  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float scale = mix(1., 0.995, facingCamera);

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posqIn.xyz = posqIn.xyz * scale;
  posqOut.xyz = posqOut.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = p.xy;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)
    // invert Y, projections in Processing invert Y
    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * uStrokeWeight / 2.) * curPerspScale,
          tangentIn,
          c + (side * normalOut * uStrokeWeight / 2.) * curPerspScale,
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * uStrokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * curPerspScale * uStrokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * curPerspScale * uStrokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));
    } else {
      vMaxDist = uStrokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      uStrokeWeight * 0.5 * curPerspScale;
    vMaxDist = uStrokeWeight / 2.;
  }
  vPosition = vCenter + offset / curPerspScale;

  gl_Position.xy = p.xy + offset.xy;
  gl_Position.zw = p.zw;
  
  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);
}
`,lineFrag:O+`precision mediump float;
precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;
uniform float uStrokeWeight;

varying vec4 vColor;
varying vec2 vTangent;
varying vec2 vCenter;
varying vec2 vPosition;
varying float vMaxDist;
varying float vCap;
varying float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

void main() {
  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      dot(vPosition - vCenter, vTangent) > 0.
    ) {
      discard;
    }
    // Use full area for PROJECT
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-vTangent.y, vTangent.x);
      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {
        discard;
      }
    }
    // Use full area for MITER
  }
  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;
}
`,pointVert:`attribute vec3 aPosition;
uniform float uPointSize;
varying float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}`,pointFrag:`precision mediump float;
precision mediump int;
uniform vec4 uMaterialColor;
varying float vStrokeWeight;

void main(){
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(mask > 0.98){
    discard;
  }

  gl_FragColor = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
}
`};function z(V,k,H,G,F,W,Q,J,ee,te){var se=k.getParameter(k.FRAMEBUFFER_BINDING),ce=W*Q*(H=(k.bindFramebuffer(k.FRAMEBUFFER,H),J===k.RGBA?4:3)),q=ee===k.UNSIGNED_BYTE?Uint8Array:Float32Array;if(V instanceof q&&V.length===ce||(V=new q(ce)),k.readPixels(G,te?te-F-Q:F,W,Q,J,ee,V),k.bindFramebuffer(k.FRAMEBUFFER,se),te)for(var Z=Math.floor(Q/2),ie=new q(W*H),pe=0;pe<Z;pe++){var ge=pe*W*4,be=(Q-pe-1)*W*4;ie.set(V.subarray(ge,ge+4*W)),V.copyWithin(ge,be,be+4*W),V.set(ie,be)}return V}function N(V,k,H,G,F,W,Q){var J=V.getParameter(V.FRAMEBUFFER_BINDING);return V.bindFramebuffer(V.FRAMEBUFFER,k),k=F===V.RGBA?4:3,k=new(W===V.UNSIGNED_BYTE?Uint8Array:Float32Array)(k),V.readPixels(H,Q?Q-G-1:G,1,1,F,W,k),V.bindFramebuffer(V.FRAMEBUFFER,J),Array.from(k)}f.default.prototype.setAttributes=function(V,k){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var H=!0;if(k!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[V]!==k&&(this._glAttributes[V]=k,H=!1)):V instanceof Object&&this._glAttributes!==V&&(this._glAttributes=V,H=!1),this._renderer.isP3D&&!H){if(!this._setupDone){for(var G in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(G))return void f.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},f.default.RendererGL=function(V){var k=G;if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(V&&V.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),V&&u(k,V);var H=m(G);function G(F,W,Q,J){if(this instanceof G)return(F=H.call(this,F,W,Q))._setAttributeDefaults(W),F._initContext(),F.isP3D=!0,F.GL=F.drawingContext,F._pInst._setProperty("drawingContext",F.drawingContext),F._isErasing=!1,F._enableLighting=!1,F.ambientLightColors=[],F.specularColors=[1,1,1],F.directionalLightDirections=[],F.directionalLightDiffuseColors=[],F.directionalLightSpecularColors=[],F.pointLightPositions=[],F.pointLightDiffuseColors=[],F.pointLightSpecularColors=[],F.spotLightPositions=[],F.spotLightDirections=[],F.spotLightDiffuseColors=[],F.spotLightSpecularColors=[],F.spotLightAngle=[],F.spotLightConc=[],F.drawMode=h.FILL,F.curFillColor=F._cachedFillStyle=[1,1,1,1],F.curAmbientColor=F._cachedFillStyle=[1,1,1,1],F.curSpecularColor=F._cachedFillStyle=[0,0,0,0],F.curEmissiveColor=F._cachedFillStyle=[0,0,0,0],F.curStrokeColor=F._cachedStrokeStyle=[0,0,0,1],F.curBlendMode=h.BLEND,F._cachedBlendMode=void 0,F.webglVersion===h.WEBGL2?F.blendExt=F.GL:F.blendExt=F.GL.getExtension("EXT_blend_minmax"),F._isBlending=!1,F._hasSetAmbient=!1,F._useSpecularMaterial=!1,F._useEmissiveMaterial=!1,F._useNormalMaterial=!1,F._useShininess=1,F._useLineColor=!1,F._useVertexColor=!1,F.registerEnabled=[],F._tint=[255,255,255,255],F.constantAttenuation=1,F.linearAttenuation=0,F.quadraticAttenuation=0,F.uMVMatrix=new f.default.Matrix,F.uPMatrix=new f.default.Matrix,F.uNMatrix=new f.default.Matrix("mat3"),F._currentNormal=new f.default.Vector(0,0,1),F._curCamera=new f.default.Camera(g(F)),F._curCamera._computeCameraDefaultSettings(),F._curCamera._setDefaultCamera(),F.prevTouches=[],F.zoomVelocity=0,F.rotateVelocity=new f.default.Vector(0,0),F.moveVelocity=new f.default.Vector(0,0),F.executeZoom=!1,F.executeRotateAndMove=!1,F._defaultLightShader=void 0,F._defaultImmediateModeShader=void 0,F._defaultNormalShader=void 0,F._defaultColorShader=void 0,F._defaultPointShader=void 0,F.userFillShader=void 0,F.userStrokeShader=void 0,F.userPointShader=void 0,F.retainedMode={geometry:{},buffers:{stroke:[new f.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",g(F),F._flatten),new f.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",g(F),F._flatten),new f.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",g(F),F._flatten),new f.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",g(F),F._flatten),new f.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",g(F))],fill:[new f.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",g(F),F._vToNArray),new f.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",g(F),F._vToNArray),new f.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",g(F)),new f.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",g(F)),new f.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",g(F),F._flatten)],text:[new f.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",g(F),F._vToNArray),new f.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",g(F),F._flatten)]}},F.immediateMode={geometry:new f.default.Geometry,shapeMode:h.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new f.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",g(F),F._vToNArray),new f.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",g(F),F._vToNArray),new f.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",g(F)),new f.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",g(F)),new f.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",g(F),F._flatten)],stroke:[new f.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",g(F),F._flatten),new f.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",g(F),F._flatten),new f.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",g(F),F._flatten),new f.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",g(F),F._flatten),new f.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",g(F))],point:F.GL.createBuffer()}},F.pointSize=5,F.curStrokeWeight=1,F.curStrokeCap=h.ROUND,F.curStrokeJoin=h.ROUND,F.textures=new Map,F.framebuffers=new Set,F.textureMode=h.IMAGE,F.textureWrapX=h.CLAMP,F.textureWrapY=h.CLAMP,F._tex=null,F._curveTightness=6,F._lookUpTableBezier=[],F._lookUpTableQuadratic=[],F._lutBezierDetail=0,F._lutQuadraticDetail=0,F.isProcessingVertices=!1,F._tessy=F._initTessy(),F.fontInfos={},F._curShader=void 0,F;throw new TypeError("Cannot call a class as a function")}return k=G,(V=[{key:"_setAttributeDefaults",value:function(F){var W={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};F._glAttributes===null?F._glAttributes=W:F._glAttributes=Object.assign(W,F._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?h.WEBGL2:h.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var F=this.drawingContext;F.enable(F.DEPTH_TEST),F.depthFunc(F.LEQUAL),F.viewport(0,0,F.drawingBufferWidth,F.drawingBufferHeight),F.pixelStorei(F.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_resetContext",value:function(F,W){var Q,J=this.width,ee=this.height,te=this.canvas.id,se=this._pInst instanceof f.default.Graphics;se?((Q=this._pInst).canvas.parentNode.removeChild(Q.canvas),Q.canvas=document.createElement("canvas"),(Q._pInst._userNode||document.body).appendChild(Q.canvas),f.default.Element.call(Q,Q.canvas,Q._pInst),Q.width=J,Q.height=ee):((Q=this.canvas)&&Q.parentNode.removeChild(Q),(Q=document.createElement("canvas")).id=te,(this._pInst._userNode||document.body).appendChild(Q),this._pInst.canvas=Q,this.canvas=Q),te=new f.default.RendererGL(this._pInst.canvas,this._pInst,!se),this._pInst._setProperty("_renderer",te),te.resize(J,ee),te._applyDefaults(),se||this._pInst._elements.push(te),typeof W=="function"&&setTimeout(function(){W.apply(window._renderer,F)},0)}},{key:"_update",value:function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"background",value:function(){var F=(J=(J=this._pInst).color.apply(J,arguments)).levels[0]/255,W=J.levels[1]/255,Q=J.levels[2]/255,J=J.levels[3]/255;this.clear(F,W,Q,J)}},{key:"fill",value:function(F,W,Q,J){var ee=f.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=ee._array,this.drawMode=h.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(F,W,Q,J){var ee=f.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=ee._array}},{key:"strokeCap",value:function(F){this.curStrokeCap=F}},{key:"strokeJoin",value:function(F){this.curStrokeJoin=F}},{key:"filter",value:function(F){f.default._friendlyError("filter() does not work in WEBGL mode")}},{key:"blendMode",value:function(F){F===h.DARKEST||F===h.LIGHTEST||F===h.ADD||F===h.BLEND||F===h.SUBTRACT||F===h.SCREEN||F===h.EXCLUSION||F===h.REPLACE||F===h.MULTIPLY||F===h.REMOVE?this.curBlendMode=F:F!==h.BURN&&F!==h.OVERLAY&&F!==h.HARD_LIGHT&&F!==h.SOFT_LIGHT&&F!==h.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(F,W){this._isErasing||(this._applyBlendMode(h.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,F/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,W/255])}},{key:"noErase",value:function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))}},{key:"strokeWeight",value:function(F){this.curStrokeWeight!==F&&(this.pointSize=F,this.curStrokeWeight=F)}},{key:"_getPixel",value:function(F,W){var Q=this.GL;return N(Q,null,F,W,Q.RGBA,Q.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var F,W,Q=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(F=this._pInst._pixelDensity,W=this.GL,Q._setProperty("pixels",z(Q.pixels,W,null,0,0,this.width*F,this.height*F,W.RGBA,W.UNSIGNED_BYTE,this.height*F)))}},{key:"updatePixels",value:function(){var F=this._getTempFramebuffer();F.pixels=this._pixelsState.pixels,F.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(h.CENTER),this._pInst.image(F,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:h.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:h.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(F){return this.retainedMode.geometry[F]!==void 0}},{key:"resize",value:function(F,W){f.default.Renderer.prototype.resize.call(this,F,W),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize();var Q=((F=this._pixelsState).pixels!==void 0&&F._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0);W=!1,F=void 0;try{for(var J,ee=this.framebuffers[Symbol.iterator]();!(Q=(J=ee.next()).done);Q=!0)J.value._canvasSizeChanged()}catch(te){W=!0,F=te}finally{try{Q||ee.return==null||ee.return()}finally{if(W)throw F}}}},{key:"clear",value:function(){var F=(arguments.length<=0?void 0:arguments[0])||0,W=(arguments.length<=1?void 0:arguments[1])||0,Q=(arguments.length<=2?void 0:arguments[2])||0,J=(arguments.length<=3?void 0:arguments[3])||0;this.GL.clearColor(F*J,W*J,Q*J,J),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(F,W,Q,J,ee,te){arguments.length===16?f.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([F,W,0,0,Q,J,0,0,0,0,1,0,ee,te,0,1])}},{key:"translate",value:function(F,W,Q){return F instanceof f.default.Vector&&(Q=F.z,W=F.y,F=F.x),this.uMVMatrix.translate([F,W,Q]),this}},{key:"scale",value:function(F,W,Q){return this.uMVMatrix.scale(F,W,Q),this}},{key:"rotate",value:function(F,W){return W===void 0?this.rotateZ(F):(f.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)}},{key:"rotateX",value:function(F){return this.rotate(F,1,0,0),this}},{key:"rotateY",value:function(F){return this.rotate(F,0,1,0),this}},{key:"rotateZ",value:function(F){return this.rotate(F,0,0,1),this}},{key:"push",value:function(){var F=f.default.Renderer.prototype.push.apply(this),W=F.properties;return W.uMVMatrix=this.uMVMatrix.copy(),W.uPMatrix=this.uPMatrix.copy(),W._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),W.ambientLightColors=this.ambientLightColors.slice(),W.specularColors=this.specularColors.slice(),W.directionalLightDirections=this.directionalLightDirections.slice(),W.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),W.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),W.pointLightPositions=this.pointLightPositions.slice(),W.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),W.pointLightSpecularColors=this.pointLightSpecularColors.slice(),W.spotLightPositions=this.spotLightPositions.slice(),W.spotLightDirections=this.spotLightDirections.slice(),W.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),W.spotLightSpecularColors=this.spotLightSpecularColors.slice(),W.spotLightAngle=this.spotLightAngle.slice(),W.spotLightConc=this.spotLightConc.slice(),W.userFillShader=this.userFillShader,W.userStrokeShader=this.userStrokeShader,W.userPointShader=this.userPointShader,W.pointSize=this.pointSize,W.curStrokeWeight=this.curStrokeWeight,W.curStrokeColor=this.curStrokeColor,W.curFillColor=this.curFillColor,W.curAmbientColor=this.curAmbientColor,W.curSpecularColor=this.curSpecularColor,W.curEmissiveColor=this.curEmissiveColor,W._hasSetAmbient=this._hasSetAmbient,W._useSpecularMaterial=this._useSpecularMaterial,W._useEmissiveMaterial=this._useEmissiveMaterial,W._useShininess=this._useShininess,W.constantAttenuation=this.constantAttenuation,W.linearAttenuation=this.linearAttenuation,W.quadraticAttenuation=this.quadraticAttenuation,W._enableLighting=this._enableLighting,W._useNormalMaterial=this._useNormalMaterial,W._tex=this._tex,W.drawMode=this.drawMode,W._currentNormal=this._currentNormal,W.curBlendMode=this.curBlendMode,F}},{key:"resetMatrix",value:function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this}},{key:"_getImmediateStrokeShader",value:function(){var F=this.userStrokeShader;return F&&F.isStrokeShader()?F:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getImmediateFillShader",value:function(){var F=this.userFillShader;if(this._useNormalMaterial&&(!F||!F.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!F||!F.isLightShader())return this._getLightShader()}else if(this._tex){if(!F||!F.isTextureShader())return this._getLightShader()}else if(!F)return this._getImmediateModeShader();return F}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var F=this.userFillShader;if(this._enableLighting){if(!F||!F.isLightShader())return this._getLightShader()}else if(this._tex){if(!F||!F.isTextureShader())return this._getLightShader()}else if(!F)return this._getColorShader();return F}},{key:"_getImmediatePointShader",value:function(){var F=this.userPointShader;return F&&F.isPointShader()?F:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new f.default.Shader(this,L.phongVert,L.phongFrag):this._defaultLightShader=new f.default.Shader(this,L.lightVert,L.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new f.default.Shader(this,L.immediateVert,L.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new f.default.Shader(this,L.normalVert,L.normalFrag)),this._defaultNormalShader}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new f.default.Shader(this,L.normalVert,L.basicFrag)),this._defaultColorShader}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new f.default.Shader(this,L.pointVert,L.pointFrag)),this._defaultPointShader}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new f.default.Shader(this,L.lineVert,L.lineFrag)),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===h.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new f.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(F,W){var Q="";return this.webglVersion===h.WEBGL2&&(Q+=`#version 300 es
#define WEBGL2
`),F==="vert"?Q+=`#define VERTEX_SHADER
`:F==="frag"&&(Q+=`#define FRAGMENT_SHADER
`),W&&(Q+="precision ".concat(W,` float;
`)),Q}},{key:"_getEmptyTexture",value:function(){var F;return this._emptyTexture||((F=new f.default.Image(1,1)).set(0,0,255),this._emptyTexture=new f.default.Texture(this,F)),this._emptyTexture}},{key:"getTexture",value:function(F){F instanceof f.default.Framebuffer&&(F=F.color);var W=this.textures.get(F);return W||(W=new f.default.Texture(this,F),this.textures.set(F,W),W)}},{key:"createFramebuffer",value:function(F){return new f.default.Framebuffer(this,F)}},{key:"_setStrokeUniforms",value:function(F){F.bindShader(),F.setUniform("uUseLineColor",this._useLineColor),F.setUniform("uMaterialColor",this.curStrokeColor),F.setUniform("uStrokeWeight",this.curStrokeWeight),F.setUniform("uStrokeCap",E[this.curStrokeCap]),F.setUniform("uStrokeJoin",j[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(F){F.bindShader(),F.setUniform("uUseVertexColor",this._useVertexColor),F.setUniform("uMaterialColor",this.curFillColor),F.setUniform("isTexture",!!this._tex),this._tex&&F.setUniform("uSampler",this._tex),F.setUniform("uTint",this._tint),F.setUniform("uHasSetAmbient",this._hasSetAmbient),F.setUniform("uAmbientMatColor",this.curAmbientColor),F.setUniform("uSpecularMatColor",this.curSpecularColor),F.setUniform("uEmissiveMatColor",this.curEmissiveColor),F.setUniform("uSpecular",this._useSpecularMaterial),F.setUniform("uEmissive",this._useEmissiveMaterial),F.setUniform("uShininess",this._useShininess),F.setUniform("uUseLighting",this._enableLighting);var W=this.pointLightDiffuseColors.length/3;F.setUniform("uPointLightCount",W),F.setUniform("uPointLightLocation",this.pointLightPositions),F.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),F.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),W=this.directionalLightDiffuseColors.length/3,F.setUniform("uDirectionalLightCount",W),F.setUniform("uLightingDirection",this.directionalLightDirections),F.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),F.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),W=this.ambientLightColors.length/3,F.setUniform("uAmbientLightCount",W),F.setUniform("uAmbientColor",this.ambientLightColors),W=this.spotLightDiffuseColors.length/3,F.setUniform("uSpotLightCount",W),F.setUniform("uSpotLightAngle",this.spotLightAngle),F.setUniform("uSpotLightConc",this.spotLightConc),F.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),F.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),F.setUniform("uSpotLightLocation",this.spotLightPositions),F.setUniform("uSpotLightDirection",this.spotLightDirections),F.setUniform("uConstantAttenuation",this.constantAttenuation),F.setUniform("uLinearAttenuation",this.linearAttenuation),F.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),F.bindTextures()}},{key:"_setPointUniforms",value:function(F){F.bindShader(),F.setUniform("uMaterialColor",this.curStrokeColor),F.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(F,W,Q,J,ee){W=W||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(W,F),Q!==void 0&&(F=new(J||Float32Array)(Q),this.GL.bufferData(W,F,ee||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(F,W){return F.length===W.length&&F.every(function(Q,J){return Q===W[J]})}},{key:"_isTypedArray",value:function(F){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(W){return F instanceof W})}},{key:"_flatten",value:function(F){if(F.length===0)return[];var W;if(2e4<F.length){for(var Q=[],J=F.slice(),ee=J.pop();Array.isArray(ee)?J.push.apply(J,l(ee)):Q.push(ee),J.length&&(ee=J.pop())!==void 0;);return Q.reverse(),Q}return(W=[]).concat.apply(W,l(F))}},{key:"_vToNArray",value:function(F){var W=[],Q=!0,J=!1,ee=void 0;try{for(var te,se=F[Symbol.iterator]();!(Q=(te=se.next()).done);Q=!0){var ce=te.value;W.push(ce.x,ce.y,ce.z)}}catch(q){J=!0,ee=q}finally{try{Q||se.return==null||se.return()}finally{if(J)throw ee}}return W}},{key:"_bezierCoefficients",value:function(F){var W=F*F,Q=1-F,J=Q*Q;return[J*Q,3*J*F,3*Q*W,W*F]}},{key:"_quadraticCoefficients",value:function(F){var W=1-F;return[W*W,2*W*F,F*F]}},{key:"_bezierToCatmull",value:function(F){return[F[1],F[1]+(F[2]-F[0])/this._curveTightness,F[2]-(F[3]-F[1])/this._curveTightness,F[2]]}},{key:"_initTessy",value:function(){var F=new b.default.GluTesselator;return F.gluTessCallback(b.default.gluEnum.GLU_TESS_VERTEX_DATA,function(W,Q){for(var J=0;J<W.length;J++)Q.push(W[J])}),F.gluTessCallback(b.default.gluEnum.GLU_TESS_BEGIN,function(W){W!==b.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(W))}),F.gluTessCallback(b.default.gluEnum.GLU_TESS_ERROR,function(W){console.log("error callback"),console.log("error number: ".concat(W))}),F.gluTessCallback(b.default.gluEnum.GLU_TESS_COMBINE,function(W,Q,J){for(var ee=new Array(f.default.RendererGL.prototype.tessyVertexSize).fill(0),te=0;te<J.length;te++)for(var se=0;se<ee.length;se++)J[te]!==0&&Q[te]&&(ee[se]+=Q[te][se]*J[te]);return ee}),F.gluTessCallback(b.default.gluEnum.GLU_TESS_EDGE_FLAG,function(W){}),F}},{key:"_triangulate",value:function(F){var W=F[0]?F[0][2]:void 0,Q=!0,J=!0,ee=!1,te=void 0;try{for(var se,ce=F[Symbol.iterator]();!(J=(se=ce.next()).done);J=!0)for(var q=se.value,Z=0;Z<q.length;Z+=f.default.RendererGL.prototype.tessyVertexSize)if(q[Z+2]!==W){Q=!1;break}}catch(Ce){ee=!0,te=Ce}finally{try{J||ce.return==null||ce.return()}finally{if(ee)throw te}}Q?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0),ee=[];var ie=(this._tessy.gluTessBeginPolygon(ee),!0),pe=(te=!1,void 0);try{for(var ge,be=F[Symbol.iterator]();!(ie=(ge=be.next()).done);ie=!0){var le=ge.value;this._tessy.gluTessBeginContour();for(var re=0;re<le.length;re+=f.default.RendererGL.prototype.tessyVertexSize){var Te=le.slice(re,re+f.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(Te,Te)}this._tessy.gluTessEndContour()}}catch(Ce){te=!0,pe=Ce}finally{try{ie||be.return==null||be.return()}finally{if(te)throw pe}}return this._tessy.gluTessEndPolygon(),ee}}])&&o(k.prototype,V),G}(f.default.Renderer),f.default.prototype._assert3d=function(V){if(!this._renderer.isP3D)throw new Error("".concat(V,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},f.default.RendererGL.prototype.tessyVertexSize=12,t=f.default.RendererGL,M.default=t},{"../core/constants":262,"../core/main":273,"../core/p5.Renderer":276,"./p5.Camera":321,"./p5.Matrix":324,"./p5.Shader":329,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.copy-within":152,"core-js/modules/es.array.every":153,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":157,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.some":165,"core-js/modules/es.map":168,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.set":187,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.float32-array":209,"core-js/modules/es.typed-array.float64-array":210,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.int16-array":214,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint16-array":230,"core-js/modules/es.typed-array.uint32-array":231,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236,libtess:245,path:248}],329:[function(t,R,M){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0;var p=(t=t("../core/main"))&&t.__esModule?t:{default:t};function f(h,b){for(var w=0;w<b.length;w++){var c=b[w];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,c.key,c)}}p.default.Shader=function(){function h(c,l,o){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this._renderer=c,this._vertSrc=l,this._fragSrc=o,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]}var b,w;return b=h,(w=[{key:"init",value:function(){if(this._glProgram===0){var c=this._renderer.GL;if(this._vertShader=c.createShader(c.VERTEX_SHADER),c.shaderSource(this._vertShader,this._vertSrc),c.compileShader(this._vertShader),!c.getShaderParameter(this._vertShader,c.COMPILE_STATUS))return p.default._friendlyError("Yikes! An error occurred compiling the vertex shader:".concat(c.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=c.createShader(c.FRAGMENT_SHADER),c.shaderSource(this._fragShader,this._fragSrc),c.compileShader(this._fragShader),!c.getShaderParameter(this._fragShader,c.COMPILE_STATUS))return p.default._friendlyError("Darn! An error occurred compiling the fragment shader:".concat(c.getShaderInfoLog(this._fragShader))),null;this._glProgram=c.createProgram(),c.attachShader(this._glProgram,this._vertShader),c.attachShader(this._glProgram,this._fragShader),c.linkProgram(this._glProgram),c.getProgramParameter(this._glProgram,c.LINK_STATUS)||p.default._friendlyError("Snap! Error linking shader program: ".concat(c.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var c=this._renderer.GL,l=c.getProgramParameter(this._glProgram,c.ACTIVE_ATTRIBUTES),o=0;o<l;++o){var u=c.getActiveAttrib(this._glProgram,o),m=u.name,g=c.getAttribLocation(this._glProgram,m),_={};_.name=m,_.location=g,_.index=o,_.type=u.type,_.size=u.size,this.attributes[m]=_}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var c=this._renderer.GL,l=c.getProgramParameter(this._glProgram,c.ACTIVE_UNIFORMS),o=0,u=0;u<l;++u){var m=c.getActiveUniform(this._glProgram,u),g={},_=(g.location=c.getUniformLocation(this._glProgram,m.name),g.size=m.size,m.name);1<m.size&&(_=_.substring(0,_.indexOf("[0]"))),g.name=_,g.type=m.type,g._cachedData=void 0,g.type===c.SAMPLER_2D&&(g.samplerIndex=o,o++,this.samplers.push(g)),g.isArray=1<m.size||g.type===c.FLOAT_MAT3||g.type===c.FLOAT_MAT4||g.type===c.FLOAT_VEC2||g.type===c.FLOAT_VEC3||g.type===c.FLOAT_VEC4||g.type===c.INT_VEC2||g.type===c.INT_VEC4||g.type===c.INT_VEC3,this.uniforms[_]=g}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var c=this._renderer.GL,l=!0,o=!1,u=void 0;try{for(var m,g=this.samplers[Symbol.iterator]();!(l=(m=g.next()).done);l=!0){var _=m.value,v=_.texture;v===void 0&&(v=this._renderer._getEmptyTexture()),c.activeTexture(c.TEXTURE0+_.samplerIndex),v.bindTexture(),v.update(),c.uniform1i(_.location,_.samplerIndex)}}catch(x){o=!0,u=x}finally{try{l||g.return==null||g.return()}finally{if(o)throw u}}}},{key:"updateTextures",value:function(){var c=!0,l=!1,o=void 0;try{for(var u,m=this.samplers[Symbol.iterator]();!(c=(u=m.next()).done);c=!0){var g=u.value.texture;g&&g.update()}}catch(_){l=!0,o=_}finally{try{c||m.return==null||m.return()}finally{if(l)throw o}}}},{key:"unbindTextures",value:function(){var c=!0,l=!1,o=void 0;try{for(var u,m=this.samplers[Symbol.iterator]();!(c=(u=m.next()).done);c=!0){var g=u.value;this.setUniform(g.name,this._renderer._getEmptyTexture())}}catch(_){l=!0,o=_}finally{try{c||m.return==null||m.return()}finally{if(l)throw o}}}},{key:"_setMatrixUniforms",value:function(){var c=this._renderer._curCamera.cameraMatrix,l=this._renderer.uPMatrix,o=this._renderer.uMVMatrix,u=o.copy();u.mult(l),this.isStrokeShader()&&(this._renderer._curCamera.cameraType==="default"?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",c.mat4),this.setUniform("uProjectionMatrix",l.mat4),this.setUniform("uModelViewMatrix",o.mat4),this.setUniform("uModelViewProjectionMatrix",u.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))}},{key:"useProgram",value:function(){var c=this._renderer.GL;return this._renderer._curShader!==this&&(c.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(c,l){var o=this.uniforms[c];if(o){var u=this._renderer.GL;if(o.isArray){if(o._cachedData&&this._renderer._arraysEqual(o._cachedData,l))return;o._cachedData=l.slice(0)}else{if(o._cachedData&&o._cachedData===l)return;Array.isArray(l)?o._cachedData=l.slice(0):o._cachedData=l}var m=o.location;switch(this.useProgram(),o.type){case u.BOOL:l===!0?u.uniform1i(m,1):u.uniform1i(m,0);break;case u.INT:1<o.size?l.length&&u.uniform1iv(m,l):u.uniform1i(m,l);break;case u.FLOAT:1<o.size?l.length&&u.uniform1fv(m,l):u.uniform1f(m,l);break;case u.FLOAT_MAT3:u.uniformMatrix3fv(m,!1,l);break;case u.FLOAT_MAT4:u.uniformMatrix4fv(m,!1,l);break;case u.FLOAT_VEC2:1<o.size?l.length&&u.uniform2fv(m,l):u.uniform2f(m,l[0],l[1]);break;case u.FLOAT_VEC3:1<o.size?l.length&&u.uniform3fv(m,l):u.uniform3f(m,l[0],l[1],l[2]);break;case u.FLOAT_VEC4:1<o.size?l.length&&u.uniform4fv(m,l):u.uniform4f(m,l[0],l[1],l[2],l[3]);break;case u.INT_VEC2:1<o.size?l.length&&u.uniform2iv(m,l):u.uniform2i(m,l[0],l[1]);break;case u.INT_VEC3:1<o.size?l.length&&u.uniform3iv(m,l):u.uniform3i(m,l[0],l[1],l[2]);break;case u.INT_VEC4:1<o.size?l.length&&u.uniform4iv(m,l):u.uniform4i(m,l[0],l[1],l[2],l[3]);break;case u.SAMPLER_2D:u.activeTexture(u.TEXTURE0+o.samplerIndex),o.texture=l instanceof p.default.Texture?l:this._renderer.getTexture(l),u.uniform1i(m,o.samplerIndex),o.texture.src.gifProperties&&o.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return this.attributes.aNormal!==void 0||this.uniforms.uUseLighting!==void 0||this.uniforms.uAmbientLightCount!==void 0||this.uniforms.uDirectionalLightCount!==void 0||this.uniforms.uPointLightCount!==void 0||this.uniforms.uAmbientColor!==void 0||this.uniforms.uDirectionalDiffuseColors!==void 0||this.uniforms.uDirectionalSpecularColors!==void 0||this.uniforms.uPointLightLocation!==void 0||this.uniforms.uPointLightDiffuseColors!==void 0||this.uniforms.uPointLightSpecularColors!==void 0||this.uniforms.uLightingDirection!==void 0||this.uniforms.uSpecular!==void 0}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(c,l,o,u,m,g){var _;return c&&(c=c.location)!==-1&&(_=this._renderer.GL,this._renderer.registerEnabled[c]||(_.enableVertexAttribArray(c),this._renderer.registerEnabled[c]=!0),this._renderer.GL.vertexAttribPointer(c,l,o||_.FLOAT,u||!1,m||0,g||0)),this}}])&&f(b.prototype,w),h}(),t=p.default.Shader,M.default=t},{"../core/main":273,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.function.name":167,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],330:[function(t,R,M){function p(o){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(o)}function f(o){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(u){return p(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":p(u)})(o)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(M,"__esModule",{value:!0}),M.checkWebGLCapabilities=c,M.default=void 0;var h=(l=t("../core/main"))&&l.__esModule?l:{default:l},b=function(o){if(o&&o.__esModule)return o;if(o===null||f(o)!=="object"&&typeof o!="function")return{default:o};var u=function(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,x)}();if(u&&u.has(o))return u.get(o);var m,g={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in o){var v;Object.prototype.hasOwnProperty.call(o,m)&&((v=_?Object.getOwnPropertyDescriptor(o,m):null)&&(v.get||v.set)?Object.defineProperty(g,m,v):g[m]=o[m])}return g.default=o,u&&u.set(o,g),g}(t("../core/constants"));function w(o,u){for(var m=0;m<u.length;m++){var g=u[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(o,g.key,g)}}function c(o){var u=o.GL,m=(o=o.webglVersion)===b.WEBGL2?u.getExtension("EXT_color_buffer_float")&&u.getExtension("EXT_float_blend"):u.getExtension("OES_texture_float");return{float:m,floatLinear:m&&u.getExtension("OES_texture_float_linear"),halfFloat:o=o===b.WEBGL2?u.getExtension("EXT_color_buffer_float"):u.getExtension("OES_texture_half_float"),halfFloatLinear:o&&u.getExtension("OES_texture_half_float_linear")}}h.default.Texture=function(){function o(g,_,v){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");this._renderer=g;var x=this._renderer.GL;return v=v||{},this.src=_,this.glTex=void 0,this.glTarget=x.TEXTURE_2D,this.glFormat=v.format||x.RGBA,this.mipmaps=!1,this.glMinFilter=v.minFilter||x.LINEAR,this.glMagFilter=v.magFilter||x.LINEAR,this.glWrapS=v.wrapS||x.CLAMP_TO_EDGE,this.glWrapT=v.wrapT||x.CLAMP_TO_EDGE,this.glDataType=v.dataType||x.UNSIGNED_BYTE,v=c(g),this.glFormat!==x.HALF_FLOAT||v.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=x.FLOAT),this.glFormat!==x.HALF_FLOAT||this.glMinFilter!==x.LINEAR&&this.glMagFilter!==x.LINEAR||v.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===x.LINEAR&&(this.glMinFilter=x.NEAREST),this.glMagFilter===x.LINEAR&&(this.glMagFilter=x.NEAREST)),this.glFormat!==x.FLOAT||v.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=x.UNSIGNED_BYTE),this.glFormat!==x.FLOAT||this.glMinFilter!==x.LINEAR&&this.glMagFilter!==x.LINEAR||v.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===x.LINEAR&&(this.glMinFilter=x.NEAREST),this.glMagFilter===x.LINEAR&&(this.glMagFilter=x.NEAREST)),this.isSrcMediaElement=h.default.MediaElement!==void 0&&_ instanceof h.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=h.default.Element!==void 0&&_ instanceof h.default.Element&&!(_ instanceof h.default.Graphics)&&!(_ instanceof h.default.Renderer),this.isSrcP5Image=_ instanceof h.default.Image,this.isSrcP5Graphics=_ instanceof h.default.Graphics,this.isSrcP5Renderer=_ instanceof h.default.Renderer,this.isImageData=typeof ImageData<"u"&&_ instanceof ImageData,this.isFramebufferTexture=_ instanceof h.default.FramebufferTexture,g=this._getTextureDataFromSource(),this.width=g.width,this.height=g.height,this.init(g),this}var u,m;return u=o,(m=[{key:"_getTextureDataFromSource",value:function(){var g;return this.isFramebufferTexture?g=this.src.rawTexture():this.isSrcP5Image?g=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?g=this.src.elt:this.isImageData&&(g=this.src),g}},{key:"init",value:function(g){var _,v=this._renderer.GL;this.isFramebufferTexture||(this.glTex=v.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,this.glMagFilter),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(_=new Uint8Array([1,1,1,1]),v.texImage2D(this.glTarget,0,v.RGBA,1,1,0,this.glFormat,this.glDataType,_)):v.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,g))}},{key:"update",value:function(){var g,_,v,x=this.src;return x.width!==0&&x.height!==0&&!this.isFramebufferTexture&&(g=this._getTextureDataFromSource(),_=!1,v=this._renderer.GL,g.width!==this.width||g.height!==this.height?(_=!0,this.width=g.width||x.width,this.height=g.height||x.height,this.isSrcP5Image?x.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&x.setModified(!0)):this.isSrcP5Image?x.isModified()&&x.setModified(!(_=!0)):this.isSrcMediaElement?x.isModified()?x.setModified(!(_=!0)):x.loadedmetadata&&this._videoPrevUpdateTime!==x.time()&&(this._videoPrevUpdateTime=x.time(),_=!0):this.isImageData?x._dirty&&(_=!(x._dirty=!1)):_=!0,_&&(this.bindTexture(),v.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,g)),_)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(g,_){var v=this._renderer.GL;g===b.NEAREST?this.glMinFilter=v.NEAREST:this.glMinFilter=v.LINEAR,_===b.NEAREST?this.glMagFilter=v.NEAREST:this.glMagFilter=v.LINEAR,this.bindTexture(),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,this.glMinFilter),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"setWrapMode",value:function(g,_){function v(O){return(O&O-1)==0}var x=this._renderer.GL,E=(E=this._getTextureDataFromSource()).naturalWidth&&E.naturalHeight?(j=E.naturalWidth,E.naturalHeight):(j=this.width,this.height),j=v(j);E=v(E),g===b.REPEAT?this._renderer.webglVersion===b.WEBGL2||j&&E?this.glWrapS=x.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=x.CLAMP_TO_EDGE):g===b.MIRROR?this._renderer.webglVersion===b.WEBGL2||j&&E?this.glWrapS=x.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=x.CLAMP_TO_EDGE):this.glWrapS=x.CLAMP_TO_EDGE,_===b.REPEAT?this._renderer.webglVersion===b.WEBGL2||j&&E?this.glWrapT=x.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=x.CLAMP_TO_EDGE):_===b.MIRROR?this._renderer.webglVersion===b.WEBGL2||j&&E?this.glWrapT=x.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=x.CLAMP_TO_EDGE):this.glWrapT=x.CLAMP_TO_EDGE,this.bindTexture(),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,this.glWrapS),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}])&&w(u.prototype,m),o}();var l=h.default.Texture;M.default=l},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],331:[function(t,R,M){function p(v){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(v)}function f(v){return(f=typeof Symbol=="function"&&p(Symbol.iterator)==="symbol"?function(x){return p(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":p(x)})(v)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.iterator");var h,b=(h=t("../core/main"))&&h.__esModule?h:{default:h},w=function(v){if(v&&v.__esModule)return v;if(v===null||f(v)!=="object"&&typeof v!="function")return{default:v};var x=function(){var L;return typeof WeakMap!="function"?null:(L=new WeakMap,L)}();if(x&&x.has(v))return x.get(v);var E,j={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(E in v){var P;Object.prototype.hasOwnProperty.call(v,E)&&((P=O?Object.getOwnPropertyDescriptor(v,E):null)&&(P.get||P.set)?Object.defineProperty(j,E,P):j[E]=v[E])}return j.default=v,x&&x.set(v,j),j}(t("../core/constants"));function c(v,x){if(!(v instanceof x))throw new TypeError("Cannot call a class as a function")}function l(v,x){for(var E=0;E<x.length;E++){var j=x[E];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(v,j.key,j)}}function o(v,x,E){x&&l(v.prototype,x)}t("./p5.Shader"),t("./p5.RendererGL.Retained"),b.default.RendererGL.prototype._applyTextProperties=function(){},b.default.RendererGL.prototype.textWidth=function(v){return this._isOpenType()?this._textFont._textWidth(v,this._textSize):0};var u=function(){function v(x,E){c(this,v),this.width=x,this.height=E,this.infos=[]}return o(v,[{key:"findImage",value:function(x){var E,j,O=this.width*this.height;if(O<x)throw new Error("font is too complex to render in 3D");for(var P=this.infos.length-1;0<=P;--P){var L=this.infos[P];if(L.index+x<O){j=(E=L).imageData;break}}if(!E){try{j=new ImageData(this.width,this.height)}catch{var z=document.getElementsByTagName("canvas")[0],N=!z,V=(z||((z=document.createElement("canvas")).style.display="none",document.body.appendChild(z)),z.getContext("2d"));V&&(j=V.createImageData(this.width,this.height)),N&&document.body.removeChild(z)}this.infos.push(E={index:0,imageData:j})}return V=E.index,E.index+=x,j._dirty=!0,{imageData:j,index:V}}}]),v}();function m(v,x,E,j,O){var P=v.imageData.data;v=4*v.index++,P[v++]=x,P[v++]=E,P[v++]=j,P[+v]=O}var g=Math.sqrt(3),_=function(){function v(x){c(this,v),this.font=x,this.strokeImageInfos=new u(64,64),this.colDimImageInfos=new u(64,64),this.rowDimImageInfos=new u(64,64),this.colCellImageInfos=new u(64,64),this.rowCellImageInfos=new u(64,64),this.glyphInfos={}}return o(v,[{key:"getGlyphInfo",value:function(x){var E=this.glyphInfos[x.index];if(!E){var j=x.getBoundingBox(),O=j.x1,P=j.y1,L=j.x2-O,z=j.y2-P,N=x.path.commands;if(L==0||z==0||!N.length)return this.glyphInfos[x.index]={};for(var V=[],k=[],H=[],G=8;0<=G;--G)H.push([]);for(G=8;0<=G;--G)k.push([]);var F,W,Q,J,ee=function(){function me(je,Ie,Ye,it){c(this,me),this.p0=je,this.c0=Ie,this.c1=Ye,this.p1=it}return o(me,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return b.default.Vector.sub(b.default.Vector.sub(this.p1,this.p0),b.default.Vector.mult(b.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(je){var Ie=b.default.Vector.lerp(this.p0,this.c0,je),Ye=b.default.Vector.lerp(this.c0,this.c1,je),it=b.default.Vector.lerp(Ie,Ye,je);return this.c1=b.default.Vector.lerp(this.c1,this.p1,je),this.c0=b.default.Vector.lerp(Ye,this.c1,je),Ye=b.default.Vector.lerp(it,this.c0,je),je=new me(this.p0,Ie,it,Ye),this.p0=Ye,je}},{key:"splitInflections",value:function(){var je=b.default.Vector.sub(this.c0,this.p0),Ie=b.default.Vector.sub(b.default.Vector.sub(this.c1,this.c0),je),Ye=b.default.Vector.sub(b.default.Vector.sub(b.default.Vector.sub(this.p1,this.c1),je),b.default.Vector.mult(Ie,2)),it=[],yt=Ie.x*Ye.y-Ie.y*Ye.x;return yt!==0&&0<=(je=(Ye=je.x*Ye.y-je.y*Ye.x)*Ye-4*yt*(je.x*Ie.y-je.y*Ie.x))&&(yt<0&&(yt=-yt,Ye=-Ye),je=(-Ye+(Ie=Math.sqrt(je)))/(2*yt),0<(Ye=(-Ye-Ie)/(2*yt))&&Ye<1&&(it.push(this.split(Ye)),je=1-(1-je)/(1-Ye)),0<je&&je<1&&it.push(this.split(je))),it.push(this),it}}]),me}(),te=!0,se=!1,ce=void 0;try{for(var q,Z=N[Symbol.iterator]();!(te=(q=Z.next()).done);te=!0){var ie=q.value,pe=(ie.x-O)/L,ge=(ie.y-P)/z;if(!ze(F,W,pe,ge)){switch(ie.type){case"M":Q=pe,J=ge;break;case"L":ue(F,W,pe,ge);break;case"Q":var be=(ie.x1-O)/L,le=(ie.y1-P)/z;st([F,pe,be],[W,ge,le],{x:F,y:W,cx:be,cy:le});break;case"Z":ze(F,W,Q,J)?V.push({x:F,y:W}):(ue(F,W,Q,J),V.push({x:Q,y:J}));break;case"C":for(var re=function(me,je,Ie,Ye,it,yt,Ze,at){me=new ee(new b.default.Vector(me,je),new b.default.Vector(Ie,Ye),new b.default.Vector(it,yt),new b.default.Vector(Ze,at)).splitInflections();var fe=[],ae=30/g,oe=!0;je=!1,Ie=void 0;try{for(var _e,he=me[Symbol.iterator]();!(oe=(_e=he.next()).done);oe=!0){for(var ke=_e.value,We=[],$e=void 0;!(.125<=($e=ae/ke.quadError()));){var Ee=Math.pow($e,.3333333333333333),Ge=ke.split(Ee),ht=ke.split(1-Ee/(1-Ee));fe.push(Ge),We.push(ke),ke=ht}$e<1&&fe.push(ke.split(.5)),fe.push(ke),Array.prototype.push.apply(fe,We.reverse())}}catch(wt){je=!0,Ie=wt}finally{try{oe||he.return==null||he.return()}finally{if(je)throw Ie}}return fe}(F,W,(ie.x1-O)/L,(ie.y1-P)/z,(ie.x2-O)/L,(ie.y2-P)/z,pe,ge),Te=0;Te<re.length;Te++){var Ce=re[Te].toQuadratic();st([Ce.x,Ce.x1,Ce.cx],[Ce.y,Ce.y1,Ce.cy],Ce)}break;default:throw new Error("unknown command type: ".concat(ie.type))}F=pe,W=ge}}}catch(me){se=!0,ce=me}finally{try{te||Z.return==null||Z.return()}finally{if(se)throw ce}}for(var Me=V.length,Se=this.strokeImageInfos.findImage(Me),Ue=Se.index,Fe=0;Fe<Me;++Fe){var Be=V[Fe];m(Se,ve(Be.x),ve(Be.y),ve(Be.cx),ve(Be.cy))}(E=this.glyphInfos[x.index]={glyph:x,uGlyphRect:[j.x1,-j.y1,j.x2,-j.y2],strokeImageInfo:Se,strokes:V,colInfo:He(H,this.colDimImageInfos,this.colCellImageInfos),rowInfo:He(k,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[E.colInfo.dimOffset,E.rowInfo.dimOffset]}return E;function st(me,je,Ie){var Ye=V.length;function it(ae,oe,_e){for(var he=ae.length;0<he--;){var ke=ae[he];ke<oe&&(oe=ke),_e<ke&&(_e=ke)}return{min:oe,max:_e}}V.push(Ie),Ie=it(me,1,0),me=Math.max(Math.floor(9*Ie.min-.5),0);for(var yt=Math.min(Math.ceil(9*Ie.max+.5),9),Ze=me;Ze<yt;++Ze)H[Ze].push(Ye);Ie=it(je,1,0),me=Math.max(Math.floor(9*Ie.min-.5),0);for(var at=Math.min(Math.ceil(9*Ie.max+.5),9),fe=me;fe<at;++fe)k[fe].push(Ye)}function ve(me){return(me=255*me)<0?0:255<me?255:me}function ue(me,je,Ie,Ye){st([me,Ie],[je,Ye],{x:me,y:je,cx:(me+Ie)/2,cy:(je+Ye)/2})}function ze(me,je,Ie,Ye){return Math.abs(Ie-me)<1e-5&&Math.abs(Ye-je)<1e-5}function He(me,je,Ie){for(var Ye=me.length,it=je.findImage(Ye),yt=(je=it.index,0),Ze=0;Ze<Ye;++Ze)yt+=me[Ze].length;for(var at=Ie.findImage(yt),fe=0;fe<Ye;++fe){var ae=me[fe],oe=ae.length,_e=at.index;m(it,_e>>7,127&_e,oe>>7,127&oe);for(var he=0;he<oe;++he){var ke=ae[he]+Ue;m(at,ke>>7,127&ke,0,0)}}return{cellImageInfo:at,dimOffset:je,dimImageInfo:it}}}}]),v}();b.default.RendererGL.prototype._renderText=function(v,x,E,j,O){if(this._textFont&&typeof this._textFont!="string"){if(!(O<=j)&&this._doFill){if(this._isOpenType()){v.push(),O=this._doStroke;var P=this.drawMode,L=(this._doStroke=!1,this.drawMode=w.TEXTURE,this._textFont.font),z=(z=this._textFont._fontInfo)||(this._textFont._fontInfo=new _(L)),N=(E=this._textFont._handleAlignment(this,x,E,j),j=this._textSize/L.unitsPerEm,this.translate(E.x,E.y,0),this.scale(j,j,1),this.GL),V=(E=!this._defaultFontShader,this._getFontShader()),k=(V.init(),V.bindShader(),E&&(V.setUniform("uGridImageSize",[64,64]),V.setUniform("uCellsImageSize",[64,64]),V.setUniform("uStrokeImageSize",[64,64]),V.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),H=(k||((j=this._textGeom=new b.default.Geometry(1,1,function(){for(var be=0;be<=1;be++)for(var le=0;le<=1;le++)this.vertices.push(new b.default.Vector(le,be,0)),this.uvs.push(le,be)})).computeFaces().computeNormals(),k=this.createBuffers("glyph",j)),!0);E=!1,j=void 0;try{for(var G,F=this.retainedMode.buffers.text[Symbol.iterator]();!(H=(G=F.next()).done);H=!0)G.value._prepareBuffer(k,V)}catch(be){E=!0,j=be}finally{try{H||F.return==null||F.return()}finally{if(E)throw j}}this._bindBuffer(k.indexBuffer,N.ELEMENT_ARRAY_BUFFER),V.setUniform("uMaterialColor",this.curFillColor),N.pixelStorei(N.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var W=0,Q=null,J=L.stringToGlyphs(x),ee=!0,te=!1,se=void 0;try{for(var ce,q=J[Symbol.iterator]();!(ee=(ce=q.next()).done);ee=!0){var Z,ie,pe=ce.value,ge=(Q&&(W+=L.getKerningValue(Q,pe)),z.getGlyphInfo(pe));ge.uGlyphRect&&(Z=ge.rowInfo,ie=ge.colInfo,V.setUniform("uSamplerStrokes",ge.strokeImageInfo.imageData),V.setUniform("uSamplerRowStrokes",Z.cellImageInfo.imageData),V.setUniform("uSamplerRows",Z.dimImageInfo.imageData),V.setUniform("uSamplerColStrokes",ie.cellImageInfo.imageData),V.setUniform("uSamplerCols",ie.dimImageInfo.imageData),V.setUniform("uGridOffset",ge.uGridOffset),V.setUniform("uGlyphRect",ge.uGlyphRect),V.setUniform("uGlyphOffset",W),V.bindTextures(),N.drawElements(N.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),W+=pe.advanceWidth,Q=pe}}catch(be){te=!0,se=be}finally{try{ee||q.return==null||q.return()}finally{if(te)throw se}}}finally{V.unbindShader(),this._doStroke=O,this.drawMode=P,N.pixelStorei(N.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),v.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return v}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":262,"../core/main":273,"./p5.RendererGL.Retained":327,"./p5.Shader":329,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/es.string.sub":198,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}]},{},[257])(257)})}).call(this,D(3))},function(d,T,D){D.r(T),D.d(T,"p5Events",function(){return l}),D.d(T,"default",function(){return o});var U=D(0),t=D.n(U),R=D(1),M=D.n(R);function p(u){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(u)}function f(u,m){for(var g=0;g<m.length;g++){var _=m[g];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(u,(v=_.key,x=void 0,x=function(E,j){if(p(E)!=="object"||E===null)return E;var O=E[Symbol.toPrimitive];if(O!==void 0){var P=O.call(E,j);if(p(P)!=="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)(E)}(v,"string"),p(x)==="symbol"?x:String(x)),_)}var v,x}function h(u,m){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,_){return g.__proto__=_,g})(u,m)}function b(u){var m=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var g,_=c(u);if(m){var v=c(this).constructor;g=Reflect.construct(_,arguments,v)}else g=_.apply(this,arguments);return w(this,g)}}function w(u,m){if(m&&(p(m)==="object"||typeof m=="function"))return m;if(m!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(u)}function c(u){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)})(u)}typeof window<"u"&&(window.p5=M.a);var l=["draw","windowResized","preload","mouseClicked","doubleClicked","mouseMoved","mousePressed","mouseWheel","mouseDragged","mouseReleased","keyPressed","keyReleased","keyTyped","touchStarted","touchMoved","touchEnded","deviceMoved","deviceTurned","deviceShaken"],o=function(u){(function(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(E&&E.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),Object.defineProperty(x,"prototype",{writable:!1}),E&&h(x,E)})(v,u);var m,g,_=b(v);function v(x){var E;return function(j,O){if(!(j instanceof O))throw new TypeError("Cannot call a class as a function")}(this,v),(E=_.call(this,x)).canvasParentRef=t.a.createRef(),E}return m=v,(g=[{key:"componentDidMount",value:function(){var x=this;this.sketch=new M.a(function(E){E.setup=function(){x.props.setup(E,x.canvasParentRef.current)},l.forEach(function(j){x.props[j]&&(E[j]=function(){for(var O,P=arguments.length,L=new Array(P),z=0;z<P;z++)L[z]=arguments[z];(O=x.props)[j].apply(O,[E].concat(L))})})})}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillUnmount",value:function(){this.sketch.remove()}},{key:"render",value:function(){return t.a.createElement("div",{ref:this.canvasParentRef,className:this.props.className||"react-p5","data-testid":"react-p5",style:this.props.style||{}})}}])&&f(m.prototype,g),Object.defineProperty(m,"prototype",{writable:!1}),v}(t.a.Component)},function(d,T){var D;D=function(){return this}();try{D=D||new Function("return this")()}catch{typeof window=="object"&&(D=window)}d.exports=D}]).default})}(td)),td.exports}var dR=fR();const hR=F2(dR),pR=({numCells:s=500,cellSize:r=10,canvasWidth:i=400,canvasHeight:d=400,springForce:T=.05,damping:D=.7,waveSpread:U=6,minIntensity:t=.05,maxWaveHeight:R=1,waterColor:M=[100,150,255],backgroundColor:p=220,showMouseIndicator:f=!1,useAscii:h=!0,asciiCharset:b=" .'`^\",:;Il!i~+_-?][}{1)(|/tfjrxnuvczXYUJCLQ0OZmwqpdbkhaos#MW&8%B@$",asciiFont:w="Courier New",asciiFontSize:c=12,asciiColor:l=[100,200,255],colorVariation:o=.3,hueShift:u=.1,saturationVariation:m=.2,brightnessVariation:g=.25,colorNoise:_=.15,mouseInfluence:v=!0,gravity:x=.02,turbulence:E=.1,clickRedistribution:j=!0})=>{let O,P,L,z=[],N=-1,V=0,k=[],H=0,G=Math.random()*1e3;const F=ce=>{const q=ce.split("");for(let Z=q.length-1;Z>0;Z--){const ie=Math.floor(Math.random()*(Z+1));[q[Z],q[ie]]=[q[ie],q[Z]]}return q.join("")},W=(ce,q)=>{if(b=F(b),ce.createCanvas(i,d).parent(q),h){ce.textFont(w),ce.textSize(c);const Z=ce.textWidth("M"),ie=c;P=Math.floor(i/Z),L=Math.floor(d/ie),r=Math.max(Z,ie)}else P=Math.floor(i/r),L=Math.floor(d/r);O=Array(L).fill(null).map(()=>Array(P).fill(null).map(()=>({filled:!1,intensity:0,depthFromSurface:0,colorSeed:Math.random()}))),k=Array(P).fill(0);for(let Z=0;Z<s;Z++)z.push({col:Math.floor(Math.random()*P),row:L-1,targetRow:L-1,velocity:0,baseRow:L-1,colorSeed:Math.random()});ce.background(p)},Q=(ce,q,Z=0)=>{const ie=Math.sin(ce*12.9898+q*78.233+Z*37.719)*43758.5453;return ie-Math.floor(ie)},J=(ce,q=1,Z=0,ie=0,pe=0,ge=0)=>{const be=i/2,le=d/2,re=ce.mouseX-be,Te=ce.mouseY-le,Ce=Math.atan2(Te,re)*(180/Math.PI);H+=(Ce-H)*.075;const Me=(H+180)/360;let Se,Ue,Fe;if(Me<.5){const ve=Me*2;Se=ce.lerp(255,252,ve),Ue=ce.lerp(97,152,ve),Fe=ce.lerp(136,103,ve)}else{const ve=(Me-.5)*2;Se=ce.lerp(252,255,ve),Ue=ce.lerp(152,216,ve),Fe=ce.lerp(103,102,ve)}if(o>0){const ve=ie*.1+G,ue=pe*.1+G,ze=(Q(ve,ue,0)-.5)*_,He=(Q(ve,ue,100)-.5)*_,me=(Q(ve,ue,200)-.5)*_,Ie=(ge-.5)*u*360*Math.PI/180,Ye=Math.cos(Ie),it=Math.sin(Ie),yt=Se;Se=Se*(.299+.701*Ye+.168*it)+Ue*(.587-.587*Ye+.33*it)+Fe*(.114-.114*Ye-.497*it),Ue=yt*(.299-.299*Ye-.328*it)+Ue*(.587+.413*Ye+.035*it)+Fe*(.114-.114*Ye+.292*it),Fe=yt*(.299-.3*Ye+1.25*it)+Ue*(.587-.588*Ye-1.05*it)+Fe*(.114+.886*Ye-.203*it),Se+=ze*255*o,Ue+=He*255*o,Fe+=me*255*o;const Ze=(ge-.5)*m,at=(Se+Ue+Fe)/3;Se=ce.lerp(at,Se,1+Ze),Ue=ce.lerp(at,Ue,1+Ze),Fe=ce.lerp(at,Fe,1+Ze);const fe=1+(ge-.5)*g;Se*=fe,Ue*=fe,Fe*=fe}if(Z===0)Se*=.8,Ue*=.8,Fe*=.8;else if(Z<=2){const ve=Z*40,ue=1+Z*.3;Se=Math.min(255,Se*ue+ve),Ue=Math.min(255,Ue*ue+ve),Fe=Math.min(255,Fe*ue+ve)}else if(Z<=4){const ve=60+Z*20,ue=1.5+Z*.2;Se=Math.min(255,Se*ue+ve),Ue=Math.min(255,Ue*ue+ve),Fe=Math.min(255,Fe*ue+ve)}else Se=Math.min(255,Se*2+120),Ue=Math.min(255,Ue*2+120),Fe=Math.min(255,Fe*2+120);const Be=.6,st=Be+q*(1-Be);return Se*=st,Ue*=st,Fe*=st,Se=Math.max(0,Math.min(255,Se)),Ue=Math.max(0,Math.min(255,Ue)),Fe=Math.max(0,Math.min(255,Fe)),[Math.floor(Se),Math.floor(Ue),Math.floor(Fe)]},ee=ce=>{if(v&&ce.mouseX>=0&&ce.mouseX<=i&&ce.mouseY>=0&&ce.mouseY<=d)if(h){ce.textFont(w),ce.textSize(c);const q=ce.textWidth("M");N=Math.floor(ce.mouseX/q);const Z=Math.floor(ce.mouseY/c);V=L-1-Z}else{N=Math.floor(ce.mouseX/r);const q=Math.floor(ce.mouseY/r);V=L-1-q}else N=-1,V=0;for(let q=0;q<L;q++)for(let Z=0;Z<P;Z++)O[q][Z].filled=!1,O[q][Z].intensity=0,O[q][Z].depthFromSurface=0;k.fill(0),z.forEach(q=>{if(N>=0&&v){const be=Math.abs(q.col-N)/(P/U),le=Math.exp(-be*be),re=Math.max(le,t),Te=(V+1)*R,Ce=Math.floor(re*Te);q.targetRow=L-Ce,q.intensity=re}else q.targetRow=q.baseRow,q.intensity=.5,x>0&&(q.velocity+=x);E>0&&(q.velocity+=(Math.random()-.5)*E);const Z=q.targetRow-q.row;q.velocity+=Z*T,q.velocity*=D,q.row+=q.velocity,q.row=Math.max(0,Math.min(L-1,q.row));const ie=Math.floor(q.row),pe=Math.max(0,Math.min(P-1,q.col));if(ie>=0&&ie<L){const ge=L-ie;ge>k[pe]&&(k[pe]=ge)}});for(let q=0;q<P;q++){const Z=k[q];for(let ie=L-Z;ie<L;ie++)if(ie>=0){const pe=ie-(L-Z),ge=Z,be=ge>0?1-pe/ge:1,Te=.6+Math.pow(be,.8)*.4;O[ie][q].filled=!0,O[ie][q].intensity=Te,O[ie][q].depthFromSurface=pe}}},te=ce=>{if(ce.background(p),ee(ce),h){ce.textFont(w),ce.textSize(c),ce.textAlign(ce.LEFT,ce.TOP);const q=ce.textWidth("M"),Z=c;for(let ie=0;ie<L;ie++)for(let pe=0;pe<P;pe++)if(O[ie][pe].filled){const ge=O[ie][pe].intensity,be=O[ie][pe].depthFromSurface,le=O[ie][pe].colorSeed,re=Math.pow(ge,.7),Te=Math.floor(re*(b.length-1)),Ce=b[Math.min(Te,b.length-1)],[Me,Se,Ue]=J(ce,ge,be,ie,pe,le),Fe=Math.floor(Math.min(255,ge*300));ce.fill(Me,Se,Ue,Fe),ce.text(Ce,pe*q,ie*Z)}}else{ce.noStroke();for(let q=0;q<L;q++)for(let Z=0;Z<P;Z++)if(O[q][Z].filled){const ie=O[q][Z].intensity,pe=O[q][Z].depthFromSurface,ge=O[q][Z].colorSeed,[be,le,re]=J(ce,ie,pe,q,Z,ge),Te=Math.floor(Math.min(255,ie*300));ce.fill(be,le,re,Te),ce.rect(Z*r,q*r,r,r)}}if(f&&N>=0)if(ce.fill(255,0,0,100),h){const q=ce.textWidth("M");ce.rect(N*q,0,q,d)}else ce.rect(N*r,0,r,d)},se=ce=>{if(j){z.forEach(q=>{q.col=Math.floor(Math.random()*P),q.velocity=0,q.colorSeed=Math.random()});for(let q=0;q<L;q++)for(let Z=0;Z<P;Z++)O[q][Z].colorSeed=Math.random()}};return $t.jsx(hR,{setup:W,draw:te,mouseClicked:se})},q1=kt.createContext({});function mR(s){const r=kt.useRef(null);return r.current===null&&(r.current=s()),r.current}const My=typeof window<"u",yR=My?kt.useLayoutEffect:kt.useEffect,Ey=kt.createContext(null);function Ty(s,r){s.indexOf(r)===-1&&s.push(r)}function Ay(s,r){const i=s.indexOf(r);i>-1&&s.splice(i,1)}const Ns=(s,r,i)=>i>r?r:i<s?s:i;let jy=()=>{};const Is={},Y1=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function Z1(s){return typeof s=="object"&&s!==null}const K1=s=>/^0[^.\s]+$/u.test(s);function Ry(s){let r;return()=>(r===void 0&&(r=s()),r)}const Ri=s=>s,gR=(s,r)=>i=>r(s(i)),$u=(...s)=>s.reduce(gR),Bu=(s,r,i)=>{const d=r-s;return d===0?1:(i-s)/d};class Cy{constructor(){this.subscriptions=[]}add(r){return Ty(this.subscriptions,r),()=>Ay(this.subscriptions,r)}notify(r,i,d){const T=this.subscriptions.length;if(T)if(T===1)this.subscriptions[0](r,i,d);else for(let D=0;D<T;D++){const U=this.subscriptions[D];U&&U(r,i,d)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ns=s=>s*1e3,is=s=>s/1e3;function Q1(s,r){return r?s*(1e3/r):0}const J1=(s,r,i)=>(((1-3*i+3*r)*s+(3*i-6*r))*s+3*r)*s,vR=1e-7,bR=12;function _R(s,r,i,d,T){let D,U,t=0;do U=r+(i-r)/2,D=J1(U,d,T)-s,D>0?i=U:r=U;while(Math.abs(D)>vR&&++t<bR);return U}function ec(s,r,i,d){if(s===r&&i===d)return Ri;const T=D=>_R(D,0,1,s,i);return D=>D===0||D===1?D:J1(T(D),r,d)}const $1=s=>r=>r<=.5?s(2*r)/2:(2-s(2*(1-r)))/2,ex=s=>r=>1-s(1-r),tx=ec(.33,1.53,.69,.99),Dy=ex(tx),rx=$1(Dy),nx=s=>(s*=2)<1?.5*Dy(s):.5*(2-Math.pow(2,-10*(s-1))),Ly=s=>1-Math.sin(Math.acos(s)),ix=ex(Ly),sx=$1(Ly),xR=ec(.42,0,1,1),SR=ec(0,0,.58,1),ax=ec(.42,0,.58,1),wR=s=>Array.isArray(s)&&typeof s[0]!="number",ox=s=>Array.isArray(s)&&typeof s[0]=="number",MR={linear:Ri,easeIn:xR,easeInOut:ax,easeOut:SR,circIn:Ly,circInOut:sx,circOut:ix,backIn:Dy,backInOut:rx,backOut:tx,anticipate:nx},ER=s=>typeof s=="string",s_=s=>{if(ox(s)){jy(s.length===4);const[r,i,d,T]=s;return ec(r,i,d,T)}else if(ER(s))return MR[s];return s},Wf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],a_={value:null};function TR(s,r){let i=new Set,d=new Set,T=!1,D=!1;const U=new WeakSet;let t={delta:0,timestamp:0,isProcessing:!1},R=0;function M(f){U.has(f)&&(p.schedule(f),s()),R++,f(t)}const p={schedule:(f,h=!1,b=!1)=>{const c=b&&T?i:d;return h&&U.add(f),c.has(f)||c.add(f),f},cancel:f=>{d.delete(f),U.delete(f)},process:f=>{if(t=f,T){D=!0;return}T=!0,[i,d]=[d,i],i.forEach(M),r&&a_.value&&a_.value.frameloop[r].push(R),R=0,i.clear(),T=!1,D&&(D=!1,p.process(f))}};return p}const AR=40;function lx(s,r){let i=!1,d=!0;const T={delta:0,timestamp:0,isProcessing:!1},D=()=>i=!0,U=Wf.reduce((m,g)=>(m[g]=TR(D,r?g:void 0),m),{}),{setup:t,read:R,resolveKeyframes:M,preUpdate:p,update:f,preRender:h,render:b,postRender:w}=U,c=()=>{const m=Is.useManualTiming?T.timestamp:performance.now();i=!1,Is.useManualTiming||(T.delta=d?1e3/60:Math.max(Math.min(m-T.timestamp,AR),1)),T.timestamp=m,T.isProcessing=!0,t.process(T),R.process(T),M.process(T),p.process(T),f.process(T),h.process(T),b.process(T),w.process(T),T.isProcessing=!1,i&&r&&(d=!1,s(c))},l=()=>{i=!0,d=!0,T.isProcessing||s(c)};return{schedule:Wf.reduce((m,g)=>{const _=U[g];return m[g]=(v,x=!1,E=!1)=>(i||l(),_.schedule(v,x,E)),m},{}),cancel:m=>{for(let g=0;g<Wf.length;g++)U[Wf[g]].cancel(m)},state:T,steps:U}}const{schedule:Jr,cancel:_a,state:Dn,steps:Zp}=lx(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ri,!0);let rd;function jR(){rd=void 0}const Kn={now:()=>(rd===void 0&&Kn.set(Dn.isProcessing||Is.useManualTiming?Dn.timestamp:performance.now()),rd),set:s=>{rd=s,queueMicrotask(jR)}},ux=s=>r=>typeof r=="string"&&r.startsWith(s),Oy=ux("--"),RR=ux("var(--"),Py=s=>RR(s)?CR.test(s.split("/*")[0].trim()):!1,CR=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,El={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},zu={...El,transform:s=>Ns(0,1,s)},Xf={...El,default:1},Du=s=>Math.round(s*1e5)/1e5,Uy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function DR(s){return s==null}const LR=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ny=(s,r)=>i=>!!(typeof i=="string"&&LR.test(i)&&i.startsWith(s)||r&&!DR(i)&&Object.prototype.hasOwnProperty.call(i,r)),cx=(s,r,i)=>d=>{if(typeof d!="string")return d;const[T,D,U,t]=d.match(Uy);return{[s]:parseFloat(T),[r]:parseFloat(D),[i]:parseFloat(U),alpha:t!==void 0?parseFloat(t):1}},OR=s=>Ns(0,255,s),Kp={...El,transform:s=>Math.round(OR(s))},to={test:Ny("rgb","red"),parse:cx("red","green","blue"),transform:({red:s,green:r,blue:i,alpha:d=1})=>"rgba("+Kp.transform(s)+", "+Kp.transform(r)+", "+Kp.transform(i)+", "+Du(zu.transform(d))+")"};function PR(s){let r="",i="",d="",T="";return s.length>5?(r=s.substring(1,3),i=s.substring(3,5),d=s.substring(5,7),T=s.substring(7,9)):(r=s.substring(1,2),i=s.substring(2,3),d=s.substring(3,4),T=s.substring(4,5),r+=r,i+=i,d+=d,T+=T),{red:parseInt(r,16),green:parseInt(i,16),blue:parseInt(d,16),alpha:T?parseInt(T,16)/255:1}}const Ym={test:Ny("#"),parse:PR,transform:to.transform},tc=s=>({test:r=>typeof r=="string"&&r.endsWith(s)&&r.split(" ").length===1,parse:parseFloat,transform:r=>`${r}${s}`}),ma=tc("deg"),ss=tc("%"),Yt=tc("px"),UR=tc("vh"),NR=tc("vw"),o_={...ss,parse:s=>ss.parse(s)/100,transform:s=>ss.transform(s*100)},ll={test:Ny("hsl","hue"),parse:cx("hue","saturation","lightness"),transform:({hue:s,saturation:r,lightness:i,alpha:d=1})=>"hsla("+Math.round(s)+", "+ss.transform(Du(r))+", "+ss.transform(Du(i))+", "+Du(zu.transform(d))+")"},In={test:s=>to.test(s)||Ym.test(s)||ll.test(s),parse:s=>to.test(s)?to.parse(s):ll.test(s)?ll.parse(s):Ym.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?to.transform(s):ll.transform(s)},IR=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function kR(s){var r,i;return isNaN(s)&&typeof s=="string"&&(((r=s.match(Uy))==null?void 0:r.length)||0)+(((i=s.match(IR))==null?void 0:i.length)||0)>0}const fx="number",dx="color",FR="var",BR="var(",l_="${}",zR=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Vu(s){const r=s.toString(),i=[],d={color:[],number:[],var:[]},T=[];let D=0;const t=r.replace(zR,R=>(In.test(R)?(d.color.push(D),T.push(dx),i.push(In.parse(R))):R.startsWith(BR)?(d.var.push(D),T.push(FR),i.push(R)):(d.number.push(D),T.push(fx),i.push(parseFloat(R))),++D,l_)).split(l_);return{values:i,split:t,indexes:d,types:T}}function hx(s){return Vu(s).values}function px(s){const{split:r,types:i}=Vu(s),d=r.length;return T=>{let D="";for(let U=0;U<d;U++)if(D+=r[U],T[U]!==void 0){const t=i[U];t===fx?D+=Du(T[U]):t===dx?D+=In.transform(T[U]):D+=T[U]}return D}}const VR=s=>typeof s=="number"?0:s;function GR(s){const r=hx(s);return px(s)(r.map(VR))}const xa={test:kR,parse:hx,createTransformer:px,getAnimatableNone:GR};function Qp(s,r,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?s+(r-s)*6*i:i<1/2?r:i<2/3?s+(r-s)*(2/3-i)*6:s}function HR({hue:s,saturation:r,lightness:i,alpha:d}){s/=360,r/=100,i/=100;let T=0,D=0,U=0;if(!r)T=D=U=i;else{const t=i<.5?i*(1+r):i+r-i*r,R=2*i-t;T=Qp(R,t,s+1/3),D=Qp(R,t,s),U=Qp(R,t,s-1/3)}return{red:Math.round(T*255),green:Math.round(D*255),blue:Math.round(U*255),alpha:d}}function ud(s,r){return i=>i>0?r:s}const Qr=(s,r,i)=>s+(r-s)*i,Jp=(s,r,i)=>{const d=s*s,T=i*(r*r-d)+d;return T<0?0:Math.sqrt(T)},WR=[Ym,to,ll],XR=s=>WR.find(r=>r.test(s));function u_(s){const r=XR(s);if(!r)return!1;let i=r.parse(s);return r===ll&&(i=HR(i)),i}const c_=(s,r)=>{const i=u_(s),d=u_(r);if(!i||!d)return ud(s,r);const T={...i};return D=>(T.red=Jp(i.red,d.red,D),T.green=Jp(i.green,d.green,D),T.blue=Jp(i.blue,d.blue,D),T.alpha=Qr(i.alpha,d.alpha,D),to.transform(T))},Zm=new Set(["none","hidden"]);function qR(s,r){return Zm.has(s)?i=>i<=0?s:r:i=>i>=1?r:s}function YR(s,r){return i=>Qr(s,r,i)}function Iy(s){return typeof s=="number"?YR:typeof s=="string"?Py(s)?ud:In.test(s)?c_:QR:Array.isArray(s)?mx:typeof s=="object"?In.test(s)?c_:ZR:ud}function mx(s,r){const i=[...s],d=i.length,T=s.map((D,U)=>Iy(D)(D,r[U]));return D=>{for(let U=0;U<d;U++)i[U]=T[U](D);return i}}function ZR(s,r){const i={...s,...r},d={};for(const T in i)s[T]!==void 0&&r[T]!==void 0&&(d[T]=Iy(s[T])(s[T],r[T]));return T=>{for(const D in d)i[D]=d[D](T);return i}}function KR(s,r){const i=[],d={color:0,var:0,number:0};for(let T=0;T<r.values.length;T++){const D=r.types[T],U=s.indexes[D][d[D]],t=s.values[U]??0;i[T]=t,d[D]++}return i}const QR=(s,r)=>{const i=xa.createTransformer(r),d=Vu(s),T=Vu(r);return d.indexes.var.length===T.indexes.var.length&&d.indexes.color.length===T.indexes.color.length&&d.indexes.number.length>=T.indexes.number.length?Zm.has(s)&&!T.values.length||Zm.has(r)&&!d.values.length?qR(s,r):$u(mx(KR(d,T),T.values),i):ud(s,r)};function yx(s,r,i){return typeof s=="number"&&typeof r=="number"&&typeof i=="number"?Qr(s,r,i):Iy(s)(s,r)}const JR=s=>{const r=({timestamp:i})=>s(i);return{start:(i=!0)=>Jr.update(r,i),stop:()=>_a(r),now:()=>Dn.isProcessing?Dn.timestamp:Kn.now()}},gx=(s,r,i=10)=>{let d="";const T=Math.max(Math.round(r/i),2);for(let D=0;D<T;D++)d+=s(D/(T-1))+", ";return`linear(${d.substring(0,d.length-2)})`},cd=2e4;function ky(s){let r=0;const i=50;let d=s.next(r);for(;!d.done&&r<cd;)r+=i,d=s.next(r);return r>=cd?1/0:r}function $R(s,r=100,i){const d=i({...s,keyframes:[0,r]}),T=Math.min(ky(d),cd);return{type:"keyframes",ease:D=>d.next(T*D).value/r,duration:is(T)}}const eC=5;function vx(s,r,i){const d=Math.max(r-eC,0);return Q1(i-s(d),r-d)}const rn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},f_=.001;function tC({duration:s=rn.duration,bounce:r=rn.bounce,velocity:i=rn.velocity,mass:d=rn.mass}){let T,D,U=1-r;U=Ns(rn.minDamping,rn.maxDamping,U),s=Ns(rn.minDuration,rn.maxDuration,is(s)),U<1?(T=M=>{const p=M*U,f=p*s,h=p-i,b=Km(M,U),w=Math.exp(-f);return f_-h/b*w},D=M=>{const f=M*U*s,h=f*i+i,b=Math.pow(U,2)*Math.pow(M,2)*s,w=Math.exp(-f),c=Km(Math.pow(M,2),U);return(-T(M)+f_>0?-1:1)*((h-b)*w)/c}):(T=M=>{const p=Math.exp(-M*s),f=(M-i)*s+1;return-.001+p*f},D=M=>{const p=Math.exp(-M*s),f=(i-M)*(s*s);return p*f});const t=5/s,R=nC(T,D,t);if(s=ns(s),isNaN(R))return{stiffness:rn.stiffness,damping:rn.damping,duration:s};{const M=Math.pow(R,2)*d;return{stiffness:M,damping:U*2*Math.sqrt(d*M),duration:s}}}const rC=12;function nC(s,r,i){let d=i;for(let T=1;T<rC;T++)d=d-s(d)/r(d);return d}function Km(s,r){return s*Math.sqrt(1-r*r)}const iC=["duration","bounce"],sC=["stiffness","damping","mass"];function d_(s,r){return r.some(i=>s[i]!==void 0)}function aC(s){let r={velocity:rn.velocity,stiffness:rn.stiffness,damping:rn.damping,mass:rn.mass,isResolvedFromDuration:!1,...s};if(!d_(s,sC)&&d_(s,iC))if(s.visualDuration){const i=s.visualDuration,d=2*Math.PI/(i*1.2),T=d*d,D=2*Ns(.05,1,1-(s.bounce||0))*Math.sqrt(T);r={...r,mass:rn.mass,stiffness:T,damping:D}}else{const i=tC(s);r={...r,...i,mass:rn.mass},r.isResolvedFromDuration=!0}return r}function fd(s=rn.visualDuration,r=rn.bounce){const i=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:r}:s;let{restSpeed:d,restDelta:T}=i;const D=i.keyframes[0],U=i.keyframes[i.keyframes.length-1],t={done:!1,value:D},{stiffness:R,damping:M,mass:p,duration:f,velocity:h,isResolvedFromDuration:b}=aC({...i,velocity:-is(i.velocity||0)}),w=h||0,c=M/(2*Math.sqrt(R*p)),l=U-D,o=is(Math.sqrt(R/p)),u=Math.abs(l)<5;d||(d=u?rn.restSpeed.granular:rn.restSpeed.default),T||(T=u?rn.restDelta.granular:rn.restDelta.default);let m;if(c<1){const _=Km(o,c);m=v=>{const x=Math.exp(-c*o*v);return U-x*((w+c*o*l)/_*Math.sin(_*v)+l*Math.cos(_*v))}}else if(c===1)m=_=>U-Math.exp(-o*_)*(l+(w+o*l)*_);else{const _=o*Math.sqrt(c*c-1);m=v=>{const x=Math.exp(-c*o*v),E=Math.min(_*v,300);return U-x*((w+c*o*l)*Math.sinh(E)+_*l*Math.cosh(E))/_}}const g={calculatedDuration:b&&f||null,next:_=>{const v=m(_);if(b)t.done=_>=f;else{let x=_===0?w:0;c<1&&(x=_===0?ns(w):vx(m,_,v));const E=Math.abs(x)<=d,j=Math.abs(U-v)<=T;t.done=E&&j}return t.value=t.done?U:v,t},toString:()=>{const _=Math.min(ky(g),cd),v=gx(x=>g.next(_*x).value,_,30);return _+"ms "+v},toTransition:()=>{}};return g}fd.applyToOptions=s=>{const r=$R(s,100,fd);return s.ease=r.ease,s.duration=ns(r.duration),s.type="keyframes",s};function Qm({keyframes:s,velocity:r=0,power:i=.8,timeConstant:d=325,bounceDamping:T=10,bounceStiffness:D=500,modifyTarget:U,min:t,max:R,restDelta:M=.5,restSpeed:p}){const f=s[0],h={done:!1,value:f},b=E=>t!==void 0&&E<t||R!==void 0&&E>R,w=E=>t===void 0?R:R===void 0||Math.abs(t-E)<Math.abs(R-E)?t:R;let c=i*r;const l=f+c,o=U===void 0?l:U(l);o!==l&&(c=o-f);const u=E=>-c*Math.exp(-E/d),m=E=>o+u(E),g=E=>{const j=u(E),O=m(E);h.done=Math.abs(j)<=M,h.value=h.done?o:O};let _,v;const x=E=>{b(h.value)&&(_=E,v=fd({keyframes:[h.value,w(h.value)],velocity:vx(m,E,h.value),damping:T,stiffness:D,restDelta:M,restSpeed:p}))};return x(0),{calculatedDuration:null,next:E=>{let j=!1;return!v&&_===void 0&&(j=!0,g(E),x(E)),_!==void 0&&E>=_?v.next(E-_):(!j&&g(E),h)}}}function oC(s,r,i){const d=[],T=i||Is.mix||yx,D=s.length-1;for(let U=0;U<D;U++){let t=T(s[U],s[U+1]);if(r){const R=Array.isArray(r)?r[U]||Ri:r;t=$u(R,t)}d.push(t)}return d}function lC(s,r,{clamp:i=!0,ease:d,mixer:T}={}){const D=s.length;if(jy(D===r.length),D===1)return()=>r[0];if(D===2&&r[0]===r[1])return()=>r[1];const U=s[0]===s[1];s[0]>s[D-1]&&(s=[...s].reverse(),r=[...r].reverse());const t=oC(r,d,T),R=t.length,M=p=>{if(U&&p<s[0])return r[0];let f=0;if(R>1)for(;f<s.length-2&&!(p<s[f+1]);f++);const h=Bu(s[f],s[f+1],p);return t[f](h)};return i?p=>M(Ns(s[0],s[D-1],p)):M}function uC(s,r){const i=s[s.length-1];for(let d=1;d<=r;d++){const T=Bu(0,r,d);s.push(Qr(i,1,T))}}function cC(s){const r=[0];return uC(r,s.length-1),r}function fC(s,r){return s.map(i=>i*r)}function dC(s,r){return s.map(()=>r||ax).splice(0,s.length-1)}function Lu({duration:s=300,keyframes:r,times:i,ease:d="easeInOut"}){const T=wR(d)?d.map(s_):s_(d),D={done:!1,value:r[0]},U=fC(i&&i.length===r.length?i:cC(r),s),t=lC(U,r,{ease:Array.isArray(T)?T:dC(r,T)});return{calculatedDuration:s,next:R=>(D.value=t(R),D.done=R>=s,D)}}const hC=s=>s!==null;function Fy(s,{repeat:r,repeatType:i="loop"},d,T=1){const D=s.filter(hC),t=T<0||r&&i!=="loop"&&r%2===1?0:D.length-1;return!t||d===void 0?D[t]:d}const pC={decay:Qm,inertia:Qm,tween:Lu,keyframes:Lu,spring:fd};function bx(s){typeof s.type=="string"&&(s.type=pC[s.type])}class By{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(r=>{this.resolve=r})}notifyFinished(){this.resolve()}then(r,i){return this.finished.then(r,i)}}const mC=s=>s/100;class zy extends By{constructor(r){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var d,T;const{motionValue:i}=this.options;i&&i.updatedAt!==Kn.now()&&this.tick(Kn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(T=(d=this.options).onStop)==null||T.call(d))},this.options=r,this.initAnimation(),this.play(),r.autoplay===!1&&this.pause()}initAnimation(){const{options:r}=this;bx(r);const{type:i=Lu,repeat:d=0,repeatDelay:T=0,repeatType:D,velocity:U=0}=r;let{keyframes:t}=r;const R=i||Lu;R!==Lu&&typeof t[0]!="number"&&(this.mixKeyframes=$u(mC,yx(t[0],t[1])),t=[0,100]);const M=R({...r,keyframes:t});D==="mirror"&&(this.mirroredGenerator=R({...r,keyframes:[...t].reverse(),velocity:-U})),M.calculatedDuration===null&&(M.calculatedDuration=ky(M));const{calculatedDuration:p}=M;this.calculatedDuration=p,this.resolvedDuration=p+T,this.totalDuration=this.resolvedDuration*(d+1)-T,this.generator=M}updateTime(r){const i=Math.round(r-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=i}tick(r,i=!1){const{generator:d,totalDuration:T,mixKeyframes:D,mirroredGenerator:U,resolvedDuration:t,calculatedDuration:R}=this;if(this.startTime===null)return d.next(0);const{delay:M=0,keyframes:p,repeat:f,repeatType:h,repeatDelay:b,type:w,onUpdate:c,finalKeyframe:l}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,r):this.speed<0&&(this.startTime=Math.min(r-T/this.speed,this.startTime)),i?this.currentTime=r:this.updateTime(r);const o=this.currentTime-M*(this.playbackSpeed>=0?1:-1),u=this.playbackSpeed>=0?o<0:o>T;this.currentTime=Math.max(o,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=T);let m=this.currentTime,g=d;if(f){const E=Math.min(this.currentTime,T)/t;let j=Math.floor(E),O=E%1;!O&&E>=1&&(O=1),O===1&&j--,j=Math.min(j,f+1),!!(j%2)&&(h==="reverse"?(O=1-O,b&&(O-=b/t)):h==="mirror"&&(g=U)),m=Ns(0,1,O)*t}const _=u?{done:!1,value:p[0]}:g.next(m);D&&(_.value=D(_.value));let{done:v}=_;!u&&R!==null&&(v=this.playbackSpeed>=0?this.currentTime>=T:this.currentTime<=0);const x=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&v);return x&&w!==Qm&&(_.value=Fy(p,this.options,l,this.speed)),c&&c(_.value),x&&this.finish(),_}then(r,i){return this.finished.then(r,i)}get duration(){return is(this.calculatedDuration)}get time(){return is(this.currentTime)}set time(r){var i;r=ns(r),this.currentTime=r,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=r:this.driver&&(this.startTime=this.driver.now()-r/this.playbackSpeed),(i=this.driver)==null||i.start(!1)}get speed(){return this.playbackSpeed}set speed(r){this.updateTime(Kn.now());const i=this.playbackSpeed!==r;this.playbackSpeed=r,i&&(this.time=is(this.currentTime))}play(){var T,D;if(this.isStopped)return;const{driver:r=JR,startTime:i}=this.options;this.driver||(this.driver=r(U=>this.tick(U))),(D=(T=this.options).onPlay)==null||D.call(T);const d=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=d):this.holdTime!==null?this.startTime=d-this.holdTime:this.startTime||(this.startTime=i??d),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Kn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var r,i;this.notifyFinished(),this.teardown(),this.state="finished",(i=(r=this.options).onComplete)==null||i.call(r)}cancel(){var r,i;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(i=(r=this.options).onCancel)==null||i.call(r)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(r){return this.startTime=0,this.tick(r,!0)}attachTimeline(r){var i;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(i=this.driver)==null||i.stop(),r.observe(this)}}function yC(s){for(let r=1;r<s.length;r++)s[r]??(s[r]=s[r-1])}const ro=s=>s*180/Math.PI,Jm=s=>{const r=ro(Math.atan2(s[1],s[0]));return $m(r)},gC={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:Jm,rotateZ:Jm,skewX:s=>ro(Math.atan(s[1])),skewY:s=>ro(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},$m=s=>(s=s%360,s<0&&(s+=360),s),h_=Jm,p_=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),m_=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),vC={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:p_,scaleY:m_,scale:s=>(p_(s)+m_(s))/2,rotateX:s=>$m(ro(Math.atan2(s[6],s[5]))),rotateY:s=>$m(ro(Math.atan2(-s[2],s[0]))),rotateZ:h_,rotate:h_,skewX:s=>ro(Math.atan(s[4])),skewY:s=>ro(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function ey(s){return s.includes("scale")?1:0}function ty(s,r){if(!s||s==="none")return ey(r);const i=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let d,T;if(i)d=vC,T=i;else{const t=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);d=gC,T=t}if(!T)return ey(r);const D=d[r],U=T[1].split(",").map(_C);return typeof D=="function"?D(U):U[D]}const bC=(s,r)=>{const{transform:i="none"}=getComputedStyle(s);return ty(i,r)};function _C(s){return parseFloat(s.trim())}const Tl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Al=new Set(Tl),y_=s=>s===El||s===Yt,xC=new Set(["x","y","z"]),SC=Tl.filter(s=>!xC.has(s));function wC(s){const r=[];return SC.forEach(i=>{const d=s.getValue(i);d!==void 0&&(r.push([i,d.get()]),d.set(i.startsWith("scale")?1:0))}),r}const io={width:({x:s},{paddingLeft:r="0",paddingRight:i="0"})=>s.max-s.min-parseFloat(r)-parseFloat(i),height:({y:s},{paddingTop:r="0",paddingBottom:i="0"})=>s.max-s.min-parseFloat(r)-parseFloat(i),top:(s,{top:r})=>parseFloat(r),left:(s,{left:r})=>parseFloat(r),bottom:({y:s},{top:r})=>parseFloat(r)+(s.max-s.min),right:({x:s},{left:r})=>parseFloat(r)+(s.max-s.min),x:(s,{transform:r})=>ty(r,"x"),y:(s,{transform:r})=>ty(r,"y")};io.translateX=io.x;io.translateY=io.y;const so=new Set;let ry=!1,ny=!1,iy=!1;function _x(){if(ny){const s=Array.from(so).filter(d=>d.needsMeasurement),r=new Set(s.map(d=>d.element)),i=new Map;r.forEach(d=>{const T=wC(d);T.length&&(i.set(d,T),d.render())}),s.forEach(d=>d.measureInitialState()),r.forEach(d=>{d.render();const T=i.get(d);T&&T.forEach(([D,U])=>{var t;(t=d.getValue(D))==null||t.set(U)})}),s.forEach(d=>d.measureEndState()),s.forEach(d=>{d.suspendedScrollY!==void 0&&window.scrollTo(0,d.suspendedScrollY)})}ny=!1,ry=!1,so.forEach(s=>s.complete(iy)),so.clear()}function xx(){so.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(ny=!0)})}function MC(){iy=!0,xx(),_x(),iy=!1}class Vy{constructor(r,i,d,T,D,U=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...r],this.onComplete=i,this.name=d,this.motionValue=T,this.element=D,this.isAsync=U}scheduleResolve(){this.state="scheduled",this.isAsync?(so.add(this),ry||(ry=!0,Jr.read(xx),Jr.resolveKeyframes(_x))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:r,name:i,element:d,motionValue:T}=this;if(r[0]===null){const D=T==null?void 0:T.get(),U=r[r.length-1];if(D!==void 0)r[0]=D;else if(d&&i){const t=d.readValue(i,U);t!=null&&(r[0]=t)}r[0]===void 0&&(r[0]=U),T&&D===void 0&&T.set(r[0])}yC(r)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(r=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,r),so.delete(this)}cancel(){this.state==="scheduled"&&(so.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const EC=s=>s.startsWith("--");function TC(s,r,i){EC(r)?s.style.setProperty(r,i):s.style[r]=i}const AC=Ry(()=>window.ScrollTimeline!==void 0),jC={};function RC(s,r){const i=Ry(s);return()=>jC[r]??i()}const Sx=RC(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Cu=([s,r,i,d])=>`cubic-bezier(${s}, ${r}, ${i}, ${d})`,g_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Cu([0,.65,.55,1]),circOut:Cu([.55,0,1,.45]),backIn:Cu([.31,.01,.66,-.59]),backOut:Cu([.33,1.53,.69,.99])};function wx(s,r){if(s)return typeof s=="function"?Sx()?gx(s,r):"ease-out":ox(s)?Cu(s):Array.isArray(s)?s.map(i=>wx(i,r)||g_.easeOut):g_[s]}function CC(s,r,i,{delay:d=0,duration:T=300,repeat:D=0,repeatType:U="loop",ease:t="easeOut",times:R}={},M=void 0){const p={[r]:i};R&&(p.offset=R);const f=wx(t,T);Array.isArray(f)&&(p.easing=f);const h={delay:d,duration:T,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:D+1,direction:U==="reverse"?"alternate":"normal"};return M&&(h.pseudoElement=M),s.animate(p,h)}function Mx(s){return typeof s=="function"&&"applyToOptions"in s}function DC({type:s,...r}){return Mx(s)&&Sx()?s.applyToOptions(r):(r.duration??(r.duration=300),r.ease??(r.ease="easeOut"),r)}class LC extends By{constructor(r){if(super(),this.finishedTime=null,this.isStopped=!1,!r)return;const{element:i,name:d,keyframes:T,pseudoElement:D,allowFlatten:U=!1,finalKeyframe:t,onComplete:R}=r;this.isPseudoElement=!!D,this.allowFlatten=U,this.options=r,jy(typeof r.type!="string");const M=DC(r);this.animation=CC(i,d,T,M,D),M.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!D){const p=Fy(T,this.options,t,this.speed);this.updateMotionValue?this.updateMotionValue(p):TC(i,d,p),this.animation.cancel()}R==null||R(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var r,i;(i=(r=this.animation).finish)==null||i.call(r)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:r}=this;r==="idle"||r==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var r,i;this.isPseudoElement||(i=(r=this.animation).commitStyles)==null||i.call(r)}get duration(){var i,d;const r=((d=(i=this.animation.effect)==null?void 0:i.getComputedTiming)==null?void 0:d.call(i).duration)||0;return is(Number(r))}get time(){return is(Number(this.animation.currentTime)||0)}set time(r){this.finishedTime=null,this.animation.currentTime=ns(r)}get speed(){return this.animation.playbackRate}set speed(r){r<0&&(this.finishedTime=null),this.animation.playbackRate=r}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(r){this.animation.startTime=r}attachTimeline({timeline:r,observe:i}){var d;return this.allowFlatten&&((d=this.animation.effect)==null||d.updateTiming({easing:"linear"})),this.animation.onfinish=null,r&&AC()?(this.animation.timeline=r,Ri):i(this)}}const Ex={anticipate:nx,backInOut:rx,circInOut:sx};function OC(s){return s in Ex}function PC(s){typeof s.ease=="string"&&OC(s.ease)&&(s.ease=Ex[s.ease])}const v_=10;class UC extends LC{constructor(r){PC(r),bx(r),super(r),r.startTime&&(this.startTime=r.startTime),this.options=r}updateMotionValue(r){const{motionValue:i,onUpdate:d,onComplete:T,element:D,...U}=this.options;if(!i)return;if(r!==void 0){i.set(r);return}const t=new zy({...U,autoplay:!1}),R=ns(this.finishedTime??this.time);i.setWithVelocity(t.sample(R-v_).value,t.sample(R).value,v_),t.stop()}}const b_=(s,r)=>r==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(xa.test(s)||s==="0")&&!s.startsWith("url("));function NC(s){const r=s[0];if(s.length===1)return!0;for(let i=0;i<s.length;i++)if(s[i]!==r)return!0}function IC(s,r,i,d){const T=s[0];if(T===null)return!1;if(r==="display"||r==="visibility")return!0;const D=s[s.length-1],U=b_(T,r),t=b_(D,r);return!U||!t?!1:NC(s)||(i==="spring"||Mx(i))&&d}function Tx(s){return Z1(s)&&"offsetHeight"in s}const kC=new Set(["opacity","clipPath","filter","transform"]),FC=Ry(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function BC(s){var M;const{motionValue:r,name:i,repeatDelay:d,repeatType:T,damping:D,type:U}=s;if(!Tx((M=r==null?void 0:r.owner)==null?void 0:M.current))return!1;const{onUpdate:t,transformTemplate:R}=r.owner.getProps();return FC()&&i&&kC.has(i)&&(i!=="transform"||!R)&&!t&&!d&&T!=="mirror"&&D!==0&&U!=="inertia"}const zC=40;class VC extends By{constructor({autoplay:r=!0,delay:i=0,type:d="keyframes",repeat:T=0,repeatDelay:D=0,repeatType:U="loop",keyframes:t,name:R,motionValue:M,element:p,...f}){var w;super(),this.stop=()=>{var c,l;this._animation&&(this._animation.stop(),(c=this.stopTimeline)==null||c.call(this)),(l=this.keyframeResolver)==null||l.cancel()},this.createdAt=Kn.now();const h={autoplay:r,delay:i,type:d,repeat:T,repeatDelay:D,repeatType:U,name:R,motionValue:M,element:p,...f},b=(p==null?void 0:p.KeyframeResolver)||Vy;this.keyframeResolver=new b(t,(c,l,o)=>this.onKeyframesResolved(c,l,h,!o),R,M,p),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(r,i,d,T){this.keyframeResolver=void 0;const{name:D,type:U,velocity:t,delay:R,isHandoff:M,onUpdate:p}=d;this.resolvedAt=Kn.now(),IC(r,D,U,t)||((Is.instantAnimations||!R)&&(p==null||p(Fy(r,d,i))),r[0]=r[r.length-1],d.duration=0,d.repeat=0);const h={startTime:T?this.resolvedAt?this.resolvedAt-this.createdAt>zC?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:i,...d,keyframes:r},b=!M&&BC(h)?new UC({...h,element:h.motionValue.owner.current}):new zy(h);b.finished.then(()=>this.notifyFinished()).catch(Ri),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(r,i){return this.finished.finally(r).then(()=>{})}get animation(){var r;return this._animation||((r=this.keyframeResolver)==null||r.resume(),MC()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(r){this.animation.time=r}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(r){this.animation.speed=r}get startTime(){return this.animation.startTime}attachTimeline(r){return this._animation?this.stopTimeline=this.animation.attachTimeline(r):this.pendingTimeline=r,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var r;this._animation&&this.animation.cancel(),(r=this.keyframeResolver)==null||r.cancel()}}const GC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function HC(s){const r=GC.exec(s);if(!r)return[,];const[,i,d,T]=r;return[`--${i??d}`,T]}function Ax(s,r,i=1){const[d,T]=HC(s);if(!d)return;const D=window.getComputedStyle(r).getPropertyValue(d);if(D){const U=D.trim();return Y1(U)?parseFloat(U):U}return Py(T)?Ax(T,r,i+1):T}function Gy(s,r){return(s==null?void 0:s[r])??(s==null?void 0:s.default)??s}const jx=new Set(["width","height","top","left","right","bottom",...Tl]),WC={test:s=>s==="auto",parse:s=>s},Rx=s=>r=>r.test(s),Cx=[El,Yt,ss,ma,NR,UR,WC],__=s=>Cx.find(Rx(s));function XC(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||K1(s):!0}const qC=new Set(["brightness","contrast","saturate","opacity"]);function YC(s){const[r,i]=s.slice(0,-1).split("(");if(r==="drop-shadow")return s;const[d]=i.match(Uy)||[];if(!d)return s;const T=i.replace(d,"");let D=qC.has(r)?1:0;return d!==i&&(D*=100),r+"("+D+T+")"}const ZC=/\b([a-z-]*)\(.*?\)/gu,sy={...xa,getAnimatableNone:s=>{const r=s.match(ZC);return r?r.map(YC).join(" "):s}},x_={...El,transform:Math.round},KC={rotate:ma,rotateX:ma,rotateY:ma,rotateZ:ma,scale:Xf,scaleX:Xf,scaleY:Xf,scaleZ:Xf,skew:ma,skewX:ma,skewY:ma,distance:Yt,translateX:Yt,translateY:Yt,translateZ:Yt,x:Yt,y:Yt,z:Yt,perspective:Yt,transformPerspective:Yt,opacity:zu,originX:o_,originY:o_,originZ:Yt},Hy={borderWidth:Yt,borderTopWidth:Yt,borderRightWidth:Yt,borderBottomWidth:Yt,borderLeftWidth:Yt,borderRadius:Yt,radius:Yt,borderTopLeftRadius:Yt,borderTopRightRadius:Yt,borderBottomRightRadius:Yt,borderBottomLeftRadius:Yt,width:Yt,maxWidth:Yt,height:Yt,maxHeight:Yt,top:Yt,right:Yt,bottom:Yt,left:Yt,padding:Yt,paddingTop:Yt,paddingRight:Yt,paddingBottom:Yt,paddingLeft:Yt,margin:Yt,marginTop:Yt,marginRight:Yt,marginBottom:Yt,marginLeft:Yt,backgroundPositionX:Yt,backgroundPositionY:Yt,...KC,zIndex:x_,fillOpacity:zu,strokeOpacity:zu,numOctaves:x_},QC={...Hy,color:In,backgroundColor:In,outlineColor:In,fill:In,stroke:In,borderColor:In,borderTopColor:In,borderRightColor:In,borderBottomColor:In,borderLeftColor:In,filter:sy,WebkitFilter:sy},Dx=s=>QC[s];function Lx(s,r){let i=Dx(s);return i!==sy&&(i=xa),i.getAnimatableNone?i.getAnimatableNone(r):void 0}const JC=new Set(["auto","none","0"]);function $C(s,r,i){let d=0,T;for(;d<s.length&&!T;){const D=s[d];typeof D=="string"&&!JC.has(D)&&Vu(D).values.length&&(T=s[d]),d++}if(T&&i)for(const D of r)s[D]=Lx(i,T)}class e3 extends Vy{constructor(r,i,d,T,D){super(r,i,d,T,D,!0)}readKeyframes(){const{unresolvedKeyframes:r,element:i,name:d}=this;if(!i||!i.current)return;super.readKeyframes();for(let R=0;R<r.length;R++){let M=r[R];if(typeof M=="string"&&(M=M.trim(),Py(M))){const p=Ax(M,i.current);p!==void 0&&(r[R]=p),R===r.length-1&&(this.finalKeyframe=M)}}if(this.resolveNoneKeyframes(),!jx.has(d)||r.length!==2)return;const[T,D]=r,U=__(T),t=__(D);if(U!==t)if(y_(U)&&y_(t))for(let R=0;R<r.length;R++){const M=r[R];typeof M=="string"&&(r[R]=parseFloat(M))}else io[d]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:r,name:i}=this,d=[];for(let T=0;T<r.length;T++)(r[T]===null||XC(r[T]))&&d.push(T);d.length&&$C(r,d,i)}measureInitialState(){const{element:r,unresolvedKeyframes:i,name:d}=this;if(!r||!r.current)return;d==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=io[d](r.measureViewportBox(),window.getComputedStyle(r.current)),i[0]=this.measuredOrigin;const T=i[i.length-1];T!==void 0&&r.getValue(d,T).jump(T,!1)}measureEndState(){var t;const{element:r,name:i,unresolvedKeyframes:d}=this;if(!r||!r.current)return;const T=r.getValue(i);T&&T.jump(this.measuredOrigin,!1);const D=d.length-1,U=d[D];d[D]=io[i](r.measureViewportBox(),window.getComputedStyle(r.current)),U!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=U),(t=this.removedTransforms)!=null&&t.length&&this.removedTransforms.forEach(([R,M])=>{r.getValue(R).set(M)}),this.resolveNoneKeyframes()}}function t3(s,r,i){if(s instanceof EventTarget)return[s];if(typeof s=="string"){let d=document;const T=(i==null?void 0:i[s])??d.querySelectorAll(s);return T?Array.from(T):[]}return Array.from(s)}const Ox=(s,r)=>r&&typeof s=="number"?r.transform(s):s,S_=30,r3=s=>!isNaN(parseFloat(s));class n3{constructor(r,i={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(d,T=!0)=>{var U,t;const D=Kn.now();if(this.updatedAt!==D&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(d),this.current!==this.prev&&((U=this.events.change)==null||U.notify(this.current),this.dependents))for(const R of this.dependents)R.dirty();T&&((t=this.events.renderRequest)==null||t.notify(this.current))},this.hasAnimated=!1,this.setCurrent(r),this.owner=i.owner}setCurrent(r){this.current=r,this.updatedAt=Kn.now(),this.canTrackVelocity===null&&r!==void 0&&(this.canTrackVelocity=r3(this.current))}setPrevFrameValue(r=this.current){this.prevFrameValue=r,this.prevUpdatedAt=this.updatedAt}onChange(r){return this.on("change",r)}on(r,i){this.events[r]||(this.events[r]=new Cy);const d=this.events[r].add(i);return r==="change"?()=>{d(),Jr.read(()=>{this.events.change.getSize()||this.stop()})}:d}clearListeners(){for(const r in this.events)this.events[r].clear()}attach(r,i){this.passiveEffect=r,this.stopPassiveEffect=i}set(r,i=!0){!i||!this.passiveEffect?this.updateAndNotify(r,i):this.passiveEffect(r,this.updateAndNotify)}setWithVelocity(r,i,d){this.set(i),this.prev=void 0,this.prevFrameValue=r,this.prevUpdatedAt=this.updatedAt-d}jump(r,i=!0){this.updateAndNotify(r),this.prev=r,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var r;(r=this.events.change)==null||r.notify(this.current)}addDependent(r){this.dependents||(this.dependents=new Set),this.dependents.add(r)}removeDependent(r){this.dependents&&this.dependents.delete(r)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const r=Kn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||r-this.updatedAt>S_)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,S_);return Q1(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(r){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=r(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var r,i;(r=this.dependents)==null||r.clear(),(i=this.events.destroy)==null||i.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xl(s,r){return new n3(s,r)}const{schedule:Wy}=lx(queueMicrotask,!1),Bi={x:!1,y:!1};function Px(){return Bi.x||Bi.y}function i3(s){return s==="x"||s==="y"?Bi[s]?null:(Bi[s]=!0,()=>{Bi[s]=!1}):Bi.x||Bi.y?null:(Bi.x=Bi.y=!0,()=>{Bi.x=Bi.y=!1})}function Ux(s,r){const i=t3(s),d=new AbortController,T={passive:!0,...r,signal:d.signal};return[i,T,()=>d.abort()]}function w_(s){return!(s.pointerType==="touch"||Px())}function s3(s,r,i={}){const[d,T,D]=Ux(s,i),U=t=>{if(!w_(t))return;const{target:R}=t,M=r(R,t);if(typeof M!="function"||!R)return;const p=f=>{w_(f)&&(M(f),R.removeEventListener("pointerleave",p))};R.addEventListener("pointerleave",p,T)};return d.forEach(t=>{t.addEventListener("pointerenter",U,T)}),D}const Nx=(s,r)=>r?s===r?!0:Nx(s,r.parentElement):!1,Xy=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,a3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function o3(s){return a3.has(s.tagName)||s.tabIndex!==-1}const nd=new WeakSet;function M_(s){return r=>{r.key==="Enter"&&s(r)}}function $p(s,r){s.dispatchEvent(new PointerEvent("pointer"+r,{isPrimary:!0,bubbles:!0}))}const l3=(s,r)=>{const i=s.currentTarget;if(!i)return;const d=M_(()=>{if(nd.has(i))return;$p(i,"down");const T=M_(()=>{$p(i,"up")}),D=()=>$p(i,"cancel");i.addEventListener("keyup",T,r),i.addEventListener("blur",D,r)});i.addEventListener("keydown",d,r),i.addEventListener("blur",()=>i.removeEventListener("keydown",d),r)};function E_(s){return Xy(s)&&!Px()}function u3(s,r,i={}){const[d,T,D]=Ux(s,i),U=t=>{const R=t.currentTarget;if(!E_(t))return;nd.add(R);const M=r(R,t),p=(b,w)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),nd.has(R)&&nd.delete(R),E_(b)&&typeof M=="function"&&M(b,{success:w})},f=b=>{p(b,R===window||R===document||i.useGlobalTarget||Nx(R,b.target))},h=b=>{p(b,!1)};window.addEventListener("pointerup",f,T),window.addEventListener("pointercancel",h,T)};return d.forEach(t=>{(i.useGlobalTarget?window:t).addEventListener("pointerdown",U,T),Tx(t)&&(t.addEventListener("focus",M=>l3(M,T)),!o3(t)&&!t.hasAttribute("tabindex")&&(t.tabIndex=0))}),D}function Ix(s){return Z1(s)&&"ownerSVGElement"in s}function c3(s){return Ix(s)&&s.tagName==="svg"}const kn=s=>!!(s&&s.getVelocity),f3=[...Cx,In,xa],d3=s=>f3.find(Rx(s)),kx=kt.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});function h3(s=!0){const r=kt.useContext(Ey);if(r===null)return[!0,null];const{isPresent:i,onExitComplete:d,register:T}=r,D=kt.useId();kt.useEffect(()=>{if(s)return T(D)},[s]);const U=kt.useCallback(()=>s&&d&&d(D),[D,d,s]);return!i&&d?[!1,U]:[!0]}const Fx=kt.createContext({strict:!1}),T_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Sl={};for(const s in T_)Sl[s]={isEnabled:r=>T_[s].some(i=>!!r[i])};function p3(s){for(const r in s)Sl[r]={...Sl[r],...s[r]}}const m3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function dd(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||m3.has(s)}let Bx=s=>!dd(s);function y3(s){s&&(Bx=r=>r.startsWith("on")?!dd(r):s(r))}try{y3(require("@emotion/is-prop-valid").default)}catch{}function g3(s,r,i){const d={};for(const T in s)T==="values"&&typeof s.values=="object"||(Bx(T)||i===!0&&dd(T)||!r&&!dd(T)||s.draggable&&T.startsWith("onDrag"))&&(d[T]=s[T]);return d}function v3(s){if(typeof Proxy>"u")return s;const r=new Map,i=(...d)=>s(...d);return new Proxy(i,{get:(d,T)=>T==="create"?s:(r.has(T)||r.set(T,s(T)),r.get(T))})}const vd=kt.createContext({});function bd(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function Gu(s){return typeof s=="string"||Array.isArray(s)}const qy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Yy=["initial",...qy];function _d(s){return bd(s.animate)||Yy.some(r=>Gu(s[r]))}function zx(s){return!!(_d(s)||s.variants)}function b3(s,r){if(_d(s)){const{initial:i,animate:d}=s;return{initial:i===!1||Gu(i)?i:void 0,animate:Gu(d)?d:void 0}}return s.inherit!==!1?r:{}}function _3(s){const{initial:r,animate:i}=b3(s,kt.useContext(vd));return kt.useMemo(()=>({initial:r,animate:i}),[A_(r),A_(i)])}function A_(s){return Array.isArray(s)?s.join(" "):s}const x3=Symbol.for("motionComponentSymbol");function ul(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function S3(s,r,i){return kt.useCallback(d=>{d&&s.onMount&&s.onMount(d),r&&(d?r.mount(d):r.unmount()),i&&(typeof i=="function"?i(d):ul(i)&&(i.current=d))},[r])}const Zy=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),w3="framerAppearId",Vx="data-"+Zy(w3),Gx=kt.createContext({});function M3(s,r,i,d,T){var c,l;const{visualElement:D}=kt.useContext(vd),U=kt.useContext(Fx),t=kt.useContext(Ey),R=kt.useContext(kx).reducedMotion,M=kt.useRef(null);d=d||U.renderer,!M.current&&d&&(M.current=d(s,{visualState:r,parent:D,props:i,presenceContext:t,blockInitialAnimation:t?t.initial===!1:!1,reducedMotionConfig:R}));const p=M.current,f=kt.useContext(Gx);p&&!p.projection&&T&&(p.type==="html"||p.type==="svg")&&E3(M.current,i,T,f);const h=kt.useRef(!1);kt.useInsertionEffect(()=>{p&&h.current&&p.update(i,t)});const b=i[Vx],w=kt.useRef(!!b&&!((c=window.MotionHandoffIsComplete)!=null&&c.call(window,b))&&((l=window.MotionHasOptimisedAnimation)==null?void 0:l.call(window,b)));return yR(()=>{p&&(h.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),Wy.render(p.render),w.current&&p.animationState&&p.animationState.animateChanges())}),kt.useEffect(()=>{p&&(!w.current&&p.animationState&&p.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var o;(o=window.MotionHandoffMarkAsComplete)==null||o.call(window,b)}),w.current=!1))}),p}function E3(s,r,i,d){const{layoutId:T,layout:D,drag:U,dragConstraints:t,layoutScroll:R,layoutRoot:M,layoutCrossfade:p}=r;s.projection=new i(s.latestValues,r["data-framer-portal-id"]?void 0:Hx(s.parent)),s.projection.setOptions({layoutId:T,layout:D,alwaysMeasureLayout:!!U||t&&ul(t),visualElement:s,animationType:typeof D=="string"?D:"both",initialPromotionConfig:d,crossfade:p,layoutScroll:R,layoutRoot:M})}function Hx(s){if(s)return s.options.allowProjection!==!1?s.projection:Hx(s.parent)}function T3({preloadedFeatures:s,createVisualElement:r,useRender:i,useVisualState:d,Component:T}){s&&p3(s);function D(t,R){let M;const p={...kt.useContext(kx),...t,layoutId:A3(t)},{isStatic:f}=p,h=_3(t),b=d(t,f);if(!f&&My){j3();const w=R3(p);M=w.MeasureLayout,h.visualElement=M3(T,b,p,r,w.ProjectionNode)}return $t.jsxs(vd.Provider,{value:h,children:[M&&h.visualElement?$t.jsx(M,{visualElement:h.visualElement,...p}):null,i(T,t,S3(b,h.visualElement,R),b,f,h.visualElement)]})}D.displayName=`motion.${typeof T=="string"?T:`create(${T.displayName??T.name??""})`}`;const U=kt.forwardRef(D);return U[x3]=T,U}function A3({layoutId:s}){const r=kt.useContext(q1).id;return r&&s!==void 0?r+"-"+s:s}function j3(s,r){kt.useContext(Fx).strict}function R3(s){const{drag:r,layout:i}=Sl;if(!r&&!i)return{};const d={...r,...i};return{MeasureLayout:r!=null&&r.isEnabled(s)||i!=null&&i.isEnabled(s)?d.MeasureLayout:void 0,ProjectionNode:d.ProjectionNode}}const Hu={};function C3(s){for(const r in s)Hu[r]=s[r],Oy(r)&&(Hu[r].isCSSVariable=!0)}function Wx(s,{layout:r,layoutId:i}){return Al.has(s)||s.startsWith("origin")||(r||i!==void 0)&&(!!Hu[s]||s==="opacity")}const D3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},L3=Tl.length;function O3(s,r,i){let d="",T=!0;for(let D=0;D<L3;D++){const U=Tl[D],t=s[U];if(t===void 0)continue;let R=!0;if(typeof t=="number"?R=t===(U.startsWith("scale")?1:0):R=parseFloat(t)===0,!R||i){const M=Ox(t,Hy[U]);if(!R){T=!1;const p=D3[U]||U;d+=`${p}(${M}) `}i&&(r[U]=M)}}return d=d.trim(),i?d=i(r,T?"":d):T&&(d="none"),d}function Ky(s,r,i){const{style:d,vars:T,transformOrigin:D}=s;let U=!1,t=!1;for(const R in r){const M=r[R];if(Al.has(R)){U=!0;continue}else if(Oy(R)){T[R]=M;continue}else{const p=Ox(M,Hy[R]);R.startsWith("origin")?(t=!0,D[R]=p):d[R]=p}}if(r.transform||(U||i?d.transform=O3(r,s.transform,i):d.transform&&(d.transform="none")),t){const{originX:R="50%",originY:M="50%",originZ:p=0}=D;d.transformOrigin=`${R} ${M} ${p}`}}const Qy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Xx(s,r,i){for(const d in r)!kn(r[d])&&!Wx(d,i)&&(s[d]=r[d])}function P3({transformTemplate:s},r){return kt.useMemo(()=>{const i=Qy();return Ky(i,r,s),Object.assign({},i.vars,i.style)},[r])}function U3(s,r){const i=s.style||{},d={};return Xx(d,i,s),Object.assign(d,P3(s,r)),d}function N3(s,r){const i={},d=U3(s,r);return s.drag&&s.dragListener!==!1&&(i.draggable=!1,d.userSelect=d.WebkitUserSelect=d.WebkitTouchCallout="none",d.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(i.tabIndex=0),i.style=d,i}const I3={offset:"stroke-dashoffset",array:"stroke-dasharray"},k3={offset:"strokeDashoffset",array:"strokeDasharray"};function F3(s,r,i=1,d=0,T=!0){s.pathLength=1;const D=T?I3:k3;s[D.offset]=Yt.transform(-d);const U=Yt.transform(r),t=Yt.transform(i);s[D.array]=`${U} ${t}`}function qx(s,{attrX:r,attrY:i,attrScale:d,pathLength:T,pathSpacing:D=1,pathOffset:U=0,...t},R,M,p){if(Ky(s,t,M),R){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:f,style:h}=s;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete f.transformBox),r!==void 0&&(f.x=r),i!==void 0&&(f.y=i),d!==void 0&&(f.scale=d),T!==void 0&&F3(f,T,D,U,!1)}const Yx=()=>({...Qy(),attrs:{}}),Zx=s=>typeof s=="string"&&s.toLowerCase()==="svg";function B3(s,r,i,d){const T=kt.useMemo(()=>{const D=Yx();return qx(D,r,Zx(d),s.transformTemplate,s.style),{...D.attrs,style:{...D.style}}},[r]);if(s.style){const D={};Xx(D,s.style,s),T.style={...D,...T.style}}return T}const z3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Jy(s){return typeof s!="string"||s.includes("-")?!1:!!(z3.indexOf(s)>-1||/[A-Z]/u.test(s))}function V3(s=!1){return(i,d,T,{latestValues:D},U)=>{const R=(Jy(i)?B3:N3)(d,D,U,i),M=g3(d,typeof i=="string",s),p=i!==kt.Fragment?{...M,...R,ref:T}:{},{children:f}=d,h=kt.useMemo(()=>kn(f)?f.get():f,[f]);return kt.createElement(i,{...p,children:h})}}function j_(s){const r=[{},{}];return s==null||s.values.forEach((i,d)=>{r[0][d]=i.get(),r[1][d]=i.getVelocity()}),r}function $y(s,r,i,d){if(typeof r=="function"){const[T,D]=j_(d);r=r(i!==void 0?i:s.custom,T,D)}if(typeof r=="string"&&(r=s.variants&&s.variants[r]),typeof r=="function"){const[T,D]=j_(d);r=r(i!==void 0?i:s.custom,T,D)}return r}function id(s){return kn(s)?s.get():s}function G3({scrapeMotionValuesFromProps:s,createRenderState:r},i,d,T){return{latestValues:H3(i,d,T,s),renderState:r()}}const Kx=s=>(r,i)=>{const d=kt.useContext(vd),T=kt.useContext(Ey),D=()=>G3(s,r,d,T);return i?D():mR(D)};function H3(s,r,i,d){const T={},D=d(s,{});for(const h in D)T[h]=id(D[h]);let{initial:U,animate:t}=s;const R=_d(s),M=zx(s);r&&M&&!R&&s.inherit!==!1&&(U===void 0&&(U=r.initial),t===void 0&&(t=r.animate));let p=i?i.initial===!1:!1;p=p||U===!1;const f=p?t:U;if(f&&typeof f!="boolean"&&!bd(f)){const h=Array.isArray(f)?f:[f];for(let b=0;b<h.length;b++){const w=$y(s,h[b]);if(w){const{transitionEnd:c,transition:l,...o}=w;for(const u in o){let m=o[u];if(Array.isArray(m)){const g=p?m.length-1:0;m=m[g]}m!==null&&(T[u]=m)}for(const u in c)T[u]=c[u]}}}return T}function eg(s,r,i){var D;const{style:d}=s,T={};for(const U in d)(kn(d[U])||r.style&&kn(r.style[U])||Wx(U,s)||((D=i==null?void 0:i.getValue(U))==null?void 0:D.liveStyle)!==void 0)&&(T[U]=d[U]);return T}const W3={useVisualState:Kx({scrapeMotionValuesFromProps:eg,createRenderState:Qy})};function Qx(s,r,i){const d=eg(s,r,i);for(const T in s)if(kn(s[T])||kn(r[T])){const D=Tl.indexOf(T)!==-1?"attr"+T.charAt(0).toUpperCase()+T.substring(1):T;d[D]=s[T]}return d}const X3={useVisualState:Kx({scrapeMotionValuesFromProps:Qx,createRenderState:Yx})};function q3(s,r){return function(d,{forwardMotionProps:T}={forwardMotionProps:!1}){const U={...Jy(d)?X3:W3,preloadedFeatures:s,useRender:V3(T),createVisualElement:r,Component:d};return T3(U)}}function Wu(s,r,i){const d=s.getProps();return $y(d,r,i!==void 0?i:d.custom,s)}const ay=s=>Array.isArray(s);function Y3(s,r,i){s.hasValue(r)?s.getValue(r).set(i):s.addValue(r,xl(i))}function Z3(s){return ay(s)?s[s.length-1]||0:s}function K3(s,r){const i=Wu(s,r);let{transitionEnd:d={},transition:T={},...D}=i||{};D={...D,...d};for(const U in D){const t=Z3(D[U]);Y3(s,U,t)}}function Q3(s){return!!(kn(s)&&s.add)}function oy(s,r){const i=s.getValue("willChange");if(Q3(i))return i.add(r);if(!i&&Is.WillChange){const d=new Is.WillChange("auto");s.addValue("willChange",d),d.add(r)}}function Jx(s){return s.props[Vx]}const J3=s=>s!==null;function $3(s,{repeat:r,repeatType:i="loop"},d){const T=s.filter(J3),D=r&&i!=="loop"&&r%2===1?0:T.length-1;return T[D]}const eD={type:"spring",stiffness:500,damping:25,restSpeed:10},tD=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),rD={type:"keyframes",duration:.8},nD={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},iD=(s,{keyframes:r})=>r.length>2?rD:Al.has(s)?s.startsWith("scale")?tD(r[1]):eD:nD;function sD({when:s,delay:r,delayChildren:i,staggerChildren:d,staggerDirection:T,repeat:D,repeatType:U,repeatDelay:t,from:R,elapsed:M,...p}){return!!Object.keys(p).length}const tg=(s,r,i,d={},T,D)=>U=>{const t=Gy(d,s)||{},R=t.delay||d.delay||0;let{elapsed:M=0}=d;M=M-ns(R);const p={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:r.getVelocity(),...t,delay:-M,onUpdate:h=>{r.set(h),t.onUpdate&&t.onUpdate(h)},onComplete:()=>{U(),t.onComplete&&t.onComplete()},name:s,motionValue:r,element:D?void 0:T};sD(t)||Object.assign(p,iD(s,p)),p.duration&&(p.duration=ns(p.duration)),p.repeatDelay&&(p.repeatDelay=ns(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let f=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(f=!0)),(Is.instantAnimations||Is.skipAnimations)&&(f=!0,p.duration=0,p.delay=0),p.allowFlatten=!t.type&&!t.ease,f&&!D&&r.get()!==void 0){const h=$3(p.keyframes,t);if(h!==void 0){Jr.update(()=>{p.onUpdate(h),p.onComplete()});return}}return t.isSync?new zy(p):new VC(p)};function aD({protectedKeys:s,needsAnimating:r},i){const d=s.hasOwnProperty(i)&&r[i]!==!0;return r[i]=!1,d}function $x(s,r,{delay:i=0,transitionOverride:d,type:T}={}){let{transition:D=s.getDefaultTransition(),transitionEnd:U,...t}=r;d&&(D=d);const R=[],M=T&&s.animationState&&s.animationState.getState()[T];for(const p in t){const f=s.getValue(p,s.latestValues[p]??null),h=t[p];if(h===void 0||M&&aD(M,p))continue;const b={delay:i,...Gy(D||{},p)},w=f.get();if(w!==void 0&&!f.isAnimating&&!Array.isArray(h)&&h===w&&!b.velocity)continue;let c=!1;if(window.MotionHandoffAnimation){const o=Jx(s);if(o){const u=window.MotionHandoffAnimation(o,p,Jr);u!==null&&(b.startTime=u,c=!0)}}oy(s,p),f.start(tg(p,f,h,s.shouldReduceMotion&&jx.has(p)?{type:!1}:b,s,c));const l=f.animation;l&&R.push(l)}return U&&Promise.all(R).then(()=>{Jr.update(()=>{U&&K3(s,U)})}),R}function ly(s,r,i={}){var R;const d=Wu(s,r,i.type==="exit"?(R=s.presenceContext)==null?void 0:R.custom:void 0);let{transition:T=s.getDefaultTransition()||{}}=d||{};i.transitionOverride&&(T=i.transitionOverride);const D=d?()=>Promise.all($x(s,d,i)):()=>Promise.resolve(),U=s.variantChildren&&s.variantChildren.size?(M=0)=>{const{delayChildren:p=0,staggerChildren:f,staggerDirection:h}=T;return oD(s,r,p+M,f,h,i)}:()=>Promise.resolve(),{when:t}=T;if(t){const[M,p]=t==="beforeChildren"?[D,U]:[U,D];return M().then(()=>p())}else return Promise.all([D(),U(i.delay)])}function oD(s,r,i=0,d=0,T=1,D){const U=[],t=(s.variantChildren.size-1)*d,R=T===1?(M=0)=>M*d:(M=0)=>t-M*d;return Array.from(s.variantChildren).sort(lD).forEach((M,p)=>{M.notify("AnimationStart",r),U.push(ly(M,r,{...D,delay:i+R(p)}).then(()=>M.notify("AnimationComplete",r)))}),Promise.all(U)}function lD(s,r){return s.sortNodePosition(r)}function uD(s,r,i={}){s.notify("AnimationStart",r);let d;if(Array.isArray(r)){const T=r.map(D=>ly(s,D,i));d=Promise.all(T)}else if(typeof r=="string")d=ly(s,r,i);else{const T=typeof r=="function"?Wu(s,r,i.custom):r;d=Promise.all($x(s,T,i))}return d.then(()=>{s.notify("AnimationComplete",r)})}function eS(s,r){if(!Array.isArray(r))return!1;const i=r.length;if(i!==s.length)return!1;for(let d=0;d<i;d++)if(r[d]!==s[d])return!1;return!0}const cD=Yy.length;function tS(s){if(!s)return;if(!s.isControllingVariants){const i=s.parent?tS(s.parent)||{}:{};return s.props.initial!==void 0&&(i.initial=s.props.initial),i}const r={};for(let i=0;i<cD;i++){const d=Yy[i],T=s.props[d];(Gu(T)||T===!1)&&(r[d]=T)}return r}const fD=[...qy].reverse(),dD=qy.length;function hD(s){return r=>Promise.all(r.map(({animation:i,options:d})=>uD(s,i,d)))}function pD(s){let r=hD(s),i=R_(),d=!0;const T=R=>(M,p)=>{var h;const f=Wu(s,p,R==="exit"?(h=s.presenceContext)==null?void 0:h.custom:void 0);if(f){const{transition:b,transitionEnd:w,...c}=f;M={...M,...c,...w}}return M};function D(R){r=R(s)}function U(R){const{props:M}=s,p=tS(s.parent)||{},f=[],h=new Set;let b={},w=1/0;for(let l=0;l<dD;l++){const o=fD[l],u=i[o],m=M[o]!==void 0?M[o]:p[o],g=Gu(m),_=o===R?u.isActive:null;_===!1&&(w=l);let v=m===p[o]&&m!==M[o]&&g;if(v&&d&&s.manuallyAnimateOnMount&&(v=!1),u.protectedKeys={...b},!u.isActive&&_===null||!m&&!u.prevProp||bd(m)||typeof m=="boolean")continue;const x=mD(u.prevProp,m);let E=x||o===R&&u.isActive&&!v&&g||l>w&&g,j=!1;const O=Array.isArray(m)?m:[m];let P=O.reduce(T(o),{});_===!1&&(P={});const{prevResolvedValues:L={}}=u,z={...L,...P},N=H=>{E=!0,h.has(H)&&(j=!0,h.delete(H)),u.needsAnimating[H]=!0;const G=s.getValue(H);G&&(G.liveStyle=!1)};for(const H in z){const G=P[H],F=L[H];if(b.hasOwnProperty(H))continue;let W=!1;ay(G)&&ay(F)?W=!eS(G,F):W=G!==F,W?G!=null?N(H):h.add(H):G!==void 0&&h.has(H)?N(H):u.protectedKeys[H]=!0}u.prevProp=m,u.prevResolvedValues=P,u.isActive&&(b={...b,...P}),d&&s.blockInitialAnimation&&(E=!1),E&&(!(v&&x)||j)&&f.push(...O.map(H=>({animation:H,options:{type:o}})))}if(h.size){const l={};if(typeof M.initial!="boolean"){const o=Wu(s,Array.isArray(M.initial)?M.initial[0]:M.initial);o&&o.transition&&(l.transition=o.transition)}h.forEach(o=>{const u=s.getBaseTarget(o),m=s.getValue(o);m&&(m.liveStyle=!0),l[o]=u??null}),f.push({animation:l})}let c=!!f.length;return d&&(M.initial===!1||M.initial===M.animate)&&!s.manuallyAnimateOnMount&&(c=!1),d=!1,c?r(f):Promise.resolve()}function t(R,M){var f;if(i[R].isActive===M)return Promise.resolve();(f=s.variantChildren)==null||f.forEach(h=>{var b;return(b=h.animationState)==null?void 0:b.setActive(R,M)}),i[R].isActive=M;const p=U(R);for(const h in i)i[h].protectedKeys={};return p}return{animateChanges:U,setActive:t,setAnimateFunction:D,getState:()=>i,reset:()=>{i=R_(),d=!0}}}function mD(s,r){return typeof r=="string"?r!==s:Array.isArray(r)?!eS(r,s):!1}function qa(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function R_(){return{animate:qa(!0),whileInView:qa(),whileHover:qa(),whileTap:qa(),whileDrag:qa(),whileFocus:qa(),exit:qa()}}class Sa{constructor(r){this.isMounted=!1,this.node=r}update(){}}class yD extends Sa{constructor(r){super(r),r.animationState||(r.animationState=pD(r))}updateAnimationControlsSubscription(){const{animate:r}=this.node.getProps();bd(r)&&(this.unmountControls=r.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:r}=this.node.getProps(),{animate:i}=this.node.prevProps||{};r!==i&&this.updateAnimationControlsSubscription()}unmount(){var r;this.node.animationState.reset(),(r=this.unmountControls)==null||r.call(this)}}let gD=0;class vD extends Sa{constructor(){super(...arguments),this.id=gD++}update(){if(!this.node.presenceContext)return;const{isPresent:r,onExitComplete:i}=this.node.presenceContext,{isPresent:d}=this.node.prevPresenceContext||{};if(!this.node.animationState||r===d)return;const T=this.node.animationState.setActive("exit",!r);i&&!r&&T.then(()=>{i(this.id)})}mount(){const{register:r,onExitComplete:i}=this.node.presenceContext||{};i&&i(this.id),r&&(this.unmount=r(this.id))}unmount(){}}const bD={animation:{Feature:yD},exit:{Feature:vD}};function Xu(s,r,i,d={passive:!0}){return s.addEventListener(r,i,d),()=>s.removeEventListener(r,i)}function rc(s){return{point:{x:s.pageX,y:s.pageY}}}const _D=s=>r=>Xy(r)&&s(r,rc(r));function Ou(s,r,i,d){return Xu(s,r,_D(i),d)}function rS({top:s,left:r,right:i,bottom:d}){return{x:{min:r,max:i},y:{min:s,max:d}}}function xD({x:s,y:r}){return{top:r.min,right:s.max,bottom:r.max,left:s.min}}function SD(s,r){if(!r)return s;const i=r({x:s.left,y:s.top}),d=r({x:s.right,y:s.bottom});return{top:i.y,left:i.x,bottom:d.y,right:d.x}}const nS=1e-4,wD=1-nS,MD=1+nS,iS=.01,ED=0-iS,TD=0+iS;function zn(s){return s.max-s.min}function AD(s,r,i){return Math.abs(s-r)<=i}function C_(s,r,i,d=.5){s.origin=d,s.originPoint=Qr(r.min,r.max,s.origin),s.scale=zn(i)/zn(r),s.translate=Qr(i.min,i.max,s.origin)-s.originPoint,(s.scale>=wD&&s.scale<=MD||isNaN(s.scale))&&(s.scale=1),(s.translate>=ED&&s.translate<=TD||isNaN(s.translate))&&(s.translate=0)}function Pu(s,r,i,d){C_(s.x,r.x,i.x,d?d.originX:void 0),C_(s.y,r.y,i.y,d?d.originY:void 0)}function D_(s,r,i){s.min=i.min+r.min,s.max=s.min+zn(r)}function jD(s,r,i){D_(s.x,r.x,i.x),D_(s.y,r.y,i.y)}function L_(s,r,i){s.min=r.min-i.min,s.max=s.min+zn(r)}function Uu(s,r,i){L_(s.x,r.x,i.x),L_(s.y,r.y,i.y)}const O_=()=>({translate:0,scale:1,origin:0,originPoint:0}),cl=()=>({x:O_(),y:O_()}),P_=()=>({min:0,max:0}),cn=()=>({x:P_(),y:P_()});function Ei(s){return[s("x"),s("y")]}function em(s){return s===void 0||s===1}function uy({scale:s,scaleX:r,scaleY:i}){return!em(s)||!em(r)||!em(i)}function Ka(s){return uy(s)||sS(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function sS(s){return U_(s.x)||U_(s.y)}function U_(s){return s&&s!=="0%"}function hd(s,r,i){const d=s-i,T=r*d;return i+T}function N_(s,r,i,d,T){return T!==void 0&&(s=hd(s,T,d)),hd(s,i,d)+r}function cy(s,r=0,i=1,d,T){s.min=N_(s.min,r,i,d,T),s.max=N_(s.max,r,i,d,T)}function aS(s,{x:r,y:i}){cy(s.x,r.translate,r.scale,r.originPoint),cy(s.y,i.translate,i.scale,i.originPoint)}const I_=.999999999999,k_=1.0000000000001;function RD(s,r,i,d=!1){const T=i.length;if(!T)return;r.x=r.y=1;let D,U;for(let t=0;t<T;t++){D=i[t],U=D.projectionDelta;const{visualElement:R}=D.options;R&&R.props.style&&R.props.style.display==="contents"||(d&&D.options.layoutScroll&&D.scroll&&D!==D.root&&dl(s,{x:-D.scroll.offset.x,y:-D.scroll.offset.y}),U&&(r.x*=U.x.scale,r.y*=U.y.scale,aS(s,U)),d&&Ka(D.latestValues)&&dl(s,D.latestValues))}r.x<k_&&r.x>I_&&(r.x=1),r.y<k_&&r.y>I_&&(r.y=1)}function fl(s,r){s.min=s.min+r,s.max=s.max+r}function F_(s,r,i,d,T=.5){const D=Qr(s.min,s.max,T);cy(s,r,i,D,d)}function dl(s,r){F_(s.x,r.x,r.scaleX,r.scale,r.originX),F_(s.y,r.y,r.scaleY,r.scale,r.originY)}function oS(s,r){return rS(SD(s.getBoundingClientRect(),r))}function CD(s,r,i){const d=oS(s,i),{scroll:T}=r;return T&&(fl(d.x,T.offset.x),fl(d.y,T.offset.y)),d}const lS=({current:s})=>s?s.ownerDocument.defaultView:null,B_=(s,r)=>Math.abs(s-r);function DD(s,r){const i=B_(s.x,r.x),d=B_(s.y,r.y);return Math.sqrt(i**2+d**2)}class uS{constructor(r,i,{transformPagePoint:d,contextWindow:T,dragSnapToOrigin:D=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=rm(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,b=DD(f.offset,{x:0,y:0})>=3;if(!h&&!b)return;const{point:w}=f,{timestamp:c}=Dn;this.history.push({...w,timestamp:c});const{onStart:l,onMove:o}=this.handlers;h||(l&&l(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=tm(h,this.transformPagePoint),Jr.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:b,onSessionEnd:w,resumeAnimation:c}=this.handlers;if(this.dragSnapToOrigin&&c&&c(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const l=rm(f.type==="pointercancel"?this.lastMoveEventInfo:tm(h,this.transformPagePoint),this.history);this.startEvent&&b&&b(f,l),w&&w(f,l)},!Xy(r))return;this.dragSnapToOrigin=D,this.handlers=i,this.transformPagePoint=d,this.contextWindow=T||window;const U=rc(r),t=tm(U,this.transformPagePoint),{point:R}=t,{timestamp:M}=Dn;this.history=[{...R,timestamp:M}];const{onSessionStart:p}=i;p&&p(r,rm(t,this.history)),this.removeListeners=$u(Ou(this.contextWindow,"pointermove",this.handlePointerMove),Ou(this.contextWindow,"pointerup",this.handlePointerUp),Ou(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(r){this.handlers=r}end(){this.removeListeners&&this.removeListeners(),_a(this.updatePoint)}}function tm(s,r){return r?{point:r(s.point)}:s}function z_(s,r){return{x:s.x-r.x,y:s.y-r.y}}function rm({point:s},r){return{point:s,delta:z_(s,cS(r)),offset:z_(s,LD(r)),velocity:OD(r,.1)}}function LD(s){return s[0]}function cS(s){return s[s.length-1]}function OD(s,r){if(s.length<2)return{x:0,y:0};let i=s.length-1,d=null;const T=cS(s);for(;i>=0&&(d=s[i],!(T.timestamp-d.timestamp>ns(r)));)i--;if(!d)return{x:0,y:0};const D=is(T.timestamp-d.timestamp);if(D===0)return{x:0,y:0};const U={x:(T.x-d.x)/D,y:(T.y-d.y)/D};return U.x===1/0&&(U.x=0),U.y===1/0&&(U.y=0),U}function PD(s,{min:r,max:i},d){return r!==void 0&&s<r?s=d?Qr(r,s,d.min):Math.max(s,r):i!==void 0&&s>i&&(s=d?Qr(i,s,d.max):Math.min(s,i)),s}function V_(s,r,i){return{min:r!==void 0?s.min+r:void 0,max:i!==void 0?s.max+i-(s.max-s.min):void 0}}function UD(s,{top:r,left:i,bottom:d,right:T}){return{x:V_(s.x,i,T),y:V_(s.y,r,d)}}function G_(s,r){let i=r.min-s.min,d=r.max-s.max;return r.max-r.min<s.max-s.min&&([i,d]=[d,i]),{min:i,max:d}}function ND(s,r){return{x:G_(s.x,r.x),y:G_(s.y,r.y)}}function ID(s,r){let i=.5;const d=zn(s),T=zn(r);return T>d?i=Bu(r.min,r.max-d,s.min):d>T&&(i=Bu(s.min,s.max-T,r.min)),Ns(0,1,i)}function kD(s,r){const i={};return r.min!==void 0&&(i.min=r.min-s.min),r.max!==void 0&&(i.max=r.max-s.min),i}const fy=.35;function FD(s=fy){return s===!1?s=0:s===!0&&(s=fy),{x:H_(s,"left","right"),y:H_(s,"top","bottom")}}function H_(s,r,i){return{min:W_(s,r),max:W_(s,i)}}function W_(s,r){return typeof s=="number"?s:s[r]||0}const BD=new WeakMap;class zD{constructor(r){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=cn(),this.visualElement=r}start(r,{snapToCursor:i=!1}={}){const{presenceContext:d}=this.visualElement;if(d&&d.isPresent===!1)return;const T=p=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(rc(p).point)},D=(p,f)=>{const{drag:h,dragPropagation:b,onDragStart:w}=this.getProps();if(h&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=i3(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ei(l=>{let o=this.getAxisMotionValue(l).get()||0;if(ss.test(o)){const{projection:u}=this.visualElement;if(u&&u.layout){const m=u.layout.layoutBox[l];m&&(o=zn(m)*(parseFloat(o)/100))}}this.originPoint[l]=o}),w&&Jr.postRender(()=>w(p,f)),oy(this.visualElement,"transform");const{animationState:c}=this.visualElement;c&&c.setActive("whileDrag",!0)},U=(p,f)=>{const{dragPropagation:h,dragDirectionLock:b,onDirectionLock:w,onDrag:c}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:l}=f;if(b&&this.currentDirection===null){this.currentDirection=VD(l),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",f.point,l),this.updateAxis("y",f.point,l),this.visualElement.render(),c&&c(p,f)},t=(p,f)=>this.stop(p,f),R=()=>Ei(p=>{var f;return this.getAnimationState(p)==="paused"&&((f=this.getAxisMotionValue(p).animation)==null?void 0:f.play())}),{dragSnapToOrigin:M}=this.getProps();this.panSession=new uS(r,{onSessionStart:T,onStart:D,onMove:U,onSessionEnd:t,resumeAnimation:R},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:M,contextWindow:lS(this.visualElement)})}stop(r,i){const d=this.isDragging;if(this.cancel(),!d)return;const{velocity:T}=i;this.startAnimation(T);const{onDragEnd:D}=this.getProps();D&&Jr.postRender(()=>D(r,i))}cancel(){this.isDragging=!1;const{projection:r,animationState:i}=this.visualElement;r&&(r.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:d}=this.getProps();!d&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(r,i,d){const{drag:T}=this.getProps();if(!d||!qf(r,T,this.currentDirection))return;const D=this.getAxisMotionValue(r);let U=this.originPoint[r]+d[r];this.constraints&&this.constraints[r]&&(U=PD(U,this.constraints[r],this.elastic[r])),D.set(U)}resolveConstraints(){var D;const{dragConstraints:r,dragElastic:i}=this.getProps(),d=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(D=this.visualElement.projection)==null?void 0:D.layout,T=this.constraints;r&&ul(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&d?this.constraints=UD(d.layoutBox,r):this.constraints=!1,this.elastic=FD(i),T!==this.constraints&&d&&this.constraints&&!this.hasMutatedConstraints&&Ei(U=>{this.constraints!==!1&&this.getAxisMotionValue(U)&&(this.constraints[U]=kD(d.layoutBox[U],this.constraints[U]))})}resolveRefConstraints(){const{dragConstraints:r,onMeasureDragConstraints:i}=this.getProps();if(!r||!ul(r))return!1;const d=r.current,{projection:T}=this.visualElement;if(!T||!T.layout)return!1;const D=CD(d,T.root,this.visualElement.getTransformPagePoint());let U=ND(T.layout.layoutBox,D);if(i){const t=i(xD(U));this.hasMutatedConstraints=!!t,t&&(U=rS(t))}return U}startAnimation(r){const{drag:i,dragMomentum:d,dragElastic:T,dragTransition:D,dragSnapToOrigin:U,onDragTransitionEnd:t}=this.getProps(),R=this.constraints||{},M=Ei(p=>{if(!qf(p,i,this.currentDirection))return;let f=R&&R[p]||{};U&&(f={min:0,max:0});const h=T?200:1e6,b=T?40:1e7,w={type:"inertia",velocity:d?r[p]:0,bounceStiffness:h,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...D,...f};return this.startAxisValueAnimation(p,w)});return Promise.all(M).then(t)}startAxisValueAnimation(r,i){const d=this.getAxisMotionValue(r);return oy(this.visualElement,r),d.start(tg(r,d,0,i,this.visualElement,!1))}stopAnimation(){Ei(r=>this.getAxisMotionValue(r).stop())}pauseAnimation(){Ei(r=>{var i;return(i=this.getAxisMotionValue(r).animation)==null?void 0:i.pause()})}getAnimationState(r){var i;return(i=this.getAxisMotionValue(r).animation)==null?void 0:i.state}getAxisMotionValue(r){const i=`_drag${r.toUpperCase()}`,d=this.visualElement.getProps(),T=d[i];return T||this.visualElement.getValue(r,(d.initial?d.initial[r]:void 0)||0)}snapToCursor(r){Ei(i=>{const{drag:d}=this.getProps();if(!qf(i,d,this.currentDirection))return;const{projection:T}=this.visualElement,D=this.getAxisMotionValue(i);if(T&&T.layout){const{min:U,max:t}=T.layout.layoutBox[i];D.set(r[i]-Qr(U,t,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:r,dragConstraints:i}=this.getProps(),{projection:d}=this.visualElement;if(!ul(i)||!d||!this.constraints)return;this.stopAnimation();const T={x:0,y:0};Ei(U=>{const t=this.getAxisMotionValue(U);if(t&&this.constraints!==!1){const R=t.get();T[U]=ID({min:R,max:R},this.constraints[U])}});const{transformTemplate:D}=this.visualElement.getProps();this.visualElement.current.style.transform=D?D({},""):"none",d.root&&d.root.updateScroll(),d.updateLayout(),this.resolveConstraints(),Ei(U=>{if(!qf(U,r,null))return;const t=this.getAxisMotionValue(U),{min:R,max:M}=this.constraints[U];t.set(Qr(R,M,T[U]))})}addListeners(){if(!this.visualElement.current)return;BD.set(this.visualElement,this);const r=this.visualElement.current,i=Ou(r,"pointerdown",R=>{const{drag:M,dragListener:p=!0}=this.getProps();M&&p&&this.start(R)}),d=()=>{const{dragConstraints:R}=this.getProps();ul(R)&&R.current&&(this.constraints=this.resolveRefConstraints())},{projection:T}=this.visualElement,D=T.addEventListener("measure",d);T&&!T.layout&&(T.root&&T.root.updateScroll(),T.updateLayout()),Jr.read(d);const U=Xu(window,"resize",()=>this.scalePositionWithinConstraints()),t=T.addEventListener("didUpdate",({delta:R,hasLayoutChanged:M})=>{this.isDragging&&M&&(Ei(p=>{const f=this.getAxisMotionValue(p);f&&(this.originPoint[p]+=R[p].translate,f.set(f.get()+R[p].translate))}),this.visualElement.render())});return()=>{U(),i(),D(),t&&t()}}getProps(){const r=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:d=!1,dragPropagation:T=!1,dragConstraints:D=!1,dragElastic:U=fy,dragMomentum:t=!0}=r;return{...r,drag:i,dragDirectionLock:d,dragPropagation:T,dragConstraints:D,dragElastic:U,dragMomentum:t}}}function qf(s,r,i){return(r===!0||r===s)&&(i===null||i===s)}function VD(s,r=10){let i=null;return Math.abs(s.y)>r?i="y":Math.abs(s.x)>r&&(i="x"),i}class GD extends Sa{constructor(r){super(r),this.removeGroupControls=Ri,this.removeListeners=Ri,this.controls=new zD(r)}mount(){const{dragControls:r}=this.node.getProps();r&&(this.removeGroupControls=r.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ri}unmount(){this.removeGroupControls(),this.removeListeners()}}const X_=s=>(r,i)=>{s&&Jr.postRender(()=>s(r,i))};class HD extends Sa{constructor(){super(...arguments),this.removePointerDownListener=Ri}onPointerDown(r){this.session=new uS(r,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:lS(this.node)})}createPanHandlers(){const{onPanSessionStart:r,onPanStart:i,onPan:d,onPanEnd:T}=this.node.getProps();return{onSessionStart:X_(r),onStart:X_(i),onMove:d,onEnd:(D,U)=>{delete this.session,T&&Jr.postRender(()=>T(D,U))}}}mount(){this.removePointerDownListener=Ou(this.node.current,"pointerdown",r=>this.onPointerDown(r))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const sd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function q_(s,r){return r.max===r.min?0:s/(r.max-r.min)*100}const ju={correct:(s,r)=>{if(!r.target)return s;if(typeof s=="string")if(Yt.test(s))s=parseFloat(s);else return s;const i=q_(s,r.target.x),d=q_(s,r.target.y);return`${i}% ${d}%`}},WD={correct:(s,{treeScale:r,projectionDelta:i})=>{const d=s,T=xa.parse(s);if(T.length>5)return d;const D=xa.createTransformer(s),U=typeof T[0]!="number"?1:0,t=i.x.scale*r.x,R=i.y.scale*r.y;T[0+U]/=t,T[1+U]/=R;const M=Qr(t,R,.5);return typeof T[2+U]=="number"&&(T[2+U]/=M),typeof T[3+U]=="number"&&(T[3+U]/=M),D(T)}};class XD extends kt.Component{componentDidMount(){const{visualElement:r,layoutGroup:i,switchLayoutGroup:d,layoutId:T}=this.props,{projection:D}=r;C3(qD),D&&(i.group&&i.group.add(D),d&&d.register&&T&&d.register(D),D.root.didUpdate(),D.addEventListener("animationComplete",()=>{this.safeToRemove()}),D.setOptions({...D.options,onExitComplete:()=>this.safeToRemove()})),sd.hasEverUpdated=!0}getSnapshotBeforeUpdate(r){const{layoutDependency:i,visualElement:d,drag:T,isPresent:D}=this.props,{projection:U}=d;return U&&(U.isPresent=D,T||r.layoutDependency!==i||i===void 0||r.isPresent!==D?U.willUpdate():this.safeToRemove(),r.isPresent!==D&&(D?U.promote():U.relegate()||Jr.postRender(()=>{const t=U.getStack();(!t||!t.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:r}=this.props.visualElement;r&&(r.root.didUpdate(),Wy.postRender(()=>{!r.currentAnimation&&r.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:r,layoutGroup:i,switchLayoutGroup:d}=this.props,{projection:T}=r;T&&(T.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(T),d&&d.deregister&&d.deregister(T))}safeToRemove(){const{safeToRemove:r}=this.props;r&&r()}render(){return null}}function fS(s){const[r,i]=h3(),d=kt.useContext(q1);return $t.jsx(XD,{...s,layoutGroup:d,switchLayoutGroup:kt.useContext(Gx),isPresent:r,safeToRemove:i})}const qD={borderRadius:{...ju,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ju,borderTopRightRadius:ju,borderBottomLeftRadius:ju,borderBottomRightRadius:ju,boxShadow:WD};function YD(s,r,i){const d=kn(s)?s:xl(s);return d.start(tg("",d,r,i)),d.animation}const ZD=(s,r)=>s.depth-r.depth;class KD{constructor(){this.children=[],this.isDirty=!1}add(r){Ty(this.children,r),this.isDirty=!0}remove(r){Ay(this.children,r),this.isDirty=!0}forEach(r){this.isDirty&&this.children.sort(ZD),this.isDirty=!1,this.children.forEach(r)}}function QD(s,r){const i=Kn.now(),d=({timestamp:T})=>{const D=T-i;D>=r&&(_a(d),s(D-r))};return Jr.setup(d,!0),()=>_a(d)}const dS=["TopLeft","TopRight","BottomLeft","BottomRight"],JD=dS.length,Y_=s=>typeof s=="string"?parseFloat(s):s,Z_=s=>typeof s=="number"||Yt.test(s);function $D(s,r,i,d,T,D){T?(s.opacity=Qr(0,i.opacity??1,eL(d)),s.opacityExit=Qr(r.opacity??1,0,tL(d))):D&&(s.opacity=Qr(r.opacity??1,i.opacity??1,d));for(let U=0;U<JD;U++){const t=`border${dS[U]}Radius`;let R=K_(r,t),M=K_(i,t);if(R===void 0&&M===void 0)continue;R||(R=0),M||(M=0),R===0||M===0||Z_(R)===Z_(M)?(s[t]=Math.max(Qr(Y_(R),Y_(M),d),0),(ss.test(M)||ss.test(R))&&(s[t]+="%")):s[t]=M}(r.rotate||i.rotate)&&(s.rotate=Qr(r.rotate||0,i.rotate||0,d))}function K_(s,r){return s[r]!==void 0?s[r]:s.borderRadius}const eL=hS(0,.5,ix),tL=hS(.5,.95,Ri);function hS(s,r,i){return d=>d<s?0:d>r?1:i(Bu(s,r,d))}function Q_(s,r){s.min=r.min,s.max=r.max}function Mi(s,r){Q_(s.x,r.x),Q_(s.y,r.y)}function J_(s,r){s.translate=r.translate,s.scale=r.scale,s.originPoint=r.originPoint,s.origin=r.origin}function $_(s,r,i,d,T){return s-=r,s=hd(s,1/i,d),T!==void 0&&(s=hd(s,1/T,d)),s}function rL(s,r=0,i=1,d=.5,T,D=s,U=s){if(ss.test(r)&&(r=parseFloat(r),r=Qr(U.min,U.max,r/100)-U.min),typeof r!="number")return;let t=Qr(D.min,D.max,d);s===D&&(t-=r),s.min=$_(s.min,r,i,t,T),s.max=$_(s.max,r,i,t,T)}function e1(s,r,[i,d,T],D,U){rL(s,r[i],r[d],r[T],r.scale,D,U)}const nL=["x","scaleX","originX"],iL=["y","scaleY","originY"];function t1(s,r,i,d){e1(s.x,r,nL,i?i.x:void 0,d?d.x:void 0),e1(s.y,r,iL,i?i.y:void 0,d?d.y:void 0)}function r1(s){return s.translate===0&&s.scale===1}function pS(s){return r1(s.x)&&r1(s.y)}function n1(s,r){return s.min===r.min&&s.max===r.max}function sL(s,r){return n1(s.x,r.x)&&n1(s.y,r.y)}function i1(s,r){return Math.round(s.min)===Math.round(r.min)&&Math.round(s.max)===Math.round(r.max)}function mS(s,r){return i1(s.x,r.x)&&i1(s.y,r.y)}function s1(s){return zn(s.x)/zn(s.y)}function a1(s,r){return s.translate===r.translate&&s.scale===r.scale&&s.originPoint===r.originPoint}class aL{constructor(){this.members=[]}add(r){Ty(this.members,r),r.scheduleRender()}remove(r){if(Ay(this.members,r),r===this.prevLead&&(this.prevLead=void 0),r===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(r){const i=this.members.findIndex(T=>r===T);if(i===0)return!1;let d;for(let T=i;T>=0;T--){const D=this.members[T];if(D.isPresent!==!1){d=D;break}}return d?(this.promote(d),!0):!1}promote(r,i){const d=this.lead;if(r!==d&&(this.prevLead=d,this.lead=r,r.show(),d)){d.instance&&d.scheduleRender(),r.scheduleRender(),r.resumeFrom=d,i&&(r.resumeFrom.preserveOpacity=!0),d.snapshot&&(r.snapshot=d.snapshot,r.snapshot.latestValues=d.animationValues||d.latestValues),r.root&&r.root.isUpdating&&(r.isLayoutDirty=!0);const{crossfade:T}=r.options;T===!1&&d.hide()}}exitAnimationComplete(){this.members.forEach(r=>{const{options:i,resumingFrom:d}=r;i.onExitComplete&&i.onExitComplete(),d&&d.options.onExitComplete&&d.options.onExitComplete()})}scheduleRender(){this.members.forEach(r=>{r.instance&&r.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function oL(s,r,i){let d="";const T=s.x.translate/r.x,D=s.y.translate/r.y,U=(i==null?void 0:i.z)||0;if((T||D||U)&&(d=`translate3d(${T}px, ${D}px, ${U}px) `),(r.x!==1||r.y!==1)&&(d+=`scale(${1/r.x}, ${1/r.y}) `),i){const{transformPerspective:M,rotate:p,rotateX:f,rotateY:h,skewX:b,skewY:w}=i;M&&(d=`perspective(${M}px) ${d}`),p&&(d+=`rotate(${p}deg) `),f&&(d+=`rotateX(${f}deg) `),h&&(d+=`rotateY(${h}deg) `),b&&(d+=`skewX(${b}deg) `),w&&(d+=`skewY(${w}deg) `)}const t=s.x.scale*r.x,R=s.y.scale*r.y;return(t!==1||R!==1)&&(d+=`scale(${t}, ${R})`),d||"none"}const nm=["","X","Y","Z"],lL={visibility:"hidden"},uL=1e3;let cL=0;function im(s,r,i,d){const{latestValues:T}=r;T[s]&&(i[s]=T[s],r.setStaticValue(s,0),d&&(d[s]=0))}function yS(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:r}=s.options;if(!r)return;const i=Jx(r);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:T,layoutId:D}=s.options;window.MotionCancelOptimisedAnimation(i,"transform",Jr,!(T||D))}const{parent:d}=s;d&&!d.hasCheckedOptimisedAppear&&yS(d)}function gS({attachResizeListener:s,defaultParent:r,measureScroll:i,checkIsScrollRoot:d,resetTransform:T}){return class{constructor(U={},t=r==null?void 0:r()){this.id=cL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(hL),this.nodes.forEach(vL),this.nodes.forEach(bL),this.nodes.forEach(pL)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=U,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let R=0;R<this.path.length;R++)this.path[R].shouldResetTransform=!0;this.root===this&&(this.nodes=new KD)}addEventListener(U,t){return this.eventHandlers.has(U)||this.eventHandlers.set(U,new Cy),this.eventHandlers.get(U).add(t)}notifyListeners(U,...t){const R=this.eventHandlers.get(U);R&&R.notify(...t)}hasListeners(U){return this.eventHandlers.has(U)}mount(U){if(this.instance)return;this.isSVG=Ix(U)&&!c3(U),this.instance=U;const{layoutId:t,layout:R,visualElement:M}=this.options;if(M&&!M.current&&M.mount(U),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(R||t)&&(this.isLayoutDirty=!0),s){let p;const f=()=>this.root.updateBlockedByResize=!1;s(U,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=QD(f,250),sd.hasAnimatedSinceResize&&(sd.hasAnimatedSinceResize=!1,this.nodes.forEach(l1))})}t&&this.root.registerSharedNode(t,this),this.options.animate!==!1&&M&&(t||R)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||M.getDefaultTransition()||ML,{onLayoutAnimationStart:c,onLayoutAnimationComplete:l}=M.getProps(),o=!this.targetLayout||!mS(this.targetLayout,b),u=!f&&h;if(this.options.layoutRoot||this.resumeFrom||u||f&&(o||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const m={...Gy(w,"layout"),onPlay:c,onComplete:l};(M.shouldReduceMotion||this.options.layoutRoot)&&(m.delay=0,m.type=!1),this.startAnimation(m),this.setAnimationOrigin(p,u)}else f||l1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const U=this.getStack();U&&U.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),_a(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_L),this.animationId++)}getTransformTemplate(){const{visualElement:U}=this.options;return U&&U.getProps().transformTemplate}willUpdate(U=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&yS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const f=this.path[p];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:t,layout:R}=this.options;if(t===void 0&&!R)return;const M=this.getTransformTemplate();this.prevTransformTemplateValue=M?M(this.latestValues,""):void 0,this.updateSnapshot(),U&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(o1);return}this.isUpdating||this.nodes.forEach(yL),this.isUpdating=!1,this.nodes.forEach(gL),this.nodes.forEach(fL),this.nodes.forEach(dL),this.clearAllSnapshots();const t=Kn.now();Dn.delta=Ns(0,1e3/60,t-Dn.timestamp),Dn.timestamp=t,Dn.isProcessing=!0,Zp.update.process(Dn),Zp.preRender.process(Dn),Zp.render.process(Dn),Dn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Wy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(mL),this.sharedNodes.forEach(xL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Jr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Jr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!zn(this.snapshot.measuredBox.x)&&!zn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let R=0;R<this.path.length;R++)this.path[R].updateScroll();const U=this.layout;this.layout=this.measure(!1),this.layoutCorrected=cn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,U?U.layoutBox:void 0)}updateScroll(U="measure"){let t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===U&&(t=!1),t&&this.instance){const R=d(this.instance);this.scroll={animationId:this.root.animationId,phase:U,isRoot:R,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:R}}}resetTransform(){if(!T)return;const U=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!pS(this.projectionDelta),R=this.getTransformTemplate(),M=R?R(this.latestValues,""):void 0,p=M!==this.prevTransformTemplateValue;U&&this.instance&&(t||Ka(this.latestValues)||p)&&(T(this.instance,M),this.shouldResetTransform=!1,this.scheduleRender())}measure(U=!0){const t=this.measurePageBox();let R=this.removeElementScroll(t);return U&&(R=this.removeTransform(R)),EL(R),{animationId:this.root.animationId,measuredBox:t,layoutBox:R,latestValues:{},source:this.id}}measurePageBox(){var M;const{visualElement:U}=this.options;if(!U)return cn();const t=U.measureViewportBox();if(!(((M=this.scroll)==null?void 0:M.wasRoot)||this.path.some(TL))){const{scroll:p}=this.root;p&&(fl(t.x,p.offset.x),fl(t.y,p.offset.y))}return t}removeElementScroll(U){var R;const t=cn();if(Mi(t,U),(R=this.scroll)!=null&&R.wasRoot)return t;for(let M=0;M<this.path.length;M++){const p=this.path[M],{scroll:f,options:h}=p;p!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&Mi(t,U),fl(t.x,f.offset.x),fl(t.y,f.offset.y))}return t}applyTransform(U,t=!1){const R=cn();Mi(R,U);for(let M=0;M<this.path.length;M++){const p=this.path[M];!t&&p.options.layoutScroll&&p.scroll&&p!==p.root&&dl(R,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Ka(p.latestValues)&&dl(R,p.latestValues)}return Ka(this.latestValues)&&dl(R,this.latestValues),R}removeTransform(U){const t=cn();Mi(t,U);for(let R=0;R<this.path.length;R++){const M=this.path[R];if(!M.instance||!Ka(M.latestValues))continue;uy(M.latestValues)&&M.updateSnapshot();const p=cn(),f=M.measurePageBox();Mi(p,f),t1(t,M.latestValues,M.snapshot?M.snapshot.layoutBox:void 0,p)}return Ka(this.latestValues)&&t1(t,this.latestValues),t}setTargetDelta(U){this.targetDelta=U,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(U){this.options={...this.options,...U,crossfade:U.crossfade!==void 0?U.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Dn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(U=!1){var h;const t=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=t.isSharedProjectionDirty);const R=!!this.resumingFrom||this!==t;if(!(U||R&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:f}=this.options;if(!(!this.layout||!(p||f))){if(this.resolvedRelativeTargetAt=Dn.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=cn(),this.relativeTargetOrigin=cn(),Uu(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),Mi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=cn(),this.targetWithTransforms=cn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),jD(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Mi(this.target,this.layout.layoutBox),aS(this.target,this.targetDelta)):Mi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=cn(),this.relativeTargetOrigin=cn(),Uu(this.relativeTargetOrigin,this.target,b.target),Mi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||uy(this.parent.latestValues)||sS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const U=this.getLead(),t=!!this.resumingFrom||this!==U;let R=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(R=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(R=!1),this.resolvedRelativeTargetAt===Dn.timestamp&&(R=!1),R)return;const{layout:M,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(M||p))return;Mi(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;RD(this.layoutCorrected,this.treeScale,this.path,t),U.layout&&!U.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(U.target=U.layout.layoutBox,U.targetWithTransforms=cn());const{target:b}=U;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(J_(this.prevProjectionDelta.x,this.projectionDelta.x),J_(this.prevProjectionDelta.y,this.projectionDelta.y)),Pu(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!a1(this.projectionDelta.x,this.prevProjectionDelta.x)||!a1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(U=!0){var t;if((t=this.options.visualElement)==null||t.scheduleRender(),U){const R=this.getStack();R&&R.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=cl(),this.projectionDelta=cl(),this.projectionDeltaWithTransform=cl()}setAnimationOrigin(U,t=!1){const R=this.snapshot,M=R?R.latestValues:{},p={...this.latestValues},f=cl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const h=cn(),b=R?R.source:void 0,w=this.layout?this.layout.source:void 0,c=b!==w,l=this.getStack(),o=!l||l.members.length<=1,u=!!(c&&!o&&this.options.crossfade===!0&&!this.path.some(wL));this.animationProgress=0;let m;this.mixTargetDelta=g=>{const _=g/1e3;u1(f.x,U.x,_),u1(f.y,U.y,_),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Uu(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),SL(this.relativeTarget,this.relativeTargetOrigin,h,_),m&&sL(this.relativeTarget,m)&&(this.isProjectionDirty=!1),m||(m=cn()),Mi(m,this.relativeTarget)),c&&(this.animationValues=p,$D(p,M,this.latestValues,_,u,o)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(U){var t,R,M;this.notifyListeners("animationStart"),(t=this.currentAnimation)==null||t.stop(),(M=(R=this.resumingFrom)==null?void 0:R.currentAnimation)==null||M.stop(),this.pendingAnimation&&(_a(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Jr.update(()=>{sd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=xl(0)),this.currentAnimation=YD(this.motionValue,[0,1e3],{...U,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),U.onUpdate&&U.onUpdate(p)},onStop:()=>{},onComplete:()=>{U.onComplete&&U.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const U=this.getStack();U&&U.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(uL),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const U=this.getLead();let{targetWithTransforms:t,target:R,layout:M,latestValues:p}=U;if(!(!t||!R||!M)){if(this!==U&&this.layout&&M&&vS(this.options.animationType,this.layout.layoutBox,M.layoutBox)){R=this.target||cn();const f=zn(this.layout.layoutBox.x);R.x.min=U.target.x.min,R.x.max=R.x.min+f;const h=zn(this.layout.layoutBox.y);R.y.min=U.target.y.min,R.y.max=R.y.min+h}Mi(t,R),dl(t,p),Pu(this.projectionDeltaWithTransform,this.layoutCorrected,t,p)}}registerSharedNode(U,t){this.sharedNodes.has(U)||this.sharedNodes.set(U,new aL),this.sharedNodes.get(U).add(t);const M=t.options.initialPromotionConfig;t.promote({transition:M?M.transition:void 0,preserveFollowOpacity:M&&M.shouldPreserveFollowOpacity?M.shouldPreserveFollowOpacity(t):void 0})}isLead(){const U=this.getStack();return U?U.lead===this:!0}getLead(){var t;const{layoutId:U}=this.options;return U?((t=this.getStack())==null?void 0:t.lead)||this:this}getPrevLead(){var t;const{layoutId:U}=this.options;return U?(t=this.getStack())==null?void 0:t.prevLead:void 0}getStack(){const{layoutId:U}=this.options;if(U)return this.root.sharedNodes.get(U)}promote({needsReset:U,transition:t,preserveFollowOpacity:R}={}){const M=this.getStack();M&&M.promote(this,R),U&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const U=this.getStack();return U?U.relegate(this):!1}resetSkewAndRotation(){const{visualElement:U}=this.options;if(!U)return;let t=!1;const{latestValues:R}=U;if((R.z||R.rotate||R.rotateX||R.rotateY||R.rotateZ||R.skewX||R.skewY)&&(t=!0),!t)return;const M={};R.z&&im("z",U,M,this.animationValues);for(let p=0;p<nm.length;p++)im(`rotate${nm[p]}`,U,M,this.animationValues),im(`skew${nm[p]}`,U,M,this.animationValues);U.render();for(const p in M)U.setStaticValue(p,M[p]),this.animationValues&&(this.animationValues[p]=M[p]);U.scheduleRender()}getProjectionStyles(U){if(!this.instance||this.isSVG)return;if(!this.isVisible)return lL;const t={visibility:""},R=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,t.opacity="",t.pointerEvents=id(U==null?void 0:U.pointerEvents)||"",t.transform=R?R(this.latestValues,""):"none",t;const M=this.getLead();if(!this.projectionDelta||!this.layout||!M.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=id(U==null?void 0:U.pointerEvents)||""),this.hasProjected&&!Ka(this.latestValues)&&(b.transform=R?R({},""):"none",this.hasProjected=!1),b}const p=M.animationValues||M.latestValues;this.applyTransformsToTarget(),t.transform=oL(this.projectionDeltaWithTransform,this.treeScale,p),R&&(t.transform=R(p,t.transform));const{x:f,y:h}=this.projectionDelta;t.transformOrigin=`${f.origin*100}% ${h.origin*100}% 0`,M.animationValues?t.opacity=M===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:t.opacity=M===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const b in Hu){if(p[b]===void 0)continue;const{correct:w,applyTo:c,isCSSVariable:l}=Hu[b],o=t.transform==="none"?p[b]:w(p[b],M);if(c){const u=c.length;for(let m=0;m<u;m++)t[c[m]]=o}else l?this.options.visualElement.renderState.vars[b]=o:t[b]=o}return this.options.layoutId&&(t.pointerEvents=M===this?id(U==null?void 0:U.pointerEvents)||"":"none"),t}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(U=>{var t;return(t=U.currentAnimation)==null?void 0:t.stop()}),this.root.nodes.forEach(o1),this.root.sharedNodes.clear()}}}function fL(s){s.updateLayout()}function dL(s){var i;const r=((i=s.resumeFrom)==null?void 0:i.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&r&&s.hasListeners("didUpdate")){const{layoutBox:d,measuredBox:T}=s.layout,{animationType:D}=s.options,U=r.source!==s.layout.source;D==="size"?Ei(f=>{const h=U?r.measuredBox[f]:r.layoutBox[f],b=zn(h);h.min=d[f].min,h.max=h.min+b}):vS(D,r.layoutBox,d)&&Ei(f=>{const h=U?r.measuredBox[f]:r.layoutBox[f],b=zn(d[f]);h.max=h.min+b,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[f].max=s.relativeTarget[f].min+b)});const t=cl();Pu(t,d,r.layoutBox);const R=cl();U?Pu(R,s.applyTransform(T,!0),r.measuredBox):Pu(R,d,r.layoutBox);const M=!pS(t);let p=!1;if(!s.resumeFrom){const f=s.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:b}=f;if(h&&b){const w=cn();Uu(w,r.layoutBox,h.layoutBox);const c=cn();Uu(c,d,b.layoutBox),mS(w,c)||(p=!0),f.options.layoutRoot&&(s.relativeTarget=c,s.relativeTargetOrigin=w,s.relativeParent=f)}}}s.notifyListeners("didUpdate",{layout:d,snapshot:r,delta:R,layoutDelta:t,hasLayoutChanged:M,hasRelativeLayoutChanged:p})}else if(s.isLead()){const{onExitComplete:d}=s.options;d&&d()}s.options.transition=void 0}function hL(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function pL(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function mL(s){s.clearSnapshot()}function o1(s){s.clearMeasurements()}function yL(s){s.isLayoutDirty=!1}function gL(s){const{visualElement:r}=s.options;r&&r.getProps().onBeforeLayoutMeasure&&r.notify("BeforeLayoutMeasure"),s.resetTransform()}function l1(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function vL(s){s.resolveTargetDelta()}function bL(s){s.calcProjection()}function _L(s){s.resetSkewAndRotation()}function xL(s){s.removeLeadSnapshot()}function u1(s,r,i){s.translate=Qr(r.translate,0,i),s.scale=Qr(r.scale,1,i),s.origin=r.origin,s.originPoint=r.originPoint}function c1(s,r,i,d){s.min=Qr(r.min,i.min,d),s.max=Qr(r.max,i.max,d)}function SL(s,r,i,d){c1(s.x,r.x,i.x,d),c1(s.y,r.y,i.y,d)}function wL(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const ML={duration:.45,ease:[.4,0,.1,1]},f1=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),d1=f1("applewebkit/")&&!f1("chrome/")?Math.round:Ri;function h1(s){s.min=d1(s.min),s.max=d1(s.max)}function EL(s){h1(s.x),h1(s.y)}function vS(s,r,i){return s==="position"||s==="preserve-aspect"&&!AD(s1(r),s1(i),.2)}function TL(s){var r;return s!==s.root&&((r=s.scroll)==null?void 0:r.wasRoot)}const AL=gS({attachResizeListener:(s,r)=>Xu(s,"resize",r),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sm={current:void 0},bS=gS({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!sm.current){const s=new AL({});s.mount(window),s.setOptions({layoutScroll:!0}),sm.current=s}return sm.current},resetTransform:(s,r)=>{s.style.transform=r!==void 0?r:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),jL={pan:{Feature:HD},drag:{Feature:GD,ProjectionNode:bS,MeasureLayout:fS}};function p1(s,r,i){const{props:d}=s;s.animationState&&d.whileHover&&s.animationState.setActive("whileHover",i==="Start");const T="onHover"+i,D=d[T];D&&Jr.postRender(()=>D(r,rc(r)))}class RL extends Sa{mount(){const{current:r}=this.node;r&&(this.unmount=s3(r,(i,d)=>(p1(this.node,d,"Start"),T=>p1(this.node,T,"End"))))}unmount(){}}class CL extends Sa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let r=!1;try{r=this.node.current.matches(":focus-visible")}catch{r=!0}!r||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=$u(Xu(this.node.current,"focus",()=>this.onFocus()),Xu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function m1(s,r,i){const{props:d}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&d.whileTap&&s.animationState.setActive("whileTap",i==="Start");const T="onTap"+(i==="End"?"":i),D=d[T];D&&Jr.postRender(()=>D(r,rc(r)))}class DL extends Sa{mount(){const{current:r}=this.node;r&&(this.unmount=u3(r,(i,d)=>(m1(this.node,d,"Start"),(T,{success:D})=>m1(this.node,T,D?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const dy=new WeakMap,am=new WeakMap,LL=s=>{const r=dy.get(s.target);r&&r(s)},OL=s=>{s.forEach(LL)};function PL({root:s,...r}){const i=s||document;am.has(i)||am.set(i,{});const d=am.get(i),T=JSON.stringify(r);return d[T]||(d[T]=new IntersectionObserver(OL,{root:s,...r})),d[T]}function UL(s,r,i){const d=PL(r);return dy.set(s,i),d.observe(s),()=>{dy.delete(s),d.unobserve(s)}}const NL={some:0,all:1};class IL extends Sa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:r={}}=this.node.getProps(),{root:i,margin:d,amount:T="some",once:D}=r,U={root:i?i.current:void 0,rootMargin:d,threshold:typeof T=="number"?T:NL[T]},t=R=>{const{isIntersecting:M}=R;if(this.isInView===M||(this.isInView=M,D&&!M&&this.hasEnteredView))return;M&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",M);const{onViewportEnter:p,onViewportLeave:f}=this.node.getProps(),h=M?p:f;h&&h(R)};return UL(this.node.current,U,t)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:r,prevProps:i}=this.node;["amount","margin","root"].some(kL(r,i))&&this.startObserver()}unmount(){}}function kL({viewport:s={}},{viewport:r={}}={}){return i=>s[i]!==r[i]}const FL={inView:{Feature:IL},tap:{Feature:DL},focus:{Feature:CL},hover:{Feature:RL}},BL={layout:{ProjectionNode:bS,MeasureLayout:fS}},hy={current:null},_S={current:!1};function zL(){if(_S.current=!0,!!My)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),r=()=>hy.current=s.matches;s.addListener(r),r()}else hy.current=!1}const VL=new WeakMap;function GL(s,r,i){for(const d in r){const T=r[d],D=i[d];if(kn(T))s.addValue(d,T);else if(kn(D))s.addValue(d,xl(T,{owner:s}));else if(D!==T)if(s.hasValue(d)){const U=s.getValue(d);U.liveStyle===!0?U.jump(T):U.hasAnimated||U.set(T)}else{const U=s.getStaticValue(d);s.addValue(d,xl(U!==void 0?U:T,{owner:s}))}}for(const d in i)r[d]===void 0&&s.removeValue(d);return r}const y1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class HL{scrapeMotionValuesFromProps(r,i,d){return{}}constructor({parent:r,props:i,presenceContext:d,reducedMotionConfig:T,blockInitialAnimation:D,visualState:U},t={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Vy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Kn.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Jr.render(this.render,!1,!0))};const{latestValues:R,renderState:M}=U;this.latestValues=R,this.baseTarget={...R},this.initialValues=i.initial?{...R}:{},this.renderState=M,this.parent=r,this.props=i,this.presenceContext=d,this.depth=r?r.depth+1:0,this.reducedMotionConfig=T,this.options=t,this.blockInitialAnimation=!!D,this.isControllingVariants=_d(i),this.isVariantNode=zx(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(r&&r.current);const{willChange:p,...f}=this.scrapeMotionValuesFromProps(i,{},this);for(const h in f){const b=f[h];R[h]!==void 0&&kn(b)&&b.set(R[h],!1)}}mount(r){this.current=r,VL.set(r,this),this.projection&&!this.projection.instance&&this.projection.mount(r),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,d)=>this.bindToMotionValue(d,i)),_S.current||zL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:hy.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),_a(this.notifyUpdate),_a(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const i=this.features[r];i&&(i.unmount(),i.isMounted=!1)}this.current=null}bindToMotionValue(r,i){this.valueSubscriptions.has(r)&&this.valueSubscriptions.get(r)();const d=Al.has(r);d&&this.onBindTransform&&this.onBindTransform();const T=i.on("change",t=>{this.latestValues[r]=t,this.props.onUpdate&&Jr.preRender(this.notifyUpdate),d&&this.projection&&(this.projection.isTransformDirty=!0)}),D=i.on("renderRequest",this.scheduleRender);let U;window.MotionCheckAppearSync&&(U=window.MotionCheckAppearSync(this,r,i)),this.valueSubscriptions.set(r,()=>{T(),D(),U&&U(),i.owner&&i.stop()})}sortNodePosition(r){return!this.current||!this.sortInstanceNodePosition||this.type!==r.type?0:this.sortInstanceNodePosition(this.current,r.current)}updateFeatures(){let r="animation";for(r in Sl){const i=Sl[r];if(!i)continue;const{isEnabled:d,Feature:T}=i;if(!this.features[r]&&T&&d(this.props)&&(this.features[r]=new T(this)),this.features[r]){const D=this.features[r];D.isMounted?D.update():(D.mount(),D.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):cn()}getStaticValue(r){return this.latestValues[r]}setStaticValue(r,i){this.latestValues[r]=i}update(r,i){(r.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=r,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let d=0;d<y1.length;d++){const T=y1[d];this.propEventSubscriptions[T]&&(this.propEventSubscriptions[T](),delete this.propEventSubscriptions[T]);const D="on"+T,U=r[D];U&&(this.propEventSubscriptions[T]=this.on(T,U))}this.prevMotionValues=GL(this,this.scrapeMotionValuesFromProps(r,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(r){return this.props.variants?this.props.variants[r]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(r){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(r),()=>i.variantChildren.delete(r)}addValue(r,i){const d=this.values.get(r);i!==d&&(d&&this.removeValue(r),this.bindToMotionValue(r,i),this.values.set(r,i),this.latestValues[r]=i.get())}removeValue(r){this.values.delete(r);const i=this.valueSubscriptions.get(r);i&&(i(),this.valueSubscriptions.delete(r)),delete this.latestValues[r],this.removeValueFromRenderState(r,this.renderState)}hasValue(r){return this.values.has(r)}getValue(r,i){if(this.props.values&&this.props.values[r])return this.props.values[r];let d=this.values.get(r);return d===void 0&&i!==void 0&&(d=xl(i===null?void 0:i,{owner:this}),this.addValue(r,d)),d}readValue(r,i){let d=this.latestValues[r]!==void 0||!this.current?this.latestValues[r]:this.getBaseTargetFromProps(this.props,r)??this.readValueFromInstance(this.current,r,this.options);return d!=null&&(typeof d=="string"&&(Y1(d)||K1(d))?d=parseFloat(d):!d3(d)&&xa.test(i)&&(d=Lx(r,i)),this.setBaseTarget(r,kn(d)?d.get():d)),kn(d)?d.get():d}setBaseTarget(r,i){this.baseTarget[r]=i}getBaseTarget(r){var D;const{initial:i}=this.props;let d;if(typeof i=="string"||typeof i=="object"){const U=$y(this.props,i,(D=this.presenceContext)==null?void 0:D.custom);U&&(d=U[r])}if(i&&d!==void 0)return d;const T=this.getBaseTargetFromProps(this.props,r);return T!==void 0&&!kn(T)?T:this.initialValues[r]!==void 0&&d===void 0?void 0:this.baseTarget[r]}on(r,i){return this.events[r]||(this.events[r]=new Cy),this.events[r].add(i)}notify(r,...i){this.events[r]&&this.events[r].notify(...i)}}class xS extends HL{constructor(){super(...arguments),this.KeyframeResolver=e3}sortInstanceNodePosition(r,i){return r.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(r,i){return r.style?r.style[i]:void 0}removeValueFromRenderState(r,{vars:i,style:d}){delete i[r],delete d[r]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:r}=this.props;kn(r)&&(this.childSubscription=r.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}function SS(s,{style:r,vars:i},d,T){Object.assign(s.style,r,T&&T.getProjectionStyles(d));for(const D in i)s.style.setProperty(D,i[D])}function WL(s){return window.getComputedStyle(s)}class XL extends xS{constructor(){super(...arguments),this.type="html",this.renderInstance=SS}readValueFromInstance(r,i){var d;if(Al.has(i))return(d=this.projection)!=null&&d.isProjecting?ey(i):bC(r,i);{const T=WL(r),D=(Oy(i)?T.getPropertyValue(i):T[i])||0;return typeof D=="string"?D.trim():D}}measureInstanceViewportBox(r,{transformPagePoint:i}){return oS(r,i)}build(r,i,d){Ky(r,i,d.transformTemplate)}scrapeMotionValuesFromProps(r,i,d){return eg(r,i,d)}}const wS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function qL(s,r,i,d){SS(s,r,void 0,d);for(const T in r.attrs)s.setAttribute(wS.has(T)?T:Zy(T),r.attrs[T])}class YL extends xS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=cn}getBaseTargetFromProps(r,i){return r[i]}readValueFromInstance(r,i){if(Al.has(i)){const d=Dx(i);return d&&d.default||0}return i=wS.has(i)?i:Zy(i),r.getAttribute(i)}scrapeMotionValuesFromProps(r,i,d){return Qx(r,i,d)}build(r,i,d){qx(r,i,this.isSVGTag,d.transformTemplate,d.style)}renderInstance(r,i,d,T){qL(r,i,d,T)}mount(r){this.isSVGTag=Zx(r.tagName),super.mount(r)}}const ZL=(s,r)=>Jy(s)?new YL(r):new XL(r,{allowProjection:s!==kt.Fragment}),KL=q3({...bD,...FL,...jL,...BL},ZL),QL=v3(KL),g1={wrapper:{display:"inline-block",whiteSpace:"pre-wrap"},srOnly:{position:"absolute",width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0,0,0,0)",border:0}};function Yf({text:s,speed:r=50,maxIterations:i=10,sequential:d=!1,revealDirection:T="start",useOriginalCharsOnly:D=!1,characters:U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz!@#$%^&*()_+",className:t="",parentClassName:R="",encryptedClassName:M="",animateOn:p="hover",...f}){const[h,b]=kt.useState(s),[w,c]=kt.useState(!1),[l,o]=kt.useState(!1),[u,m]=kt.useState(new Set),[g,_]=kt.useState(!1),v=kt.useRef(null);kt.useEffect(()=>{let E,j=0;const O=z=>{const N=s.length;switch(T){case"start":return z.size;case"end":return N-1-z.size;case"center":{const V=Math.floor(N/2),k=Math.floor(z.size/2),H=z.size%2===0?V+k:V-k-1;if(H>=0&&H<N&&!z.has(H))return H;for(let G=0;G<N;G++)if(!z.has(G))return G;return 0}default:return z.size}},P=D?Array.from(new Set(s.split(""))).filter(z=>z!==" "):U.split(""),L=(z,N)=>{if(D){const V=z.split("").map((G,F)=>({char:G,isSpace:G===" ",index:F,isRevealed:N.has(F)})),k=V.filter(G=>!G.isSpace&&!G.isRevealed).map(G=>G.char);for(let G=k.length-1;G>0;G--){const F=Math.floor(Math.random()*(G+1));[k[G],k[F]]=[k[F],k[G]]}let H=0;return V.map(G=>G.isSpace?" ":G.isRevealed?z[G.index]:k[H++]).join("")}else return z.split("").map((V,k)=>V===" "?" ":N.has(k)?z[k]:P[Math.floor(Math.random()*P.length)]).join("")};return w?(o(!0),E=setInterval(()=>{m(z=>{if(d)if(z.size<s.length){const N=O(z),V=new Set(z);return V.add(N),b(L(s,V)),V}else return clearInterval(E),o(!1),z;else return b(L(s,z)),j++,j>=i&&(clearInterval(E),o(!1),b(s)),z})},r)):(b(s),m(new Set),o(!1)),()=>{E&&clearInterval(E)}},[w,s,r,i,d,T,U,D]),kt.useEffect(()=>{if(p!=="view")return;const E=L=>{L.forEach(z=>{z.isIntersecting&&!g&&(c(!0),_(!0))})},j={root:null,rootMargin:"0px",threshold:.1},O=new IntersectionObserver(E,j),P=v.current;return P&&O.observe(P),()=>{P&&O.unobserve(P)}},[p,g]);const x=p==="hover"?{onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)}:{};return $t.jsxs(QL.span,{className:R,ref:v,style:g1.wrapper,...x,...f,children:[$t.jsx("span",{style:g1.srOnly,children:h}),$t.jsx("span",{"aria-hidden":"true",children:h.split("").map((E,j)=>{const O=u.has(j)||!l||!w;return $t.jsx("span",{className:O?t:M,children:E},j)})})]})}const JL=({onLoadingComplete:s})=>{const[r,i]=kt.useState(!1),[d,T]=kt.useState(!1),[D,U]=kt.useState(!1),[t,R]=kt.useState(!1);return kt.useEffect(()=>{const M=setTimeout(()=>{i(!0)},500),p=setTimeout(()=>{T(!0)},2400),f=setTimeout(()=>{U(!0)},2900),h=setTimeout(()=>{R(!0),setTimeout(()=>s(),500)},6e3);return()=>{clearTimeout(M),clearTimeout(p),clearTimeout(f),clearTimeout(h)}},[s]),$t.jsx("div",{className:`loading-splash ${t?"fade-out":""}`,children:$t.jsx("div",{className:"loading-content",children:$t.jsxs("div",{className:"loading-text-container",children:[r&&!d&&$t.jsx(Yf,{text:"Welcome",speed:60,maxIterations:12,sequential:!0,revealDirection:"start",animateOn:"view",className:"loading-line-decrypted",parentClassName:"loading-line welcome-text",encryptedClassName:"loading-line-encrypted"}),d&&!D&&$t.jsx(Yf,{text:"Welcome",speed:40,maxIterations:8,sequential:!0,revealDirection:"end",animateOn:"view",className:"loading-line-encrypted",parentClassName:"loading-line welcome-text",encryptedClassName:"loading-line-decrypted"}),D&&$t.jsxs($t.Fragment,{children:[$t.jsx(Yf,{text:"Fabricio Mougou",speed:60,maxIterations:12,sequential:!0,revealDirection:"start",animateOn:"view",className:"loading-line-decrypted",parentClassName:"loading-line name-text",encryptedClassName:"loading-line-encrypted"}),$t.jsx(Yf,{text:"Portfolio",speed:60,maxIterations:12,sequential:!0,revealDirection:"start",animateOn:"view",className:"loading-line-decrypted",parentClassName:"loading-line portfolio-text",encryptedClassName:"loading-line-encrypted"})]})]})})})};function $L(){const[s,r]=kt.useState(!0),[i,d]=kt.useState(!1),[T,D]=kt.useState({width:window.innerWidth,height:window.innerHeight});kt.useEffect(()=>{const t=()=>{D({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const U=()=>{r(!1),setTimeout(()=>{d(!0)},500)};return $t.jsxs($t.Fragment,{children:[s&&$t.jsx(JL,{onLoadingComplete:U}),$t.jsxs("div",{className:`app-container ${s?"hidden":"fade-in"}`,children:[i&&$t.jsx("div",{className:"water-background",children:$t.jsx(pR,{numCells:800,cellSize:10,canvasWidth:T.width,canvasHeight:T.height,springForce:.15,damping:.6,waveSpread:20,minIntensity:.05,maxWaveHeight:.8,waterColor:[100,200,255],backgroundColor:0,gravity:.03,turbulence:.5,mouseInfluence:!0,clickRedistribution:!0,showMouseIndicator:!1,colorVariation:.4,hueShift:.15,saturationVariation:.25,brightnessVariation:.2,colorNoise:.18},"main-color-grid")}),$t.jsx("div",{className:"top-left",children:$t.jsx("div",{className:"component-container",children:$t.jsx(Yp,{text:"Resume",asciiFontSize:10,textFontSize:20,textColor:"#fdf9f3",planeBaseHeight:8,enableWaves:!0,waveIntensity:.7,waveSpeed:1.5})})}),$t.jsx("div",{className:"top-center",children:$t.jsx("div",{className:"component-container",children:$t.jsx(Yp,{text:"Projects",asciiFontSize:10,textFontSize:20,textColor:"#fdf9f3",planeBaseHeight:8,enableWaves:!0,waveIntensity:.7,waveSpeed:1.5})})}),$t.jsx("div",{className:"top-right",children:$t.jsx("div",{className:"component-container",children:$t.jsx(Yp,{text:"Art",asciiFontSize:10,textFontSize:20,textColor:"#fdf9f3",planeBaseHeight:8,enableWaves:!0,waveIntensity:.7,waveSpeed:1.5})})}),$t.jsx("div",{className:"middle-left"}),$t.jsx("div",{className:"middle-center"}),$t.jsx("div",{className:"middle-right"}),$t.jsx("div",{className:"bottom-left"}),$t.jsx("div",{className:"bottom-center"}),$t.jsx("div",{className:"bottom-right"})]})]})}Z2.createRoot(document.getElementById("root")).render($t.jsx(kt.StrictMode,{children:$t.jsx($L,{})}));
